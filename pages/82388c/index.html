<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>使用Flyway对数据库版本控制 | 日常bb</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/img/favicon.ico">
    <script data-ad-client="ca-pub-8621788234752924" async="true" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8621788234752924" crossorigin="anonymous"></script>
    <meta name="description" content="一些技术，一些随想，一些资源收藏。">
    <meta name="keywords" content="后端技术,rcbb,个人博客">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#7b074b">
    
    <link rel="preload" href="/assets/css/0.styles.d40c2a0a.css" as="style"><link rel="preload" href="/assets/js/app.f183bd5e.js" as="script"><link rel="preload" href="/assets/js/2.ae7bab8c.js" as="script"><link rel="preload" href="/assets/js/21.90e70f27.js" as="script"><link rel="prefetch" href="/assets/js/10.d53102f6.js"><link rel="prefetch" href="/assets/js/11.646febf5.js"><link rel="prefetch" href="/assets/js/12.81887ce3.js"><link rel="prefetch" href="/assets/js/13.621637c0.js"><link rel="prefetch" href="/assets/js/14.0150f885.js"><link rel="prefetch" href="/assets/js/15.7f18f496.js"><link rel="prefetch" href="/assets/js/16.69fb7a46.js"><link rel="prefetch" href="/assets/js/17.4dfbd4bc.js"><link rel="prefetch" href="/assets/js/18.61b5564d.js"><link rel="prefetch" href="/assets/js/19.0ee58fc9.js"><link rel="prefetch" href="/assets/js/20.487616f8.js"><link rel="prefetch" href="/assets/js/22.d6b983de.js"><link rel="prefetch" href="/assets/js/23.cc82aeb0.js"><link rel="prefetch" href="/assets/js/24.7ac2bb62.js"><link rel="prefetch" href="/assets/js/25.d13a82d3.js"><link rel="prefetch" href="/assets/js/26.e45f9ab4.js"><link rel="prefetch" href="/assets/js/27.1740771b.js"><link rel="prefetch" href="/assets/js/28.4a9f641c.js"><link rel="prefetch" href="/assets/js/29.677e0d93.js"><link rel="prefetch" href="/assets/js/3.396601ce.js"><link rel="prefetch" href="/assets/js/30.b260e854.js"><link rel="prefetch" href="/assets/js/31.18d6e525.js"><link rel="prefetch" href="/assets/js/32.6ee41b9e.js"><link rel="prefetch" href="/assets/js/33.89a8e1fd.js"><link rel="prefetch" href="/assets/js/34.3397a4d5.js"><link rel="prefetch" href="/assets/js/35.2a92ff28.js"><link rel="prefetch" href="/assets/js/36.23517e3e.js"><link rel="prefetch" href="/assets/js/37.9b7ffa67.js"><link rel="prefetch" href="/assets/js/38.6312ab8f.js"><link rel="prefetch" href="/assets/js/39.6cb32187.js"><link rel="prefetch" href="/assets/js/4.910dd52c.js"><link rel="prefetch" href="/assets/js/40.6f4d84a4.js"><link rel="prefetch" href="/assets/js/41.c1153c1c.js"><link rel="prefetch" href="/assets/js/42.f49d51d4.js"><link rel="prefetch" href="/assets/js/43.0ca861fd.js"><link rel="prefetch" href="/assets/js/44.9f5da1c3.js"><link rel="prefetch" href="/assets/js/45.75034ebd.js"><link rel="prefetch" href="/assets/js/46.9c872dd5.js"><link rel="prefetch" href="/assets/js/47.5f47c069.js"><link rel="prefetch" href="/assets/js/48.987beed0.js"><link rel="prefetch" href="/assets/js/49.a36c3d68.js"><link rel="prefetch" href="/assets/js/5.6de11f6c.js"><link rel="prefetch" href="/assets/js/50.5216ae3c.js"><link rel="prefetch" href="/assets/js/51.baa5293d.js"><link rel="prefetch" href="/assets/js/52.46ad157e.js"><link rel="prefetch" href="/assets/js/53.a9608afc.js"><link rel="prefetch" href="/assets/js/54.3615fe8a.js"><link rel="prefetch" href="/assets/js/55.dad36e14.js"><link rel="prefetch" href="/assets/js/56.83ff2c57.js"><link rel="prefetch" href="/assets/js/57.078795e4.js"><link rel="prefetch" href="/assets/js/58.bb3569c8.js"><link rel="prefetch" href="/assets/js/59.8743b223.js"><link rel="prefetch" href="/assets/js/6.df915fd0.js"><link rel="prefetch" href="/assets/js/60.dedae8eb.js"><link rel="prefetch" href="/assets/js/61.f64cb96f.js"><link rel="prefetch" href="/assets/js/7.f5cd3055.js"><link rel="prefetch" href="/assets/js/8.70d400ff.js"><link rel="prefetch" href="/assets/js/9.32d1a32c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d40c2a0a.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="日常bb" class="logo"> <span class="site-name can-hide">日常bb</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/article/" class="nav-link">文章</a></div><div class="nav-item"><a href="/idea/" class="nav-link">冥思</a></div><div class="nav-item"><a href="/other/" class="nav-link">其他</a></div><div class="nav-item"><a href="/favorites/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/rcbb-cc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://rcbb-public.oss-cn-guangzhou.aliyuncs.com/avatar.jpg"> <div class="blogger-info"><h3>日常bb</h3> <span>想起来全是问题，做起来才有答案。</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/article/" class="nav-link">文章</a></div><div class="nav-item"><a href="/idea/" class="nav-link">冥思</a></div><div class="nav-item"><a href="/other/" class="nav-link">其他</a></div><div class="nav-item"><a href="/favorites/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/rcbb-cc" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Redis</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Spring</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>基础使用</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/f4535c/" class="sidebar-link">SpringBoot集成ShardingSphere4.1.1(自定义分库、分表算法)</a></li><li><a href="/pages/82388c/" aria-current="page" class="active sidebar-link">使用Flyway对数据库版本控制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/82388c/#概念" class="sidebar-link">概念</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/82388c/#什么是flyway" class="sidebar-link">什么是Flyway</a></li><li class="sidebar-sub-header level3"><a href="/pages/82388c/#为什么要用flyway" class="sidebar-link">为什么要用Flyway</a></li><li class="sidebar-sub-header level3"><a href="/pages/82388c/#flyway的特点" class="sidebar-link">Flyway的特点</a></li><li class="sidebar-sub-header level3"><a href="/pages/82388c/#flyway的工作机制" class="sidebar-link">Flyway的工作机制</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/82388c/#最佳实践" class="sidebar-link">最佳实践</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/82388c/#仅需被执行一次的" class="sidebar-link">仅需被执行一次的</a></li><li class="sidebar-sub-header level3"><a href="/pages/82388c/#可重复执行的脚本" class="sidebar-link">可重复执行的脚本</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/82388c/#错误验证" class="sidebar-link">错误验证</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/82388c/#刻意修改仅需被执行一次的脚本" class="sidebar-link">刻意修改仅需被执行一次的脚本</a></li><li class="sidebar-sub-header level3"><a href="/pages/82388c/#可重复执行的脚本若存在错误" class="sidebar-link">可重复执行的脚本若存在错误</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/82388c/#配置" class="sidebar-link">配置</a></li><li class="sidebar-sub-header level2"><a href="/pages/82388c/#总结" class="sidebar-link">总结</a></li><li class="sidebar-sub-header level2"><a href="/pages/82388c/#参考" class="sidebar-link">参考</a></li></ul></li><li><a href="/pages/d57d55/" class="sidebar-link">行为验证码(AJ-Captcha快速入门)</a></li><li><a href="/pages/745182/" class="sidebar-link">SpringBoot二维码生成(复制即用)</a></li><li><a href="/pages/cbaa02/" class="sidebar-link">SpringBoot使用Hibernate Validator（后端参数校验）</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Spring Security</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>收藏</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>工具</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>概念</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>容器</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>实战</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>AI</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端</span> <span class="arrow right"></span></p> <!----></section></li></ul> <div class="sidebar-slot sidebar-slot-bottom"><ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-8621788234752924"
     data-ad-slot="8498052873"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script></div></aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/article/#文章" data-v-06225672>文章</a></li><li data-v-06225672><a href="/article/#Spring" data-v-06225672>Spring</a></li><li data-v-06225672><a href="/article/#基础使用" data-v-06225672>基础使用</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://rcbb.cc/" target="_blank" title="作者" class="beLink" data-v-06225672>rcbb</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-08-05</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">使用Flyway对数据库版本控制<!----></h1>  <div class="theme-vdoing-content content__default"><h2 id="概念"><a href="#概念" class="header-anchor">#</a> 概念</h2> <h3 id="什么是flyway"><a href="#什么是flyway" class="header-anchor">#</a> 什么是Flyway</h3> <p>Flyway 是一个能对数据库变更做版本控制的工具。</p> <h3 id="为什么要用flyway"><a href="#为什么要用flyway" class="header-anchor">#</a> 为什么要用Flyway</h3> <p>在多人开发的项目中，我们都习惯了使用 SVN 或者 Git 来对代码做版本控制，主要的目的就是为了解决多人开发代码冲突和版本回退的问题。</p> <p>其实，数据库的变更也需要版本控制，在日常开发中，我们经常会遇到下面的问题：</p> <ol><li>自己写的 SQL 忘了在所有环境执行；</li> <li>别人写的 SQL 我们不能确定是否都在所有环境执行过了；</li> <li>有人修改了已经执行过的 SQL，期望再次执行；</li> <li>需要新增环境做数据迁移；</li> <li>每次发版需要手动控制先发 DB 版本，再发布应用版本；</li> <li>其它场景...</li></ol> <p>有了Flyway，这些问题都能得到很好的解决。</p> <h3 id="flyway的特点"><a href="#flyway的特点" class="header-anchor">#</a> Flyway的特点</h3> <ul><li>简单。非常容易安装和学习，同时迁移的方式也很容易被开发者接受。</li> <li>转移。Flyway 专注于搞数据库迁移、版本控制而并没有其它副作用。</li> <li>强大。专为连续交付而设计。让Flyway在应用程序启动时迁移数据库。</li></ul> <h3 id="flyway的工作机制"><a href="#flyway的工作机制" class="header-anchor">#</a> Flyway的工作机制</h3> <p>Flyway 需要在 DB 中先创建一个 metadata 表 (缺省表名为 <code>flyway_schema_history</code>), 在该表中保存着每次 migration （迁移）的记录, 记录包含 migration 脚本的版本号和 SQL 脚本的 checksum 值。</p> <p>Flyway 扫描文件系统或应用程序的类路径读取 DDL 和 DML 以进行迁移。<br>
根据metadata 表进行检查迁移。<br> <strong>如果脚本声明的版本号小于或等于标记为当前版本的版本号之一，将忽略它们</strong>。<br>
其余迁移是待处理迁移：可用，但未应用。最后按版本号对它们进行排序并按顺序执行 并将执行结果写入 metadata 表。</p> <h2 id="最佳实践"><a href="#最佳实践" class="header-anchor">#</a> 最佳实践</h2> <p>通过 <a href="https://start.aliyun.com/bootstrap.html" target="_blank" rel="noopener noreferrer">Aliyun Java Initializr<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 创建项目</p> <p><img src="https://rcbb-blog.oss-cn-guangzhou.aliyuncs.com/2022/04/20220416100653-89c795.png?x-oss-process=style/yuantu_shuiyin" alt="依赖"></p> <p>我使用的是 PostgreSQL，创建一个库。</p> <blockquote><p>create database test_flyway;</p></blockquote> <p>在<code>src/main/resources</code>目录下面新建<code>db.migration</code>文件夹，默认情况下，该目录下的.sql 文件就算是需要被 flyway 做版本控制的数据库 SQL 语句。</p> <p>但是此处的 SQL 语句命名需要遵从一定的规范，否则运行的时候 flyway 会报错。命名规则主要有两种：</p> <ul><li><p><strong>仅需被执行一次的 SQL</strong> 。文件命名以大写<code>V</code>字开头，后面可跟上<code>0-9</code>数字，数字之间可用<code>.</code>或<code>_</code>分隔开，然后再以<strong>两个下划线</strong>分隔，后面为文件名，最后以<code>.sql</code>结尾。例：<code>V1.0.0__init.sql</code></p></li> <li><p><strong>可重复运行的SQL</strong>。只要脚本内容发生了变化，项目启动时脚本就会被重新执行。文件名以大写<code>R</code>字开头，后面再以两个下划线分隔后面为文件名，最后以<code>.sql</code>结尾。</p></li></ul> <p>项目配置。</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> flyway<span class="token punctuation">-</span>test
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> org.postgresql.Driver
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>postgresql<span class="token punctuation">:</span>//192.168.1.56<span class="token punctuation">:</span>5432/test_flyway<span class="token punctuation">?</span><span class="token important">&amp;ssl=false&amp;stringtype=unspecified</span>
    <span class="token key atrule">username</span><span class="token punctuation">:</span> postgres
    <span class="token key atrule">password</span><span class="token punctuation">:</span> postgres
<span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>初次启动，报错。因为无任何内容。</p> <p><img src="https://rcbb-blog.oss-cn-guangzhou.aliyuncs.com/2022/04/20220416102645-c2a0f3.png?x-oss-process=style/yuantu_shuiyin" alt="初次启动，报错"></p> <h3 id="仅需被执行一次的"><a href="#仅需被执行一次的" class="header-anchor">#</a> 仅需被执行一次的</h3> <p>文件命名以大写<code>V</code>字开头，后面可跟上<code>0-9</code>数字，数字之间可用<code>.</code>或<code>_</code>分隔开，然后再以<strong>两个下划线</strong>分隔，后面为文件名，最后以<code>.sql</code>结尾。例：<code>V1.0.0__init.sql</code></p> <p>创建第一个脚本：<code>V1.0.0_init.sql</code></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> tb_user
<span class="token punctuation">(</span>
    id          bigserial <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
    username    <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    nickname    <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    age         <span class="token keyword">smallint</span><span class="token punctuation">,</span>
    create_time <span class="token keyword">bigint</span><span class="token punctuation">,</span>
    update_time <span class="token keyword">bigint</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">comment</span> <span class="token keyword">on</span> <span class="token keyword">table</span> tb_user <span class="token operator">is</span> <span class="token string">'用户表'</span><span class="token punctuation">;</span>
<span class="token keyword">comment</span> <span class="token keyword">on</span> <span class="token keyword">column</span> tb_user<span class="token punctuation">.</span>id <span class="token operator">is</span> <span class="token string">'用户ID'</span><span class="token punctuation">;</span>
<span class="token keyword">comment</span> <span class="token keyword">on</span> <span class="token keyword">column</span> tb_user<span class="token punctuation">.</span>username <span class="token operator">is</span> <span class="token string">'用户名'</span><span class="token punctuation">;</span>
<span class="token keyword">comment</span> <span class="token keyword">on</span> <span class="token keyword">column</span> tb_user<span class="token punctuation">.</span>nickname <span class="token operator">is</span> <span class="token string">'用户昵称'</span><span class="token punctuation">;</span>
<span class="token keyword">comment</span> <span class="token keyword">on</span> <span class="token keyword">column</span> tb_user<span class="token punctuation">.</span>age <span class="token operator">is</span> <span class="token string">'年龄'</span><span class="token punctuation">;</span>
<span class="token keyword">comment</span> <span class="token keyword">on</span> <span class="token keyword">column</span> tb_user<span class="token punctuation">.</span>create_time <span class="token operator">is</span> <span class="token string">'创建时间'</span><span class="token punctuation">;</span>
<span class="token keyword">comment</span> <span class="token keyword">on</span> <span class="token keyword">column</span> tb_user<span class="token punctuation">.</span>update_time <span class="token operator">is</span> <span class="token string">'更新时间'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><img src="https://rcbb-blog.oss-cn-guangzhou.aliyuncs.com/2022/04/20220426145200-3f8d93.png?x-oss-process=style/yuantu_shuiyin" alt="目录结构"></p> <p>我在 <code>db.migration</code> 下还创建了一个 1.0.0 的文件夹，这个不会影响 flyway 对 sql 的识别，可以自行取名和分类。</p> <p>运行成功。</p> <p><img src="https://rcbb-blog.oss-cn-guangzhou.aliyuncs.com/2022/04/20220426145647-1671cc.png?x-oss-process=style/yuantu_shuiyin" alt="运行成功"></p> <p>创建了<code>flyway_schema_history</code>表，并成功执行一个脚本。</p> <p><img src="https://rcbb-blog.oss-cn-guangzhou.aliyuncs.com/2022/04/20220426145954-9e8553.png?x-oss-process=style/yuantu_shuiyin" alt="数据库内容"></p> <p><code>flyway_schema_history</code>表中记录的是脚本信息和脚本执行状态。</p> <p><img src="https://rcbb-blog.oss-cn-guangzhou.aliyuncs.com/2022/04/20220426145919-9db8f9.png?x-oss-process=style/yuantu_shuiyin" alt="flyway_schema_history"></p> <p>有了这条记录，下次再启动项目，<code>1.0.0/V1.0.0__init.sql</code> 这个脚本文件就不会执行了，因为系统知道这个脚本已经执行过了。<br>
如果你还想让 <code>1.0.0/V1.0.0__init.sql</code>脚本再执行一遍，需要手动删除<code>flyway_schema_history</code>  表中的对应记录，那么项目启动时，这个脚本就会被执行了。</p> <h3 id="可重复执行的脚本"><a href="#可重复执行的脚本" class="header-anchor">#</a> 可重复执行的脚本</h3> <p>只要脚本内容发生了变化，项目启动时脚本就会被重新执行。文件名以大写<code>R</code>字开头，后面再以两个下划线分隔后面为文件名，最后以<code>.sql</code>结尾。</p> <p>接着在 <code>db/migration/1.0.0/</code>下创建<code>R__init_user.sql</code></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> tb_user<span class="token punctuation">(</span>username<span class="token punctuation">,</span> nickname<span class="token punctuation">,</span> age<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'admin'</span><span class="token punctuation">,</span><span class="token string">'admin'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> tb_user<span class="token punctuation">(</span>username<span class="token punctuation">,</span> nickname<span class="token punctuation">,</span> age<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'sys'</span><span class="token punctuation">,</span><span class="token string">'sys'</span><span class="token punctuation">,</span><span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>重新启动项目，运行成功。<br>
数据库<code>tb_user</code>表中新增两条数据。<br> <code>flyway_schema_history</code>新增了一条记录，但 version 字段上为 null。</p> <p><img src="https://rcbb-blog.oss-cn-guangzhou.aliyuncs.com/2022/04/20220426151708-8b7aab.png?x-oss-process=style/yuantu_shuiyin" alt="flyway_schema_history"></p> <p>重新运行程序第二遍，并未发生变化。</p> <p>重新修改<code>R__init_user.sql</code> 脚本。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> tb_user<span class="token punctuation">(</span>username<span class="token punctuation">,</span> nickname<span class="token punctuation">,</span> age<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">,</span><span class="token string">'test'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>重新运行程序，脚本执行成功，数据变更成功。</p> <p><img src="https://rcbb-blog.oss-cn-guangzhou.aliyuncs.com/2022/04/20220426152833-f7de31.png?x-oss-process=style/yuantu_shuiyin" alt="tb_user"></p> <h2 id="错误验证"><a href="#错误验证" class="header-anchor">#</a> 错误验证</h2> <h3 id="刻意修改仅需被执行一次的脚本"><a href="#刻意修改仅需被执行一次的脚本" class="header-anchor">#</a> 刻意修改仅需被执行一次的脚本</h3> <p>当直接在<code>V1.0.0__init.sql</code>脚本上进行修改时。重新启动程序会进行报错。</p> <p><img src="https://rcbb-blog.oss-cn-guangzhou.aliyuncs.com/2022/04/20220426153132-e37ecd.png?x-oss-process=style/yuantu_shuiyin" alt="报错"></p> <p>原因：会检查数据库中对应脚本的<code>checksum</code>字段，发现不对应则说明脚本进行了修改，所以阻止运行。</p> <p>将修改的内容还原，则可重新运行。<br>
或者删除<code>flyway_schema_history</code>表中<code>V1.0.0__init.sql</code>脚本对应的记录，则可重新执行<code>V1.0.0__init.sql</code>脚本。</p> <h3 id="可重复执行的脚本若存在错误"><a href="#可重复执行的脚本若存在错误" class="header-anchor">#</a> 可重复执行的脚本若存在错误</h3> <p>刻意在<code>R__init_user.sql</code>脚本中添加一条错误的脚本，让其<code>id</code>与库中已存在的数据冲突。</p> <p>顺便验证数据是否会回滚。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> tb_user<span class="token punctuation">(</span>username<span class="token punctuation">,</span> nickname<span class="token punctuation">,</span> age<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'test1'</span><span class="token punctuation">,</span><span class="token string">'test1'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> tb_user<span class="token punctuation">(</span>username<span class="token punctuation">,</span> nickname<span class="token punctuation">,</span> age<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'test2'</span><span class="token punctuation">,</span><span class="token string">'test2'</span><span class="token punctuation">,</span><span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> tb_user<span class="token punctuation">(</span>id<span class="token punctuation">,</span> username<span class="token punctuation">,</span> nickname<span class="token punctuation">,</span> age<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'test2'</span><span class="token punctuation">,</span><span class="token string">'test2'</span><span class="token punctuation">,</span><span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>从报错信息中能很明显的看出来问题，直接给出了具体的语句和错误原因。<br>
然后上面的语句也未成功添加。</p> <p><img src="https://rcbb-blog.oss-cn-guangzhou.aliyuncs.com/2022/04/20220426154032-2e57e6.png?x-oss-process=style/yuantu_shuiyin" alt="报错信息"></p> <h2 id="配置"><a href="#配置" class="header-anchor">#</a> 配置</h2> <ol><li>生产务必禁 spring.flyway.cleanDisabled=false 。</li> <li>spring.flyway.outOfOrder 取值 生产上使用 true，开发中使用 false。</li> <li>多个系统公用一个 数据库 schema 时配置spring.flyway.table 为不同的系统设置不同的 metadata 表名而不使用缺省值 <code>flyway_schema_history</code> 。</li> <li>开发版本号尽量根据团队来进行多层次的命名避免混乱。比如 <code>V1.0.1__ProjectName_{feat|fix}_Description.sql</code> ，这种命名同时也可以获取更多脚本的开发者和相关功能的信息。</li></ol> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment"># flyway 配置</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">flyway</span><span class="token punctuation">:</span>
    <span class="token comment"># 启用或禁用 flyway</span>
    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token comment"># flyway 的 clean 命令会删除指定 schema 下的所有 table, 生产务必禁掉。这个默认值是 false 理论上作为默认配置是不科学的。</span>
    <span class="token key atrule">clean-disabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token comment"># SQL 脚本的目录,多个路径使用逗号分隔 默认值 classpath:db/migration</span>
    <span class="token key atrule">locations</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>db/migration
    <span class="token comment">#  metadata 版本控制信息表 默认 flyway_schema_history</span>
    <span class="token key atrule">table</span><span class="token punctuation">:</span> flyway_schema_history
    <span class="token comment"># 如果没有 flyway_schema_history 这个 metadata 表， 在执行 flyway migrate 命令之前, 必须先执行 flyway baseline 命令</span>
    <span class="token comment"># 设置为 true 后 flyway 将在需要 baseline 的时候, 自动执行一次 baseline。</span>
    <span class="token key atrule">baseline-on-migrate</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token comment"># 指定 baseline 的版本号,默认值为 1, 低于该版本号的 SQL 文件, migrate 时会被忽略</span>
    <span class="token key atrule">baseline-version</span><span class="token punctuation">:</span> <span class="token number">1</span>
    <span class="token comment"># 字符编码 默认 UTF-8</span>
    <span class="token key atrule">encoding</span><span class="token punctuation">:</span> UTF<span class="token punctuation">-</span><span class="token number">8</span>
    <span class="token comment"># 是否允许不按顺序迁移 开发建议 false  生产建议 ture</span>
    <span class="token key atrule">out-of-order</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token comment"># 需要 flyway 管控的 schema list,这里我们配置为flyway  缺省的话, 使用spring.datasource.url 配置的那个 schema,</span>
    <span class="token comment"># 可以指定多个schema, 但仅会在第一个schema下建立 metadata 表, 也仅在第一个schema应用migration sql 脚本.</span>
    <span class="token comment"># 但flyway Clean 命令会依次在这些schema下都执行一遍. 所以 确保生产 spring.flyway.clean-disabled 为 true</span>
    <span class="token key atrule">schemas</span><span class="token punctuation">:</span> flyway
    <span class="token comment"># 执行迁移时是否自动调用验证   当你的 版本不符合逻辑 比如 你先执行了 DML 而没有 对应的DDL 会抛出异常</span>
    <span class="token key atrule">validate-on-migrate</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>配置全路径<code>org.springframework.boot.autoconfigure.flyway.FlywayProperties</code></p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code>flyway.baseline<span class="token punctuation">-</span>description对执行迁移时基准版本的描述.
flyway.baseline<span class="token punctuation">-</span>on<span class="token punctuation">-</span>migrate当迁移时发现目标schema非空，而且带有没有元数据的表时，是否自动执行基准迁移，默认false.
flyway.baseline<span class="token punctuation">-</span>version开始执行基准迁移时对现有的schema的版本打标签，默认值为1.
flyway.check<span class="token punctuation">-</span>location检查迁移脚本的位置是否存在，默认false.
flyway.clean<span class="token punctuation">-</span>on<span class="token punctuation">-</span>validation<span class="token punctuation">-</span>error当发现校验错误时是否自动调用clean，默认false.
flyway.enabled是否开启flywary，默认true.
flyway.encoding设置迁移时的编码，默认UTF<span class="token punctuation">-</span><span class="token number">8.</span>
flyway.ignore<span class="token punctuation">-</span>failed<span class="token punctuation">-</span>future<span class="token punctuation">-</span>migration当读取元数据表时是否忽略错误的迁移，默认false.
flyway.init<span class="token punctuation">-</span>sqls当初始化好连接时要执行的SQL.
flyway.locations迁移脚本的位置，默认db/migration.
flyway.out<span class="token punctuation">-</span>of<span class="token punctuation">-</span>order是否允许无序的迁移，默认false.
flyway.password目标数据库的密码.
flyway.placeholder<span class="token punctuation">-</span>prefix设置每个placeholder的前缀，默认$<span class="token punctuation">{</span>.
flyway.placeholder<span class="token punctuation">-</span>replacementplaceholders是否要被替换，默认true.
flyway.placeholder<span class="token punctuation">-</span>suffix设置每个placeholder的后缀，默认<span class="token punctuation">}</span>.
flyway.placeholders.<span class="token punctuation">[</span>placeholder name<span class="token punctuation">]</span>设置placeholder的value
flyway.schemas设定需要flywary迁移的schema，大小写敏感，默认为连接默认的schema.
flyway.sql<span class="token punctuation">-</span>migration<span class="token punctuation">-</span>prefix迁移文件的前缀，默认为V.
flyway.sql<span class="token punctuation">-</span>migration<span class="token punctuation">-</span>separator迁移脚本的文件名分隔符，默认__
flyway.sql<span class="token punctuation">-</span>migration<span class="token punctuation">-</span>suffix迁移脚本的后缀，默认为.sql
flyway.tableflyway使用的元数据表名，默认为schema_version
flyway.target迁移时使用的目标版本，默认为latest version
flyway.url迁移时使用的JDBC URL，如果没有指定的话，将使用配置的主数据源
flyway.user迁移数据库的用户名
flyway.validate<span class="token punctuation">-</span>on<span class="token punctuation">-</span>migrate迁移时是否校验，默认为true.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p><code>V</code>开头的脚本，内容不变运行，语句并不会执行，内容修改再运行，程序启动失败！</p> <p><code>R</code>开头的脚本，内容不变运行，语句并不会执行，内容修改过再运行，<strong>会将文件中的所有语句执行</strong>！</p> <p>每次程序启动会检验目前项目中的 sql 文件名称和文件夹名是否与数据库中存储的对应。<br>
如果不对应则抛出相应的错误，程序启动失败。</p> <p><code>R</code>开头的脚本，更像是<strong>当前版本的一个临时补充的区域，为了及时修改当下紧急更新的内容</strong>。</p> <p>源代码地址：</p> <blockquote><p>https://github.com/rcbb-cc/fast-start-guide</p></blockquote> <h2 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h2> <p><a href="https://blog.csdn.net/weixin_42300167/article/details/112417080" target="_blank" rel="noopener noreferrer">flyway常用配置_Spring Boot 2 实战：使用 Flyway 管理你数据库的版本变更<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div></div> <div class="page-slot page-slot-bottom"></br><ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="auto"
     data-ad-client="ca-pub-8621788234752924"
     data-ad-slot="7043271566"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script></div> <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=flyway" title="标签">#flyway</a><a href="/tags/?tag=%E6%95%B0%E6%8D%AE%E5%BA%93%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6" title="标签">#数据库版本控制</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">10/7/2022</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/f4535c/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">SpringBoot集成ShardingSphere4.1.1(自定义分库、分表算法)</div></a> <a href="/pages/d57d55/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">行为验证码(AJ-Captcha快速入门)</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/f4535c/" class="prev">SpringBoot集成ShardingSphere4.1.1(自定义分库、分表算法)</a></span> <span class="next"><a href="/pages/d57d55/">行为验证码(AJ-Captcha快速入门)</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/82530f/"><div>
            ChatGPT Plus订阅指南
            <!----></div></a> <span class="date">02-24</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/8b23f4/"><div>
            使用nvm控制node版本
            <!----></div></a> <span class="date">01-26</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/0e4b5e/"><div>
            git clone 报错：Filename too long
            <!----></div></a> <span class="date">01-26</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="https://github.com/rcbb-cc" title="Star我" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/playlist?id=5161366267" title="有品位的歌单" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2021-2024
    <span>日常bb | <a href="https://beian.miit.gov.cn/" target="_blank" style="font-weight:normal">鄂ICP备17023998号</a> </span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><!----><div></div></div></div>
    <script src="/assets/js/app.f183bd5e.js" defer></script><script src="/assets/js/2.ae7bab8c.js" defer></script><script src="/assets/js/21.90e70f27.js" defer></script>
  </body>
</html>
