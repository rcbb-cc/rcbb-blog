(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[]]);!function(n){function e(e){for(var r,a,s=e[0],c=e[1],l=e[2],d=0,u=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&u.push(i[a][0]),i[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(n[r]=c[r]);for(p&&p(e);u.length;)u.shift()();return o.push.apply(o,l||[]),t()}function t(){for(var n,e=0;e<o.length;e++){for(var t=o[e],r=!0,s=1;s<t.length;s++){var c=t[s];0!==i[c]&&(r=!1)}r&&(o.splice(e--,1),n=a(a.s=t[0]))}return n}var r={},i={1:0},o=[];function a(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.e=function(n){var e=[],t=i[n];if(0!==t)if(t)e.push(t[2]);else{var r=new Promise((function(e,r){t=i[n]=[e,r]}));e.push(t[2]=r);var o,s=document.createElement("script");s.charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.src=function(n){return a.p+"assets/js/"+({}[n]||n)+"."+{2:"ae7bab8c",3:"396601ce",4:"910dd52c",5:"6de11f6c",6:"df915fd0",7:"f5cd3055",8:"70d400ff",9:"32d1a32c",10:"d53102f6",11:"646febf5",12:"81887ce3",13:"621637c0",14:"0150f885",15:"7f18f496",16:"69fb7a46",17:"4dfbd4bc",18:"61b5564d",19:"0ee58fc9",20:"487616f8",21:"90e70f27",22:"d6b983de",23:"cc82aeb0",24:"7ac2bb62",25:"d13a82d3",26:"e45f9ab4",27:"1740771b",28:"4a9f641c",29:"677e0d93",30:"b260e854",31:"18d6e525",32:"6ee41b9e",33:"89a8e1fd",34:"3397a4d5",35:"2a92ff28",36:"23517e3e",37:"9b7ffa67",38:"6312ab8f",39:"6cb32187",40:"6f4d84a4",41:"c1153c1c",42:"f49d51d4",43:"0ca861fd",44:"9f5da1c3",45:"75034ebd",46:"9c872dd5",47:"5f47c069",48:"987beed0",49:"a36c3d68",50:"5216ae3c",51:"baa5293d",52:"46ad157e",53:"a9608afc",54:"3615fe8a",55:"dad36e14",56:"83ff2c57",57:"078795e4",58:"bb3569c8",59:"8743b223",60:"dedae8eb",61:"f64cb96f"}[n]+".js"}(n);var c=new Error;o=function(e){s.onerror=s.onload=null,clearTimeout(l);var t=i[n];if(0!==t){if(t){var r=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;c.message="Loading chunk "+n+" failed.\n("+r+": "+o+")",c.name="ChunkLoadError",c.type=r,c.request=o,t[1](c)}i[n]=void 0}};var l=setTimeout((function(){o({type:"timeout",target:s})}),12e4);s.onerror=s.onload=o,document.head.appendChild(s)}return Promise.all(e)},a.m=n,a.c=r,a.d=function(n,e,t){a.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:t})},a.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},a.t=function(n,e){if(1&e&&(n=a(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(a.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var r in n)a.d(t,r,function(e){return n[e]}.bind(null,r));return t},a.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return a.d(e,"a",e),e},a.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},a.p="/",a.oe=function(n){throw console.error(n),n};var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var p=c;o.push([107,0]),t()}([function(n,e,t){"use strict";var r=function(n){return n&&n.Math===Math&&n};n.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof global&&global)||r("object"==typeof this&&this)||function(){return this}()||Function("return this")()},function(n,e,t){"use strict";function r(n,e,t,r,i,o,a,s){var c,l="function"==typeof n?n.options:n;if(e&&(l.render=e,l.staticRenderFns=t,l._compiled=!0),r&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),a?(c=function(n){(n=n||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(n=__VUE_SSR_CONTEXT__),i&&i.call(this,n),n&&n._registeredComponents&&n._registeredComponents.add(a)},l._ssrRegister=c):i&&(c=s?function(){i.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var p=l.render;l.render=function(n,e){return c.call(e),p(n,e)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:n,options:l}}t.d(e,"a",(function(){return r}))},function(n,e,t){"use strict";var r="object"==typeof document&&document.all;n.exports=void 0===r&&void 0!==r?function(n){return"function"==typeof n||n===r}:function(n){return"function"==typeof n}},function(n,e,t){"use strict";var r=t(29),i=Function.prototype,o=i.call,a=r&&i.bind.bind(o,o);n.exports=r?a:function(n){return function(){return o.apply(n,arguments)}}},function(n,e,t){"use strict";n.exports=function(n){try{return!!n()}catch(n){return!0}}},function(n,e,t){"use strict";var r=t(4);n.exports=!r((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(n,e){var t=Array.isArray;n.exports=t},function(n,e,t){"use strict";var r=t(3),i=t(33),o=r({}.hasOwnProperty);n.exports=Object.hasOwn||function(n,e){return o(i(n),e)}},function(n,e,t){var r=t(69),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();n.exports=o},function(n,e,t){"use strict";var r=t(2);n.exports=function(n){return"object"==typeof n?null!==n:r(n)}},function(n,e,t){var r=t(166),i=t(169);n.exports=function(n,e){var t=i(n,e);return r(t)?t:void 0}},function(n,e,t){"use strict";t.d(e,"e",(function(){return r})),t.d(e,"b",(function(){return o})),t.d(e,"j",(function(){return a})),t.d(e,"g",(function(){return c})),t.d(e,"h",(function(){return l})),t.d(e,"i",(function(){return p})),t.d(e,"c",(function(){return d})),t.d(e,"f",(function(){return u})),t.d(e,"l",(function(){return h})),t.d(e,"m",(function(){return g})),t.d(e,"d",(function(){return f})),t.d(e,"k",(function(){return v})),t.d(e,"n",(function(){return y})),t.d(e,"a",(function(){return k}));t(17);const r=/#.*$/,i=/\.(md|html)$/,o=/\/$/,a=/^[a-z]+:/i;function s(n){return decodeURI(n).replace(r,"").replace(i,"")}function c(n){return a.test(n)}function l(n){return/^mailto:/.test(n)}function p(n){return/^tel:/.test(n)}function d(n){if(c(n))return n;if(!n)return"404";const e=n.match(r),t=e?e[0]:"",i=s(n);return o.test(i)?n:i+".html"+t}function u(n,e){const t=n.hash,i=function(n){const e=n&&n.match(r);if(e)return e[0]}(e);if(i&&t!==i)return!1;return s(n.path)===s(e)}function h(n,e,t){if(c(e))return{type:"external",path:e};t&&(e=function(n,e,t){const r=n.charAt(0);if("/"===r)return n;if("?"===r||"#"===r)return e+n;const i=e.split("/");t&&i[i.length-1]||i.pop();const o=n.replace(/^\//,"").split("/");for(let n=0;n<o.length;n++){const e=o[n];".."===e?i.pop():"."!==e&&i.push(e)}""!==i[0]&&i.unshift("");return i.join("/")}(e,t));const r=s(e);for(let e=0;e<n.length;e++)if(s(n[e].regularPath)===r)return Object.assign({},n[e],{type:"page",path:d(n[e].path)});return console.error(`[vuepress] No matching page found for sidebar item "${e}"`),{}}function g(n,e,t,r){const{pages:i,themeConfig:o}=t,a=r&&o.locales&&o.locales[r]||o;if("auto"===(n.frontmatter.sidebar||a.sidebar||o.sidebar))return m(n);const s=a.sidebar||o.sidebar;if(s){const{base:t,config:r}=function(n,e){if(Array.isArray(e))return{base:"/",config:e};for(const r in e)if(0===(t=n,/(\.html|\/)$/.test(t)?t:t+"/").indexOf(encodeURI(r)))return{base:r,config:e[r]};var t;return{}}(e,s);return"auto"===r?m(n):r?r.map(n=>function n(e,t,r,i=1){if("string"==typeof e)return h(t,e,r);if(Array.isArray(e))return Object.assign(h(t,e[0],r),{title:e[1]});{i>3&&console.error("[vuepress] detected a too deep nested sidebar group.");const o=e.children||[];return 0===o.length&&e.path?Object.assign(h(t,e.path,r),{title:e.title}):{type:"group",path:e.path,title:e.title,sidebarDepth:e.sidebarDepth,initialOpenGroupIndex:e.initialOpenGroupIndex,children:o.map(e=>n(e,t,r,i+1)),collapsable:!1!==e.collapsable}}}(n,i,t)):[]}return[]}function m(n){const e=f(n.headers||[]);return[{type:"group",collapsable:!1,title:n.title,path:null,children:e.map(e=>({type:"auto",title:e.title,basePath:n.path,path:n.path+"#"+e.slug,children:e.children||[]}))}]}function f(n){let e;return(n=n.map(n=>Object.assign({},n))).forEach(n=>{2===n.level?e=n:e&&(e.children||(e.children=[])).push(n)}),n.filter(n=>2===n.level)}function v(n){return Object.assign(n,{type:n.items&&n.items.length?"links":"link"})}function y(n){return Object.prototype.toString.call(n).match(/\[object (.*?)\]/)[1].toLowerCase()}function b(n){let e=n.frontmatter.date||n.lastUpdated||new Date,t=new Date(e);return"Invalid Date"==t&&e&&(t=new Date(e.replace(/-/g,"/"))),t.getTime()}function k(n,e){return b(e)-b(n)}},function(n,e){n.exports=function(n){return null!=n&&"object"==typeof n}},function(n,e,t){"use strict";var r=t(5),i=t(64),o=t(102),a=t(28),s=t(55),c=TypeError,l=Object.defineProperty,p=Object.getOwnPropertyDescriptor;e.f=r?o?function(n,e,t){if(a(n),e=s(e),a(t),"function"==typeof n&&"prototype"===e&&"value"in t&&"writable"in t&&!t.writable){var r=p(n,e);r&&r.writable&&(n[e]=t.value,t={configurable:"configurable"in t?t.configurable:r.configurable,enumerable:"enumerable"in t?t.enumerable:r.enumerable,writable:!1})}return l(n,e,t)}:l:function(n,e,t){if(a(n),e=s(e),a(t),i)try{return l(n,e,t)}catch(n){}if("get"in t||"set"in t)throw new c("Accessors not supported");return"value"in t&&(n[e]=t.value),n}},function(n,e,t){var r=t(16),i=t(151),o=t(152),a=r?r.toStringTag:void 0;n.exports=function(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":a&&a in Object(n)?i(n):o(n)}},function(n,e,t){"use strict";var r=t(5),i=t(13),o=t(36);n.exports=r?function(n,e,t){return i.f(n,e,o(1,t))}:function(n,e,t){return n[e]=t,n}},function(n,e,t){var r=t(8).Symbol;n.exports=r},function(n,e,t){"use strict";var r=t(18),i=t(33),o=t(34),a=t(145),s=t(147);r({target:"Array",proto:!0,arity:1,forced:t(4)((function(){return 4294967297!==[].push.call({length:4294967296},1)}))||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(n){return n instanceof TypeError}}()},{push:function(n){var e=i(this),t=o(e),r=arguments.length;s(t+r);for(var c=0;c<r;c++)e[t]=arguments[c],t++;return a(e,t),t}})},function(n,e,t){"use strict";var r=t(0),i=t(52).f,o=t(15),a=t(98),s=t(38),c=t(65),l=t(126);n.exports=function(n,e){var t,p,d,u,h,g=n.target,m=n.global,f=n.stat;if(t=m?r:f?r[g]||s(g,{}):r[g]&&r[g].prototype)for(p in e){if(u=e[p],d=n.dontCallGetSet?(h=i(t,p))&&h.value:t[p],!l(m?p:g+(f?".":"#")+p,n.forced)&&void 0!==d){if(typeof u==typeof d)continue;c(u,d)}(n.sham||d&&d.sham)&&o(u,"sham",!0),a(t,p,u,n)}}},function(n,e,t){"use strict";var r=t(3),i=r({}.toString),o=r("".slice);n.exports=function(n){return o(i(n),8,-1)}},function(n,e,t){"use strict";var r=t(0),i=t(61),o=t(7),a=t(63),s=t(59),c=t(58),l=r.Symbol,p=i("wks"),d=c?l.for||l:l&&l.withoutSetter||a;n.exports=function(n){return o(p,n)||(p[n]=s&&o(l,n)?l[n]:d("Symbol."+n)),p[n]}},function(n,e,t){var r=t(156),i=t(157),o=t(158),a=t(159),s=t(160);function c(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=a,c.prototype.set=s,n.exports=c},function(n,e,t){var r=t(71);n.exports=function(n,e){for(var t=n.length;t--;)if(r(n[t][0],e))return t;return-1}},function(n,e,t){var r=t(10)(Object,"create");n.exports=r},function(n,e,t){var r=t(178);n.exports=function(n,e){var t=n.__data__;return r(e)?t["string"==typeof e?"string":"hash"]:t.map}},function(n,e,t){var r=t(46);n.exports=function(n){if("string"==typeof n||r(n))return n;var e=n+"";return"0"==e&&1/n==-1/0?"-0":e}},function(n,e,t){var r,i;
/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */void 0===(i="function"==typeof(r=function(){var n,e,t={version:"0.2.0"},r=t.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function i(n,e,t){return n<e?e:n>t?t:n}function o(n){return 100*(-1+n)}t.configure=function(n){var e,t;for(e in n)void 0!==(t=n[e])&&n.hasOwnProperty(e)&&(r[e]=t);return this},t.status=null,t.set=function(n){var e=t.isStarted();n=i(n,r.minimum,1),t.status=1===n?null:n;var c=t.render(!e),l=c.querySelector(r.barSelector),p=r.speed,d=r.easing;return c.offsetWidth,a((function(e){""===r.positionUsing&&(r.positionUsing=t.getPositioningCSS()),s(l,function(n,e,t){var i;return(i="translate3d"===r.positionUsing?{transform:"translate3d("+o(n)+"%,0,0)"}:"translate"===r.positionUsing?{transform:"translate("+o(n)+"%,0)"}:{"margin-left":o(n)+"%"}).transition="all "+e+"ms "+t,i}(n,p,d)),1===n?(s(c,{transition:"none",opacity:1}),c.offsetWidth,setTimeout((function(){s(c,{transition:"all "+p+"ms linear",opacity:0}),setTimeout((function(){t.remove(),e()}),p)}),p)):setTimeout(e,p)})),this},t.isStarted=function(){return"number"==typeof t.status},t.start=function(){t.status||t.set(0);var n=function(){setTimeout((function(){t.status&&(t.trickle(),n())}),r.trickleSpeed)};return r.trickle&&n(),this},t.done=function(n){return n||t.status?t.inc(.3+.5*Math.random()).set(1):this},t.inc=function(n){var e=t.status;return e?("number"!=typeof n&&(n=(1-e)*i(Math.random()*e,.1,.95)),e=i(e+n,0,.994),t.set(e)):t.start()},t.trickle=function(){return t.inc(Math.random()*r.trickleRate)},n=0,e=0,t.promise=function(r){return r&&"resolved"!==r.state()?(0===e&&t.start(),n++,e++,r.always((function(){0==--e?(n=0,t.done()):t.set((n-e)/n)})),this):this},t.render=function(n){if(t.isRendered())return document.getElementById("nprogress");l(document.documentElement,"nprogress-busy");var e=document.createElement("div");e.id="nprogress",e.innerHTML=r.template;var i,a=e.querySelector(r.barSelector),c=n?"-100":o(t.status||0),p=document.querySelector(r.parent);return s(a,{transition:"all 0 linear",transform:"translate3d("+c+"%,0,0)"}),r.showSpinner||(i=e.querySelector(r.spinnerSelector))&&u(i),p!=document.body&&l(p,"nprogress-custom-parent"),p.appendChild(e),e},t.remove=function(){p(document.documentElement,"nprogress-busy"),p(document.querySelector(r.parent),"nprogress-custom-parent");var n=document.getElementById("nprogress");n&&u(n)},t.isRendered=function(){return!!document.getElementById("nprogress")},t.getPositioningCSS=function(){var n=document.body.style,e="WebkitTransform"in n?"Webkit":"MozTransform"in n?"Moz":"msTransform"in n?"ms":"OTransform"in n?"O":"";return e+"Perspective"in n?"translate3d":e+"Transform"in n?"translate":"margin"};var a=function(){var n=[];function e(){var t=n.shift();t&&t(e)}return function(t){n.push(t),1==n.length&&e()}}(),s=function(){var n=["Webkit","O","Moz","ms"],e={};function t(t){return t=t.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,(function(n,e){return e.toUpperCase()})),e[t]||(e[t]=function(e){var t=document.body.style;if(e in t)return e;for(var r,i=n.length,o=e.charAt(0).toUpperCase()+e.slice(1);i--;)if((r=n[i]+o)in t)return r;return e}(t))}function r(n,e,r){e=t(e),n.style[e]=r}return function(n,e){var t,i,o=arguments;if(2==o.length)for(t in e)void 0!==(i=e[t])&&e.hasOwnProperty(t)&&r(n,t,i);else r(n,o[1],o[2])}}();function c(n,e){return("string"==typeof n?n:d(n)).indexOf(" "+e+" ")>=0}function l(n,e){var t=d(n),r=t+e;c(t,e)||(n.className=r.substring(1))}function p(n,e){var t,r=d(n);c(n,e)&&(t=r.replace(" "+e+" "," "),n.className=t.substring(1,t.length-1))}function d(n){return(" "+(n.className||"")+" ").replace(/\s+/gi," ")}function u(n){n&&n.parentNode&&n.parentNode.removeChild(n)}return t})?r.call(e,t,e,n):r)||(n.exports=i)},function(n){n.exports=JSON.parse('{"_from":"vuepress-plugin-comment@^0.7.3","_id":"vuepress-plugin-comment@0.7.3","_inBundle":false,"_integrity":"sha512-CvuBST37snmQGzGD5lMxyw0u2eXWKVPjegfuwlI2+CTs2qWarKX16dVHHLR8DVa/yL5UGT3VuoNETH/zEexl8A==","_location":"/vuepress-plugin-comment","_phantomChildren":{},"_requested":{"type":"range","registry":true,"raw":"vuepress-plugin-comment@^0.7.3","name":"vuepress-plugin-comment","escapedName":"vuepress-plugin-comment","rawSpec":"^0.7.3","saveSpec":null,"fetchSpec":"^0.7.3"},"_requiredBy":["#DEV:/"],"_resolved":"https://registry.npmjs.org/vuepress-plugin-comment/-/vuepress-plugin-comment-0.7.3.tgz","_shasum":"2cff36b8f90896a7f88d494d78458398b1510249","_spec":"vuepress-plugin-comment@^0.7.3","_where":"/home/runner/work/rcbb-blog/rcbb-blog","author":{"name":"dongyuanxin"},"bugs":{"url":"https://github.com/dongyuanxin/vuepress-plugin-comment/issues"},"bundleDependencies":false,"dependencies":{"ejs":"^2.6.1","gitalk":"^1.5.0","gitalk-fix":"^1.5.2","i":"^0.3.6","npm":"^6.9.0","valine":"^1.3.9"},"deprecated":false,"description":"Comment plugin in vuepress, such as Gitalk, Valine...","homepage":"https://github.com/dongyuanxin/vuepress-plugin-comment#readme","keywords":["vuepress","comment","plugin","vue","gitalk","valine"],"license":"MIT","main":"index.js","name":"vuepress-plugin-comment","repository":{"type":"git","url":"git+ssh://git@github.com/dongyuanxin/vuepress-plugin-comment.git"},"scripts":{"test":"echo \\"Error: no test specified\\" && exit 1"},"version":"0.7.3"}')},function(n,e,t){"use strict";var r=t(9),i=String,o=TypeError;n.exports=function(n){if(r(n))return n;throw new o(i(n)+" is not an object")}},function(n,e,t){"use strict";var r=t(4);n.exports=!r((function(){var n=function(){}.bind();return"function"!=typeof n||n.hasOwnProperty("prototype")}))},function(n,e,t){"use strict";var r=t(48),i=t(53);n.exports=function(n){return r(i(n))}},function(n,e,t){"use strict";var r=t(0),i=t(2),o=function(n){return i(n)?n:void 0};n.exports=function(n,e){return arguments.length<2?o(r[n]):r[n]&&r[n][e]}},function(n,e,t){"use strict";var r=t(2),i=t(113),o=TypeError;n.exports=function(n){if(r(n))return n;throw new o(i(n)+" is not a function")}},function(n,e,t){"use strict";var r=t(53),i=Object;n.exports=function(n){return i(r(n))}},function(n,e,t){"use strict";var r=t(124);n.exports=function(n){return r(n.length)}},function(n,e,t){"use strict";var r=t(29),i=Function.prototype.call;n.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},function(n,e,t){"use strict";n.exports=function(n,e){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:e}}},function(n,e,t){"use strict";var r=t(62),i=t(0),o=t(38),a=n.exports=i["__core-js_shared__"]||o("__core-js_shared__",{});(a.versions||(a.versions=[])).push({version:"3.36.0",mode:r?"pure":"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.36.0/LICENSE",source:"https://github.com/zloirock/core-js"})},function(n,e,t){"use strict";var r=t(0),i=Object.defineProperty;n.exports=function(n,e){try{i(r,n,{value:e,configurable:!0,writable:!0})}catch(t){r[n]=e}return e}},function(n,e,t){var r=t(150),i=t(12),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(n){return i(n)&&a.call(n,"callee")&&!s.call(n,"callee")};n.exports=c},function(n,e,t){var r=t(10)(t(8),"Map");n.exports=r},function(n,e){n.exports=function(n){var e=typeof n;return null!=n&&("object"==e||"function"==e)}},function(n,e,t){var r=t(170),i=t(177),o=t(179),a=t(180),s=t(181);function c(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=a,c.prototype.set=s,n.exports=c},function(n,e){n.exports=function(n){var e=-1,t=Array(n.size);return n.forEach((function(n){t[++e]=n})),t}},function(n,e){n.exports=function(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=9007199254740991}},function(n,e,t){var r=t(6),i=t(46),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;n.exports=function(n,e){if(r(n))return!1;var t=typeof n;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=n&&!i(n))||(a.test(n)||!o.test(n)||null!=e&&n in Object(e))}},function(n,e,t){var r=t(14),i=t(12);n.exports=function(n){return"symbol"==typeof n||i(n)&&"[object Symbol]"==r(n)}},function(n,e){n.exports=function(n){return n}},function(n,e,t){"use strict";var r=t(3),i=t(4),o=t(19),a=Object,s=r("".split);n.exports=i((function(){return!a("z").propertyIsEnumerable(0)}))?function(n){return"String"===o(n)?s(n,""):a(n)}:a},function(n,e,t){"use strict";n.exports={}},function(n,e){n.exports=function(n){return n.webpackPolyfill||(n.deprecate=function(){},n.paths=[],n.children||(n.children=[]),Object.defineProperty(n,"loaded",{enumerable:!0,get:function(){return n.l}}),Object.defineProperty(n,"id",{enumerable:!0,get:function(){return n.i}}),n.webpackPolyfill=1),n}},function(n,e){var t=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,s="object"==typeof global&&global&&global.Object===Object&&global,c="object"==typeof self&&self&&self.Object===Object&&self,l=s||c||Function("return this")(),p=Object.prototype.toString,d=Math.max,u=Math.min,h=function(){return l.Date.now()};function g(n){var e=typeof n;return!!n&&("object"==e||"function"==e)}function m(n){if("number"==typeof n)return n;if(function(n){return"symbol"==typeof n||function(n){return!!n&&"object"==typeof n}(n)&&"[object Symbol]"==p.call(n)}(n))return NaN;if(g(n)){var e="function"==typeof n.valueOf?n.valueOf():n;n=g(e)?e+"":e}if("string"!=typeof n)return 0===n?n:+n;n=n.replace(t,"");var s=i.test(n);return s||o.test(n)?a(n.slice(2),s?2:8):r.test(n)?NaN:+n}n.exports=function(n,e,t){var r,i,o,a,s,c,l=0,p=!1,f=!1,v=!0;if("function"!=typeof n)throw new TypeError("Expected a function");function y(e){var t=r,o=i;return r=i=void 0,l=e,a=n.apply(o,t)}function b(n){return l=n,s=setTimeout(w,e),p?y(n):a}function k(n){var t=n-c;return void 0===c||t>=e||t<0||f&&n-l>=o}function w(){var n=h();if(k(n))return _(n);s=setTimeout(w,function(n){var t=e-(n-c);return f?u(t,o-(n-l)):t}(n))}function _(n){return s=void 0,v&&r?y(n):(r=i=void 0,a)}function x(){var n=h(),t=k(n);if(r=arguments,i=this,c=n,t){if(void 0===s)return b(c);if(f)return s=setTimeout(w,e),y(c)}return void 0===s&&(s=setTimeout(w,e)),a}return e=m(e)||0,g(t)&&(p=!!t.leading,o=(f="maxWait"in t)?d(m(t.maxWait)||0,e):o,v="trailing"in t?!!t.trailing:v),x.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=c=i=s=void 0},x.flush=function(){return void 0===s?a:_(h())},x}},function(n,e,t){"use strict";var r=t(5),i=t(35),o=t(109),a=t(36),s=t(30),c=t(55),l=t(7),p=t(64),d=Object.getOwnPropertyDescriptor;e.f=r?d:function(n,e){if(n=s(n),e=c(e),p)try{return d(n,e)}catch(n){}if(l(n,e))return a(!i(o.f,n,e),n[e])}},function(n,e,t){"use strict";var r=t(54),i=TypeError;n.exports=function(n){if(r(n))throw new i("Can't call method on "+n);return n}},function(n,e,t){"use strict";n.exports=function(n){return null==n}},function(n,e,t){"use strict";var r=t(110),i=t(56);n.exports=function(n){var e=r(n,"string");return i(e)?e:e+""}},function(n,e,t){"use strict";var r=t(31),i=t(2),o=t(57),a=t(58),s=Object;n.exports=a?function(n){return"symbol"==typeof n}:function(n){var e=r("Symbol");return i(e)&&o(e.prototype,s(n))}},function(n,e,t){"use strict";var r=t(3);n.exports=r({}.isPrototypeOf)},function(n,e,t){"use strict";var r=t(59);n.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(n,e,t){"use strict";var r=t(60),i=t(4),o=t(0).String;n.exports=!!Object.getOwnPropertySymbols&&!i((function(){var n=Symbol("symbol detection");return!o(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},function(n,e,t){"use strict";var r,i,o=t(0),a=t(111),s=o.process,c=o.Deno,l=s&&s.versions||c&&c.version,p=l&&l.v8;p&&(i=(r=p.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(i=+r[1]),n.exports=i},function(n,e,t){"use strict";var r=t(37);n.exports=function(n,e){return r[n]||(r[n]=e||{})}},function(n,e,t){"use strict";n.exports=!1},function(n,e,t){"use strict";var r=t(3),i=0,o=Math.random(),a=r(1..toString);n.exports=function(n){return"Symbol("+(void 0===n?"":n)+")_"+a(++i+o,36)}},function(n,e,t){"use strict";var r=t(5),i=t(4),o=t(101);n.exports=!r&&!i((function(){return 7!==Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},function(n,e,t){"use strict";var r=t(7),i=t(119),o=t(52),a=t(13);n.exports=function(n,e,t){for(var s=i(e),c=a.f,l=o.f,p=0;p<s.length;p++){var d=s[p];r(n,d)||t&&r(t,d)||c(n,d,l(e,d))}}},function(n,e,t){"use strict";var r=t(123);n.exports=function(n){var e=+n;return e!=e||0===e?0:r(e)}},function(n,e,t){"use strict";var r=t(133),i=t(28),o=t(134);n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var n,e=!1,t={};try{(n=r(Object.prototype,"__proto__","set"))(t,[]),e=t instanceof Array}catch(n){}return function(t,r){return i(t),o(r),e?n(t,r):t.__proto__=r,t}}():void 0)},function(n,e){n.exports=function(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n}},function(n,e){var t="object"==typeof global&&global&&global.Object===Object&&global;n.exports=t},function(n,e,t){var r=t(21),i=t(161),o=t(162),a=t(163),s=t(164),c=t(165);function l(n){var e=this.__data__=new r(n);this.size=e.size}l.prototype.clear=i,l.prototype.delete=o,l.prototype.get=a,l.prototype.has=s,l.prototype.set=c,n.exports=l},function(n,e){n.exports=function(n,e){return n===e||n!=n&&e!=e}},function(n,e,t){var r=t(14),i=t(41);n.exports=function(n){if(!i(n))return!1;var e=r(n);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(n,e){var t=Function.prototype.toString;n.exports=function(n){if(null!=n){try{return t.call(n)}catch(n){}try{return n+""}catch(n){}}return""}},function(n,e,t){var r=t(182),i=t(12);n.exports=function n(e,t,o,a,s){return e===t||(null==e||null==t||!i(e)&&!i(t)?e!=e&&t!=t:r(e,t,o,a,n,s))}},function(n,e,t){var r=t(76),i=t(185),o=t(77);n.exports=function(n,e,t,a,s,c){var l=1&t,p=n.length,d=e.length;if(p!=d&&!(l&&d>p))return!1;var u=c.get(n),h=c.get(e);if(u&&h)return u==e&&h==n;var g=-1,m=!0,f=2&t?new r:void 0;for(c.set(n,e),c.set(e,n);++g<p;){var v=n[g],y=e[g];if(a)var b=l?a(y,v,g,e,n,c):a(v,y,g,n,e,c);if(void 0!==b){if(b)continue;m=!1;break}if(f){if(!i(e,(function(n,e){if(!o(f,e)&&(v===n||s(v,n,t,a,c)))return f.push(e)}))){m=!1;break}}else if(v!==y&&!s(v,y,t,a,c)){m=!1;break}}return c.delete(n),c.delete(e),m}},function(n,e,t){var r=t(42),i=t(183),o=t(184);function a(n){var e=-1,t=null==n?0:n.length;for(this.__data__=new r;++e<t;)this.add(n[e])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,n.exports=a},function(n,e){n.exports=function(n,e){return n.has(e)}},function(n,e,t){var r=t(195),i=t(201),o=t(82);n.exports=function(n){return o(n)?r(n):i(n)}},function(n,e,t){(function(n){var r=t(8),i=t(197),o=e&&!e.nodeType&&e,a=o&&"object"==typeof n&&n&&!n.nodeType&&n,s=a&&a.exports===o?r.Buffer:void 0,c=(s?s.isBuffer:void 0)||i;n.exports=c}).call(this,t(50)(n))},function(n,e){var t=/^(?:0|[1-9]\d*)$/;n.exports=function(n,e){var r=typeof n;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&t.test(n))&&n>-1&&n%1==0&&n<e}},function(n,e,t){var r=t(198),i=t(199),o=t(200),a=o&&o.isTypedArray,s=a?i(a):r;n.exports=s},function(n,e,t){var r=t(72),i=t(44);n.exports=function(n){return null!=n&&i(n.length)&&!r(n)}},function(n,e,t){var r=t(10)(t(8),"Set");n.exports=r},function(n,e,t){var r=t(41);n.exports=function(n){return n==n&&!r(n)}},function(n,e){n.exports=function(n,e){return function(t){return null!=t&&(t[n]===e&&(void 0!==e||n in Object(t)))}}},function(n,e,t){var r=t(87),i=t(25);n.exports=function(n,e){for(var t=0,o=(e=r(e,n)).length;null!=n&&t<o;)n=n[i(e[t++])];return t&&t==o?n:void 0}},function(n,e,t){var r=t(6),i=t(45),o=t(212),a=t(215);n.exports=function(n,e){return r(n)?n:i(n,e)?[n]:o(a(n))}},function(n,e,t){},function(n,e,t){},function(n,e,t){},function(n,e,t){},function(n,e,t){},function(n,e,t){var r=t(148),i=t(153),o=t(224),a=t(232),s=t(241),c=t(106),l=o((function(n){var e=c(n);return s(e)&&(e=void 0),a(r(n,1,s,!0),i(e,2))}));n.exports=l},function(n,e,t){"use strict";
/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var r=/["'&<>]/;n.exports=function(n){var e,t=""+n,i=r.exec(t);if(!i)return t;var o="",a=0,s=0;for(a=i.index;a<t.length;a++){switch(t.charCodeAt(a)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#39;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}s!==a&&(o+=t.substring(s,a)),s=a+1,o+=e}return s!==a?o+t.substring(s,a):o}},function(n,e,t){"use strict";
/**
 * @file Embedded JavaScript templating engine. {@link http://ejs.co}
 * @author Matthew Eernisse <mde@fleegix.org>
 * @author Tiancheng "Timothy" Gu <timothygu99@gmail.com>
 * @project EJS
 * @license {@link http://www.apache.org/licenses/LICENSE-2.0 Apache License, Version 2.0}
 */var r=t(251),i=t(252),o=t(253),a=!1,s=t(254).version,c=["delimiter","scope","context","debug","compileDebug","client","_with","rmWhitespace","strict","filename","async"],l=c.concat("cache"),p=/^\uFEFF/;function d(n,t){var i,o,a=t.views,s=/^[A-Za-z]+:\\|^\//.exec(n);if(s&&s.length)i=e.resolveInclude(n.replace(/^\/*/,""),t.root||"/",!0);else if(t.filename&&(o=e.resolveInclude(n,t.filename),r.existsSync(o)&&(i=o)),i||Array.isArray(a)&&a.some((function(t){return o=e.resolveInclude(n,t,!0),r.existsSync(o)}))&&(i=o),!i)throw new Error('Could not find the include file "'+t.escapeFunction(n)+'"');return i}function u(n,t){var r,i=n.filename,o=arguments.length>1;if(n.cache){if(!i)throw new Error("cache option requires a filename");if(r=e.cache.get(i))return r;o||(t=g(i).toString().replace(p,""))}else if(!o){if(!i)throw new Error("Internal EJS error: no file name or template provided");t=g(i).toString().replace(p,"")}return r=e.compile(t,n),n.cache&&e.cache.set(i,r),r}function h(n,t,r){var i;if(!r){if("function"==typeof e.promiseImpl)return new e.promiseImpl((function(e,r){try{e(i=u(n)(t))}catch(n){r(n)}}));throw new Error("Please provide a callback function")}try{i=u(n)(t)}catch(n){return r(n)}r(null,i)}function g(n){return e.fileLoader(n)}function m(n,e,t,r,i){var o=e.split("\n"),a=Math.max(r-3,0),s=Math.min(o.length,r+3),c=i(t),l=o.slice(a,s).map((function(n,e){var t=e+a+1;return(t==r?" >> ":"    ")+t+"| "+n})).join("\n");throw n.path=c,n.message=(c||"ejs")+":"+r+"\n"+l+"\n\n"+n.message,n}function f(n){return n.replace(/;(\s*$)/,"$1")}function v(n,t){t=t||{};var r={};this.templateText=n,this.mode=null,this.truncate=!1,this.currentLine=1,this.source="",this.dependencies=[],r.client=t.client||!1,r.escapeFunction=t.escape||t.escapeFunction||o.escapeXML,r.compileDebug=!1!==t.compileDebug,r.debug=!!t.debug,r.filename=t.filename,r.openDelimiter=t.openDelimiter||e.openDelimiter||"<",r.closeDelimiter=t.closeDelimiter||e.closeDelimiter||">",r.delimiter=t.delimiter||e.delimiter||"%",r.strict=t.strict||!1,r.context=t.context,r.cache=t.cache||!1,r.rmWhitespace=t.rmWhitespace,r.root=t.root,r.outputFunctionName=t.outputFunctionName,r.localsName=t.localsName||e.localsName||"locals",r.views=t.views,r.async=t.async,r.destructuredLocals=t.destructuredLocals,r.legacyInclude=void 0===t.legacyInclude||!!t.legacyInclude,r.strict?r._with=!1:r._with=void 0===t._with||t._with,this.opts=r,this.regex=this.createRegex()}e.cache=o.cache,e.fileLoader=r.readFileSync,e.localsName="locals",e.promiseImpl=new Function("return this;")().Promise,e.resolveInclude=function(n,e,t){var r=i.dirname,o=i.extname,a=(0,i.resolve)(t?e:r(e),n);return o(n)||(a+=".ejs"),a},e.compile=function(n,e){return e&&e.scope&&(a||(console.warn("`scope` option is deprecated and will be removed in EJS 3"),a=!0),e.context||(e.context=e.scope),delete e.scope),new v(n,e).compile()},e.render=function(n,e,t){var r=e||{},i=t||{};return 2==arguments.length&&o.shallowCopyFromList(i,r,c),u(i,n)(r)},e.renderFile=function(){var n,e,t,r=Array.prototype.slice.call(arguments),i=r.shift(),a={filename:i};return"function"==typeof arguments[arguments.length-1]&&(n=r.pop()),r.length?(e=r.shift(),r.length?o.shallowCopy(a,r.pop()):(e.settings&&(e.settings.views&&(a.views=e.settings.views),e.settings["view cache"]&&(a.cache=!0),(t=e.settings["view options"])&&o.shallowCopy(a,t)),o.shallowCopyFromList(a,e,l)),a.filename=i):e={},h(a,e,n)},e.Template=v,e.clearCache=function(){e.cache.reset()},v.modes={EVAL:"eval",ESCAPED:"escaped",RAW:"raw",COMMENT:"comment",LITERAL:"literal"},v.prototype={createRegex:function(){var n="(<%%|%%>|<%=|<%-|<%_|<%#|<%|%>|-%>|_%>)",e=o.escapeRegExpChars(this.opts.delimiter),t=o.escapeRegExpChars(this.opts.openDelimiter),r=o.escapeRegExpChars(this.opts.closeDelimiter);return n=n.replace(/%/g,e).replace(/</g,t).replace(/>/g,r),new RegExp(n)},compile:function(){var n,e,t,r=this.opts,a="",s="",c=r.escapeFunction;if(!this.source){if(this.generateSource(),a+='  var __output = "";\n  function __append(s) { if (s !== undefined && s !== null) __output += s }\n',r.outputFunctionName&&(a+="  var "+r.outputFunctionName+" = __append;\n"),r.destructuredLocals&&r.destructuredLocals.length){for(var l="  var __locals = ("+r.localsName+" || {}),\n",p=0;p<r.destructuredLocals.length;p++){var h=r.destructuredLocals[p];p>0&&(l+=",\n  "),l+=h+" = __locals."+h}a+=l+";\n"}!1!==r._with&&(a+="  with ("+r.localsName+" || {}) {\n",s+="  }\n"),s+="  return __output;\n",this.source=a+this.source+s}n=r.compileDebug?"var __line = 1\n  , __lines = "+JSON.stringify(this.templateText)+"\n  , __filename = "+(r.filename?JSON.stringify(r.filename):"undefined")+";\ntry {\n"+this.source+"} catch (e) {\n  rethrow(e, __lines, __filename, __line, escapeFn);\n}\n":this.source,r.client&&(n="escapeFn = escapeFn || "+c.toString()+";\n"+n,r.compileDebug&&(n="rethrow = rethrow || "+m.toString()+";\n"+n)),r.strict&&(n='"use strict";\n'+n),r.debug&&console.log(n),r.compileDebug&&r.filename&&(n=n+"\n//# sourceURL="+r.filename+"\n");try{if(r.async)try{t=new Function("return (async function(){}).constructor;")()}catch(n){throw n instanceof SyntaxError?new Error("This environment does not support async/await"):n}else t=Function;e=new t(r.localsName+", escapeFn, include, rethrow",n)}catch(n){throw n instanceof SyntaxError&&(r.filename&&(n.message+=" in "+r.filename),n.message+=" while compiling ejs\n\n",n.message+="If the above error is not helpful, you may want to try EJS-Lint:\n",n.message+="https://github.com/RyanZim/EJS-Lint",r.async||(n.message+="\n",n.message+="Or, if you meant to create an async function, pass `async: true` as an option.")),n}var g=r.client?e:function(n){return e.apply(r.context,[n||{},c,function(e,t){var i=o.shallowCopy({},n);return t&&(i=o.shallowCopy(i,t)),function(n,e){var t=o.shallowCopy({},e);return t.filename=d(n,t),u(t)}(e,r)(i)},m])};if(g.dependencies=this.dependencies,r.filename&&"function"==typeof Object.defineProperty){var f=r.filename,v=i.basename(f,i.extname(f));try{Object.defineProperty(g,"name",{value:v,writable:!1,enumerable:!1,configurable:!0})}catch(n){}}return g},generateSource:function(){var n=this.opts;n.rmWhitespace&&(this.templateText=this.templateText.replace(/[\r\n]+/g,"\n").replace(/^\s+|\s+$/gm,"")),this.templateText=this.templateText.replace(/[ \t]*<%_/gm,"<%_").replace(/_%>[ \t]*/gm,"_%>");var t=this,r=this.parseTemplateText(),i=this.opts.delimiter,a=this.opts.openDelimiter,s=this.opts.closeDelimiter;r&&r.length&&r.forEach((function(c,l){var u,h,m,f,y,b;if(0===c.indexOf(a+i)&&0!==c.indexOf(a+i+i)&&(h=r[l+2])!=i+s&&h!="-"+i+s&&h!="_"+i+s)throw new Error('Could not find matching close tag for "'+c+'".');if(n.legacyInclude&&(m=c.match(/^\s*include\s+(\S+)/))&&(u=r[l-1])&&(u==a+i||u==a+i+"-"||u==a+i+"_"))return f=o.shallowCopy({},t.opts),y=function(n,e){var t,r,i=o.shallowCopy({},e);r=g(t=d(n,i)).toString().replace(p,""),i.filename=t;var a=new v(r,i);return a.generateSource(),{source:a.source,filename:t,template:r}}(m[1],f),b=t.opts.compileDebug?"    ; (function(){\n      var __line = 1\n      , __lines = "+JSON.stringify(y.template)+"\n      , __filename = "+JSON.stringify(y.filename)+";\n      try {\n"+y.source+"      } catch (e) {\n        rethrow(e, __lines, __filename, __line, escapeFn);\n      }\n    ; }).call(this)\n":"    ; (function(){\n"+y.source+"    ; }).call(this)\n",t.source+=b,void t.dependencies.push(e.resolveInclude(m[1],f.filename));t.scanLine(c)}))},parseTemplateText:function(){for(var n,e=this.templateText,t=this.regex,r=t.exec(e),i=[];r;)0!==(n=r.index)&&(i.push(e.substring(0,n)),e=e.slice(n)),i.push(r[0]),e=e.slice(r[0].length),r=t.exec(e);return e&&i.push(e),i},_addOutput:function(n){if(this.truncate&&(n=n.replace(/^(?:\r\n|\r|\n)/,""),this.truncate=!1),!n)return n;n=(n=(n=(n=n.replace(/\\/g,"\\\\")).replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace(/"/g,'\\"'),this.source+='    ; __append("'+n+'")\n'},scanLine:function(n){var e,t=this.opts.delimiter,r=this.opts.openDelimiter,i=this.opts.closeDelimiter;switch(e=n.split("\n").length-1,n){case r+t:case r+t+"_":this.mode=v.modes.EVAL;break;case r+t+"=":this.mode=v.modes.ESCAPED;break;case r+t+"-":this.mode=v.modes.RAW;break;case r+t+"#":this.mode=v.modes.COMMENT;break;case r+t+t:this.mode=v.modes.LITERAL,this.source+='    ; __append("'+n.replace(r+t+t,r+t)+'")\n';break;case t+t+i:this.mode=v.modes.LITERAL,this.source+='    ; __append("'+n.replace(t+t+i,t+i)+'")\n';break;case t+i:case"-"+t+i:case"_"+t+i:this.mode==v.modes.LITERAL&&this._addOutput(n),this.mode=null,this.truncate=0===n.indexOf("-")||0===n.indexOf("_");break;default:if(this.mode){switch(this.mode){case v.modes.EVAL:case v.modes.ESCAPED:case v.modes.RAW:n.lastIndexOf("//")>n.lastIndexOf("\n")&&(n+="\n")}switch(this.mode){case v.modes.EVAL:this.source+="    ; "+n+"\n";break;case v.modes.ESCAPED:this.source+="    ; __append(escapeFn("+f(n)+"))\n";break;case v.modes.RAW:this.source+="    ; __append("+f(n)+")\n";break;case v.modes.COMMENT:break;case v.modes.LITERAL:this._addOutput(n)}}else this._addOutput(n)}this.opts.compileDebug&&e&&(this.currentLine+=e,this.source+="    ; __line = "+this.currentLine+"\n")}},e.escapeXML=o.escapeXML,e.__express=e.renderFile,e.VERSION=s,e.name="ejs","undefined"!=typeof window&&(window.ejs=e)},function(n,e,t){"use strict";t.r(e);var r={name:"CodeBlock",props:{title:{type:String,required:!0},active:{type:Boolean,default:!1}}},i=(t(244),t(1)),o=Object(i.a)(r,(function(){return(0,this._self._c)("div",{staticClass:"theme-code-block",class:{"theme-code-block__active":this.active}},[this._t("default")],2)}),[],!1,null,"4f1e9d0c",null);e.default=o.exports},function(n,e,t){"use strict";t.r(e);var r={name:"CodeGroup",data:()=>({codeTabs:[],activeCodeTabIndex:-1}),watch:{activeCodeTabIndex(n){this.codeTabs.forEach(n=>{n.elm.classList.remove("theme-code-block__active")}),this.codeTabs[n].elm.classList.add("theme-code-block__active")}},mounted(){this.codeTabs=(this.$slots.default||[]).filter(n=>Boolean(n.componentOptions)).map((n,e)=>(""===n.componentOptions.propsData.active&&(this.activeCodeTabIndex=e),{title:n.componentOptions.propsData.title,elm:n.elm})),-1===this.activeCodeTabIndex&&this.codeTabs.length>0&&(this.activeCodeTabIndex=0)},methods:{changeCodeTab(n){this.activeCodeTabIndex=n}}},i=(t(245),t(1)),o=Object(i.a)(r,(function(){var n=this,e=n._self._c;return e("div",{staticClass:"theme-code-group"},[e("div",{staticClass:"theme-code-group__nav"},[e("ul",{staticClass:"theme-code-group__ul"},n._l(n.codeTabs,(function(t,r){return e("li",{key:t.title,staticClass:"theme-code-group__li"},[e("button",{staticClass:"theme-code-group__nav-tab",class:{"theme-code-group__nav-tab-active":r===n.activeCodeTabIndex},on:{click:function(e){return n.changeCodeTab(r)}}},[n._v("\n            "+n._s(t.title)+"\n          ")])])})),0)]),n._v(" "),n._t("default"),n._v(" "),n.codeTabs.length<1?e("pre",{staticClass:"pre-blank"},[n._v("// Make sure to add code blocks to your code group")]):n._e()],2)}),[],!1,null,"2f5f1757",null);e.default=o.exports},function(n,e,t){"use strict";var r=t(2),i=t(13),o=t(103),a=t(38);n.exports=function(n,e,t,s){s||(s={});var c=s.enumerable,l=void 0!==s.name?s.name:e;if(r(t)&&o(t,l,s),s.global)c?n[e]=t:a(e,t);else{try{s.unsafe?n[e]&&(c=!0):delete n[e]}catch(n){}c?n[e]=t:i.f(n,e,{value:t,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return n}},function(n,e,t){"use strict";n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(n,e,t){"use strict";var r=t(139),i=String;n.exports=function(n){if("Symbol"===r(n))throw new TypeError("Cannot convert a Symbol value to a string");return i(n)}},function(n,e,t){"use strict";var r=t(0),i=t(9),o=r.document,a=i(o)&&i(o.createElement);n.exports=function(n){return a?o.createElement(n):{}}},function(n,e,t){"use strict";var r=t(5),i=t(4);n.exports=r&&i((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},function(n,e,t){"use strict";var r=t(3),i=t(4),o=t(2),a=t(7),s=t(5),c=t(115).CONFIGURABLE,l=t(116),p=t(117),d=p.enforce,u=p.get,h=String,g=Object.defineProperty,m=r("".slice),f=r("".replace),v=r([].join),y=s&&!i((function(){return 8!==g((function(){}),"length",{value:8}).length})),b=String(String).split("String"),k=n.exports=function(n,e,t){"Symbol("===m(h(e),0,7)&&(e="["+f(h(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),t&&t.getter&&(e="get "+e),t&&t.setter&&(e="set "+e),(!a(n,"name")||c&&n.name!==e)&&(s?g(n,"name",{value:e,configurable:!0}):n.name=e),y&&t&&a(t,"arity")&&n.length!==t.arity&&g(n,"length",{value:t.arity});try{t&&a(t,"constructor")&&t.constructor?s&&g(n,"prototype",{writable:!1}):n.prototype&&(n.prototype=void 0)}catch(n){}var r=d(n);return a(r,"source")||(r.source=v(b,"string"==typeof e?e:"")),n};Function.prototype.toString=k((function(){return o(this)&&u(this).source||l(this)}),"toString")},function(n,e,t){"use strict";var r=t(61),i=t(63),o=r("keys");n.exports=function(n){return o[n]||(o[n]=i(n))}},function(n,e,t){"use strict";var r=t(3),i=t(7),o=t(30),a=t(121).indexOf,s=t(49),c=r([].push);n.exports=function(n,e){var t,r=o(n),l=0,p=[];for(t in r)!i(s,t)&&i(r,t)&&c(p,t);for(;e.length>l;)i(r,t=e[l++])&&(~a(p,t)||c(p,t));return p}},function(n,e){n.exports=function(n){var e=null==n?0:n.length;return e?n[e-1]:void 0}},function(n,e,t){n.exports=t(257)},function(n,e,t){"use strict";var r=t(18),i=t(127).left,o=t(128),a=t(60);r({target:"Array",proto:!0,forced:!t(129)&&a>79&&a<83||!o("reduce")},{reduce:function(n){var e=arguments.length;return i(this,n,e,e>1?arguments[1]:void 0)}})},function(n,e,t){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);e.f=o?function(n){var e=i(this,n);return!!e&&e.enumerable}:r},function(n,e,t){"use strict";var r=t(35),i=t(9),o=t(56),a=t(112),s=t(114),c=t(20),l=TypeError,p=c("toPrimitive");n.exports=function(n,e){if(!i(n)||o(n))return n;var t,c=a(n,p);if(c){if(void 0===e&&(e="default"),t=r(c,n,e),!i(t)||o(t))return t;throw new l("Can't convert object to primitive value")}return void 0===e&&(e="number"),s(n,e)}},function(n,e,t){"use strict";n.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},function(n,e,t){"use strict";var r=t(32),i=t(54);n.exports=function(n,e){var t=n[e];return i(t)?void 0:r(t)}},function(n,e,t){"use strict";var r=String;n.exports=function(n){try{return r(n)}catch(n){return"Object"}}},function(n,e,t){"use strict";var r=t(35),i=t(2),o=t(9),a=TypeError;n.exports=function(n,e){var t,s;if("string"===e&&i(t=n.toString)&&!o(s=r(t,n)))return s;if(i(t=n.valueOf)&&!o(s=r(t,n)))return s;if("string"!==e&&i(t=n.toString)&&!o(s=r(t,n)))return s;throw new a("Can't convert object to primitive value")}},function(n,e,t){"use strict";var r=t(5),i=t(7),o=Function.prototype,a=r&&Object.getOwnPropertyDescriptor,s=i(o,"name"),c=s&&"something"===function(){}.name,l=s&&(!r||r&&a(o,"name").configurable);n.exports={EXISTS:s,PROPER:c,CONFIGURABLE:l}},function(n,e,t){"use strict";var r=t(3),i=t(2),o=t(37),a=r(Function.toString);i(o.inspectSource)||(o.inspectSource=function(n){return a(n)}),n.exports=o.inspectSource},function(n,e,t){"use strict";var r,i,o,a=t(118),s=t(0),c=t(9),l=t(15),p=t(7),d=t(37),u=t(104),h=t(49),g=s.TypeError,m=s.WeakMap;if(a||d.state){var f=d.state||(d.state=new m);f.get=f.get,f.has=f.has,f.set=f.set,r=function(n,e){if(f.has(n))throw new g("Object already initialized");return e.facade=n,f.set(n,e),e},i=function(n){return f.get(n)||{}},o=function(n){return f.has(n)}}else{var v=u("state");h[v]=!0,r=function(n,e){if(p(n,v))throw new g("Object already initialized");return e.facade=n,l(n,v,e),e},i=function(n){return p(n,v)?n[v]:{}},o=function(n){return p(n,v)}}n.exports={set:r,get:i,has:o,enforce:function(n){return o(n)?i(n):r(n,{})},getterFor:function(n){return function(e){var t;if(!c(e)||(t=i(e)).type!==n)throw new g("Incompatible receiver, "+n+" required");return t}}}},function(n,e,t){"use strict";var r=t(0),i=t(2),o=r.WeakMap;n.exports=i(o)&&/native code/.test(String(o))},function(n,e,t){"use strict";var r=t(31),i=t(3),o=t(120),a=t(125),s=t(28),c=i([].concat);n.exports=r("Reflect","ownKeys")||function(n){var e=o.f(s(n)),t=a.f;return t?c(e,t(n)):e}},function(n,e,t){"use strict";var r=t(105),i=t(99).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(n){return r(n,i)}},function(n,e,t){"use strict";var r=t(30),i=t(122),o=t(34),a=function(n){return function(e,t,a){var s=r(e),c=o(s);if(0===c)return!n&&-1;var l,p=i(a,c);if(n&&t!=t){for(;c>p;)if((l=s[p++])!=l)return!0}else for(;c>p;p++)if((n||p in s)&&s[p]===t)return n||p||0;return!n&&-1}};n.exports={includes:a(!0),indexOf:a(!1)}},function(n,e,t){"use strict";var r=t(66),i=Math.max,o=Math.min;n.exports=function(n,e){var t=r(n);return t<0?i(t+e,0):o(t,e)}},function(n,e,t){"use strict";var r=Math.ceil,i=Math.floor;n.exports=Math.trunc||function(n){var e=+n;return(e>0?i:r)(e)}},function(n,e,t){"use strict";var r=t(66),i=Math.min;n.exports=function(n){var e=r(n);return e>0?i(e,9007199254740991):0}},function(n,e,t){"use strict";e.f=Object.getOwnPropertySymbols},function(n,e,t){"use strict";var r=t(4),i=t(2),o=/#|\.prototype\./,a=function(n,e){var t=c[s(n)];return t===p||t!==l&&(i(e)?r(e):!!e)},s=a.normalize=function(n){return String(n).replace(o,".").toLowerCase()},c=a.data={},l=a.NATIVE="N",p=a.POLYFILL="P";n.exports=a},function(n,e,t){"use strict";var r=t(32),i=t(33),o=t(48),a=t(34),s=TypeError,c="Reduce of empty array with no initial value",l=function(n){return function(e,t,l,p){var d=i(e),u=o(d),h=a(d);if(r(t),0===h&&l<2)throw new s(c);var g=n?h-1:0,m=n?-1:1;if(l<2)for(;;){if(g in u){p=u[g],g+=m;break}if(g+=m,n?g<0:h<=g)throw new s(c)}for(;n?g>=0:h>g;g+=m)g in u&&(p=t(p,u[g],g,d));return p}};n.exports={left:l(!1),right:l(!0)}},function(n,e,t){"use strict";var r=t(4);n.exports=function(n,e){var t=[][n];return!!t&&r((function(){t.call(null,e||function(){return 1},1)}))}},function(n,e,t){"use strict";var r=t(0),i=t(19);n.exports="process"===i(r.process)},function(n,e,t){"use strict";var r=t(18),i=t(0),o=t(131),a=t(132),s=i.WebAssembly,c=7!==new Error("e",{cause:7}).cause,l=function(n,e){var t={};t[n]=a(n,e,c),r({global:!0,constructor:!0,arity:1,forced:c},t)},p=function(n,e){if(s&&s[n]){var t={};t[n]=a("WebAssembly."+n,e,c),r({target:"WebAssembly",stat:!0,constructor:!0,arity:1,forced:c},t)}};l("Error",(function(n){return function(e){return o(n,this,arguments)}})),l("EvalError",(function(n){return function(e){return o(n,this,arguments)}})),l("RangeError",(function(n){return function(e){return o(n,this,arguments)}})),l("ReferenceError",(function(n){return function(e){return o(n,this,arguments)}})),l("SyntaxError",(function(n){return function(e){return o(n,this,arguments)}})),l("TypeError",(function(n){return function(e){return o(n,this,arguments)}})),l("URIError",(function(n){return function(e){return o(n,this,arguments)}})),p("CompileError",(function(n){return function(e){return o(n,this,arguments)}})),p("LinkError",(function(n){return function(e){return o(n,this,arguments)}})),p("RuntimeError",(function(n){return function(e){return o(n,this,arguments)}}))},function(n,e,t){"use strict";var r=t(29),i=Function.prototype,o=i.apply,a=i.call;n.exports="object"==typeof Reflect&&Reflect.apply||(r?a.bind(o):function(){return a.apply(o,arguments)})},function(n,e,t){"use strict";var r=t(31),i=t(7),o=t(15),a=t(57),s=t(67),c=t(65),l=t(136),p=t(137),d=t(138),u=t(141),h=t(142),g=t(5),m=t(62);n.exports=function(n,e,t,f){var v=f?2:1,y=n.split("."),b=y[y.length-1],k=r.apply(null,y);if(k){var w=k.prototype;if(!m&&i(w,"cause")&&delete w.cause,!t)return k;var _=r("Error"),x=e((function(n,e){var t=d(f?e:n,void 0),r=f?new k(n):new k;return void 0!==t&&o(r,"message",t),h(r,x,r.stack,2),this&&a(w,this)&&p(r,this,x),arguments.length>v&&u(r,arguments[v]),r}));if(x.prototype=w,"Error"!==b?s?s(x,_):c(x,_,{name:!0}):g&&"stackTraceLimit"in k&&(l(x,k,"stackTraceLimit"),l(x,k,"prepareStackTrace")),c(x,k),!m)try{w.name!==b&&o(w,"name",b),w.constructor=x}catch(n){}return x}}},function(n,e,t){"use strict";var r=t(3),i=t(32);n.exports=function(n,e,t){try{return r(i(Object.getOwnPropertyDescriptor(n,e)[t]))}catch(n){}}},function(n,e,t){"use strict";var r=t(135),i=String,o=TypeError;n.exports=function(n){if(r(n))return n;throw new o("Can't set "+i(n)+" as a prototype")}},function(n,e,t){"use strict";var r=t(9);n.exports=function(n){return r(n)||null===n}},function(n,e,t){"use strict";var r=t(13).f;n.exports=function(n,e,t){t in n||r(n,t,{configurable:!0,get:function(){return e[t]},set:function(n){e[t]=n}})}},function(n,e,t){"use strict";var r=t(2),i=t(9),o=t(67);n.exports=function(n,e,t){var a,s;return o&&r(a=e.constructor)&&a!==t&&i(s=a.prototype)&&s!==t.prototype&&o(n,s),n}},function(n,e,t){"use strict";var r=t(100);n.exports=function(n,e){return void 0===n?arguments.length<2?"":e:r(n)}},function(n,e,t){"use strict";var r=t(140),i=t(2),o=t(19),a=t(20)("toStringTag"),s=Object,c="Arguments"===o(function(){return arguments}());n.exports=r?o:function(n){var e,t,r;return void 0===n?"Undefined":null===n?"Null":"string"==typeof(t=function(n,e){try{return n[e]}catch(n){}}(e=s(n),a))?t:c?o(e):"Object"===(r=o(e))&&i(e.callee)?"Arguments":r}},function(n,e,t){"use strict";var r={};r[t(20)("toStringTag")]="z",n.exports="[object z]"===String(r)},function(n,e,t){"use strict";var r=t(9),i=t(15);n.exports=function(n,e){r(e)&&"cause"in e&&i(n,"cause",e.cause)}},function(n,e,t){"use strict";var r=t(15),i=t(143),o=t(144),a=Error.captureStackTrace;n.exports=function(n,e,t,s){o&&(a?a(n,e):r(n,"stack",i(t,s)))}},function(n,e,t){"use strict";var r=t(3),i=Error,o=r("".replace),a=String(new i("zxcasd").stack),s=/\n\s*at [^:]*:[^\n]*/,c=s.test(a);n.exports=function(n,e){if(c&&"string"==typeof n&&!i.prepareStackTrace)for(;e--;)n=o(n,s,"");return n}},function(n,e,t){"use strict";var r=t(4),i=t(36);n.exports=!r((function(){var n=new Error("a");return!("stack"in n)||(Object.defineProperty(n,"stack",i(1,7)),7!==n.stack)}))},function(n,e,t){"use strict";var r=t(5),i=t(146),o=TypeError,a=Object.getOwnPropertyDescriptor,s=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(n){return n instanceof TypeError}}();n.exports=s?function(n,e){if(i(n)&&!a(n,"length").writable)throw new o("Cannot set read only .length");return n.length=e}:function(n,e){return n.length=e}},function(n,e,t){"use strict";var r=t(19);n.exports=Array.isArray||function(n){return"Array"===r(n)}},function(n,e,t){"use strict";var r=TypeError;n.exports=function(n){if(n>9007199254740991)throw r("Maximum allowed index exceeded");return n}},function(n,e,t){var r=t(68),i=t(149);n.exports=function n(e,t,o,a,s){var c=-1,l=e.length;for(o||(o=i),s||(s=[]);++c<l;){var p=e[c];t>0&&o(p)?t>1?n(p,t-1,o,a,s):r(s,p):a||(s[s.length]=p)}return s}},function(n,e,t){var r=t(16),i=t(39),o=t(6),a=r?r.isConcatSpreadable:void 0;n.exports=function(n){return o(n)||i(n)||!!(a&&n&&n[a])}},function(n,e,t){var r=t(14),i=t(12);n.exports=function(n){return i(n)&&"[object Arguments]"==r(n)}},function(n,e,t){var r=t(16),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;n.exports=function(n){var e=o.call(n,s),t=n[s];try{n[s]=void 0;var r=!0}catch(n){}var i=a.call(n);return r&&(e?n[s]=t:delete n[s]),i}},function(n,e){var t=Object.prototype.toString;n.exports=function(n){return t.call(n)}},function(n,e,t){var r=t(154),i=t(210),o=t(47),a=t(6),s=t(221);n.exports=function(n){return"function"==typeof n?n:null==n?o:"object"==typeof n?a(n)?i(n[0],n[1]):r(n):s(n)}},function(n,e,t){var r=t(155),i=t(209),o=t(85);n.exports=function(n){var e=i(n);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(t){return t===n||r(t,n,e)}}},function(n,e,t){var r=t(70),i=t(74);n.exports=function(n,e,t,o){var a=t.length,s=a,c=!o;if(null==n)return!s;for(n=Object(n);a--;){var l=t[a];if(c&&l[2]?l[1]!==n[l[0]]:!(l[0]in n))return!1}for(;++a<s;){var p=(l=t[a])[0],d=n[p],u=l[1];if(c&&l[2]){if(void 0===d&&!(p in n))return!1}else{var h=new r;if(o)var g=o(d,u,p,n,e,h);if(!(void 0===g?i(u,d,3,o,h):g))return!1}}return!0}},function(n,e){n.exports=function(){this.__data__=[],this.size=0}},function(n,e,t){var r=t(22),i=Array.prototype.splice;n.exports=function(n){var e=this.__data__,t=r(e,n);return!(t<0)&&(t==e.length-1?e.pop():i.call(e,t,1),--this.size,!0)}},function(n,e,t){var r=t(22);n.exports=function(n){var e=this.__data__,t=r(e,n);return t<0?void 0:e[t][1]}},function(n,e,t){var r=t(22);n.exports=function(n){return r(this.__data__,n)>-1}},function(n,e,t){var r=t(22);n.exports=function(n,e){var t=this.__data__,i=r(t,n);return i<0?(++this.size,t.push([n,e])):t[i][1]=e,this}},function(n,e,t){var r=t(21);n.exports=function(){this.__data__=new r,this.size=0}},function(n,e){n.exports=function(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}},function(n,e){n.exports=function(n){return this.__data__.get(n)}},function(n,e){n.exports=function(n){return this.__data__.has(n)}},function(n,e,t){var r=t(21),i=t(40),o=t(42);n.exports=function(n,e){var t=this.__data__;if(t instanceof r){var a=t.__data__;if(!i||a.length<199)return a.push([n,e]),this.size=++t.size,this;t=this.__data__=new o(a)}return t.set(n,e),this.size=t.size,this}},function(n,e,t){var r=t(72),i=t(167),o=t(41),a=t(73),s=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,p=c.toString,d=l.hasOwnProperty,u=RegExp("^"+p.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");n.exports=function(n){return!(!o(n)||i(n))&&(r(n)?u:s).test(a(n))}},function(n,e,t){var r,i=t(168),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";n.exports=function(n){return!!o&&o in n}},function(n,e,t){var r=t(8)["__core-js_shared__"];n.exports=r},function(n,e){n.exports=function(n,e){return null==n?void 0:n[e]}},function(n,e,t){var r=t(171),i=t(21),o=t(40);n.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},function(n,e,t){var r=t(172),i=t(173),o=t(174),a=t(175),s=t(176);function c(n){var e=-1,t=null==n?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=a,c.prototype.set=s,n.exports=c},function(n,e,t){var r=t(23);n.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(n,e){n.exports=function(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}},function(n,e,t){var r=t(23),i=Object.prototype.hasOwnProperty;n.exports=function(n){var e=this.__data__;if(r){var t=e[n];return"__lodash_hash_undefined__"===t?void 0:t}return i.call(e,n)?e[n]:void 0}},function(n,e,t){var r=t(23),i=Object.prototype.hasOwnProperty;n.exports=function(n){var e=this.__data__;return r?void 0!==e[n]:i.call(e,n)}},function(n,e,t){var r=t(23);n.exports=function(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},function(n,e,t){var r=t(24);n.exports=function(n){var e=r(this,n).delete(n);return this.size-=e?1:0,e}},function(n,e){n.exports=function(n){var e=typeof n;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==n:null===n}},function(n,e,t){var r=t(24);n.exports=function(n){return r(this,n).get(n)}},function(n,e,t){var r=t(24);n.exports=function(n){return r(this,n).has(n)}},function(n,e,t){var r=t(24);n.exports=function(n,e){var t=r(this,n),i=t.size;return t.set(n,e),this.size+=t.size==i?0:1,this}},function(n,e,t){var r=t(70),i=t(75),o=t(186),a=t(189),s=t(205),c=t(6),l=t(79),p=t(81),d="[object Object]",u=Object.prototype.hasOwnProperty;n.exports=function(n,e,t,h,g,m){var f=c(n),v=c(e),y=f?"[object Array]":s(n),b=v?"[object Array]":s(e),k=(y="[object Arguments]"==y?d:y)==d,w=(b="[object Arguments]"==b?d:b)==d,_=y==b;if(_&&l(n)){if(!l(e))return!1;f=!0,k=!1}if(_&&!k)return m||(m=new r),f||p(n)?i(n,e,t,h,g,m):o(n,e,y,t,h,g,m);if(!(1&t)){var x=k&&u.call(n,"__wrapped__"),S=w&&u.call(e,"__wrapped__");if(x||S){var E=x?n.value():n,A=S?e.value():e;return m||(m=new r),g(E,A,t,h,m)}}return!!_&&(m||(m=new r),a(n,e,t,h,g,m))}},function(n,e){n.exports=function(n){return this.__data__.set(n,"__lodash_hash_undefined__"),this}},function(n,e){n.exports=function(n){return this.__data__.has(n)}},function(n,e){n.exports=function(n,e){for(var t=-1,r=null==n?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}},function(n,e,t){var r=t(16),i=t(187),o=t(71),a=t(75),s=t(188),c=t(43),l=r?r.prototype:void 0,p=l?l.valueOf:void 0;n.exports=function(n,e,t,r,l,d,u){switch(t){case"[object DataView]":if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(n.byteLength!=e.byteLength||!d(new i(n),new i(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+n,+e);case"[object Error]":return n.name==e.name&&n.message==e.message;case"[object RegExp]":case"[object String]":return n==e+"";case"[object Map]":var h=s;case"[object Set]":var g=1&r;if(h||(h=c),n.size!=e.size&&!g)return!1;var m=u.get(n);if(m)return m==e;r|=2,u.set(n,e);var f=a(h(n),h(e),r,l,d,u);return u.delete(n),f;case"[object Symbol]":if(p)return p.call(n)==p.call(e)}return!1}},function(n,e,t){var r=t(8).Uint8Array;n.exports=r},function(n,e){n.exports=function(n){var e=-1,t=Array(n.size);return n.forEach((function(n,r){t[++e]=[r,n]})),t}},function(n,e,t){var r=t(190),i=Object.prototype.hasOwnProperty;n.exports=function(n,e,t,o,a,s){var c=1&t,l=r(n),p=l.length;if(p!=r(e).length&&!c)return!1;for(var d=p;d--;){var u=l[d];if(!(c?u in e:i.call(e,u)))return!1}var h=s.get(n),g=s.get(e);if(h&&g)return h==e&&g==n;var m=!0;s.set(n,e),s.set(e,n);for(var f=c;++d<p;){var v=n[u=l[d]],y=e[u];if(o)var b=c?o(y,v,u,e,n,s):o(v,y,u,n,e,s);if(!(void 0===b?v===y||a(v,y,t,o,s):b)){m=!1;break}f||(f="constructor"==u)}if(m&&!f){var k=n.constructor,w=e.constructor;k==w||!("constructor"in n)||!("constructor"in e)||"function"==typeof k&&k instanceof k&&"function"==typeof w&&w instanceof w||(m=!1)}return s.delete(n),s.delete(e),m}},function(n,e,t){var r=t(191),i=t(192),o=t(78);n.exports=function(n){return r(n,o,i)}},function(n,e,t){var r=t(68),i=t(6);n.exports=function(n,e,t){var o=e(n);return i(n)?o:r(o,t(n))}},function(n,e,t){var r=t(193),i=t(194),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(n){return null==n?[]:(n=Object(n),r(a(n),(function(e){return o.call(n,e)})))}:i;n.exports=s},function(n,e){n.exports=function(n,e){for(var t=-1,r=null==n?0:n.length,i=0,o=[];++t<r;){var a=n[t];e(a,t,n)&&(o[i++]=a)}return o}},function(n,e){n.exports=function(){return[]}},function(n,e,t){var r=t(196),i=t(39),o=t(6),a=t(79),s=t(80),c=t(81),l=Object.prototype.hasOwnProperty;n.exports=function(n,e){var t=o(n),p=!t&&i(n),d=!t&&!p&&a(n),u=!t&&!p&&!d&&c(n),h=t||p||d||u,g=h?r(n.length,String):[],m=g.length;for(var f in n)!e&&!l.call(n,f)||h&&("length"==f||d&&("offset"==f||"parent"==f)||u&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||s(f,m))||g.push(f);return g}},function(n,e){n.exports=function(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}},function(n,e){n.exports=function(){return!1}},function(n,e,t){var r=t(14),i=t(44),o=t(12),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,n.exports=function(n){return o(n)&&i(n.length)&&!!a[r(n)]}},function(n,e){n.exports=function(n){return function(e){return n(e)}}},function(n,e,t){(function(n){var r=t(69),i=e&&!e.nodeType&&e,o=i&&"object"==typeof n&&n&&!n.nodeType&&n,a=o&&o.exports===i&&r.process,s=function(){try{var n=o&&o.require&&o.require("util").types;return n||a&&a.binding&&a.binding("util")}catch(n){}}();n.exports=s}).call(this,t(50)(n))},function(n,e,t){var r=t(202),i=t(203),o=Object.prototype.hasOwnProperty;n.exports=function(n){if(!r(n))return i(n);var e=[];for(var t in Object(n))o.call(n,t)&&"constructor"!=t&&e.push(t);return e}},function(n,e){var t=Object.prototype;n.exports=function(n){var e=n&&n.constructor;return n===("function"==typeof e&&e.prototype||t)}},function(n,e,t){var r=t(204)(Object.keys,Object);n.exports=r},function(n,e){n.exports=function(n,e){return function(t){return n(e(t))}}},function(n,e,t){var r=t(206),i=t(40),o=t(207),a=t(83),s=t(208),c=t(14),l=t(73),p=l(r),d=l(i),u=l(o),h=l(a),g=l(s),m=c;(r&&"[object DataView]"!=m(new r(new ArrayBuffer(1)))||i&&"[object Map]"!=m(new i)||o&&"[object Promise]"!=m(o.resolve())||a&&"[object Set]"!=m(new a)||s&&"[object WeakMap]"!=m(new s))&&(m=function(n){var e=c(n),t="[object Object]"==e?n.constructor:void 0,r=t?l(t):"";if(r)switch(r){case p:return"[object DataView]";case d:return"[object Map]";case u:return"[object Promise]";case h:return"[object Set]";case g:return"[object WeakMap]"}return e}),n.exports=m},function(n,e,t){var r=t(10)(t(8),"DataView");n.exports=r},function(n,e,t){var r=t(10)(t(8),"Promise");n.exports=r},function(n,e,t){var r=t(10)(t(8),"WeakMap");n.exports=r},function(n,e,t){var r=t(84),i=t(78);n.exports=function(n){for(var e=i(n),t=e.length;t--;){var o=e[t],a=n[o];e[t]=[o,a,r(a)]}return e}},function(n,e,t){var r=t(74),i=t(211),o=t(218),a=t(45),s=t(84),c=t(85),l=t(25);n.exports=function(n,e){return a(n)&&s(e)?c(l(n),e):function(t){var a=i(t,n);return void 0===a&&a===e?o(t,n):r(e,a,3)}}},function(n,e,t){var r=t(86);n.exports=function(n,e,t){var i=null==n?void 0:r(n,e);return void 0===i?t:i}},function(n,e,t){var r=t(213),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r((function(n){var e=[];return 46===n.charCodeAt(0)&&e.push(""),n.replace(i,(function(n,t,r,i){e.push(r?i.replace(o,"$1"):t||n)})),e}));n.exports=a},function(n,e,t){var r=t(214);n.exports=function(n){var e=r(n,(function(n){return 500===t.size&&t.clear(),n})),t=e.cache;return e}},function(n,e,t){var r=t(42);function i(n,e){if("function"!=typeof n||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var t=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=t.cache;if(o.has(i))return o.get(i);var a=n.apply(this,r);return t.cache=o.set(i,a)||o,a};return t.cache=new(i.Cache||r),t}i.Cache=r,n.exports=i},function(n,e,t){var r=t(216);n.exports=function(n){return null==n?"":r(n)}},function(n,e,t){var r=t(16),i=t(217),o=t(6),a=t(46),s=r?r.prototype:void 0,c=s?s.toString:void 0;n.exports=function n(e){if("string"==typeof e)return e;if(o(e))return i(e,n)+"";if(a(e))return c?c.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},function(n,e){n.exports=function(n,e){for(var t=-1,r=null==n?0:n.length,i=Array(r);++t<r;)i[t]=e(n[t],t,n);return i}},function(n,e,t){var r=t(219),i=t(220);n.exports=function(n,e){return null!=n&&i(n,e,r)}},function(n,e){n.exports=function(n,e){return null!=n&&e in Object(n)}},function(n,e,t){var r=t(87),i=t(39),o=t(6),a=t(80),s=t(44),c=t(25);n.exports=function(n,e,t){for(var l=-1,p=(e=r(e,n)).length,d=!1;++l<p;){var u=c(e[l]);if(!(d=null!=n&&t(n,u)))break;n=n[u]}return d||++l!=p?d:!!(p=null==n?0:n.length)&&s(p)&&a(u,p)&&(o(n)||i(n))}},function(n,e,t){var r=t(222),i=t(223),o=t(45),a=t(25);n.exports=function(n){return o(n)?r(a(n)):i(n)}},function(n,e){n.exports=function(n){return function(e){return null==e?void 0:e[n]}}},function(n,e,t){var r=t(86);n.exports=function(n){return function(e){return r(e,n)}}},function(n,e,t){var r=t(47),i=t(225),o=t(227);n.exports=function(n,e){return o(i(n,e,r),n+"")}},function(n,e,t){var r=t(226),i=Math.max;n.exports=function(n,e,t){return e=i(void 0===e?n.length-1:e,0),function(){for(var o=arguments,a=-1,s=i(o.length-e,0),c=Array(s);++a<s;)c[a]=o[e+a];a=-1;for(var l=Array(e+1);++a<e;)l[a]=o[a];return l[e]=t(c),r(n,this,l)}}},function(n,e){n.exports=function(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}},function(n,e,t){var r=t(228),i=t(231)(r);n.exports=i},function(n,e,t){var r=t(229),i=t(230),o=t(47),a=i?function(n,e){return i(n,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o;n.exports=a},function(n,e){n.exports=function(n){return function(){return n}}},function(n,e,t){var r=t(10),i=function(){try{var n=r(Object,"defineProperty");return n({},"",{}),n}catch(n){}}();n.exports=i},function(n,e){var t=Date.now;n.exports=function(n){var e=0,r=0;return function(){var i=t(),o=16-(i-r);if(r=i,o>0){if(++e>=800)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}},function(n,e,t){var r=t(76),i=t(233),o=t(238),a=t(77),s=t(239),c=t(43);n.exports=function(n,e,t){var l=-1,p=i,d=n.length,u=!0,h=[],g=h;if(t)u=!1,p=o;else if(d>=200){var m=e?null:s(n);if(m)return c(m);u=!1,p=a,g=new r}else g=e?[]:h;n:for(;++l<d;){var f=n[l],v=e?e(f):f;if(f=t||0!==f?f:0,u&&v==v){for(var y=g.length;y--;)if(g[y]===v)continue n;e&&g.push(v),h.push(f)}else p(g,v,t)||(g!==h&&g.push(v),h.push(f))}return h}},function(n,e,t){var r=t(234);n.exports=function(n,e){return!!(null==n?0:n.length)&&r(n,e,0)>-1}},function(n,e,t){var r=t(235),i=t(236),o=t(237);n.exports=function(n,e,t){return e==e?o(n,e,t):r(n,i,t)}},function(n,e){n.exports=function(n,e,t,r){for(var i=n.length,o=t+(r?1:-1);r?o--:++o<i;)if(e(n[o],o,n))return o;return-1}},function(n,e){n.exports=function(n){return n!=n}},function(n,e){n.exports=function(n,e,t){for(var r=t-1,i=n.length;++r<i;)if(n[r]===e)return r;return-1}},function(n,e){n.exports=function(n,e,t){for(var r=-1,i=null==n?0:n.length;++r<i;)if(t(e,n[r]))return!0;return!1}},function(n,e,t){var r=t(83),i=t(240),o=t(43),a=r&&1/o(new r([,-0]))[1]==1/0?function(n){return new r(n)}:i;n.exports=a},function(n,e){n.exports=function(){}},function(n,e,t){var r=t(82),i=t(12);n.exports=function(n){return i(n)&&r(n)}},function(n,e,t){},function(n,e,t){},function(n,e,t){"use strict";t(88)},function(n,e,t){"use strict";t(89)},function(n,e,t){},function(n,e,t){},function(n,e,t){"use strict";t(90)},function(n,e,t){"use strict";var r=t(18),i=t(0),o=t(250);r({global:!0},{Reflect:{}}),o(i.Reflect,"Reflect",!0)},function(n,e,t){"use strict";var r=t(13).f,i=t(7),o=t(20)("toStringTag");n.exports=function(n,e,t){n&&!t&&(n=n.prototype),n&&!i(n,o)&&r(n,o,{configurable:!0,value:e})}},function(n,e){},function(n,e){function t(n,e){for(var t=0,r=n.length-1;r>=0;r--){var i=n[r];"."===i?n.splice(r,1):".."===i?(n.splice(r,1),t++):t&&(n.splice(r,1),t--)}if(e)for(;t--;t)n.unshift("..");return n}function r(n,e){if(n.filter)return n.filter(e);for(var t=[],r=0;r<n.length;r++)e(n[r],r,n)&&t.push(n[r]);return t}e.resolve=function(){for(var n="",e=!1,i=arguments.length-1;i>=-1&&!e;i--){var o=i>=0?arguments[i]:process.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(n=o+"/"+n,e="/"===o.charAt(0))}return(e?"/":"")+(n=t(r(n.split("/"),(function(n){return!!n})),!e).join("/"))||"."},e.normalize=function(n){var o=e.isAbsolute(n),a="/"===i(n,-1);return(n=t(r(n.split("/"),(function(n){return!!n})),!o).join("/"))||o||(n="."),n&&a&&(n+="/"),(o?"/":"")+n},e.isAbsolute=function(n){return"/"===n.charAt(0)},e.join=function(){var n=Array.prototype.slice.call(arguments,0);return e.normalize(r(n,(function(n,e){if("string"!=typeof n)throw new TypeError("Arguments to path.join must be strings");return n})).join("/"))},e.relative=function(n,t){function r(n){for(var e=0;e<n.length&&""===n[e];e++);for(var t=n.length-1;t>=0&&""===n[t];t--);return e>t?[]:n.slice(e,t-e+1)}n=e.resolve(n).substr(1),t=e.resolve(t).substr(1);for(var i=r(n.split("/")),o=r(t.split("/")),a=Math.min(i.length,o.length),s=a,c=0;c<a;c++)if(i[c]!==o[c]){s=c;break}var l=[];for(c=s;c<i.length;c++)l.push("..");return(l=l.concat(o.slice(s))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(n){if("string"!=typeof n&&(n+=""),0===n.length)return".";for(var e=n.charCodeAt(0),t=47===e,r=-1,i=!0,o=n.length-1;o>=1;--o)if(47===(e=n.charCodeAt(o))){if(!i){r=o;break}}else i=!1;return-1===r?t?"/":".":t&&1===r?"/":n.slice(0,r)},e.basename=function(n,e){var t=function(n){"string"!=typeof n&&(n+="");var e,t=0,r=-1,i=!0;for(e=n.length-1;e>=0;--e)if(47===n.charCodeAt(e)){if(!i){t=e+1;break}}else-1===r&&(i=!1,r=e+1);return-1===r?"":n.slice(t,r)}(n);return e&&t.substr(-1*e.length)===e&&(t=t.substr(0,t.length-e.length)),t},e.extname=function(n){"string"!=typeof n&&(n+="");for(var e=-1,t=0,r=-1,i=!0,o=0,a=n.length-1;a>=0;--a){var s=n.charCodeAt(a);if(47!==s)-1===r&&(i=!1,r=a+1),46===s?-1===e?e=a:1!==o&&(o=1):-1!==e&&(o=-1);else if(!i){t=a+1;break}}return-1===e||-1===r||0===o||1===o&&e===r-1&&e===t+1?"":n.slice(e,r)};var i="b"==="ab".substr(-1)?function(n,e,t){return n.substr(e,t)}:function(n,e,t){return e<0&&(e=n.length+e),n.substr(e,t)}},function(n,e,t){"use strict";var r=/[|\\{}()[\]^$+*?.]/g;e.escapeRegExpChars=function(n){return n?String(n).replace(r,"\\$&"):""};var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},o=/[&<>'"]/g;function a(n){return i[n]||n}e.escapeXML=function(n){return null==n?"":String(n).replace(o,a)},e.escapeXML.toString=function(){return Function.prototype.toString.call(this)+';\nvar _ENCODE_HTML_RULES = {\n      "&": "&amp;"\n    , "<": "&lt;"\n    , ">": "&gt;"\n    , \'"\': "&#34;"\n    , "\'": "&#39;"\n    }\n  , _MATCH_HTML = /[&<>\'"]/g;\nfunction encode_char(c) {\n  return _ENCODE_HTML_RULES[c] || c;\n};\n'},e.shallowCopy=function(n,e){for(var t in e=e||{})n[t]=e[t];return n},e.shallowCopyFromList=function(n,e,t){for(var r=0;r<t.length;r++){var i=t[r];void 0!==e[i]&&(n[i]=e[i])}return n},e.cache={_data:{},set:function(n,e){this._data[n]=e},get:function(n){return this._data[n]},remove:function(n){delete this._data[n]},reset:function(){this._data={}}}},function(n){n.exports=JSON.parse('{"_from":"ejs@^2.6.1","_id":"ejs@2.7.4","_inBundle":false,"_integrity":"sha512-7vmuyh5+kuUyJKePhQfRQBhXV5Ce+RnaeeQArKu1EAMpL3WbgMt5WG6uQZpEVvYSSsxMXRKOewtDk9RaTKXRlA==","_location":"/ejs","_phantomChildren":{},"_requested":{"type":"range","registry":true,"raw":"ejs@^2.6.1","name":"ejs","escapedName":"ejs","rawSpec":"^2.6.1","saveSpec":null,"fetchSpec":"^2.6.1"},"_requiredBy":["/vuepress-plugin-comment"],"_resolved":"https://registry.npmjs.org/ejs/-/ejs-2.7.4.tgz","_shasum":"48661287573dcc53e366c7a1ae52c3a120eec9ba","_spec":"ejs@^2.6.1","_where":"/home/runner/work/rcbb-blog/rcbb-blog/node_modules/vuepress-plugin-comment","author":{"name":"Matthew Eernisse","email":"mde@fleegix.org","url":"http://fleegix.org"},"bugs":{"url":"https://github.com/mde/ejs/issues"},"bundleDependencies":false,"dependencies":{},"deprecated":false,"description":"Embedded JavaScript templates","devDependencies":{"browserify":"^13.1.1","eslint":"^4.14.0","git-directory-deploy":"^1.5.1","jake":"^10.3.1","jsdoc":"^3.4.0","lru-cache":"^4.0.1","mocha":"^5.0.5","uglify-js":"^3.3.16"},"engines":{"node":">=0.10.0"},"homepage":"https://github.com/mde/ejs","keywords":["template","engine","ejs"],"license":"Apache-2.0","main":"./lib/ejs.js","name":"ejs","repository":{"type":"git","url":"git://github.com/mde/ejs.git"},"scripts":{"postinstall":"node ./postinstall.js","test":"mocha"},"version":"2.7.4"}')},function(n,e,t){"use strict";t(91)},function(n,e,t){"use strict";t(92)},function(n,e,t){"use strict";t.r(e);
/*!
 * Vue.js v2.7.16
 * (c) 2014-2023 Evan You
 * Released under the MIT License.
 */
var r=Object.freeze({}),i=Array.isArray;function o(n){return null==n}function a(n){return null!=n}function s(n){return!0===n}function c(n){return"string"==typeof n||"number"==typeof n||"symbol"==typeof n||"boolean"==typeof n}function l(n){return"function"==typeof n}function p(n){return null!==n&&"object"==typeof n}var d=Object.prototype.toString;function u(n){return"[object Object]"===d.call(n)}function h(n){return"[object RegExp]"===d.call(n)}function g(n){var e=parseFloat(String(n));return e>=0&&Math.floor(e)===e&&isFinite(n)}function m(n){return a(n)&&"function"==typeof n.then&&"function"==typeof n.catch}function f(n){return null==n?"":Array.isArray(n)||u(n)&&n.toString===d?JSON.stringify(n,v,2):String(n)}function v(n,e){return e&&e.__v_isRef?e.value:e}function y(n){var e=parseFloat(n);return isNaN(e)?n:e}function b(n,e){for(var t=Object.create(null),r=n.split(","),i=0;i<r.length;i++)t[r[i]]=!0;return e?function(n){return t[n.toLowerCase()]}:function(n){return t[n]}}b("slot,component",!0);var k=b("key,ref,slot,slot-scope,is");function w(n,e){var t=n.length;if(t){if(e===n[t-1])return void(n.length=t-1);var r=n.indexOf(e);if(r>-1)return n.splice(r,1)}}var _=Object.prototype.hasOwnProperty;function x(n,e){return _.call(n,e)}function S(n){var e=Object.create(null);return function(t){return e[t]||(e[t]=n(t))}}var E=/-(\w)/g,A=S((function(n){return n.replace(E,(function(n,e){return e?e.toUpperCase():""}))})),T=S((function(n){return n.charAt(0).toUpperCase()+n.slice(1)})),j=/\B([A-Z])/g,C=S((function(n){return n.replace(j,"-$1").toLowerCase()}));var I=Function.prototype.bind?function(n,e){return n.bind(e)}:function(n,e){function t(t){var r=arguments.length;return r?r>1?n.apply(e,arguments):n.call(e,t):n.call(e)}return t._length=n.length,t};function z(n,e){e=e||0;for(var t=n.length-e,r=new Array(t);t--;)r[t]=n[t+e];return r}function O(n,e){for(var t in e)n[t]=e[t];return n}function P(n){for(var e={},t=0;t<n.length;t++)n[t]&&O(e,n[t]);return e}function R(n,e,t){}var B=function(n,e,t){return!1},D=function(n){return n};function q(n,e){if(n===e)return!0;var t=p(n),r=p(e);if(!t||!r)return!t&&!r&&String(n)===String(e);try{var i=Array.isArray(n),o=Array.isArray(e);if(i&&o)return n.length===e.length&&n.every((function(n,t){return q(n,e[t])}));if(n instanceof Date&&e instanceof Date)return n.getTime()===e.getTime();if(i||o)return!1;var a=Object.keys(n),s=Object.keys(e);return a.length===s.length&&a.every((function(t){return q(n[t],e[t])}))}catch(n){return!1}}function L(n,e){for(var t=0;t<n.length;t++)if(q(n[t],e))return t;return-1}function M(n){var e=!1;return function(){e||(e=!0,n.apply(this,arguments))}}function N(n,e){return n===e?0===n&&1/n!=1/e:n==n||e==e}var $=["component","directive","filter"],U=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch","renderTracked","renderTriggered"],F={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:B,isReservedAttr:B,isUnknownElement:B,getTagNamespace:R,parsePlatformTagName:D,mustUseProp:B,async:!0,_lifecycleHooks:U},G=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function H(n){var e=(n+"").charCodeAt(0);return 36===e||95===e}function V(n,e,t,r){Object.defineProperty(n,e,{value:t,enumerable:!!r,writable:!0,configurable:!0})}var J=new RegExp("[^".concat(G.source,".$_\\d]"));var W="__proto__"in{},K="undefined"!=typeof window,Q=K&&window.navigator.userAgent.toLowerCase(),Y=Q&&/msie|trident/.test(Q),Z=Q&&Q.indexOf("msie 9.0")>0,X=Q&&Q.indexOf("edge/")>0;Q&&Q.indexOf("android");var nn=Q&&/iphone|ipad|ipod|ios/.test(Q);Q&&/chrome\/\d+/.test(Q),Q&&/phantomjs/.test(Q);var en,tn=Q&&Q.match(/firefox\/(\d+)/),rn={}.watch,on=!1;if(K)try{var an={};Object.defineProperty(an,"passive",{get:function(){on=!0}}),window.addEventListener("test-passive",null,an)}catch(n){}var sn=function(){return void 0===en&&(en=!K&&"undefined"!=typeof global&&(global.process&&"server"===global.process.env.VUE_ENV)),en},cn=K&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function ln(n){return"function"==typeof n&&/native code/.test(n.toString())}var pn,dn="undefined"!=typeof Symbol&&ln(Symbol)&&"undefined"!=typeof Reflect&&ln(Reflect.ownKeys);pn="undefined"!=typeof Set&&ln(Set)?Set:function(){function n(){this.set=Object.create(null)}return n.prototype.has=function(n){return!0===this.set[n]},n.prototype.add=function(n){this.set[n]=!0},n.prototype.clear=function(){this.set=Object.create(null)},n}();var un=null;function hn(n){void 0===n&&(n=null),n||un&&un._scope.off(),un=n,n&&n._scope.on()}var gn=function(){function n(n,e,t,r,i,o,a,s){this.tag=n,this.data=e,this.children=t,this.text=r,this.elm=i,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1}return Object.defineProperty(n.prototype,"child",{get:function(){return this.componentInstance},enumerable:!1,configurable:!0}),n}(),mn=function(n){void 0===n&&(n="");var e=new gn;return e.text=n,e.isComment=!0,e};function fn(n){return new gn(void 0,void 0,void 0,String(n))}function vn(n){var e=new gn(n.tag,n.data,n.children&&n.children.slice(),n.text,n.elm,n.context,n.componentOptions,n.asyncFactory);return e.ns=n.ns,e.isStatic=n.isStatic,e.key=n.key,e.isComment=n.isComment,e.fnContext=n.fnContext,e.fnOptions=n.fnOptions,e.fnScopeId=n.fnScopeId,e.asyncMeta=n.asyncMeta,e.isCloned=!0,e}"function"==typeof SuppressedError&&SuppressedError;var yn=0,bn=[],kn=function(){function n(){this._pending=!1,this.id=yn++,this.subs=[]}return n.prototype.addSub=function(n){this.subs.push(n)},n.prototype.removeSub=function(n){this.subs[this.subs.indexOf(n)]=null,this._pending||(this._pending=!0,bn.push(this))},n.prototype.depend=function(e){n.target&&n.target.addDep(this)},n.prototype.notify=function(n){var e=this.subs.filter((function(n){return n}));for(var t=0,r=e.length;t<r;t++){0,e[t].update()}},n}();kn.target=null;var wn=[];function _n(n){wn.push(n),kn.target=n}function xn(){wn.pop(),kn.target=wn[wn.length-1]}var Sn=Array.prototype,En=Object.create(Sn);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(n){var e=Sn[n];V(En,n,(function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i,o=e.apply(this,t),a=this.__ob__;switch(n){case"push":case"unshift":i=t;break;case"splice":i=t.slice(2)}return i&&a.observeArray(i),a.dep.notify(),o}))}));var An=Object.getOwnPropertyNames(En),Tn={},jn=!0;function Cn(n){jn=n}var In={notify:R,depend:R,addSub:R,removeSub:R},zn=function(){function n(n,e,t){if(void 0===e&&(e=!1),void 0===t&&(t=!1),this.value=n,this.shallow=e,this.mock=t,this.dep=t?In:new kn,this.vmCount=0,V(n,"__ob__",this),i(n)){if(!t)if(W)n.__proto__=En;else for(var r=0,o=An.length;r<o;r++){V(n,s=An[r],En[s])}e||this.observeArray(n)}else{var a=Object.keys(n);for(r=0;r<a.length;r++){var s;Pn(n,s=a[r],Tn,void 0,e,t)}}}return n.prototype.observeArray=function(n){for(var e=0,t=n.length;e<t;e++)On(n[e],!1,this.mock)},n}();function On(n,e,t){return n&&x(n,"__ob__")&&n.__ob__ instanceof zn?n.__ob__:!jn||!t&&sn()||!i(n)&&!u(n)||!Object.isExtensible(n)||n.__v_skip||Nn(n)||n instanceof gn?void 0:new zn(n,e,t)}function Pn(n,e,t,r,o,a,s){void 0===s&&(s=!1);var c=new kn,l=Object.getOwnPropertyDescriptor(n,e);if(!l||!1!==l.configurable){var p=l&&l.get,d=l&&l.set;p&&!d||t!==Tn&&2!==arguments.length||(t=n[e]);var u=o?t&&t.__ob__:On(t,!1,a);return Object.defineProperty(n,e,{enumerable:!0,configurable:!0,get:function(){var e=p?p.call(n):t;return kn.target&&(c.depend(),u&&(u.dep.depend(),i(e)&&Dn(e))),Nn(e)&&!o?e.value:e},set:function(e){var r=p?p.call(n):t;if(N(r,e)){if(d)d.call(n,e);else{if(p)return;if(!o&&Nn(r)&&!Nn(e))return void(r.value=e);t=e}u=o?e&&e.__ob__:On(e,!1,a),c.notify()}}}),c}}function Rn(n,e,t){if(!Mn(n)){var r=n.__ob__;return i(n)&&g(e)?(n.length=Math.max(n.length,e),n.splice(e,1,t),r&&!r.shallow&&r.mock&&On(t,!1,!0),t):e in n&&!(e in Object.prototype)?(n[e]=t,t):n._isVue||r&&r.vmCount?t:r?(Pn(r.value,e,t,void 0,r.shallow,r.mock),r.dep.notify(),t):(n[e]=t,t)}}function Bn(n,e){if(i(n)&&g(e))n.splice(e,1);else{var t=n.__ob__;n._isVue||t&&t.vmCount||Mn(n)||x(n,e)&&(delete n[e],t&&t.dep.notify())}}function Dn(n){for(var e=void 0,t=0,r=n.length;t<r;t++)(e=n[t])&&e.__ob__&&e.__ob__.dep.depend(),i(e)&&Dn(e)}function qn(n){return Ln(n,!0),V(n,"__v_isShallow",!0),n}function Ln(n,e){if(!Mn(n)){On(n,e,sn());0}}function Mn(n){return!(!n||!n.__v_isReadonly)}function Nn(n){return!(!n||!0!==n.__v_isRef)}function $n(n,e,t){Object.defineProperty(n,t,{enumerable:!0,configurable:!0,get:function(){var n=e[t];if(Nn(n))return n.value;var r=n&&n.__ob__;return r&&r.dep.depend(),n},set:function(n){var r=e[t];Nn(r)&&!Nn(n)?r.value=n:e[t]=n}})}"".concat("watcher"," callback"),"".concat("watcher"," getter"),"".concat("watcher"," cleanup");var Un;var Fn=function(){function n(n){void 0===n&&(n=!1),this.detached=n,this.active=!0,this.effects=[],this.cleanups=[],this.parent=Un,!n&&Un&&(this.index=(Un.scopes||(Un.scopes=[])).push(this)-1)}return n.prototype.run=function(n){if(this.active){var e=Un;try{return Un=this,n()}finally{Un=e}}else 0},n.prototype.on=function(){Un=this},n.prototype.off=function(){Un=this.parent},n.prototype.stop=function(n){if(this.active){var e=void 0,t=void 0;for(e=0,t=this.effects.length;e<t;e++)this.effects[e].teardown();for(e=0,t=this.cleanups.length;e<t;e++)this.cleanups[e]();if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!n){var r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this.active=!1}},n}();function Gn(n){var e=n._provided,t=n.$parent&&n.$parent._provided;return t===e?n._provided=Object.create(t):e}var Hn=S((function(n){var e="&"===n.charAt(0),t="~"===(n=e?n.slice(1):n).charAt(0),r="!"===(n=t?n.slice(1):n).charAt(0);return{name:n=r?n.slice(1):n,once:t,capture:r,passive:e}}));function Vn(n,e){function t(){var n=t.fns;if(!i(n))return je(n,null,arguments,e,"v-on handler");for(var r=n.slice(),o=0;o<r.length;o++)je(r[o],null,arguments,e,"v-on handler")}return t.fns=n,t}function Jn(n,e,t,r,i,a){var c,l,p,d;for(c in n)l=n[c],p=e[c],d=Hn(c),o(l)||(o(p)?(o(l.fns)&&(l=n[c]=Vn(l,a)),s(d.once)&&(l=n[c]=i(d.name,l,d.capture)),t(d.name,l,d.capture,d.passive,d.params)):l!==p&&(p.fns=l,n[c]=p));for(c in e)o(n[c])&&r((d=Hn(c)).name,e[c],d.capture)}function Wn(n,e,t){var r;n instanceof gn&&(n=n.data.hook||(n.data.hook={}));var i=n[e];function c(){t.apply(this,arguments),w(r.fns,c)}o(i)?r=Vn([c]):a(i.fns)&&s(i.merged)?(r=i).fns.push(c):r=Vn([i,c]),r.merged=!0,n[e]=r}function Kn(n,e,t,r,i){if(a(e)){if(x(e,t))return n[t]=e[t],i||delete e[t],!0;if(x(e,r))return n[t]=e[r],i||delete e[r],!0}return!1}function Qn(n){return c(n)?[fn(n)]:i(n)?function n(e,t){var r,l,p,d,u=[];for(r=0;r<e.length;r++)o(l=e[r])||"boolean"==typeof l||(p=u.length-1,d=u[p],i(l)?l.length>0&&(Yn((l=n(l,"".concat(t||"","_").concat(r)))[0])&&Yn(d)&&(u[p]=fn(d.text+l[0].text),l.shift()),u.push.apply(u,l)):c(l)?Yn(d)?u[p]=fn(d.text+l):""!==l&&u.push(fn(l)):Yn(l)&&Yn(d)?u[p]=fn(d.text+l.text):(s(e._isVList)&&a(l.tag)&&o(l.key)&&a(t)&&(l.key="__vlist".concat(t,"_").concat(r,"__")),u.push(l)));return u}(n):void 0}function Yn(n){return a(n)&&a(n.text)&&!1===n.isComment}function Zn(n,e){var t,r,o,s,c=null;if(i(n)||"string"==typeof n)for(c=new Array(n.length),t=0,r=n.length;t<r;t++)c[t]=e(n[t],t);else if("number"==typeof n)for(c=new Array(n),t=0;t<n;t++)c[t]=e(t+1,t);else if(p(n))if(dn&&n[Symbol.iterator]){c=[];for(var l=n[Symbol.iterator](),d=l.next();!d.done;)c.push(e(d.value,c.length)),d=l.next()}else for(o=Object.keys(n),c=new Array(o.length),t=0,r=o.length;t<r;t++)s=o[t],c[t]=e(n[s],s,t);return a(c)||(c=[]),c._isVList=!0,c}function Xn(n,e,t,r){var i,o=this.$scopedSlots[n];o?(t=t||{},r&&(t=O(O({},r),t)),i=o(t)||(l(e)?e():e)):i=this.$slots[n]||(l(e)?e():e);var a=t&&t.slot;return a?this.$createElement("template",{slot:a},i):i}function ne(n){return zt(this.$options,"filters",n,!0)||D}function ee(n,e){return i(n)?-1===n.indexOf(e):n!==e}function te(n,e,t,r,i){var o=F.keyCodes[e]||t;return i&&r&&!F.keyCodes[e]?ee(i,r):o?ee(o,n):r?C(r)!==e:void 0===n}function re(n,e,t,r,o){if(t)if(p(t)){i(t)&&(t=P(t));var a=void 0,s=function(i){if("class"===i||"style"===i||k(i))a=n;else{var s=n.attrs&&n.attrs.type;a=r||F.mustUseProp(e,s,i)?n.domProps||(n.domProps={}):n.attrs||(n.attrs={})}var c=A(i),l=C(i);c in a||l in a||(a[i]=t[i],o&&((n.on||(n.on={}))["update:".concat(i)]=function(n){t[i]=n}))};for(var c in t)s(c)}else;return n}function ie(n,e){var t=this._staticTrees||(this._staticTrees=[]),r=t[n];return r&&!e||ae(r=t[n]=this.$options.staticRenderFns[n].call(this._renderProxy,this._c,this),"__static__".concat(n),!1),r}function oe(n,e,t){return ae(n,"__once__".concat(e).concat(t?"_".concat(t):""),!0),n}function ae(n,e,t){if(i(n))for(var r=0;r<n.length;r++)n[r]&&"string"!=typeof n[r]&&se(n[r],"".concat(e,"_").concat(r),t);else se(n,e,t)}function se(n,e,t){n.isStatic=!0,n.key=e,n.isOnce=t}function ce(n,e){if(e)if(u(e)){var t=n.on=n.on?O({},n.on):{};for(var r in e){var i=t[r],o=e[r];t[r]=i?[].concat(i,o):o}}else;return n}function le(n,e,t,r){e=e||{$stable:!t};for(var o=0;o<n.length;o++){var a=n[o];i(a)?le(a,e,t):a&&(a.proxy&&(a.fn.proxy=!0),e[a.key]=a.fn)}return r&&(e.$key=r),e}function pe(n,e){for(var t=0;t<e.length;t+=2){var r=e[t];"string"==typeof r&&r&&(n[e[t]]=e[t+1])}return n}function de(n,e){return"string"==typeof n?e+n:n}function ue(n){n._o=oe,n._n=y,n._s=f,n._l=Zn,n._t=Xn,n._q=q,n._i=L,n._m=ie,n._f=ne,n._k=te,n._b=re,n._v=fn,n._e=mn,n._u=le,n._g=ce,n._d=pe,n._p=de}function he(n,e){if(!n||!n.length)return{};for(var t={},r=0,i=n.length;r<i;r++){var o=n[r],a=o.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,o.context!==e&&o.fnContext!==e||!a||null==a.slot)(t.default||(t.default=[])).push(o);else{var s=a.slot,c=t[s]||(t[s]=[]);"template"===o.tag?c.push.apply(c,o.children||[]):c.push(o)}}for(var l in t)t[l].every(ge)&&delete t[l];return t}function ge(n){return n.isComment&&!n.asyncFactory||" "===n.text}function me(n){return n.isComment&&n.asyncFactory}function fe(n,e,t,i){var o,a=Object.keys(t).length>0,s=e?!!e.$stable:!a,c=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(s&&i&&i!==r&&c===i.$key&&!a&&!i.$hasNormal)return i;for(var l in o={},e)e[l]&&"$"!==l[0]&&(o[l]=ve(n,t,l,e[l]))}else o={};for(var p in t)p in o||(o[p]=ye(t,p));return e&&Object.isExtensible(e)&&(e._normalized=o),V(o,"$stable",s),V(o,"$key",c),V(o,"$hasNormal",a),o}function ve(n,e,t,r){var o=function(){var e=un;hn(n);var t=arguments.length?r.apply(null,arguments):r({}),o=(t=t&&"object"==typeof t&&!i(t)?[t]:Qn(t))&&t[0];return hn(e),t&&(!o||1===t.length&&o.isComment&&!me(o))?void 0:t};return r.proxy&&Object.defineProperty(e,t,{get:o,enumerable:!0,configurable:!0}),o}function ye(n,e){return function(){return n[e]}}function be(n){return{get attrs(){if(!n._attrsProxy){var e=n._attrsProxy={};V(e,"_v_attr_proxy",!0),ke(e,n.$attrs,r,n,"$attrs")}return n._attrsProxy},get listeners(){n._listenersProxy||ke(n._listenersProxy={},n.$listeners,r,n,"$listeners");return n._listenersProxy},get slots(){return function(n){n._slotsProxy||_e(n._slotsProxy={},n.$scopedSlots);return n._slotsProxy}(n)},emit:I(n.$emit,n),expose:function(e){e&&Object.keys(e).forEach((function(t){return $n(n,e,t)}))}}}function ke(n,e,t,r,i){var o=!1;for(var a in e)a in n?e[a]!==t[a]&&(o=!0):(o=!0,we(n,a,r,i));for(var a in n)a in e||(o=!0,delete n[a]);return o}function we(n,e,t,r){Object.defineProperty(n,e,{enumerable:!0,configurable:!0,get:function(){return t[r][e]}})}function _e(n,e){for(var t in e)n[t]=e[t];for(var t in n)t in e||delete n[t]}var xe=null;function Se(n,e){return(n.__esModule||dn&&"Module"===n[Symbol.toStringTag])&&(n=n.default),p(n)?e.extend(n):n}function Ee(n){if(i(n))for(var e=0;e<n.length;e++){var t=n[e];if(a(t)&&(a(t.componentOptions)||me(t)))return t}}function Ae(n,e,t,r,d,u){return(i(t)||c(t))&&(d=r,r=t,t=void 0),s(u)&&(d=2),function(n,e,t,r,c){if(a(t)&&a(t.__ob__))return mn();a(t)&&a(t.is)&&(e=t.is);if(!e)return mn();0;i(r)&&l(r[0])&&((t=t||{}).scopedSlots={default:r[0]},r.length=0);2===c?r=Qn(r):1===c&&(r=function(n){for(var e=0;e<n.length;e++)if(i(n[e]))return Array.prototype.concat.apply([],n);return n}(r));var d,u;if("string"==typeof e){var h=void 0;u=n.$vnode&&n.$vnode.ns||F.getTagNamespace(e),d=F.isReservedTag(e)?new gn(F.parsePlatformTagName(e),t,r,void 0,void 0,n):t&&t.pre||!a(h=zt(n.$options,"components",e))?new gn(e,t,r,void 0,void 0,n):wt(h,t,n,r,e)}else d=wt(e,t,n,r);return i(d)?d:a(d)?(a(u)&&function n(e,t,r){e.ns=t,"foreignObject"===e.tag&&(t=void 0,r=!0);if(a(e.children))for(var i=0,c=e.children.length;i<c;i++){var l=e.children[i];a(l.tag)&&(o(l.ns)||s(r)&&"svg"!==l.tag)&&n(l,t,r)}}(d,u),a(t)&&function(n){p(n.style)&&Fe(n.style);p(n.class)&&Fe(n.class)}(t),d):mn()}(n,e,t,r,d)}function Te(n,e,t){_n();try{if(e)for(var r=e;r=r.$parent;){var i=r.$options.errorCaptured;if(i)for(var o=0;o<i.length;o++)try{if(!1===i[o].call(r,n,e,t))return}catch(n){Ce(n,r,"errorCaptured hook")}}Ce(n,e,t)}finally{xn()}}function je(n,e,t,r,i){var o;try{(o=t?n.apply(e,t):n.call(e))&&!o._isVue&&m(o)&&!o._handled&&(o.catch((function(n){return Te(n,r,i+" (Promise/async)")})),o._handled=!0)}catch(n){Te(n,r,i)}return o}function Ce(n,e,t){if(F.errorHandler)try{return F.errorHandler.call(null,n,e,t)}catch(e){e!==n&&Ie(e,null,"config.errorHandler")}Ie(n,e,t)}function Ie(n,e,t){if(!K||"undefined"==typeof console)throw n;console.error(n)}var ze,Oe=!1,Pe=[],Re=!1;function Be(){Re=!1;var n=Pe.slice(0);Pe.length=0;for(var e=0;e<n.length;e++)n[e]()}if("undefined"!=typeof Promise&&ln(Promise)){var De=Promise.resolve();ze=function(){De.then(Be),nn&&setTimeout(R)},Oe=!0}else if(Y||"undefined"==typeof MutationObserver||!ln(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())ze="undefined"!=typeof setImmediate&&ln(setImmediate)?function(){setImmediate(Be)}:function(){setTimeout(Be,0)};else{var qe=1,Le=new MutationObserver(Be),Me=document.createTextNode(String(qe));Le.observe(Me,{characterData:!0}),ze=function(){qe=(qe+1)%2,Me.data=String(qe)},Oe=!0}function Ne(n,e){var t;if(Pe.push((function(){if(n)try{n.call(e)}catch(n){Te(n,e,"nextTick")}else t&&t(e)})),Re||(Re=!0,ze()),!n&&"undefined"!=typeof Promise)return new Promise((function(n){t=n}))}function $e(n){return function(e,t){if(void 0===t&&(t=un),t)return function(n,e,t){var r=n.$options;r[e]=Tt(r[e],t)}(t,n,e)}}$e("beforeMount"),$e("mounted"),$e("beforeUpdate"),$e("updated"),$e("beforeDestroy"),$e("destroyed"),$e("activated"),$e("deactivated"),$e("serverPrefetch"),$e("renderTracked"),$e("renderTriggered"),$e("errorCaptured");var Ue=new pn;function Fe(n){return function n(e,t){var r,o,a=i(e);if(!a&&!p(e)||e.__v_skip||Object.isFrozen(e)||e instanceof gn)return;if(e.__ob__){var s=e.__ob__.dep.id;if(t.has(s))return;t.add(s)}if(a)for(r=e.length;r--;)n(e[r],t);else if(Nn(e))n(e.value,t);else for(o=Object.keys(e),r=o.length;r--;)n(e[o[r]],t)}(n,Ue),Ue.clear(),n}var Ge,He=0,Ve=function(){function n(n,e,t,r,i){var o,a;o=this,void 0===(a=Un&&!Un._vm?Un:n?n._scope:void 0)&&(a=Un),a&&a.active&&a.effects.push(o),(this.vm=n)&&i&&(n._watcher=this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=t,this.id=++He,this.active=!0,this.post=!1,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new pn,this.newDepIds=new pn,this.expression="",l(e)?this.getter=e:(this.getter=function(n){if(!J.test(n)){var e=n.split(".");return function(n){for(var t=0;t<e.length;t++){if(!n)return;n=n[e[t]]}return n}}}(e),this.getter||(this.getter=R)),this.value=this.lazy?void 0:this.get()}return n.prototype.get=function(){var n;_n(this);var e=this.vm;try{n=this.getter.call(e,e)}catch(n){if(!this.user)throw n;Te(n,e,'getter for watcher "'.concat(this.expression,'"'))}finally{this.deep&&Fe(n),xn(),this.cleanupDeps()}return n},n.prototype.addDep=function(n){var e=n.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(n),this.depIds.has(e)||n.addSub(this))},n.prototype.cleanupDeps=function(){for(var n=this.deps.length;n--;){var e=this.deps[n];this.newDepIds.has(e.id)||e.removeSub(this)}var t=this.depIds;this.depIds=this.newDepIds,this.newDepIds=t,this.newDepIds.clear(),t=this.deps,this.deps=this.newDeps,this.newDeps=t,this.newDeps.length=0},n.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():ht(this)},n.prototype.run=function(){if(this.active){var n=this.get();if(n!==this.value||p(n)||this.deep){var e=this.value;if(this.value=n,this.user){var t='callback for watcher "'.concat(this.expression,'"');je(this.cb,this.vm,[n,e],this.vm,t)}else this.cb.call(this.vm,n,e)}}},n.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},n.prototype.depend=function(){for(var n=this.deps.length;n--;)this.deps[n].depend()},n.prototype.teardown=function(){if(this.vm&&!this.vm._isBeingDestroyed&&w(this.vm._scope.effects,this),this.active){for(var n=this.deps.length;n--;)this.deps[n].removeSub(this);this.active=!1,this.onStop&&this.onStop()}},n}();function Je(n,e){Ge.$on(n,e)}function We(n,e){Ge.$off(n,e)}function Ke(n,e){var t=Ge;return function r(){var i=e.apply(null,arguments);null!==i&&t.$off(n,r)}}function Qe(n,e,t){Ge=n,Jn(e,t||{},Je,We,Ke,n),Ge=void 0}var Ye=null;function Ze(n){var e=Ye;return Ye=n,function(){Ye=e}}function Xe(n){for(;n&&(n=n.$parent);)if(n._inactive)return!0;return!1}function nt(n,e){if(e){if(n._directInactive=!1,Xe(n))return}else if(n._directInactive)return;if(n._inactive||null===n._inactive){n._inactive=!1;for(var t=0;t<n.$children.length;t++)nt(n.$children[t]);et(n,"activated")}}function et(n,e,t,r){void 0===r&&(r=!0),_n();var i=un,o=Un;r&&hn(n);var a=n.$options[e],s="".concat(e," hook");if(a)for(var c=0,l=a.length;c<l;c++)je(a[c],n,t||null,n,s);n._hasHookEvent&&n.$emit("hook:"+e),r&&(hn(i),o&&o.on()),xn()}var tt=[],rt=[],it={},ot=!1,at=!1,st=0;var ct=0,lt=Date.now;if(K&&!Y){var pt=window.performance;pt&&"function"==typeof pt.now&&lt()>document.createEvent("Event").timeStamp&&(lt=function(){return pt.now()})}var dt=function(n,e){if(n.post){if(!e.post)return 1}else if(e.post)return-1;return n.id-e.id};function ut(){var n,e;for(ct=lt(),at=!0,tt.sort(dt),st=0;st<tt.length;st++)(n=tt[st]).before&&n.before(),e=n.id,it[e]=null,n.run();var t=rt.slice(),r=tt.slice();st=tt.length=rt.length=0,it={},ot=at=!1,function(n){for(var e=0;e<n.length;e++)n[e]._inactive=!0,nt(n[e],!0)}(t),function(n){var e=n.length;for(;e--;){var t=n[e],r=t.vm;r&&r._watcher===t&&r._isMounted&&!r._isDestroyed&&et(r,"updated")}}(r),function(){for(var n=0;n<bn.length;n++){var e=bn[n];e.subs=e.subs.filter((function(n){return n})),e._pending=!1}bn.length=0}(),cn&&F.devtools&&cn.emit("flush")}function ht(n){var e=n.id;if(null==it[e]&&(n!==kn.target||!n.noRecurse)){if(it[e]=!0,at){for(var t=tt.length-1;t>st&&tt[t].id>n.id;)t--;tt.splice(t+1,0,n)}else tt.push(n);ot||(ot=!0,Ne(ut))}}function gt(n,e){if(n){for(var t=Object.create(null),r=dn?Reflect.ownKeys(n):Object.keys(n),i=0;i<r.length;i++){var o=r[i];if("__ob__"!==o){var a=n[o].from;if(a in e._provided)t[o]=e._provided[a];else if("default"in n[o]){var s=n[o].default;t[o]=l(s)?s.call(e):s}else 0}}return t}}function mt(n,e,t,o,a){var c,l=this,p=a.options;x(o,"_uid")?(c=Object.create(o))._original=o:(c=o,o=o._original);var d=s(p._compiled),u=!d;this.data=n,this.props=e,this.children=t,this.parent=o,this.listeners=n.on||r,this.injections=gt(p.inject,o),this.slots=function(){return l.$slots||fe(o,n.scopedSlots,l.$slots=he(t,o)),l.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return fe(o,n.scopedSlots,this.slots())}}),d&&(this.$options=p,this.$slots=this.slots(),this.$scopedSlots=fe(o,n.scopedSlots,this.$slots)),p._scopeId?this._c=function(n,e,t,r){var a=Ae(c,n,e,t,r,u);return a&&!i(a)&&(a.fnScopeId=p._scopeId,a.fnContext=o),a}:this._c=function(n,e,t,r){return Ae(c,n,e,t,r,u)}}function ft(n,e,t,r,i){var o=vn(n);return o.fnContext=t,o.fnOptions=r,e.slot&&((o.data||(o.data={})).slot=e.slot),o}function vt(n,e){for(var t in e)n[A(t)]=e[t]}function yt(n){return n.name||n.__name||n._componentTag}ue(mt.prototype);var bt={init:function(n,e){if(n.componentInstance&&!n.componentInstance._isDestroyed&&n.data.keepAlive){var t=n;bt.prepatch(t,t)}else{(n.componentInstance=function(n,e){var t={_isComponent:!0,_parentVnode:n,parent:e},r=n.data.inlineTemplate;a(r)&&(t.render=r.render,t.staticRenderFns=r.staticRenderFns);return new n.componentOptions.Ctor(t)}(n,Ye)).$mount(e?n.elm:void 0,e)}},prepatch:function(n,e){var t=e.componentOptions;!function(n,e,t,i,o){var a=i.data.scopedSlots,s=n.$scopedSlots,c=!!(a&&!a.$stable||s!==r&&!s.$stable||a&&n.$scopedSlots.$key!==a.$key||!a&&n.$scopedSlots.$key),l=!!(o||n.$options._renderChildren||c),p=n.$vnode;n.$options._parentVnode=i,n.$vnode=i,n._vnode&&(n._vnode.parent=i),n.$options._renderChildren=o;var d=i.data.attrs||r;n._attrsProxy&&ke(n._attrsProxy,d,p.data&&p.data.attrs||r,n,"$attrs")&&(l=!0),n.$attrs=d,t=t||r;var u=n.$options._parentListeners;if(n._listenersProxy&&ke(n._listenersProxy,t,u||r,n,"$listeners"),n.$listeners=n.$options._parentListeners=t,Qe(n,t,u),e&&n.$options.props){Cn(!1);for(var h=n._props,g=n.$options._propKeys||[],m=0;m<g.length;m++){var f=g[m],v=n.$options.props;h[f]=Ot(f,v,e,n)}Cn(!0),n.$options.propsData=e}l&&(n.$slots=he(o,i.context),n.$forceUpdate())}(e.componentInstance=n.componentInstance,t.propsData,t.listeners,e,t.children)},insert:function(n){var e,t=n.context,r=n.componentInstance;r._isMounted||(r._isMounted=!0,et(r,"mounted")),n.data.keepAlive&&(t._isMounted?((e=r)._inactive=!1,rt.push(e)):nt(r,!0))},destroy:function(n){var e=n.componentInstance;e._isDestroyed||(n.data.keepAlive?function n(e,t){if(!(t&&(e._directInactive=!0,Xe(e))||e._inactive)){e._inactive=!0;for(var r=0;r<e.$children.length;r++)n(e.$children[r]);et(e,"deactivated")}}(e,!0):e.$destroy())}},kt=Object.keys(bt);function wt(n,e,t,c,l){if(!o(n)){var d=t.$options._base;if(p(n)&&(n=d.extend(n)),"function"==typeof n){var u;if(o(n.cid)&&void 0===(n=function(n,e){if(s(n.error)&&a(n.errorComp))return n.errorComp;if(a(n.resolved))return n.resolved;var t=xe;if(t&&a(n.owners)&&-1===n.owners.indexOf(t)&&n.owners.push(t),s(n.loading)&&a(n.loadingComp))return n.loadingComp;if(t&&!a(n.owners)){var r=n.owners=[t],i=!0,c=null,l=null;t.$on("hook:destroyed",(function(){return w(r,t)}));var d=function(n){for(var e=0,t=r.length;e<t;e++)r[e].$forceUpdate();n&&(r.length=0,null!==c&&(clearTimeout(c),c=null),null!==l&&(clearTimeout(l),l=null))},u=M((function(t){n.resolved=Se(t,e),i?r.length=0:d(!0)})),h=M((function(e){a(n.errorComp)&&(n.error=!0,d(!0))})),g=n(u,h);return p(g)&&(m(g)?o(n.resolved)&&g.then(u,h):m(g.component)&&(g.component.then(u,h),a(g.error)&&(n.errorComp=Se(g.error,e)),a(g.loading)&&(n.loadingComp=Se(g.loading,e),0===g.delay?n.loading=!0:c=setTimeout((function(){c=null,o(n.resolved)&&o(n.error)&&(n.loading=!0,d(!1))}),g.delay||200)),a(g.timeout)&&(l=setTimeout((function(){l=null,o(n.resolved)&&h(null)}),g.timeout)))),i=!1,n.loading?n.loadingComp:n.resolved}}(u=n,d)))return function(n,e,t,r,i){var o=mn();return o.asyncFactory=n,o.asyncMeta={data:e,context:t,children:r,tag:i},o}(u,e,t,c,l);e=e||{},Vt(n),a(e.model)&&function(n,e){var t=n.model&&n.model.prop||"value",r=n.model&&n.model.event||"input";(e.attrs||(e.attrs={}))[t]=e.model.value;var o=e.on||(e.on={}),s=o[r],c=e.model.callback;a(s)?(i(s)?-1===s.indexOf(c):s!==c)&&(o[r]=[c].concat(s)):o[r]=c}(n.options,e);var h=function(n,e,t){var r=e.options.props;if(!o(r)){var i={},s=n.attrs,c=n.props;if(a(s)||a(c))for(var l in r){var p=C(l);Kn(i,c,l,p,!0)||Kn(i,s,l,p,!1)}return i}}(e,n);if(s(n.options.functional))return function(n,e,t,o,s){var c=n.options,l={},p=c.props;if(a(p))for(var d in p)l[d]=Ot(d,p,e||r);else a(t.attrs)&&vt(l,t.attrs),a(t.props)&&vt(l,t.props);var u=new mt(t,l,s,o,n),h=c.render.call(null,u._c,u);if(h instanceof gn)return ft(h,t,u.parent,c,u);if(i(h)){for(var g=Qn(h)||[],m=new Array(g.length),f=0;f<g.length;f++)m[f]=ft(g[f],t,u.parent,c,u);return m}}(n,h,e,t,c);var g=e.on;if(e.on=e.nativeOn,s(n.options.abstract)){var f=e.slot;e={},f&&(e.slot=f)}!function(n){for(var e=n.hook||(n.hook={}),t=0;t<kt.length;t++){var r=kt[t],i=e[r],o=bt[r];i===o||i&&i._merged||(e[r]=i?_t(o,i):o)}}(e);var v=yt(n.options)||l;return new gn("vue-component-".concat(n.cid).concat(v?"-".concat(v):""),e,void 0,void 0,void 0,t,{Ctor:n,propsData:h,listeners:g,tag:l,children:c},u)}}}function _t(n,e){var t=function(t,r){n(t,r),e(t,r)};return t._merged=!0,t}var xt=R,St=F.optionMergeStrategies;function Et(n,e,t){if(void 0===t&&(t=!0),!e)return n;for(var r,i,o,a=dn?Reflect.ownKeys(e):Object.keys(e),s=0;s<a.length;s++)"__ob__"!==(r=a[s])&&(i=n[r],o=e[r],t&&x(n,r)?i!==o&&u(i)&&u(o)&&Et(i,o):Rn(n,r,o));return n}function At(n,e,t){return t?function(){var r=l(e)?e.call(t,t):e,i=l(n)?n.call(t,t):n;return r?Et(r,i):i}:e?n?function(){return Et(l(e)?e.call(this,this):e,l(n)?n.call(this,this):n)}:e:n}function Tt(n,e){var t=e?n?n.concat(e):i(e)?e:[e]:n;return t?function(n){for(var e=[],t=0;t<n.length;t++)-1===e.indexOf(n[t])&&e.push(n[t]);return e}(t):t}function jt(n,e,t,r){var i=Object.create(n||null);return e?O(i,e):i}St.data=function(n,e,t){return t?At(n,e,t):e&&"function"!=typeof e?n:At(n,e)},U.forEach((function(n){St[n]=Tt})),$.forEach((function(n){St[n+"s"]=jt})),St.watch=function(n,e,t,r){if(n===rn&&(n=void 0),e===rn&&(e=void 0),!e)return Object.create(n||null);if(!n)return e;var o={};for(var a in O(o,n),e){var s=o[a],c=e[a];s&&!i(s)&&(s=[s]),o[a]=s?s.concat(c):i(c)?c:[c]}return o},St.props=St.methods=St.inject=St.computed=function(n,e,t,r){if(!n)return e;var i=Object.create(null);return O(i,n),e&&O(i,e),i},St.provide=function(n,e){return n?function(){var t=Object.create(null);return Et(t,l(n)?n.call(this):n),e&&Et(t,l(e)?e.call(this):e,!1),t}:e};var Ct=function(n,e){return void 0===e?n:e};function It(n,e,t){if(l(e)&&(e=e.options),function(n,e){var t=n.props;if(t){var r,o,a={};if(i(t))for(r=t.length;r--;)"string"==typeof(o=t[r])&&(a[A(o)]={type:null});else if(u(t))for(var s in t)o=t[s],a[A(s)]=u(o)?o:{type:o};else 0;n.props=a}}(e),function(n,e){var t=n.inject;if(t){var r=n.inject={};if(i(t))for(var o=0;o<t.length;o++)r[t[o]]={from:t[o]};else if(u(t))for(var a in t){var s=t[a];r[a]=u(s)?O({from:a},s):{from:s}}else 0}}(e),function(n){var e=n.directives;if(e)for(var t in e){var r=e[t];l(r)&&(e[t]={bind:r,update:r})}}(e),!e._base&&(e.extends&&(n=It(n,e.extends,t)),e.mixins))for(var r=0,o=e.mixins.length;r<o;r++)n=It(n,e.mixins[r],t);var a,s={};for(a in n)c(a);for(a in e)x(n,a)||c(a);function c(r){var i=St[r]||Ct;s[r]=i(n[r],e[r],t,r)}return s}function zt(n,e,t,r){if("string"==typeof t){var i=n[e];if(x(i,t))return i[t];var o=A(t);if(x(i,o))return i[o];var a=T(o);return x(i,a)?i[a]:i[t]||i[o]||i[a]}}function Ot(n,e,t,r){var i=e[n],o=!x(t,n),a=t[n],s=Dt(Boolean,i.type);if(s>-1)if(o&&!x(i,"default"))a=!1;else if(""===a||a===C(n)){var c=Dt(String,i.type);(c<0||s<c)&&(a=!0)}if(void 0===a){a=function(n,e,t){if(!x(e,"default"))return;var r=e.default;0;if(n&&n.$options.propsData&&void 0===n.$options.propsData[t]&&void 0!==n._props[t])return n._props[t];return l(r)&&"Function"!==Rt(e.type)?r.call(n):r}(r,i,n);var p=jn;Cn(!0),On(a),Cn(p)}return a}var Pt=/^\s*function (\w+)/;function Rt(n){var e=n&&n.toString().match(Pt);return e?e[1]:""}function Bt(n,e){return Rt(n)===Rt(e)}function Dt(n,e){if(!i(e))return Bt(e,n)?0:-1;for(var t=0,r=e.length;t<r;t++)if(Bt(e[t],n))return t;return-1}var qt={enumerable:!0,configurable:!0,get:R,set:R};function Lt(n,e,t){qt.get=function(){return this[e][t]},qt.set=function(n){this[e][t]=n},Object.defineProperty(n,t,qt)}function Mt(n){var e=n.$options;if(e.props&&function(n,e){var t=n.$options.propsData||{},r=n._props=qn({}),i=n.$options._propKeys=[];n.$parent&&Cn(!1);var o=function(o){i.push(o);var a=Ot(o,e,t,n);Pn(r,o,a,void 0,!0),o in n||Lt(n,"_props",o)};for(var a in e)o(a);Cn(!0)}(n,e.props),function(n){var e=n.$options,t=e.setup;if(t){var r=n._setupContext=be(n);hn(n),_n();var i=je(t,null,[n._props||qn({}),r],n,"setup");if(xn(),hn(),l(i))e.render=i;else if(p(i))if(n._setupState=i,i.__sfc){var o=n._setupProxy={};for(var a in i)"__sfc"!==a&&$n(o,i,a)}else for(var a in i)H(a)||$n(n,i,a);else 0}}(n),e.methods&&function(n,e){n.$options.props;for(var t in e)n[t]="function"!=typeof e[t]?R:I(e[t],n)}(n,e.methods),e.data)!function(n){var e=n.$options.data;u(e=n._data=l(e)?function(n,e){_n();try{return n.call(e,e)}catch(n){return Te(n,e,"data()"),{}}finally{xn()}}(e,n):e||{})||(e={});var t=Object.keys(e),r=n.$options.props,i=(n.$options.methods,t.length);for(;i--;){var o=t[i];0,r&&x(r,o)||H(o)||Lt(n,"_data",o)}var a=On(e);a&&a.vmCount++}(n);else{var t=On(n._data={});t&&t.vmCount++}e.computed&&function(n,e){var t=n._computedWatchers=Object.create(null),r=sn();for(var i in e){var o=e[i],a=l(o)?o:o.get;0,r||(t[i]=new Ve(n,a||R,R,Nt)),i in n||$t(n,i,o)}}(n,e.computed),e.watch&&e.watch!==rn&&function(n,e){for(var t in e){var r=e[t];if(i(r))for(var o=0;o<r.length;o++)Gt(n,t,r[o]);else Gt(n,t,r)}}(n,e.watch)}var Nt={lazy:!0};function $t(n,e,t){var r=!sn();l(t)?(qt.get=r?Ut(e):Ft(t),qt.set=R):(qt.get=t.get?r&&!1!==t.cache?Ut(e):Ft(t.get):R,qt.set=t.set||R),Object.defineProperty(n,e,qt)}function Ut(n){return function(){var e=this._computedWatchers&&this._computedWatchers[n];if(e)return e.dirty&&e.evaluate(),kn.target&&e.depend(),e.value}}function Ft(n){return function(){return n.call(this,this)}}function Gt(n,e,t,r){return u(t)&&(r=t,t=t.handler),"string"==typeof t&&(t=n[t]),n.$watch(e,t,r)}var Ht=0;function Vt(n){var e=n.options;if(n.super){var t=Vt(n.super);if(t!==n.superOptions){n.superOptions=t;var r=function(n){var e,t=n.options,r=n.sealedOptions;for(var i in t)t[i]!==r[i]&&(e||(e={}),e[i]=t[i]);return e}(n);r&&O(n.extendOptions,r),(e=n.options=It(t,n.extendOptions)).name&&(e.components[e.name]=n)}}return e}function Jt(n){this._init(n)}function Wt(n){n.cid=0;var e=1;n.extend=function(n){n=n||{};var t=this,r=t.cid,i=n._Ctor||(n._Ctor={});if(i[r])return i[r];var o=yt(n)||yt(t.options);var a=function(n){this._init(n)};return(a.prototype=Object.create(t.prototype)).constructor=a,a.cid=e++,a.options=It(t.options,n),a.super=t,a.options.props&&function(n){var e=n.options.props;for(var t in e)Lt(n.prototype,"_props",t)}(a),a.options.computed&&function(n){var e=n.options.computed;for(var t in e)$t(n.prototype,t,e[t])}(a),a.extend=t.extend,a.mixin=t.mixin,a.use=t.use,$.forEach((function(n){a[n]=t[n]})),o&&(a.options.components[o]=a),a.superOptions=t.options,a.extendOptions=n,a.sealedOptions=O({},a.options),i[r]=a,a}}function Kt(n){return n&&(yt(n.Ctor.options)||n.tag)}function Qt(n,e){return i(n)?n.indexOf(e)>-1:"string"==typeof n?n.split(",").indexOf(e)>-1:!!h(n)&&n.test(e)}function Yt(n,e){var t=n.cache,r=n.keys,i=n._vnode,o=n.$vnode;for(var a in t){var s=t[a];if(s){var c=s.name;c&&!e(c)&&Zt(t,a,r,i)}}o.componentOptions.children=void 0}function Zt(n,e,t,r){var i=n[e];!i||r&&i.tag===r.tag||i.componentInstance.$destroy(),n[e]=null,w(t,e)}!function(n){n.prototype._init=function(n){var e=this;e._uid=Ht++,e._isVue=!0,e.__v_skip=!0,e._scope=new Fn(!0),e._scope.parent=void 0,e._scope._vm=!0,n&&n._isComponent?function(n,e){var t=n.$options=Object.create(n.constructor.options),r=e._parentVnode;t.parent=e.parent,t._parentVnode=r;var i=r.componentOptions;t.propsData=i.propsData,t._parentListeners=i.listeners,t._renderChildren=i.children,t._componentTag=i.tag,e.render&&(t.render=e.render,t.staticRenderFns=e.staticRenderFns)}(e,n):e.$options=It(Vt(e.constructor),n||{},e),e._renderProxy=e,e._self=e,function(n){var e=n.$options,t=e.parent;if(t&&!e.abstract){for(;t.$options.abstract&&t.$parent;)t=t.$parent;t.$children.push(n)}n.$parent=t,n.$root=t?t.$root:n,n.$children=[],n.$refs={},n._provided=t?t._provided:Object.create(null),n._watcher=null,n._inactive=null,n._directInactive=!1,n._isMounted=!1,n._isDestroyed=!1,n._isBeingDestroyed=!1}(e),function(n){n._events=Object.create(null),n._hasHookEvent=!1;var e=n.$options._parentListeners;e&&Qe(n,e)}(e),function(n){n._vnode=null,n._staticTrees=null;var e=n.$options,t=n.$vnode=e._parentVnode,i=t&&t.context;n.$slots=he(e._renderChildren,i),n.$scopedSlots=t?fe(n.$parent,t.data.scopedSlots,n.$slots):r,n._c=function(e,t,r,i){return Ae(n,e,t,r,i,!1)},n.$createElement=function(e,t,r,i){return Ae(n,e,t,r,i,!0)};var o=t&&t.data;Pn(n,"$attrs",o&&o.attrs||r,null,!0),Pn(n,"$listeners",e._parentListeners||r,null,!0)}(e),et(e,"beforeCreate",void 0,!1),function(n){var e=gt(n.$options.inject,n);e&&(Cn(!1),Object.keys(e).forEach((function(t){Pn(n,t,e[t])})),Cn(!0))}(e),Mt(e),function(n){var e=n.$options.provide;if(e){var t=l(e)?e.call(n):e;if(!p(t))return;for(var r=Gn(n),i=dn?Reflect.ownKeys(t):Object.keys(t),o=0;o<i.length;o++){var a=i[o];Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(t,a))}}}(e),et(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}(Jt),function(n){var e={get:function(){return this._data}},t={get:function(){return this._props}};Object.defineProperty(n.prototype,"$data",e),Object.defineProperty(n.prototype,"$props",t),n.prototype.$set=Rn,n.prototype.$delete=Bn,n.prototype.$watch=function(n,e,t){if(u(e))return Gt(this,n,e,t);(t=t||{}).user=!0;var r=new Ve(this,n,e,t);if(t.immediate){var i='callback for immediate watcher "'.concat(r.expression,'"');_n(),je(e,this,[r.value],this,i),xn()}return function(){r.teardown()}}}(Jt),function(n){var e=/^hook:/;n.prototype.$on=function(n,t){var r=this;if(i(n))for(var o=0,a=n.length;o<a;o++)r.$on(n[o],t);else(r._events[n]||(r._events[n]=[])).push(t),e.test(n)&&(r._hasHookEvent=!0);return r},n.prototype.$once=function(n,e){var t=this;function r(){t.$off(n,r),e.apply(t,arguments)}return r.fn=e,t.$on(n,r),t},n.prototype.$off=function(n,e){var t=this;if(!arguments.length)return t._events=Object.create(null),t;if(i(n)){for(var r=0,o=n.length;r<o;r++)t.$off(n[r],e);return t}var a,s=t._events[n];if(!s)return t;if(!e)return t._events[n]=null,t;for(var c=s.length;c--;)if((a=s[c])===e||a.fn===e){s.splice(c,1);break}return t},n.prototype.$emit=function(n){var e=this,t=e._events[n];if(t){t=t.length>1?z(t):t;for(var r=z(arguments,1),i='event handler for "'.concat(n,'"'),o=0,a=t.length;o<a;o++)je(t[o],e,r,e,i)}return e}}(Jt),function(n){n.prototype._update=function(n,e){var t=this,r=t.$el,i=t._vnode,o=Ze(t);t._vnode=n,t.$el=i?t.__patch__(i,n):t.__patch__(t.$el,n,e,!1),o(),r&&(r.__vue__=null),t.$el&&(t.$el.__vue__=t);for(var a=t;a&&a.$vnode&&a.$parent&&a.$vnode===a.$parent._vnode;)a.$parent.$el=a.$el,a=a.$parent},n.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},n.prototype.$destroy=function(){var n=this;if(!n._isBeingDestroyed){et(n,"beforeDestroy"),n._isBeingDestroyed=!0;var e=n.$parent;!e||e._isBeingDestroyed||n.$options.abstract||w(e.$children,n),n._scope.stop(),n._data.__ob__&&n._data.__ob__.vmCount--,n._isDestroyed=!0,n.__patch__(n._vnode,null),et(n,"destroyed"),n.$off(),n.$el&&(n.$el.__vue__=null),n.$vnode&&(n.$vnode.parent=null)}}}(Jt),function(n){ue(n.prototype),n.prototype.$nextTick=function(n){return Ne(n,this)},n.prototype._render=function(){var n=this,e=n.$options,t=e.render,r=e._parentVnode;r&&n._isMounted&&(n.$scopedSlots=fe(n.$parent,r.data.scopedSlots,n.$slots,n.$scopedSlots),n._slotsProxy&&_e(n._slotsProxy,n.$scopedSlots)),n.$vnode=r;var o,a=un,s=xe;try{hn(n),xe=n,o=t.call(n._renderProxy,n.$createElement)}catch(e){Te(e,n,"render"),o=n._vnode}finally{xe=s,hn(a)}return i(o)&&1===o.length&&(o=o[0]),o instanceof gn||(o=mn()),o.parent=r,o}}(Jt);var Xt=[String,RegExp,Array],nr={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:Xt,exclude:Xt,max:[String,Number]},methods:{cacheVNode:function(){var n=this.cache,e=this.keys,t=this.vnodeToCache,r=this.keyToCache;if(t){var i=t.tag,o=t.componentInstance,a=t.componentOptions;n[r]={name:Kt(a),tag:i,componentInstance:o},e.push(r),this.max&&e.length>parseInt(this.max)&&Zt(n,e[0],e,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var n in this.cache)Zt(this.cache,n,this.keys)},mounted:function(){var n=this;this.cacheVNode(),this.$watch("include",(function(e){Yt(n,(function(n){return Qt(e,n)}))})),this.$watch("exclude",(function(e){Yt(n,(function(n){return!Qt(e,n)}))}))},updated:function(){this.cacheVNode()},render:function(){var n=this.$slots.default,e=Ee(n),t=e&&e.componentOptions;if(t){var r=Kt(t),i=this.include,o=this.exclude;if(i&&(!r||!Qt(i,r))||o&&r&&Qt(o,r))return e;var a=this.cache,s=this.keys,c=null==e.key?t.Ctor.cid+(t.tag?"::".concat(t.tag):""):e.key;a[c]?(e.componentInstance=a[c].componentInstance,w(s,c),s.push(c)):(this.vnodeToCache=e,this.keyToCache=c),e.data.keepAlive=!0}return e||n&&n[0]}}};!function(n){var e={get:function(){return F}};Object.defineProperty(n,"config",e),n.util={warn:xt,extend:O,mergeOptions:It,defineReactive:Pn},n.set=Rn,n.delete=Bn,n.nextTick=Ne,n.observable=function(n){return On(n),n},n.options=Object.create(null),$.forEach((function(e){n.options[e+"s"]=Object.create(null)})),n.options._base=n,O(n.options.components,nr),function(n){n.use=function(n){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(n)>-1)return this;var t=z(arguments,1);return t.unshift(this),l(n.install)?n.install.apply(n,t):l(n)&&n.apply(null,t),e.push(n),this}}(n),function(n){n.mixin=function(n){return this.options=It(this.options,n),this}}(n),Wt(n),function(n){$.forEach((function(e){n[e]=function(n,t){return t?("component"===e&&u(t)&&(t.name=t.name||n,t=this.options._base.extend(t)),"directive"===e&&l(t)&&(t={bind:t,update:t}),this.options[e+"s"][n]=t,t):this.options[e+"s"][n]}}))}(n)}(Jt),Object.defineProperty(Jt.prototype,"$isServer",{get:sn}),Object.defineProperty(Jt.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Jt,"FunctionalRenderContext",{value:mt}),Jt.version="2.7.16";var er=b("style,class"),tr=b("input,textarea,option,select,progress"),rr=b("contenteditable,draggable,spellcheck"),ir=b("events,caret,typing,plaintext-only"),or=b("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),ar="http://www.w3.org/1999/xlink",sr=function(n){return":"===n.charAt(5)&&"xlink"===n.slice(0,5)},cr=function(n){return sr(n)?n.slice(6,n.length):""},lr=function(n){return null==n||!1===n};function pr(n){for(var e=n.data,t=n,r=n;a(r.componentInstance);)(r=r.componentInstance._vnode)&&r.data&&(e=dr(r.data,e));for(;a(t=t.parent);)t&&t.data&&(e=dr(e,t.data));return function(n,e){if(a(n)||a(e))return ur(n,hr(e));return""}(e.staticClass,e.class)}function dr(n,e){return{staticClass:ur(n.staticClass,e.staticClass),class:a(n.class)?[n.class,e.class]:e.class}}function ur(n,e){return n?e?n+" "+e:n:e||""}function hr(n){return Array.isArray(n)?function(n){for(var e,t="",r=0,i=n.length;r<i;r++)a(e=hr(n[r]))&&""!==e&&(t&&(t+=" "),t+=e);return t}(n):p(n)?function(n){var e="";for(var t in n)n[t]&&(e&&(e+=" "),e+=t);return e}(n):"string"==typeof n?n:""}var gr={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},mr=b("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),fr=b("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),vr=function(n){return mr(n)||fr(n)};var yr=Object.create(null);var br=b("text,number,password,search,email,tel,url");var kr=Object.freeze({__proto__:null,createElement:function(n,e){var t=document.createElement(n);return"select"!==n||e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&t.setAttribute("multiple","multiple"),t},createElementNS:function(n,e){return document.createElementNS(gr[n],e)},createTextNode:function(n){return document.createTextNode(n)},createComment:function(n){return document.createComment(n)},insertBefore:function(n,e,t){n.insertBefore(e,t)},removeChild:function(n,e){n.removeChild(e)},appendChild:function(n,e){n.appendChild(e)},parentNode:function(n){return n.parentNode},nextSibling:function(n){return n.nextSibling},tagName:function(n){return n.tagName},setTextContent:function(n,e){n.textContent=e},setStyleScope:function(n,e){n.setAttribute(e,"")}}),wr={create:function(n,e){_r(e)},update:function(n,e){n.data.ref!==e.data.ref&&(_r(n,!0),_r(e))},destroy:function(n){_r(n,!0)}};function _r(n,e){var t=n.data.ref;if(a(t)){var r=n.context,o=n.componentInstance||n.elm,s=e?null:o,c=e?void 0:o;if(l(t))je(t,r,[s],r,"template ref function");else{var p=n.data.refInFor,d="string"==typeof t||"number"==typeof t,u=Nn(t),h=r.$refs;if(d||u)if(p){var g=d?h[t]:t.value;e?i(g)&&w(g,o):i(g)?g.includes(o)||g.push(o):d?(h[t]=[o],xr(r,t,h[t])):t.value=[o]}else if(d){if(e&&h[t]!==o)return;h[t]=c,xr(r,t,s)}else if(u){if(e&&t.value!==o)return;t.value=s}else 0}}}function xr(n,e,t){var r=n._setupState;r&&x(r,e)&&(Nn(r[e])?r[e].value=t:r[e]=t)}var Sr=new gn("",{},[]),Er=["create","activate","update","remove","destroy"];function Ar(n,e){return n.key===e.key&&n.asyncFactory===e.asyncFactory&&(n.tag===e.tag&&n.isComment===e.isComment&&a(n.data)===a(e.data)&&function(n,e){if("input"!==n.tag)return!0;var t,r=a(t=n.data)&&a(t=t.attrs)&&t.type,i=a(t=e.data)&&a(t=t.attrs)&&t.type;return r===i||br(r)&&br(i)}(n,e)||s(n.isAsyncPlaceholder)&&o(e.asyncFactory.error))}function Tr(n,e,t){var r,i,o={};for(r=e;r<=t;++r)a(i=n[r].key)&&(o[i]=r);return o}var jr={create:Cr,update:Cr,destroy:function(n){Cr(n,Sr)}};function Cr(n,e){(n.data.directives||e.data.directives)&&function(n,e){var t,r,i,o=n===Sr,a=e===Sr,s=zr(n.data.directives,n.context),c=zr(e.data.directives,e.context),l=[],p=[];for(t in c)r=s[t],i=c[t],r?(i.oldValue=r.value,i.oldArg=r.arg,Pr(i,"update",e,n),i.def&&i.def.componentUpdated&&p.push(i)):(Pr(i,"bind",e,n),i.def&&i.def.inserted&&l.push(i));if(l.length){var d=function(){for(var t=0;t<l.length;t++)Pr(l[t],"inserted",e,n)};o?Wn(e,"insert",d):d()}p.length&&Wn(e,"postpatch",(function(){for(var t=0;t<p.length;t++)Pr(p[t],"componentUpdated",e,n)}));if(!o)for(t in s)c[t]||Pr(s[t],"unbind",n,n,a)}(n,e)}var Ir=Object.create(null);function zr(n,e){var t,r,i=Object.create(null);if(!n)return i;for(t=0;t<n.length;t++){if((r=n[t]).modifiers||(r.modifiers=Ir),i[Or(r)]=r,e._setupState&&e._setupState.__sfc){var o=r.def||zt(e,"_setupState","v-"+r.name);r.def="function"==typeof o?{bind:o,update:o}:o}r.def=r.def||zt(e.$options,"directives",r.name)}return i}function Or(n){return n.rawName||"".concat(n.name,".").concat(Object.keys(n.modifiers||{}).join("."))}function Pr(n,e,t,r,i){var o=n.def&&n.def[e];if(o)try{o(t.elm,n,t,r,i)}catch(r){Te(r,t.context,"directive ".concat(n.name," ").concat(e," hook"))}}var Rr=[wr,jr];function Br(n,e){var t=e.componentOptions;if(!(a(t)&&!1===t.Ctor.options.inheritAttrs||o(n.data.attrs)&&o(e.data.attrs))){var r,i,c=e.elm,l=n.data.attrs||{},p=e.data.attrs||{};for(r in(a(p.__ob__)||s(p._v_attr_proxy))&&(p=e.data.attrs=O({},p)),p)i=p[r],l[r]!==i&&Dr(c,r,i,e.data.pre);for(r in(Y||X)&&p.value!==l.value&&Dr(c,"value",p.value),l)o(p[r])&&(sr(r)?c.removeAttributeNS(ar,cr(r)):rr(r)||c.removeAttribute(r))}}function Dr(n,e,t,r){r||n.tagName.indexOf("-")>-1?qr(n,e,t):or(e)?lr(t)?n.removeAttribute(e):(t="allowfullscreen"===e&&"EMBED"===n.tagName?"true":e,n.setAttribute(e,t)):rr(e)?n.setAttribute(e,function(n,e){return lr(e)||"false"===e?"false":"contenteditable"===n&&ir(e)?e:"true"}(e,t)):sr(e)?lr(t)?n.removeAttributeNS(ar,cr(e)):n.setAttributeNS(ar,e,t):qr(n,e,t)}function qr(n,e,t){if(lr(t))n.removeAttribute(e);else{if(Y&&!Z&&"TEXTAREA"===n.tagName&&"placeholder"===e&&""!==t&&!n.__ieph){var r=function(e){e.stopImmediatePropagation(),n.removeEventListener("input",r)};n.addEventListener("input",r),n.__ieph=!0}n.setAttribute(e,t)}}var Lr={create:Br,update:Br};function Mr(n,e){var t=e.elm,r=e.data,i=n.data;if(!(o(r.staticClass)&&o(r.class)&&(o(i)||o(i.staticClass)&&o(i.class)))){var s=pr(e),c=t._transitionClasses;a(c)&&(s=ur(s,hr(c))),s!==t._prevClass&&(t.setAttribute("class",s),t._prevClass=s)}}var Nr,$r={create:Mr,update:Mr};function Ur(n,e,t){var r=Nr;return function i(){var o=e.apply(null,arguments);null!==o&&Hr(n,i,t,r)}}var Fr=Oe&&!(tn&&Number(tn[1])<=53);function Gr(n,e,t,r){if(Fr){var i=ct,o=e;e=o._wrapper=function(n){if(n.target===n.currentTarget||n.timeStamp>=i||n.timeStamp<=0||n.target.ownerDocument!==document)return o.apply(this,arguments)}}Nr.addEventListener(n,e,on?{capture:t,passive:r}:t)}function Hr(n,e,t,r){(r||Nr).removeEventListener(n,e._wrapper||e,t)}function Vr(n,e){if(!o(n.data.on)||!o(e.data.on)){var t=e.data.on||{},r=n.data.on||{};Nr=e.elm||n.elm,function(n){if(a(n.__r)){var e=Y?"change":"input";n[e]=[].concat(n.__r,n[e]||[]),delete n.__r}a(n.__c)&&(n.change=[].concat(n.__c,n.change||[]),delete n.__c)}(t),Jn(t,r,Gr,Hr,Ur,e.context),Nr=void 0}}var Jr,Wr={create:Vr,update:Vr,destroy:function(n){return Vr(n,Sr)}};function Kr(n,e){if(!o(n.data.domProps)||!o(e.data.domProps)){var t,r,i=e.elm,c=n.data.domProps||{},l=e.data.domProps||{};for(t in(a(l.__ob__)||s(l._v_attr_proxy))&&(l=e.data.domProps=O({},l)),c)t in l||(i[t]="");for(t in l){if(r=l[t],"textContent"===t||"innerHTML"===t){if(e.children&&(e.children.length=0),r===c[t])continue;1===i.childNodes.length&&i.removeChild(i.childNodes[0])}if("value"===t&&"PROGRESS"!==i.tagName){i._value=r;var p=o(r)?"":String(r);Qr(i,p)&&(i.value=p)}else if("innerHTML"===t&&fr(i.tagName)&&o(i.innerHTML)){(Jr=Jr||document.createElement("div")).innerHTML="<svg>".concat(r,"</svg>");for(var d=Jr.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;d.firstChild;)i.appendChild(d.firstChild)}else if(r!==c[t])try{i[t]=r}catch(n){}}}}function Qr(n,e){return!n.composing&&("OPTION"===n.tagName||function(n,e){var t=!0;try{t=document.activeElement!==n}catch(n){}return t&&n.value!==e}(n,e)||function(n,e){var t=n.value,r=n._vModifiers;if(a(r)){if(r.number)return y(t)!==y(e);if(r.trim)return t.trim()!==e.trim()}return t!==e}(n,e))}var Yr={create:Kr,update:Kr},Zr=S((function(n){var e={},t=/:(.+)/;return n.split(/;(?![^(]*\))/g).forEach((function(n){if(n){var r=n.split(t);r.length>1&&(e[r[0].trim()]=r[1].trim())}})),e}));function Xr(n){var e=ni(n.style);return n.staticStyle?O(n.staticStyle,e):e}function ni(n){return Array.isArray(n)?P(n):"string"==typeof n?Zr(n):n}var ei,ti=/^--/,ri=/\s*!important$/,ii=function(n,e,t){if(ti.test(e))n.style.setProperty(e,t);else if(ri.test(t))n.style.setProperty(C(e),t.replace(ri,""),"important");else{var r=ai(e);if(Array.isArray(t))for(var i=0,o=t.length;i<o;i++)n.style[r]=t[i];else n.style[r]=t}},oi=["Webkit","Moz","ms"],ai=S((function(n){if(ei=ei||document.createElement("div").style,"filter"!==(n=A(n))&&n in ei)return n;for(var e=n.charAt(0).toUpperCase()+n.slice(1),t=0;t<oi.length;t++){var r=oi[t]+e;if(r in ei)return r}}));function si(n,e){var t=e.data,r=n.data;if(!(o(t.staticStyle)&&o(t.style)&&o(r.staticStyle)&&o(r.style))){var i,s,c=e.elm,l=r.staticStyle,p=r.normalizedStyle||r.style||{},d=l||p,u=ni(e.data.style)||{};e.data.normalizedStyle=a(u.__ob__)?O({},u):u;var h=function(n,e){var t,r={};if(e)for(var i=n;i.componentInstance;)(i=i.componentInstance._vnode)&&i.data&&(t=Xr(i.data))&&O(r,t);(t=Xr(n.data))&&O(r,t);for(var o=n;o=o.parent;)o.data&&(t=Xr(o.data))&&O(r,t);return r}(e,!0);for(s in d)o(h[s])&&ii(c,s,"");for(s in h)i=h[s],ii(c,s,null==i?"":i)}}var ci={create:si,update:si},li=/\s+/;function pi(n,e){if(e&&(e=e.trim()))if(n.classList)e.indexOf(" ")>-1?e.split(li).forEach((function(e){return n.classList.add(e)})):n.classList.add(e);else{var t=" ".concat(n.getAttribute("class")||""," ");t.indexOf(" "+e+" ")<0&&n.setAttribute("class",(t+e).trim())}}function di(n,e){if(e&&(e=e.trim()))if(n.classList)e.indexOf(" ")>-1?e.split(li).forEach((function(e){return n.classList.remove(e)})):n.classList.remove(e),n.classList.length||n.removeAttribute("class");else{for(var t=" ".concat(n.getAttribute("class")||""," "),r=" "+e+" ";t.indexOf(r)>=0;)t=t.replace(r," ");(t=t.trim())?n.setAttribute("class",t):n.removeAttribute("class")}}function ui(n){if(n){if("object"==typeof n){var e={};return!1!==n.css&&O(e,hi(n.name||"v")),O(e,n),e}return"string"==typeof n?hi(n):void 0}}var hi=S((function(n){return{enterClass:"".concat(n,"-enter"),enterToClass:"".concat(n,"-enter-to"),enterActiveClass:"".concat(n,"-enter-active"),leaveClass:"".concat(n,"-leave"),leaveToClass:"".concat(n,"-leave-to"),leaveActiveClass:"".concat(n,"-leave-active")}})),gi=K&&!Z,mi="transition",fi="transitionend",vi="animation",yi="animationend";gi&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(mi="WebkitTransition",fi="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(vi="WebkitAnimation",yi="webkitAnimationEnd"));var bi=K?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(n){return n()};function ki(n){bi((function(){bi(n)}))}function wi(n,e){var t=n._transitionClasses||(n._transitionClasses=[]);t.indexOf(e)<0&&(t.push(e),pi(n,e))}function _i(n,e){n._transitionClasses&&w(n._transitionClasses,e),di(n,e)}function xi(n,e,t){var r=Ei(n,e),i=r.type,o=r.timeout,a=r.propCount;if(!i)return t();var s="transition"===i?fi:yi,c=0,l=function(){n.removeEventListener(s,p),t()},p=function(e){e.target===n&&++c>=a&&l()};setTimeout((function(){c<a&&l()}),o+1),n.addEventListener(s,p)}var Si=/\b(transform|all)(,|$)/;function Ei(n,e){var t,r=window.getComputedStyle(n),i=(r[mi+"Delay"]||"").split(", "),o=(r[mi+"Duration"]||"").split(", "),a=Ai(i,o),s=(r[vi+"Delay"]||"").split(", "),c=(r[vi+"Duration"]||"").split(", "),l=Ai(s,c),p=0,d=0;return"transition"===e?a>0&&(t="transition",p=a,d=o.length):"animation"===e?l>0&&(t="animation",p=l,d=c.length):d=(t=(p=Math.max(a,l))>0?a>l?"transition":"animation":null)?"transition"===t?o.length:c.length:0,{type:t,timeout:p,propCount:d,hasTransform:"transition"===t&&Si.test(r[mi+"Property"])}}function Ai(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max.apply(null,e.map((function(e,t){return Ti(e)+Ti(n[t])})))}function Ti(n){return 1e3*Number(n.slice(0,-1).replace(",","."))}function ji(n,e){var t=n.elm;a(t._leaveCb)&&(t._leaveCb.cancelled=!0,t._leaveCb());var r=ui(n.data.transition);if(!o(r)&&!a(t._enterCb)&&1===t.nodeType){for(var i=r.css,s=r.type,c=r.enterClass,d=r.enterToClass,u=r.enterActiveClass,h=r.appearClass,g=r.appearToClass,m=r.appearActiveClass,f=r.beforeEnter,v=r.enter,b=r.afterEnter,k=r.enterCancelled,w=r.beforeAppear,_=r.appear,x=r.afterAppear,S=r.appearCancelled,E=r.duration,A=Ye,T=Ye.$vnode;T&&T.parent;)A=T.context,T=T.parent;var j=!A._isMounted||!n.isRootInsert;if(!j||_||""===_){var C=j&&h?h:c,I=j&&m?m:u,z=j&&g?g:d,O=j&&w||f,P=j&&l(_)?_:v,R=j&&x||b,B=j&&S||k,D=y(p(E)?E.enter:E);0;var q=!1!==i&&!Z,L=zi(P),N=t._enterCb=M((function(){q&&(_i(t,z),_i(t,I)),N.cancelled?(q&&_i(t,C),B&&B(t)):R&&R(t),t._enterCb=null}));n.data.show||Wn(n,"insert",(function(){var e=t.parentNode,r=e&&e._pending&&e._pending[n.key];r&&r.tag===n.tag&&r.elm._leaveCb&&r.elm._leaveCb(),P&&P(t,N)})),O&&O(t),q&&(wi(t,C),wi(t,I),ki((function(){_i(t,C),N.cancelled||(wi(t,z),L||(Ii(D)?setTimeout(N,D):xi(t,s,N)))}))),n.data.show&&(e&&e(),P&&P(t,N)),q||L||N()}}}function Ci(n,e){var t=n.elm;a(t._enterCb)&&(t._enterCb.cancelled=!0,t._enterCb());var r=ui(n.data.transition);if(o(r)||1!==t.nodeType)return e();if(!a(t._leaveCb)){var i=r.css,s=r.type,c=r.leaveClass,l=r.leaveToClass,d=r.leaveActiveClass,u=r.beforeLeave,h=r.leave,g=r.afterLeave,m=r.leaveCancelled,f=r.delayLeave,v=r.duration,b=!1!==i&&!Z,k=zi(h),w=y(p(v)?v.leave:v);0;var _=t._leaveCb=M((function(){t.parentNode&&t.parentNode._pending&&(t.parentNode._pending[n.key]=null),b&&(_i(t,l),_i(t,d)),_.cancelled?(b&&_i(t,c),m&&m(t)):(e(),g&&g(t)),t._leaveCb=null}));f?f(x):x()}function x(){_.cancelled||(!n.data.show&&t.parentNode&&((t.parentNode._pending||(t.parentNode._pending={}))[n.key]=n),u&&u(t),b&&(wi(t,c),wi(t,d),ki((function(){_i(t,c),_.cancelled||(wi(t,l),k||(Ii(w)?setTimeout(_,w):xi(t,s,_)))}))),h&&h(t,_),b||k||_())}}function Ii(n){return"number"==typeof n&&!isNaN(n)}function zi(n){if(o(n))return!1;var e=n.fns;return a(e)?zi(Array.isArray(e)?e[0]:e):(n._length||n.length)>1}function Oi(n,e){!0!==e.data.show&&ji(e)}var Pi=function(n){var e,t,r={},l=n.modules,p=n.nodeOps;for(e=0;e<Er.length;++e)for(r[Er[e]]=[],t=0;t<l.length;++t)a(l[t][Er[e]])&&r[Er[e]].push(l[t][Er[e]]);function d(n){var e=p.parentNode(n);a(e)&&p.removeChild(e,n)}function u(n,e,t,i,o,c,l){if(a(n.elm)&&a(c)&&(n=c[l]=vn(n)),n.isRootInsert=!o,!function(n,e,t,i){var o=n.data;if(a(o)){var c=a(n.componentInstance)&&o.keepAlive;if(a(o=o.hook)&&a(o=o.init)&&o(n,!1),a(n.componentInstance))return h(n,e),g(t,n.elm,i),s(c)&&function(n,e,t,i){var o,s=n;for(;s.componentInstance;)if(s=s.componentInstance._vnode,a(o=s.data)&&a(o=o.transition)){for(o=0;o<r.activate.length;++o)r.activate[o](Sr,s);e.push(s);break}g(t,n.elm,i)}(n,e,t,i),!0}}(n,e,t,i)){var d=n.data,u=n.children,f=n.tag;a(f)?(n.elm=n.ns?p.createElementNS(n.ns,f):p.createElement(f,n),y(n),m(n,u,e),a(d)&&v(n,e),g(t,n.elm,i)):s(n.isComment)?(n.elm=p.createComment(n.text),g(t,n.elm,i)):(n.elm=p.createTextNode(n.text),g(t,n.elm,i))}}function h(n,e){a(n.data.pendingInsert)&&(e.push.apply(e,n.data.pendingInsert),n.data.pendingInsert=null),n.elm=n.componentInstance.$el,f(n)?(v(n,e),y(n)):(_r(n),e.push(n))}function g(n,e,t){a(n)&&(a(t)?p.parentNode(t)===n&&p.insertBefore(n,e,t):p.appendChild(n,e))}function m(n,e,t){if(i(e)){0;for(var r=0;r<e.length;++r)u(e[r],t,n.elm,null,!0,e,r)}else c(n.text)&&p.appendChild(n.elm,p.createTextNode(String(n.text)))}function f(n){for(;n.componentInstance;)n=n.componentInstance._vnode;return a(n.tag)}function v(n,t){for(var i=0;i<r.create.length;++i)r.create[i](Sr,n);a(e=n.data.hook)&&(a(e.create)&&e.create(Sr,n),a(e.insert)&&t.push(n))}function y(n){var e;if(a(e=n.fnScopeId))p.setStyleScope(n.elm,e);else for(var t=n;t;)a(e=t.context)&&a(e=e.$options._scopeId)&&p.setStyleScope(n.elm,e),t=t.parent;a(e=Ye)&&e!==n.context&&e!==n.fnContext&&a(e=e.$options._scopeId)&&p.setStyleScope(n.elm,e)}function k(n,e,t,r,i,o){for(;r<=i;++r)u(t[r],o,n,e,!1,t,r)}function w(n){var e,t,i=n.data;if(a(i))for(a(e=i.hook)&&a(e=e.destroy)&&e(n),e=0;e<r.destroy.length;++e)r.destroy[e](n);if(a(e=n.children))for(t=0;t<n.children.length;++t)w(n.children[t])}function _(n,e,t){for(;e<=t;++e){var r=n[e];a(r)&&(a(r.tag)?(x(r),w(r)):d(r.elm))}}function x(n,e){if(a(e)||a(n.data)){var t,i=r.remove.length+1;for(a(e)?e.listeners+=i:e=function(n,e){function t(){0==--t.listeners&&d(n)}return t.listeners=e,t}(n.elm,i),a(t=n.componentInstance)&&a(t=t._vnode)&&a(t.data)&&x(t,e),t=0;t<r.remove.length;++t)r.remove[t](n,e);a(t=n.data.hook)&&a(t=t.remove)?t(n,e):e()}else d(n.elm)}function S(n,e,t,r){for(var i=t;i<r;i++){var o=e[i];if(a(o)&&Ar(n,o))return i}}function E(n,e,t,i,c,l){if(n!==e){a(e.elm)&&a(i)&&(e=i[c]=vn(e));var d=e.elm=n.elm;if(s(n.isAsyncPlaceholder))a(e.asyncFactory.resolved)?j(n.elm,e,t):e.isAsyncPlaceholder=!0;else if(s(e.isStatic)&&s(n.isStatic)&&e.key===n.key&&(s(e.isCloned)||s(e.isOnce)))e.componentInstance=n.componentInstance;else{var h,g=e.data;a(g)&&a(h=g.hook)&&a(h=h.prepatch)&&h(n,e);var m=n.children,v=e.children;if(a(g)&&f(e)){for(h=0;h<r.update.length;++h)r.update[h](n,e);a(h=g.hook)&&a(h=h.update)&&h(n,e)}o(e.text)?a(m)&&a(v)?m!==v&&function(n,e,t,r,i){var s,c,l,d=0,h=0,g=e.length-1,m=e[0],f=e[g],v=t.length-1,y=t[0],b=t[v],w=!i;for(0;d<=g&&h<=v;)o(m)?m=e[++d]:o(f)?f=e[--g]:Ar(m,y)?(E(m,y,r,t,h),m=e[++d],y=t[++h]):Ar(f,b)?(E(f,b,r,t,v),f=e[--g],b=t[--v]):Ar(m,b)?(E(m,b,r,t,v),w&&p.insertBefore(n,m.elm,p.nextSibling(f.elm)),m=e[++d],b=t[--v]):Ar(f,y)?(E(f,y,r,t,h),w&&p.insertBefore(n,f.elm,m.elm),f=e[--g],y=t[++h]):(o(s)&&(s=Tr(e,d,g)),o(c=a(y.key)?s[y.key]:S(y,e,d,g))?u(y,r,n,m.elm,!1,t,h):Ar(l=e[c],y)?(E(l,y,r,t,h),e[c]=void 0,w&&p.insertBefore(n,l.elm,m.elm)):u(y,r,n,m.elm,!1,t,h),y=t[++h]);d>g?k(n,o(t[v+1])?null:t[v+1].elm,t,h,v,r):h>v&&_(e,d,g)}(d,m,v,t,l):a(v)?(a(n.text)&&p.setTextContent(d,""),k(d,null,v,0,v.length-1,t)):a(m)?_(m,0,m.length-1):a(n.text)&&p.setTextContent(d,""):n.text!==e.text&&p.setTextContent(d,e.text),a(g)&&a(h=g.hook)&&a(h=h.postpatch)&&h(n,e)}}}function A(n,e,t){if(s(t)&&a(n.parent))n.parent.data.pendingInsert=e;else for(var r=0;r<e.length;++r)e[r].data.hook.insert(e[r])}var T=b("attrs,class,staticClass,staticStyle,key");function j(n,e,t,r){var i,o=e.tag,c=e.data,l=e.children;if(r=r||c&&c.pre,e.elm=n,s(e.isComment)&&a(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(a(c)&&(a(i=c.hook)&&a(i=i.init)&&i(e,!0),a(i=e.componentInstance)))return h(e,t),!0;if(a(o)){if(a(l))if(n.hasChildNodes())if(a(i=c)&&a(i=i.domProps)&&a(i=i.innerHTML)){if(i!==n.innerHTML)return!1}else{for(var p=!0,d=n.firstChild,u=0;u<l.length;u++){if(!d||!j(d,l[u],t,r)){p=!1;break}d=d.nextSibling}if(!p||d)return!1}else m(e,l,t);if(a(c)){var g=!1;for(var f in c)if(!T(f)){g=!0,v(e,t);break}!g&&c.class&&Fe(c.class)}}else n.data!==e.text&&(n.data=e.text);return!0}return function(n,e,t,i){if(!o(e)){var c,l=!1,d=[];if(o(n))l=!0,u(e,d);else{var h=a(n.nodeType);if(!h&&Ar(n,e))E(n,e,d,null,null,i);else{if(h){if(1===n.nodeType&&n.hasAttribute("data-server-rendered")&&(n.removeAttribute("data-server-rendered"),t=!0),s(t)&&j(n,e,d))return A(e,d,!0),n;c=n,n=new gn(p.tagName(c).toLowerCase(),{},[],void 0,c)}var g=n.elm,m=p.parentNode(g);if(u(e,d,g._leaveCb?null:m,p.nextSibling(g)),a(e.parent))for(var v=e.parent,y=f(e);v;){for(var b=0;b<r.destroy.length;++b)r.destroy[b](v);if(v.elm=e.elm,y){for(var k=0;k<r.create.length;++k)r.create[k](Sr,v);var x=v.data.hook.insert;if(x.merged)for(var S=x.fns.slice(1),T=0;T<S.length;T++)S[T]()}else _r(v);v=v.parent}a(m)?_([n],0,0):a(n.tag)&&w(n)}}return A(e,d,l),e.elm}a(n)&&w(n)}}({nodeOps:kr,modules:[Lr,$r,Wr,Yr,ci,K?{create:Oi,activate:Oi,remove:function(n,e){!0!==n.data.show?Ci(n,e):e()}}:{}].concat(Rr)});Z&&document.addEventListener("selectionchange",(function(){var n=document.activeElement;n&&n.vmodel&&$i(n,"input")}));var Ri={inserted:function(n,e,t,r){"select"===t.tag?(r.elm&&!r.elm._vOptions?Wn(t,"postpatch",(function(){Ri.componentUpdated(n,e,t)})):Bi(n,e,t.context),n._vOptions=[].map.call(n.options,Li)):("textarea"===t.tag||br(n.type))&&(n._vModifiers=e.modifiers,e.modifiers.lazy||(n.addEventListener("compositionstart",Mi),n.addEventListener("compositionend",Ni),n.addEventListener("change",Ni),Z&&(n.vmodel=!0)))},componentUpdated:function(n,e,t){if("select"===t.tag){Bi(n,e,t.context);var r=n._vOptions,i=n._vOptions=[].map.call(n.options,Li);if(i.some((function(n,e){return!q(n,r[e])})))(n.multiple?e.value.some((function(n){return qi(n,i)})):e.value!==e.oldValue&&qi(e.value,i))&&$i(n,"change")}}};function Bi(n,e,t){Di(n,e,t),(Y||X)&&setTimeout((function(){Di(n,e,t)}),0)}function Di(n,e,t){var r=e.value,i=n.multiple;if(!i||Array.isArray(r)){for(var o,a,s=0,c=n.options.length;s<c;s++)if(a=n.options[s],i)o=L(r,Li(a))>-1,a.selected!==o&&(a.selected=o);else if(q(Li(a),r))return void(n.selectedIndex!==s&&(n.selectedIndex=s));i||(n.selectedIndex=-1)}}function qi(n,e){return e.every((function(e){return!q(e,n)}))}function Li(n){return"_value"in n?n._value:n.value}function Mi(n){n.target.composing=!0}function Ni(n){n.target.composing&&(n.target.composing=!1,$i(n.target,"input"))}function $i(n,e){var t=document.createEvent("HTMLEvents");t.initEvent(e,!0,!0),n.dispatchEvent(t)}function Ui(n){return!n.componentInstance||n.data&&n.data.transition?n:Ui(n.componentInstance._vnode)}var Fi={model:Ri,show:{bind:function(n,e,t){var r=e.value,i=(t=Ui(t)).data&&t.data.transition,o=n.__vOriginalDisplay="none"===n.style.display?"":n.style.display;r&&i?(t.data.show=!0,ji(t,(function(){n.style.display=o}))):n.style.display=r?o:"none"},update:function(n,e,t){var r=e.value;!r!=!e.oldValue&&((t=Ui(t)).data&&t.data.transition?(t.data.show=!0,r?ji(t,(function(){n.style.display=n.__vOriginalDisplay})):Ci(t,(function(){n.style.display="none"}))):n.style.display=r?n.__vOriginalDisplay:"none")},unbind:function(n,e,t,r,i){i||(n.style.display=n.__vOriginalDisplay)}}},Gi={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function Hi(n){var e=n&&n.componentOptions;return e&&e.Ctor.options.abstract?Hi(Ee(e.children)):n}function Vi(n){var e={},t=n.$options;for(var r in t.propsData)e[r]=n[r];var i=t._parentListeners;for(var r in i)e[A(r)]=i[r];return e}function Ji(n,e){if(/\d-keep-alive$/.test(e.tag))return n("keep-alive",{props:e.componentOptions.propsData})}var Wi=function(n){return n.tag||me(n)},Ki=function(n){return"show"===n.name},Qi={name:"transition",props:Gi,abstract:!0,render:function(n){var e=this,t=this.$slots.default;if(t&&(t=t.filter(Wi)).length){0;var r=this.mode;0;var i=t[0];if(function(n){for(;n=n.parent;)if(n.data.transition)return!0}(this.$vnode))return i;var o=Hi(i);if(!o)return i;if(this._leaving)return Ji(n,i);var a="__transition-".concat(this._uid,"-");o.key=null==o.key?o.isComment?a+"comment":a+o.tag:c(o.key)?0===String(o.key).indexOf(a)?o.key:a+o.key:o.key;var s=(o.data||(o.data={})).transition=Vi(this),l=this._vnode,p=Hi(l);if(o.data.directives&&o.data.directives.some(Ki)&&(o.data.show=!0),p&&p.data&&!function(n,e){return e.key===n.key&&e.tag===n.tag}(o,p)&&!me(p)&&(!p.componentInstance||!p.componentInstance._vnode.isComment)){var d=p.data.transition=O({},s);if("out-in"===r)return this._leaving=!0,Wn(d,"afterLeave",(function(){e._leaving=!1,e.$forceUpdate()})),Ji(n,i);if("in-out"===r){if(me(o))return l;var u,h=function(){u()};Wn(s,"afterEnter",h),Wn(s,"enterCancelled",h),Wn(d,"delayLeave",(function(n){u=n}))}}return i}}},Yi=O({tag:String,moveClass:String},Gi);function Zi(n){n.elm._moveCb&&n.elm._moveCb(),n.elm._enterCb&&n.elm._enterCb()}function Xi(n){n.data.newPos=n.elm.getBoundingClientRect()}function no(n){var e=n.data.pos,t=n.data.newPos,r=e.left-t.left,i=e.top-t.top;if(r||i){n.data.moved=!0;var o=n.elm.style;o.transform=o.WebkitTransform="translate(".concat(r,"px,").concat(i,"px)"),o.transitionDuration="0s"}}delete Yi.mode;var eo={Transition:Qi,TransitionGroup:{props:Yi,beforeMount:function(){var n=this,e=this._update;this._update=function(t,r){var i=Ze(n);n.__patch__(n._vnode,n.kept,!1,!0),n._vnode=n.kept,i(),e.call(n,t,r)}},render:function(n){for(var e=this.tag||this.$vnode.data.tag||"span",t=Object.create(null),r=this.prevChildren=this.children,i=this.$slots.default||[],o=this.children=[],a=Vi(this),s=0;s<i.length;s++){if((p=i[s]).tag)if(null!=p.key&&0!==String(p.key).indexOf("__vlist"))o.push(p),t[p.key]=p,(p.data||(p.data={})).transition=a;else;}if(r){var c=[],l=[];for(s=0;s<r.length;s++){var p;(p=r[s]).data.transition=a,p.data.pos=p.elm.getBoundingClientRect(),t[p.key]?c.push(p):l.push(p)}this.kept=n(e,null,c),this.removed=l}return n(e,null,o)},updated:function(){var n=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";n.length&&this.hasMove(n[0].elm,e)&&(n.forEach(Zi),n.forEach(Xi),n.forEach(no),this._reflow=document.body.offsetHeight,n.forEach((function(n){if(n.data.moved){var t=n.elm,r=t.style;wi(t,e),r.transform=r.WebkitTransform=r.transitionDuration="",t.addEventListener(fi,t._moveCb=function n(r){r&&r.target!==t||r&&!/transform$/.test(r.propertyName)||(t.removeEventListener(fi,n),t._moveCb=null,_i(t,e))})}})))},methods:{hasMove:function(n,e){if(!gi)return!1;if(this._hasMove)return this._hasMove;var t=n.cloneNode();n._transitionClasses&&n._transitionClasses.forEach((function(n){di(t,n)})),pi(t,e),t.style.display="none",this.$el.appendChild(t);var r=Ei(t);return this.$el.removeChild(t),this._hasMove=r.hasTransform}}}};function to(n,e){for(var t in e)n[t]=e[t];return n}Jt.config.mustUseProp=function(n,e,t){return"value"===t&&tr(n)&&"button"!==e||"selected"===t&&"option"===n||"checked"===t&&"input"===n||"muted"===t&&"video"===n},Jt.config.isReservedTag=vr,Jt.config.isReservedAttr=er,Jt.config.getTagNamespace=function(n){return fr(n)?"svg":"math"===n?"math":void 0},Jt.config.isUnknownElement=function(n){if(!K)return!0;if(vr(n))return!1;if(n=n.toLowerCase(),null!=yr[n])return yr[n];var e=document.createElement(n);return n.indexOf("-")>-1?yr[n]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:yr[n]=/HTMLUnknownElement/.test(e.toString())},O(Jt.options.directives,Fi),O(Jt.options.components,eo),Jt.prototype.__patch__=K?Pi:R,Jt.prototype.$mount=function(n,e){return function(n,e,t){var r;n.$el=e,n.$options.render||(n.$options.render=mn),et(n,"beforeMount"),r=function(){n._update(n._render(),t)},new Ve(n,r,R,{before:function(){n._isMounted&&!n._isDestroyed&&et(n,"beforeUpdate")}},!0),t=!1;var i=n._preWatchers;if(i)for(var o=0;o<i.length;o++)i[o].run();return null==n.$vnode&&(n._isMounted=!0,et(n,"mounted")),n}(this,n=n&&K?function(n){if("string"==typeof n){var e=document.querySelector(n);return e||document.createElement("div")}return n}(n):void 0,e)},K&&setTimeout((function(){F.devtools&&cn&&cn.emit("init",Jt)}),0);var ro=/[!'()*]/g,io=function(n){return"%"+n.charCodeAt(0).toString(16)},oo=/%2C/g,ao=function(n){return encodeURIComponent(n).replace(ro,io).replace(oo,",")};function so(n){try{return decodeURIComponent(n)}catch(n){0}return n}var co=function(n){return null==n||"object"==typeof n?n:String(n)};function lo(n){var e={};return(n=n.trim().replace(/^(\?|#|&)/,""))?(n.split("&").forEach((function(n){var t=n.replace(/\+/g," ").split("="),r=so(t.shift()),i=t.length>0?so(t.join("=")):null;void 0===e[r]?e[r]=i:Array.isArray(e[r])?e[r].push(i):e[r]=[e[r],i]})),e):e}function po(n){var e=n?Object.keys(n).map((function(e){var t=n[e];if(void 0===t)return"";if(null===t)return ao(e);if(Array.isArray(t)){var r=[];return t.forEach((function(n){void 0!==n&&(null===n?r.push(ao(e)):r.push(ao(e)+"="+ao(n)))})),r.join("&")}return ao(e)+"="+ao(t)})).filter((function(n){return n.length>0})).join("&"):null;return e?"?"+e:""}var uo=/\/?$/;function ho(n,e,t,r){var i=r&&r.options.stringifyQuery,o=e.query||{};try{o=go(o)}catch(n){}var a={name:e.name||n&&n.name,meta:n&&n.meta||{},path:e.path||"/",hash:e.hash||"",query:o,params:e.params||{},fullPath:vo(e,i),matched:n?fo(n):[]};return t&&(a.redirectedFrom=vo(t,i)),Object.freeze(a)}function go(n){if(Array.isArray(n))return n.map(go);if(n&&"object"==typeof n){var e={};for(var t in n)e[t]=go(n[t]);return e}return n}var mo=ho(null,{path:"/"});function fo(n){for(var e=[];n;)e.unshift(n),n=n.parent;return e}function vo(n,e){var t=n.path,r=n.query;void 0===r&&(r={});var i=n.hash;return void 0===i&&(i=""),(t||"/")+(e||po)(r)+i}function yo(n,e,t){return e===mo?n===e:!!e&&(n.path&&e.path?n.path.replace(uo,"")===e.path.replace(uo,"")&&(t||n.hash===e.hash&&bo(n.query,e.query)):!(!n.name||!e.name)&&(n.name===e.name&&(t||n.hash===e.hash&&bo(n.query,e.query)&&bo(n.params,e.params))))}function bo(n,e){if(void 0===n&&(n={}),void 0===e&&(e={}),!n||!e)return n===e;var t=Object.keys(n).sort(),r=Object.keys(e).sort();return t.length===r.length&&t.every((function(t,i){var o=n[t];if(r[i]!==t)return!1;var a=e[t];return null==o||null==a?o===a:"object"==typeof o&&"object"==typeof a?bo(o,a):String(o)===String(a)}))}function ko(n){for(var e=0;e<n.matched.length;e++){var t=n.matched[e];for(var r in t.instances){var i=t.instances[r],o=t.enteredCbs[r];if(i&&o){delete t.enteredCbs[r];for(var a=0;a<o.length;a++)i._isBeingDestroyed||o[a](i)}}}}var wo={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(n,e){var t=e.props,r=e.children,i=e.parent,o=e.data;o.routerView=!0;for(var a=i.$createElement,s=t.name,c=i.$route,l=i._routerViewCache||(i._routerViewCache={}),p=0,d=!1;i&&i._routerRoot!==i;){var u=i.$vnode?i.$vnode.data:{};u.routerView&&p++,u.keepAlive&&i._directInactive&&i._inactive&&(d=!0),i=i.$parent}if(o.routerViewDepth=p,d){var h=l[s],g=h&&h.component;return g?(h.configProps&&_o(g,o,h.route,h.configProps),a(g,o,r)):a()}var m=c.matched[p],f=m&&m.components[s];if(!m||!f)return l[s]=null,a();l[s]={component:f},o.registerRouteInstance=function(n,e){var t=m.instances[s];(e&&t!==n||!e&&t===n)&&(m.instances[s]=e)},(o.hook||(o.hook={})).prepatch=function(n,e){m.instances[s]=e.componentInstance},o.hook.init=function(n){n.data.keepAlive&&n.componentInstance&&n.componentInstance!==m.instances[s]&&(m.instances[s]=n.componentInstance),ko(c)};var v=m.props&&m.props[s];return v&&(to(l[s],{route:c,configProps:v}),_o(f,o,c,v)),a(f,o,r)}};function _o(n,e,t,r){var i=e.props=function(n,e){switch(typeof e){case"undefined":return;case"object":return e;case"function":return e(n);case"boolean":return e?n.params:void 0;default:0}}(t,r);if(i){i=e.props=to({},i);var o=e.attrs=e.attrs||{};for(var a in i)n.props&&a in n.props||(o[a]=i[a],delete i[a])}}function xo(n,e,t){var r=n.charAt(0);if("/"===r)return n;if("?"===r||"#"===r)return e+n;var i=e.split("/");t&&i[i.length-1]||i.pop();for(var o=n.replace(/^\//,"").split("/"),a=0;a<o.length;a++){var s=o[a];".."===s?i.pop():"."!==s&&i.push(s)}return""!==i[0]&&i.unshift(""),i.join("/")}function So(n){return n.replace(/\/(?:\s*\/)+/g,"/")}var Eo=Array.isArray||function(n){return"[object Array]"==Object.prototype.toString.call(n)},Ao=No,To=Oo,jo=function(n,e){return Ro(Oo(n,e),e)},Co=Ro,Io=Mo,zo=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function Oo(n,e){for(var t,r=[],i=0,o=0,a="",s=e&&e.delimiter||"/";null!=(t=zo.exec(n));){var c=t[0],l=t[1],p=t.index;if(a+=n.slice(o,p),o=p+c.length,l)a+=l[1];else{var d=n[o],u=t[2],h=t[3],g=t[4],m=t[5],f=t[6],v=t[7];a&&(r.push(a),a="");var y=null!=u&&null!=d&&d!==u,b="+"===f||"*"===f,k="?"===f||"*"===f,w=t[2]||s,_=g||m;r.push({name:h||i++,prefix:u||"",delimiter:w,optional:k,repeat:b,partial:y,asterisk:!!v,pattern:_?Do(_):v?".*":"[^"+Bo(w)+"]+?"})}}return o<n.length&&(a+=n.substr(o)),a&&r.push(a),r}function Po(n){return encodeURI(n).replace(/[\/?#]/g,(function(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase()}))}function Ro(n,e){for(var t=new Array(n.length),r=0;r<n.length;r++)"object"==typeof n[r]&&(t[r]=new RegExp("^(?:"+n[r].pattern+")$",Lo(e)));return function(e,r){for(var i="",o=e||{},a=(r||{}).pretty?Po:encodeURIComponent,s=0;s<n.length;s++){var c=n[s];if("string"!=typeof c){var l,p=o[c.name];if(null==p){if(c.optional){c.partial&&(i+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(Eo(p)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(p)+"`");if(0===p.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var d=0;d<p.length;d++){if(l=a(p[d]),!t[s].test(l))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(l)+"`");i+=(0===d?c.prefix:c.delimiter)+l}}else{if(l=c.asterisk?encodeURI(p).replace(/[?#]/g,(function(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase()})):a(p),!t[s].test(l))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+l+'"');i+=c.prefix+l}}else i+=c}return i}}function Bo(n){return n.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function Do(n){return n.replace(/([=!:$\/()])/g,"\\$1")}function qo(n,e){return n.keys=e,n}function Lo(n){return n&&n.sensitive?"":"i"}function Mo(n,e,t){Eo(e)||(t=e||t,e=[]);for(var r=(t=t||{}).strict,i=!1!==t.end,o="",a=0;a<n.length;a++){var s=n[a];if("string"==typeof s)o+=Bo(s);else{var c=Bo(s.prefix),l="(?:"+s.pattern+")";e.push(s),s.repeat&&(l+="(?:"+c+l+")*"),o+=l=s.optional?s.partial?c+"("+l+")?":"(?:"+c+"("+l+"))?":c+"("+l+")"}}var p=Bo(t.delimiter||"/"),d=o.slice(-p.length)===p;return r||(o=(d?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=i?"$":r&&d?"":"(?="+p+"|$)",qo(new RegExp("^"+o,Lo(t)),e)}function No(n,e,t){return Eo(e)||(t=e||t,e=[]),t=t||{},n instanceof RegExp?function(n,e){var t=n.source.match(/\((?!\?)/g);if(t)for(var r=0;r<t.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return qo(n,e)}(n,e):Eo(n)?function(n,e,t){for(var r=[],i=0;i<n.length;i++)r.push(No(n[i],e,t).source);return qo(new RegExp("(?:"+r.join("|")+")",Lo(t)),e)}(n,e,t):function(n,e,t){return Mo(Oo(n,t),e,t)}(n,e,t)}Ao.parse=To,Ao.compile=jo,Ao.tokensToFunction=Co,Ao.tokensToRegExp=Io;var $o=Object.create(null);function Uo(n,e,t){e=e||{};try{var r=$o[n]||($o[n]=Ao.compile(n));return"string"==typeof e.pathMatch&&(e[0]=e.pathMatch),r(e,{pretty:!0})}catch(n){return""}finally{delete e[0]}}function Fo(n,e,t,r){var i="string"==typeof n?{path:n}:n;if(i._normalized)return i;if(i.name){var o=(i=to({},n)).params;return o&&"object"==typeof o&&(i.params=to({},o)),i}if(!i.path&&i.params&&e){(i=to({},i))._normalized=!0;var a=to(to({},e.params),i.params);if(e.name)i.name=e.name,i.params=a;else if(e.matched.length){var s=e.matched[e.matched.length-1].path;i.path=Uo(s,a,e.path)}else 0;return i}var c=function(n){var e="",t="",r=n.indexOf("#");r>=0&&(e=n.slice(r),n=n.slice(0,r));var i=n.indexOf("?");return i>=0&&(t=n.slice(i+1),n=n.slice(0,i)),{path:n,query:t,hash:e}}(i.path||""),l=e&&e.path||"/",p=c.path?xo(c.path,l,t||i.append):l,d=function(n,e,t){void 0===e&&(e={});var r,i=t||lo;try{r=i(n||"")}catch(n){r={}}for(var o in e){var a=e[o];r[o]=Array.isArray(a)?a.map(co):co(a)}return r}(c.query,i.query,r&&r.options.parseQuery),u=i.hash||c.hash;return u&&"#"!==u.charAt(0)&&(u="#"+u),{_normalized:!0,path:p,query:d,hash:u}}var Go,Ho=function(){},Vo={name:"RouterLink",props:{to:{type:[String,Object],required:!0},tag:{type:String,default:"a"},custom:Boolean,exact:Boolean,exactPath:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:{type:String,default:"page"},event:{type:[String,Array],default:"click"}},render:function(n){var e=this,t=this.$router,r=this.$route,i=t.resolve(this.to,r,this.append),o=i.location,a=i.route,s=i.href,c={},l=t.options.linkActiveClass,p=t.options.linkExactActiveClass,d=null==l?"router-link-active":l,u=null==p?"router-link-exact-active":p,h=null==this.activeClass?d:this.activeClass,g=null==this.exactActiveClass?u:this.exactActiveClass,m=a.redirectedFrom?ho(null,Fo(a.redirectedFrom),null,t):a;c[g]=yo(r,m,this.exactPath),c[h]=this.exact||this.exactPath?c[g]:function(n,e){return 0===n.path.replace(uo,"/").indexOf(e.path.replace(uo,"/"))&&(!e.hash||n.hash===e.hash)&&function(n,e){for(var t in e)if(!(t in n))return!1;return!0}(n.query,e.query)}(r,m);var f=c[g]?this.ariaCurrentValue:null,v=function(n){Jo(n)&&(e.replace?t.replace(o,Ho):t.push(o,Ho))},y={click:Jo};Array.isArray(this.event)?this.event.forEach((function(n){y[n]=v})):y[this.event]=v;var b={class:c},k=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:s,route:a,navigate:v,isActive:c[h],isExactActive:c[g]});if(k){if(1===k.length)return k[0];if(k.length>1||!k.length)return 0===k.length?n():n("span",{},k)}if("a"===this.tag)b.on=y,b.attrs={href:s,"aria-current":f};else{var w=function n(e){var t;if(e)for(var r=0;r<e.length;r++){if("a"===(t=e[r]).tag)return t;if(t.children&&(t=n(t.children)))return t}}(this.$slots.default);if(w){w.isStatic=!1;var _=w.data=to({},w.data);for(var x in _.on=_.on||{},_.on){var S=_.on[x];x in y&&(_.on[x]=Array.isArray(S)?S:[S])}for(var E in y)E in _.on?_.on[E].push(y[E]):_.on[E]=v;var A=w.data.attrs=to({},w.data.attrs);A.href=s,A["aria-current"]=f}else b.on=y}return n(this.tag,b,this.$slots.default)}};function Jo(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey||n.defaultPrevented||void 0!==n.button&&0!==n.button)){if(n.currentTarget&&n.currentTarget.getAttribute){var e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}var Wo="undefined"!=typeof window;function Ko(n,e,t,r,i){var o=e||[],a=t||Object.create(null),s=r||Object.create(null);n.forEach((function(n){!function n(e,t,r,i,o,a){var s=i.path,c=i.name;0;var l=i.pathToRegexpOptions||{},p=function(n,e,t){t||(n=n.replace(/\/$/,""));if("/"===n[0])return n;if(null==e)return n;return So(e.path+"/"+n)}(s,o,l.strict);"boolean"==typeof i.caseSensitive&&(l.sensitive=i.caseSensitive);var d={path:p,regex:Qo(p,l),components:i.components||{default:i.component},alias:i.alias?"string"==typeof i.alias?[i.alias]:i.alias:[],instances:{},enteredCbs:{},name:c,parent:o,matchAs:a,redirect:i.redirect,beforeEnter:i.beforeEnter,meta:i.meta||{},props:null==i.props?{}:i.components?i.props:{default:i.props}};i.children&&i.children.forEach((function(i){var o=a?So(a+"/"+i.path):void 0;n(e,t,r,i,d,o)}));t[d.path]||(e.push(d.path),t[d.path]=d);if(void 0!==i.alias)for(var u=Array.isArray(i.alias)?i.alias:[i.alias],h=0;h<u.length;++h){0;var g={path:u[h],children:i.children};n(e,t,r,g,o,d.path||"/")}c&&(r[c]||(r[c]=d))}(o,a,s,n,i)}));for(var c=0,l=o.length;c<l;c++)"*"===o[c]&&(o.push(o.splice(c,1)[0]),l--,c--);return{pathList:o,pathMap:a,nameMap:s}}function Qo(n,e){return Ao(n,[],e)}function Yo(n,e){var t=Ko(n),r=t.pathList,i=t.pathMap,o=t.nameMap;function a(n,t,a){var s=Fo(n,t,!1,e),l=s.name;if(l){var p=o[l];if(!p)return c(null,s);var d=p.regex.keys.filter((function(n){return!n.optional})).map((function(n){return n.name}));if("object"!=typeof s.params&&(s.params={}),t&&"object"==typeof t.params)for(var u in t.params)!(u in s.params)&&d.indexOf(u)>-1&&(s.params[u]=t.params[u]);return s.path=Uo(p.path,s.params),c(p,s,a)}if(s.path){s.params={};for(var h=0;h<r.length;h++){var g=r[h],m=i[g];if(Zo(m.regex,s.path,s.params))return c(m,s,a)}}return c(null,s)}function s(n,t){var r=n.redirect,i="function"==typeof r?r(ho(n,t,null,e)):r;if("string"==typeof i&&(i={path:i}),!i||"object"!=typeof i)return c(null,t);var s=i,l=s.name,p=s.path,d=t.query,u=t.hash,h=t.params;if(d=s.hasOwnProperty("query")?s.query:d,u=s.hasOwnProperty("hash")?s.hash:u,h=s.hasOwnProperty("params")?s.params:h,l){o[l];return a({_normalized:!0,name:l,query:d,hash:u,params:h},void 0,t)}if(p){var g=function(n,e){return xo(n,e.parent?e.parent.path:"/",!0)}(p,n);return a({_normalized:!0,path:Uo(g,h),query:d,hash:u},void 0,t)}return c(null,t)}function c(n,t,r){return n&&n.redirect?s(n,r||t):n&&n.matchAs?function(n,e,t){var r=a({_normalized:!0,path:Uo(t,e.params)});if(r){var i=r.matched,o=i[i.length-1];return e.params=r.params,c(o,e)}return c(null,e)}(0,t,n.matchAs):ho(n,t,r,e)}return{match:a,addRoute:function(n,e){var t="object"!=typeof n?o[n]:void 0;Ko([e||n],r,i,o,t),t&&t.alias.length&&Ko(t.alias.map((function(n){return{path:n,children:[e]}})),r,i,o,t)},getRoutes:function(){return r.map((function(n){return i[n]}))},addRoutes:function(n){Ko(n,r,i,o)}}}function Zo(n,e,t){var r=e.match(n);if(!r)return!1;if(!t)return!0;for(var i=1,o=r.length;i<o;++i){var a=n.keys[i-1];a&&(t[a.name||"pathMatch"]="string"==typeof r[i]?so(r[i]):r[i])}return!0}var Xo=Wo&&window.performance&&window.performance.now?window.performance:Date;function na(){return Xo.now().toFixed(3)}var ea=na();function ta(){return ea}function ra(n){return ea=n}var ia=Object.create(null);function oa(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");var n=window.location.protocol+"//"+window.location.host,e=window.location.href.replace(n,""),t=to({},window.history.state);return t.key=ta(),window.history.replaceState(t,"",e),window.addEventListener("popstate",ca),function(){window.removeEventListener("popstate",ca)}}function aa(n,e,t,r){if(n.app){var i=n.options.scrollBehavior;i&&n.app.$nextTick((function(){var o=function(){var n=ta();if(n)return ia[n]}(),a=i.call(n,e,t,r?o:null);a&&("function"==typeof a.then?a.then((function(n){ha(n,o)})).catch((function(n){0})):ha(a,o))}))}}function sa(){var n=ta();n&&(ia[n]={x:window.pageXOffset,y:window.pageYOffset})}function ca(n){sa(),n.state&&n.state.key&&ra(n.state.key)}function la(n){return da(n.x)||da(n.y)}function pa(n){return{x:da(n.x)?n.x:window.pageXOffset,y:da(n.y)?n.y:window.pageYOffset}}function da(n){return"number"==typeof n}var ua=/^#\d/;function ha(n,e){var t,r="object"==typeof n;if(r&&"string"==typeof n.selector){var i=ua.test(n.selector)?document.getElementById(n.selector.slice(1)):document.querySelector(n.selector);if(i){var o=n.offset&&"object"==typeof n.offset?n.offset:{};e=function(n,e){var t=document.documentElement.getBoundingClientRect(),r=n.getBoundingClientRect();return{x:r.left-t.left-e.x,y:r.top-t.top-e.y}}(i,o={x:da((t=o).x)?t.x:0,y:da(t.y)?t.y:0})}else la(n)&&(e=pa(n))}else r&&la(n)&&(e=pa(n));e&&("scrollBehavior"in document.documentElement.style?window.scrollTo({left:e.x,top:e.y,behavior:n.behavior}):window.scrollTo(e.x,e.y))}var ga,ma=Wo&&((-1===(ga=window.navigator.userAgent).indexOf("Android 2.")&&-1===ga.indexOf("Android 4.0")||-1===ga.indexOf("Mobile Safari")||-1!==ga.indexOf("Chrome")||-1!==ga.indexOf("Windows Phone"))&&window.history&&"function"==typeof window.history.pushState);function fa(n,e){sa();var t=window.history;try{if(e){var r=to({},t.state);r.key=ta(),t.replaceState(r,"",n)}else t.pushState({key:ra(na())},"",n)}catch(t){window.location[e?"replace":"assign"](n)}}function va(n){fa(n,!0)}var ya={redirected:2,aborted:4,cancelled:8,duplicated:16};function ba(n,e){return wa(n,e,ya.redirected,'Redirected when going from "'+n.fullPath+'" to "'+function(n){if("string"==typeof n)return n;if("path"in n)return n.path;var e={};return _a.forEach((function(t){t in n&&(e[t]=n[t])})),JSON.stringify(e,null,2)}(e)+'" via a navigation guard.')}function ka(n,e){return wa(n,e,ya.cancelled,'Navigation cancelled from "'+n.fullPath+'" to "'+e.fullPath+'" with a new navigation.')}function wa(n,e,t,r){var i=new Error(r);return i._isRouter=!0,i.from=n,i.to=e,i.type=t,i}var _a=["params","query","hash"];function xa(n){return Object.prototype.toString.call(n).indexOf("Error")>-1}function Sa(n,e){return xa(n)&&n._isRouter&&(null==e||n.type===e)}function Ea(n,e,t){var r=function(i){i>=n.length?t():n[i]?e(n[i],(function(){r(i+1)})):r(i+1)};r(0)}function Aa(n){return function(e,t,r){var i=!1,o=0,a=null;Ta(n,(function(n,e,t,s){if("function"==typeof n&&void 0===n.cid){i=!0,o++;var c,l=Ia((function(e){var i;((i=e).__esModule||Ca&&"Module"===i[Symbol.toStringTag])&&(e=e.default),n.resolved="function"==typeof e?e:Go.extend(e),t.components[s]=e,--o<=0&&r()})),p=Ia((function(n){var e="Failed to resolve async component "+s+": "+n;a||(a=xa(n)?n:new Error(e),r(a))}));try{c=n(l,p)}catch(n){p(n)}if(c)if("function"==typeof c.then)c.then(l,p);else{var d=c.component;d&&"function"==typeof d.then&&d.then(l,p)}}})),i||r()}}function Ta(n,e){return ja(n.map((function(n){return Object.keys(n.components).map((function(t){return e(n.components[t],n.instances[t],n,t)}))})))}function ja(n){return Array.prototype.concat.apply([],n)}var Ca="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;function Ia(n){var e=!1;return function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(!e)return e=!0,n.apply(this,t)}}var za=function(n,e){this.router=n,this.base=function(n){if(!n)if(Wo){var e=document.querySelector("base");n=(n=e&&e.getAttribute("href")||"/").replace(/^https?:\/\/[^\/]+/,"")}else n="/";"/"!==n.charAt(0)&&(n="/"+n);return n.replace(/\/$/,"")}(e),this.current=mo,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[],this.listeners=[]};function Oa(n,e,t,r){var i=Ta(n,(function(n,r,i,o){var a=function(n,e){"function"!=typeof n&&(n=Go.extend(n));return n.options[e]}(n,e);if(a)return Array.isArray(a)?a.map((function(n){return t(n,r,i,o)})):t(a,r,i,o)}));return ja(r?i.reverse():i)}function Pa(n,e){if(e)return function(){return n.apply(e,arguments)}}za.prototype.listen=function(n){this.cb=n},za.prototype.onReady=function(n,e){this.ready?n():(this.readyCbs.push(n),e&&this.readyErrorCbs.push(e))},za.prototype.onError=function(n){this.errorCbs.push(n)},za.prototype.transitionTo=function(n,e,t){var r,i=this;try{r=this.router.match(n,this.current)}catch(n){throw this.errorCbs.forEach((function(e){e(n)})),n}var o=this.current;this.confirmTransition(r,(function(){i.updateRoute(r),e&&e(r),i.ensureURL(),i.router.afterHooks.forEach((function(n){n&&n(r,o)})),i.ready||(i.ready=!0,i.readyCbs.forEach((function(n){n(r)})))}),(function(n){t&&t(n),n&&!i.ready&&(Sa(n,ya.redirected)&&o===mo||(i.ready=!0,i.readyErrorCbs.forEach((function(e){e(n)}))))}))},za.prototype.confirmTransition=function(n,e,t){var r=this,i=this.current;this.pending=n;var o,a,s=function(n){!Sa(n)&&xa(n)&&(r.errorCbs.length?r.errorCbs.forEach((function(e){e(n)})):console.error(n)),t&&t(n)},c=n.matched.length-1,l=i.matched.length-1;if(yo(n,i)&&c===l&&n.matched[c]===i.matched[l])return this.ensureURL(),n.hash&&aa(this.router,i,n,!1),s(((a=wa(o=i,n,ya.duplicated,'Avoided redundant navigation to current location: "'+o.fullPath+'".')).name="NavigationDuplicated",a));var p=function(n,e){var t,r=Math.max(n.length,e.length);for(t=0;t<r&&n[t]===e[t];t++);return{updated:e.slice(0,t),activated:e.slice(t),deactivated:n.slice(t)}}(this.current.matched,n.matched),d=p.updated,u=p.deactivated,h=p.activated,g=[].concat(function(n){return Oa(n,"beforeRouteLeave",Pa,!0)}(u),this.router.beforeHooks,function(n){return Oa(n,"beforeRouteUpdate",Pa)}(d),h.map((function(n){return n.beforeEnter})),Aa(h)),m=function(e,t){if(r.pending!==n)return s(ka(i,n));try{e(n,i,(function(e){!1===e?(r.ensureURL(!0),s(function(n,e){return wa(n,e,ya.aborted,'Navigation aborted from "'+n.fullPath+'" to "'+e.fullPath+'" via a navigation guard.')}(i,n))):xa(e)?(r.ensureURL(!0),s(e)):"string"==typeof e||"object"==typeof e&&("string"==typeof e.path||"string"==typeof e.name)?(s(ba(i,n)),"object"==typeof e&&e.replace?r.replace(e):r.push(e)):t(e)}))}catch(n){s(n)}};Ea(g,m,(function(){Ea(function(n){return Oa(n,"beforeRouteEnter",(function(n,e,t,r){return function(n,e,t){return function(r,i,o){return n(r,i,(function(n){"function"==typeof n&&(e.enteredCbs[t]||(e.enteredCbs[t]=[]),e.enteredCbs[t].push(n)),o(n)}))}}(n,t,r)}))}(h).concat(r.router.resolveHooks),m,(function(){if(r.pending!==n)return s(ka(i,n));r.pending=null,e(n),r.router.app&&r.router.app.$nextTick((function(){ko(n)}))}))}))},za.prototype.updateRoute=function(n){this.current=n,this.cb&&this.cb(n)},za.prototype.setupListeners=function(){},za.prototype.teardown=function(){this.listeners.forEach((function(n){n()})),this.listeners=[],this.current=mo,this.pending=null};var Ra=function(n){function e(e,t){n.call(this,e,t),this._startLocation=Ba(this.base)}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var n=this;if(!(this.listeners.length>0)){var e=this.router,t=e.options.scrollBehavior,r=ma&&t;r&&this.listeners.push(oa());var i=function(){var t=n.current,i=Ba(n.base);n.current===mo&&i===n._startLocation||n.transitionTo(i,(function(n){r&&aa(e,n,t,!0)}))};window.addEventListener("popstate",i),this.listeners.push((function(){window.removeEventListener("popstate",i)}))}},e.prototype.go=function(n){window.history.go(n)},e.prototype.push=function(n,e,t){var r=this,i=this.current;this.transitionTo(n,(function(n){fa(So(r.base+n.fullPath)),aa(r.router,n,i,!1),e&&e(n)}),t)},e.prototype.replace=function(n,e,t){var r=this,i=this.current;this.transitionTo(n,(function(n){va(So(r.base+n.fullPath)),aa(r.router,n,i,!1),e&&e(n)}),t)},e.prototype.ensureURL=function(n){if(Ba(this.base)!==this.current.fullPath){var e=So(this.base+this.current.fullPath);n?fa(e):va(e)}},e.prototype.getCurrentLocation=function(){return Ba(this.base)},e}(za);function Ba(n){var e=window.location.pathname,t=e.toLowerCase(),r=n.toLowerCase();return!n||t!==r&&0!==t.indexOf(So(r+"/"))||(e=e.slice(n.length)),(e||"/")+window.location.search+window.location.hash}var Da=function(n){function e(e,t,r){n.call(this,e,t),r&&function(n){var e=Ba(n);if(!/^\/#/.test(e))return window.location.replace(So(n+"/#"+e)),!0}(this.base)||qa()}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var n=this;if(!(this.listeners.length>0)){var e=this.router.options.scrollBehavior,t=ma&&e;t&&this.listeners.push(oa());var r=function(){var e=n.current;qa()&&n.transitionTo(La(),(function(r){t&&aa(n.router,r,e,!0),ma||$a(r.fullPath)}))},i=ma?"popstate":"hashchange";window.addEventListener(i,r),this.listeners.push((function(){window.removeEventListener(i,r)}))}},e.prototype.push=function(n,e,t){var r=this,i=this.current;this.transitionTo(n,(function(n){Na(n.fullPath),aa(r.router,n,i,!1),e&&e(n)}),t)},e.prototype.replace=function(n,e,t){var r=this,i=this.current;this.transitionTo(n,(function(n){$a(n.fullPath),aa(r.router,n,i,!1),e&&e(n)}),t)},e.prototype.go=function(n){window.history.go(n)},e.prototype.ensureURL=function(n){var e=this.current.fullPath;La()!==e&&(n?Na(e):$a(e))},e.prototype.getCurrentLocation=function(){return La()},e}(za);function qa(){var n=La();return"/"===n.charAt(0)||($a("/"+n),!1)}function La(){var n=window.location.href,e=n.indexOf("#");return e<0?"":n=n.slice(e+1)}function Ma(n){var e=window.location.href,t=e.indexOf("#");return(t>=0?e.slice(0,t):e)+"#"+n}function Na(n){ma?fa(Ma(n)):window.location.hash=n}function $a(n){ma?va(Ma(n)):window.location.replace(Ma(n))}var Ua=function(n){function e(e,t){n.call(this,e,t),this.stack=[],this.index=-1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.push=function(n,e,t){var r=this;this.transitionTo(n,(function(n){r.stack=r.stack.slice(0,r.index+1).concat(n),r.index++,e&&e(n)}),t)},e.prototype.replace=function(n,e,t){var r=this;this.transitionTo(n,(function(n){r.stack=r.stack.slice(0,r.index).concat(n),e&&e(n)}),t)},e.prototype.go=function(n){var e=this,t=this.index+n;if(!(t<0||t>=this.stack.length)){var r=this.stack[t];this.confirmTransition(r,(function(){var n=e.current;e.index=t,e.updateRoute(r),e.router.afterHooks.forEach((function(e){e&&e(r,n)}))}),(function(n){Sa(n,ya.duplicated)&&(e.index=t)}))}},e.prototype.getCurrentLocation=function(){var n=this.stack[this.stack.length-1];return n?n.fullPath:"/"},e.prototype.ensureURL=function(){},e}(za),Fa=function(n){void 0===n&&(n={}),this.app=null,this.apps=[],this.options=n,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=Yo(n.routes||[],this);var e=n.mode||"hash";switch(this.fallback="history"===e&&!ma&&!1!==n.fallback,this.fallback&&(e="hash"),Wo||(e="abstract"),this.mode=e,e){case"history":this.history=new Ra(this,n.base);break;case"hash":this.history=new Da(this,n.base,this.fallback);break;case"abstract":this.history=new Ua(this,n.base);break;default:0}},Ga={currentRoute:{configurable:!0}};Fa.prototype.match=function(n,e,t){return this.matcher.match(n,e,t)},Ga.currentRoute.get=function(){return this.history&&this.history.current},Fa.prototype.init=function(n){var e=this;if(this.apps.push(n),n.$once("hook:destroyed",(function(){var t=e.apps.indexOf(n);t>-1&&e.apps.splice(t,1),e.app===n&&(e.app=e.apps[0]||null),e.app||e.history.teardown()})),!this.app){this.app=n;var t=this.history;if(t instanceof Ra||t instanceof Da){var r=function(n){t.setupListeners(),function(n){var r=t.current,i=e.options.scrollBehavior;ma&&i&&"fullPath"in n&&aa(e,n,r,!1)}(n)};t.transitionTo(t.getCurrentLocation(),r,r)}t.listen((function(n){e.apps.forEach((function(e){e._route=n}))}))}},Fa.prototype.beforeEach=function(n){return Va(this.beforeHooks,n)},Fa.prototype.beforeResolve=function(n){return Va(this.resolveHooks,n)},Fa.prototype.afterEach=function(n){return Va(this.afterHooks,n)},Fa.prototype.onReady=function(n,e){this.history.onReady(n,e)},Fa.prototype.onError=function(n){this.history.onError(n)},Fa.prototype.push=function(n,e,t){var r=this;if(!e&&!t&&"undefined"!=typeof Promise)return new Promise((function(e,t){r.history.push(n,e,t)}));this.history.push(n,e,t)},Fa.prototype.replace=function(n,e,t){var r=this;if(!e&&!t&&"undefined"!=typeof Promise)return new Promise((function(e,t){r.history.replace(n,e,t)}));this.history.replace(n,e,t)},Fa.prototype.go=function(n){this.history.go(n)},Fa.prototype.back=function(){this.go(-1)},Fa.prototype.forward=function(){this.go(1)},Fa.prototype.getMatchedComponents=function(n){var e=n?n.matched?n:this.resolve(n).route:this.currentRoute;return e?[].concat.apply([],e.matched.map((function(n){return Object.keys(n.components).map((function(e){return n.components[e]}))}))):[]},Fa.prototype.resolve=function(n,e,t){var r=Fo(n,e=e||this.history.current,t,this),i=this.match(r,e),o=i.redirectedFrom||i.fullPath;return{location:r,route:i,href:function(n,e,t){var r="hash"===t?"#"+e:e;return n?So(n+"/"+r):r}(this.history.base,o,this.mode),normalizedTo:r,resolved:i}},Fa.prototype.getRoutes=function(){return this.matcher.getRoutes()},Fa.prototype.addRoute=function(n,e){this.matcher.addRoute(n,e),this.history.current!==mo&&this.history.transitionTo(this.history.getCurrentLocation())},Fa.prototype.addRoutes=function(n){this.matcher.addRoutes(n),this.history.current!==mo&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(Fa.prototype,Ga);var Ha=Fa;function Va(n,e){return n.push(e),function(){var t=n.indexOf(e);t>-1&&n.splice(t,1)}}Fa.install=function n(e){if(!n.installed||Go!==e){n.installed=!0,Go=e;var t=function(n){return void 0!==n},r=function(n,e){var r=n.$options._parentVnode;t(r)&&t(r=r.data)&&t(r=r.registerRouteInstance)&&r(n,e)};e.mixin({beforeCreate:function(){t(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),e.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,r(this,this)},destroyed:function(){r(this)}}),Object.defineProperty(e.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(e.prototype,"$route",{get:function(){return this._routerRoot._route}}),e.component("RouterView",wo),e.component("RouterLink",Vo);var i=e.config.optionMergeStrategies;i.beforeRouteEnter=i.beforeRouteLeave=i.beforeRouteUpdate=i.created}},Fa.version="3.6.5",Fa.isNavigationFailure=Sa,Fa.NavigationFailureType=ya,Fa.START_LOCATION=mo,Wo&&window.Vue&&window.Vue.use(Fa);t(108);t(130),t(17);var Ja={NotFound:()=>Promise.all([t.e(0),t.e(4)]).then(t.bind(null,346)),Layout:()=>Promise.all([t.e(0),t.e(2)]).then(t.bind(null,345))},Wa={"v-75162340":()=>t.e(5).then(t.bind(null,347)),"v-80a3b3c8":()=>t.e(8).then(t.bind(null,348)),"v-19aaa787":()=>t.e(7).then(t.bind(null,349)),"v-597a1d72":()=>t.e(9).then(t.bind(null,350)),"v-1e650315":()=>t.e(10).then(t.bind(null,351)),"v-0ae79a98":()=>t.e(6).then(t.bind(null,352)),"v-d6f8fa64":()=>t.e(11).then(t.bind(null,353)),"v-3d51175f":()=>t.e(12).then(t.bind(null,354)),"v-68ca0134":()=>t.e(13).then(t.bind(null,355)),"v-7c90548e":()=>t.e(15).then(t.bind(null,356)),"v-4b4ac04d":()=>t.e(14).then(t.bind(null,357)),"v-6d613208":()=>t.e(17).then(t.bind(null,358)),"v-26e68e78":()=>t.e(18).then(t.bind(null,359)),"v-b095581e":()=>t.e(16).then(t.bind(null,360)),"v-18a9c640":()=>t.e(20).then(t.bind(null,361)),"v-034236e3":()=>t.e(21).then(t.bind(null,362)),"v-6a799aad":()=>t.e(19).then(t.bind(null,363)),"v-890112a2":()=>t.e(22).then(t.bind(null,364)),"v-75fb42a4":()=>t.e(24).then(t.bind(null,365)),"v-3d656a7d":()=>t.e(23).then(t.bind(null,366)),"v-96d4e666":()=>t.e(25).then(t.bind(null,367)),"v-8992ebda":()=>t.e(26).then(t.bind(null,368)),"v-17b185ca":()=>t.e(27).then(t.bind(null,369)),"v-7a84ac66":()=>t.e(29).then(t.bind(null,370)),"v-17c98162":()=>t.e(28).then(t.bind(null,371)),"v-f1e6536c":()=>t.e(30).then(t.bind(null,372)),"v-3ab41fda":()=>t.e(31).then(t.bind(null,373)),"v-4df99c9f":()=>t.e(32).then(t.bind(null,374)),"v-7304e2cd":()=>t.e(33).then(t.bind(null,375)),"v-5b97e7b8":()=>t.e(34).then(t.bind(null,376)),"v-7330515c":()=>t.e(35).then(t.bind(null,377)),"v-1f036070":()=>t.e(36).then(t.bind(null,378)),"v-07c556de":()=>t.e(38).then(t.bind(null,379)),"v-aea4643c":()=>t.e(37).then(t.bind(null,380)),"v-6493a75b":()=>t.e(39).then(t.bind(null,381)),"v-4d9d1213":()=>t.e(40).then(t.bind(null,382)),"v-6ac94fd5":()=>t.e(41).then(t.bind(null,383)),"v-642daeec":()=>t.e(42).then(t.bind(null,384)),"v-2a29defe":()=>t.e(44).then(t.bind(null,385)),"v-09d2ca00":()=>t.e(45).then(t.bind(null,386)),"v-e4718e2e":()=>t.e(47).then(t.bind(null,387)),"v-67024f50":()=>t.e(43).then(t.bind(null,388)),"v-91e8ba14":()=>t.e(46).then(t.bind(null,389)),"v-8950dde6":()=>t.e(48).then(t.bind(null,390)),"v-4bb6cc6a":()=>t.e(49).then(t.bind(null,391)),"v-706a1ec4":()=>t.e(50).then(t.bind(null,392)),"v-1800cf9a":()=>t.e(51).then(t.bind(null,393)),"v-7786a12b":()=>t.e(52).then(t.bind(null,394)),"v-ec52908e":()=>t.e(54).then(t.bind(null,395)),"v-352f39f2":()=>t.e(55).then(t.bind(null,396)),"v-5d3e6532":()=>t.e(56).then(t.bind(null,397)),"v-15b1c965":()=>t.e(53).then(t.bind(null,398)),"v-5ad32af2":()=>t.e(57).then(t.bind(null,399)),"v-0ff9aaa0":()=>t.e(58).then(t.bind(null,400))};function Ka(n){const e=Object.create(null);return function(t){return e[t]||(e[t]=n(t))}}const Qa=/-(\w)/g,Ya=Ka(n=>n.replace(Qa,(n,e)=>e?e.toUpperCase():"")),Za=/\B([A-Z])/g,Xa=Ka(n=>n.replace(Za,"-$1").toLowerCase()),ns=Ka(n=>n.charAt(0).toUpperCase()+n.slice(1));function es(n,e){if(!e)return;if(n(e))return n(e);return e.includes("-")?n(ns(Ya(e))):n(ns(e))||n(Xa(e))}const ts=Object.assign({},Ja,Wa),rs=n=>ts[n],is=n=>Wa[n],os=n=>Ja[n],as=n=>Jt.component(n);function ss(n){return es(is,n)}function cs(n){return es(os,n)}function ls(n){return es(rs,n)}function ps(n){return es(as,n)}function ds(...n){return Promise.all(n.filter(n=>n).map(async n=>{if(!ps(n)&&ls(n)){const e=await ls(n)();Jt.component(n,e.default)}}))}function us(n,e){"undefined"!=typeof window&&window.__VUEPRESS__&&(window.__VUEPRESS__[n]=e)}var hs=t(93),gs=t.n(hs),ms=t(94),fs=t.n(ms),vs={created(){if(this.siteMeta=this.$site.headTags.filter(([n])=>"meta"===n).map(([n,e])=>e),this.$ssrContext){const e=this.getMergedMetaTags();this.$ssrContext.title=this.$title,this.$ssrContext.lang=this.$lang,this.$ssrContext.pageMeta=(n=e)?n.map(n=>{let e="<meta";return Object.keys(n).forEach(t=>{e+=` ${t}="${fs()(n[t])}"`}),e+">"}).join("\n    "):"",this.$ssrContext.canonicalLink=bs(this.$canonicalUrl)}var n},mounted(){this.currentMetaTags=[...document.querySelectorAll("meta")],this.updateMeta(),this.updateCanonicalLink()},methods:{updateMeta(){document.title=this.$title,document.documentElement.lang=this.$lang;const n=this.getMergedMetaTags();this.currentMetaTags=ks(n,this.currentMetaTags)},getMergedMetaTags(){const n=this.$page.frontmatter.meta||[];return gs()([{name:"description",content:this.$description}],n,this.siteMeta,ws)},updateCanonicalLink(){ys(),this.$canonicalUrl&&document.head.insertAdjacentHTML("beforeend",bs(this.$canonicalUrl))}},watch:{$page(){this.updateMeta(),this.updateCanonicalLink()}},beforeDestroy(){ks(null,this.currentMetaTags),ys()}};function ys(){const n=document.querySelector("link[rel='canonical']");n&&n.remove()}function bs(n=""){return n?`<link href="${n}" rel="canonical" />`:""}function ks(n,e){if(e&&[...e].filter(n=>n.parentNode===document.head).forEach(n=>document.head.removeChild(n)),n)return n.map(n=>{const e=document.createElement("meta");return Object.keys(n).forEach(t=>{e.setAttribute(t,n[t])}),document.head.appendChild(e),e})}function ws(n){for(const e of["name","property","itemprop"])if(n.hasOwnProperty(e))return n[e]+e;return JSON.stringify(n)}var _s=t(51),xs={mounted(){window.addEventListener("scroll",this.onScroll)},methods:{onScroll:t.n(_s)()((function(){this.setActiveHash()}),300),setActiveHash(){const n=[].slice.call(document.querySelectorAll(".sidebar-link")),e=[].slice.call(document.querySelectorAll(".header-anchor")).filter(e=>n.some(n=>n.hash===e.hash)),t=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop),r=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),i=window.innerHeight+t;for(let n=0;n<e.length;n++){const o=e[n],a=e[n+1],s=0===n&&0===t||t>=o.parentElement.offsetTop+10&&(!a||t<a.parentElement.offsetTop-10),c=decodeURIComponent(this.$route.hash);if(s&&c!==decodeURIComponent(o.hash)){const t=o;if(i===r)for(let t=n+1;t<e.length;t++)if(c===decodeURIComponent(e[t].hash))return;return this.$vuepress.$set("disableScrollBehavior",!0),void this.$router.replace(decodeURIComponent(t.hash),()=>{this.$nextTick(()=>{this.$vuepress.$set("disableScrollBehavior",!1)})})}}}},beforeDestroy(){window.removeEventListener("scroll",this.onScroll)}},Ss=t(26),Es=t.n(Ss),As={mounted(){Es.a.configure({showSpinner:!1}),this.$router.beforeEach((n,e,t)=>{n.path===e.path||Jt.component(n.name)||Es.a.start(),t()}),this.$router.afterEach(()=>{Es.a.done(),this.isSidebarOpen=!1})}};t(242),t(243);class Ts{constructor(){this.containerEl=document.getElementById("message-container"),this.containerEl||(this.containerEl=document.createElement("div"),this.containerEl.id="message-container",document.body.appendChild(this.containerEl))}show({text:n="",duration:e=3e3}){let t=document.createElement("div");t.className="message move-in",t.innerHTML=`\n      <i style="fill: #06a35a;font-size: 14px;display:inline-flex;align-items: center;">\n        <svg style="fill: #06a35a;font-size: 14px;" t="1572421810237" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2323" width="16" height="16"><path d="M822.811993 824.617989c-83.075838 81.99224-188.546032 124.613757-316.049383 127.86455-122.085362-3.250794-223.943563-45.87231-305.935802-127.86455s-124.613757-184.21164-127.86455-305.935802c3.250794-127.503351 45.87231-232.973545 127.86455-316.049383 81.99224-83.075838 184.21164-126.058554 305.935802-129.309347 127.503351 3.250794 232.973545 46.23351 316.049383 129.309347 83.075838 83.075838 126.058554 188.546032 129.309347 316.049383C949.231746 640.406349 905.887831 742.62575 822.811993 824.617989zM432.716755 684.111464c3.973192 3.973192 8.307584 5.779189 13.364374 6.140388 5.05679 0.361199 9.752381-1.444797 13.364374-5.417989l292.571429-287.514638c3.973192-3.973192 5.779189-8.307584 5.779189-13.364374 0-5.05679-1.805996-9.752381-5.779189-13.364374l1.805996 1.805996c-3.973192-3.973192-8.668783-5.779189-14.086772-6.140388-5.417989-0.361199-10.47478 1.444797-14.809171 5.417989l-264.397884 220.33157c-3.973192 3.250794-8.668783 4.695591-14.447972 4.695591-5.779189 0-10.835979-1.444797-15.53157-3.973192l-94.273016-72.962257c-4.334392-3.250794-9.391182-4.334392-14.447972-3.973192s-9.391182 3.250794-12.641975 7.585185l-2.889594 3.973192c-3.250794 4.334392-4.334392 9.391182-3.973192 14.809171 0.722399 5.417989 2.528395 10.11358 5.779189 14.086772L432.716755 684.111464z" p-id="2324"></path></svg>\n      </i>\n      <div class="text">${n}</div>\n    `,this.containerEl.appendChild(t),e>0&&setTimeout(()=>{this.close(t)},e)}close(n){n.className=n.className.replace("move-in",""),n.className+="move-out",n.addEventListener("animationend",()=>{n.remove()})}}var js={mounted(){!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||this.updateCopy()},updated(){!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||this.updateCopy()},methods:{updateCopy(){setTimeout(()=>{(['div[class*="language-"] pre','div[class*="aside-code"] aside']instanceof Array||Array.isArray(['div[class*="language-"] pre','div[class*="aside-code"] aside']))&&['div[class*="language-"] pre','div[class*="aside-code"] aside'].forEach(n=>{document.querySelectorAll(n).forEach(this.generateCopyButton)})},1e3)},generateCopyButton(n){if(n.classList.contains("codecopy-enabled"))return;const e=document.createElement("i");e.className="code-copy",e.innerHTML='<svg  style="color:#aaa;font-size:14px" t="1572422231464" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3201" width="14" height="14"><path d="M866.461538 39.384615H354.461538c-43.323077 0-78.769231 35.446154-78.76923 78.769231v39.384616h472.615384c43.323077 0 78.769231 35.446154 78.769231 78.76923v551.384616h39.384615c43.323077 0 78.769231-35.446154 78.769231-78.769231V118.153846c0-43.323077-35.446154-78.769231-78.769231-78.769231z m-118.153846 275.692308c0-43.323077-35.446154-78.769231-78.76923-78.769231H157.538462c-43.323077 0-78.769231 35.446154-78.769231 78.769231v590.769231c0 43.323077 35.446154 78.769231 78.769231 78.769231h512c43.323077 0 78.769231-35.446154 78.76923-78.769231V315.076923z m-354.461538 137.846154c0 11.815385-7.876923 19.692308-19.692308 19.692308h-157.538461c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h157.538461c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z m157.538461 315.076923c0 11.815385-7.876923 19.692308-19.692307 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h315.076923c11.815385 0 19.692308 7.876923 19.692307 19.692308v39.384615z m78.769231-157.538462c0 11.815385-7.876923 19.692308-19.692308 19.692308H216.615385c-11.815385 0-19.692308-7.876923-19.692308-19.692308v-39.384615c0-11.815385 7.876923-19.692308 19.692308-19.692308h393.846153c11.815385 0 19.692308 7.876923 19.692308 19.692308v39.384615z" p-id="3202"></path></svg>',e.title="Copy to clipboard",e.addEventListener("click",()=>{this.copyToClipboard(n.innerText)}),n.appendChild(e),n.classList.add("codecopy-enabled")},copyToClipboard(n){const e=document.createElement("textarea");e.value=n,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e);const t=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);e.select(),document.execCommand("copy");(new Ts).show({text:"复制成功",duration:1e3}),document.body.removeChild(e),t&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(t))}}};!function(n,e){void 0===e&&(e={});var t=e.insertAt;if(n&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===t&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n))}}("@media (max-width: 1000px) {\n  .vuepress-plugin-demo-block__h_code {\n    display: none;\n  }\n  .vuepress-plugin-demo-block__app {\n    margin-left: auto !important;\n    margin-right: auto !important;\n  }\n}\n.vuepress-plugin-demo-block__wrapper {\n  margin-top: 10px;\n  border: 1px solid #ebebeb;\n  border-radius: 4px;\n  transition: all 0.2s;\n}\n.vuepress-plugin-demo-block__wrapper.vuepress-plugin-demo-block__horizontal .vuepress-plugin-demo-block__display {\n  height: 400px;\n  display: flex;\n}\n.vuepress-plugin-demo-block__wrapper.vuepress-plugin-demo-block__horizontal .vuepress-plugin-demo-block__display .vuepress-plugin-demo-block__app {\n  width: 300px;\n  border: 1px solid #ebebeb;\n  box-shadow: 1px 1px 3px #ebebeb;\n  margin-right: 5px;\n  overflow: auto;\n}\n.vuepress-plugin-demo-block__wrapper.vuepress-plugin-demo-block__horizontal .vuepress-plugin-demo-block__display .vuepress-plugin-demo-block__h_code {\n  flex: 1;\n  overflow: auto;\n  height: 100%;\n}\n.vuepress-plugin-demo-block__wrapper.vuepress-plugin-demo-block__horizontal .vuepress-plugin-demo-block__display .vuepress-plugin-demo-block__h_code > pre {\n  overflow: visible;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__display {\n  max-height: 400px;\n  overflow: auto;\n}\n.vuepress-plugin-demo-block__wrapper div {\n  box-sizing: border-box;\n}\n.vuepress-plugin-demo-block__wrapper:hover {\n  box-shadow: 0 0 11px rgba(33, 33, 33, 0.2);\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__code {\n  overflow: hidden;\n  height: 0;\n  padding: 0 !important;\n  background-color: #282c34;\n  border-radius: 0 !important;\n  transition: height 0.5s;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__code pre {\n  margin: 0 !important;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__display {\n  padding: 20px;\n  border-bottom: 1px solid #ebebeb;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer {\n  position: relative;\n  text-align: center;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer.vuepress-plugin-demo-block__show-link .vuepress-plugin-demo-block__jsfiddle,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer.vuepress-plugin-demo-block__show-link .vuepress-plugin-demo-block__codepen {\n  opacity: 1;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer.vuepress-plugin-demo-block__show-link .vuepress-plugin-demo-block__expand::before {\n  border-top: none;\n  border-right: 6px solid transparent;\n  border-bottom: 6px solid #ccc;\n  border-left: 6px solid transparent;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__jsfiddle,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__codepen,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__expand span,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__expand {\n  opacity: 1;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover .vuepress-plugin-demo-block__expand::before {\n  border-top-color: #3eaf7c !important;\n  border-bottom-color: #3eaf7c !important;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer:hover svg {\n  fill: #3eaf7c !important;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__expand-text {\n  transition: all 0.5s;\n  opacity: 0;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer form:nth-last-child(2) {\n  right: 50px;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer form:last-child {\n  right: 10px;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__button {\n  border-color: transparent;\n  background-color: transparent;\n  font-size: 14px;\n  color: #3eaf7c;\n  cursor: pointer;\n  outline: none;\n  margin: 0;\n  width: 46px;\n  position: relative;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__button:hover::before {\n  content: attr(data-tip);\n  white-space: nowrap;\n  position: absolute;\n  top: -30px;\n  left: 50%;\n  color: #eee;\n  line-height: 1;\n  z-index: 1000;\n  border-radius: 4px;\n  padding: 6px;\n  -webkit-transform: translateX(-50%);\n          transform: translateX(-50%);\n  background-color: rgba(0, 0, 0, 0.8);\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__button:hover::after {\n  content: '' !important;\n  display: block;\n  position: absolute;\n  left: 50%;\n  top: -5px;\n  -webkit-transform: translateX(-50%);\n          transform: translateX(-50%);\n  border: 5px solid transparent;\n  border-top-color: rgba(0, 0, 0, 0.8);\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__button svg {\n  width: 34px;\n  height: 20px;\n  fill: #ccc;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__jsfiddle,\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__codepen {\n  position: absolute;\n  top: 10px;\n  transition: all 0.5s;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__expand {\n  position: relative;\n  width: 100px;\n  height: 40px;\n  margin: 0;\n  color: #3eaf7c;\n  font-size: 14px;\n  background-color: transparent;\n  border-color: transparent;\n  outline: none;\n  transition: all 0.5s;\n  cursor: pointer;\n}\n.vuepress-plugin-demo-block__wrapper .vuepress-plugin-demo-block__footer .vuepress-plugin-demo-block__expand::before {\n  content: \"\";\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 0;\n  height: 0;\n  border-top: 6px solid #ccc;\n  border-right: 6px solid transparent;\n  border-left: 6px solid transparent;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n}\n");var Cs={jsLib:[],cssLib:[],jsfiddle:!0,codepen:!0,codepenLayout:"left",codepenJsProcessor:"babel",codepenEditors:"101",horizontal:!1,vue:"https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js",react:"https://cdn.jsdelivr.net/npm/react/umd/react.production.min.js",reactDOM:"https://cdn.jsdelivr.net/npm/react-dom/umd/react-dom.production.min.js"},Is={},zs=function(n){return'<div id="app">\n'.concat(n,"\n</div>")},Os=function(n){return window.$VUEPRESS_DEMO_BLOCK&&void 0!==window.$VUEPRESS_DEMO_BLOCK[n]?window.$VUEPRESS_DEMO_BLOCK[n]:Cs[n]},Ps=function n(e,t,r){var i=document.createElement(e);return t&&Object.keys(t).forEach((function(n){if(n.indexOf("data"))i[n]=t[n];else{var e=n.replace("data","");i.dataset[e]=t[n]}})),r&&r.forEach((function(e){var t=e.tag,r=e.attrs,o=e.children;i.appendChild(n(t,r,o))})),i},Rs=function(n,e,t){var r,i=(r=n.querySelectorAll(".".concat(e)),Array.prototype.slice.call(r));return 1!==i.length||t?i:i[0]},Bs=function(n,e){var t,r,i=n.match(/<style>([\s\S]+)<\/style>/),o=n.match(/<template>([\s\S]+)<\/template>/),a=n.match(/<script>([\s\S]+)<\/script>/),s={css:i&&i[1].replace(/^\n|\n$/g,""),html:o&&o[1].replace(/^\n|\n$/g,""),js:a&&a[1].replace(/^\n|\n$/g,""),jsLib:e.jsLib||[],cssLib:e.cssLib||[]};s.htmlTpl=zs(s.html),s.jsTpl=(t=s.js,r=t.replace(/export\s+default\s*?\{\n*/,"").replace(/\n*\}\s*$/,"").trim(),"new Vue({\n  el: '#app',\n  ".concat(r,"\n})")),s.script=function(n,e){var t=n.split(/export\s+default/),r="(function() {".concat(t[0]," ; return ").concat(t[1],"})()"),i=window.Babel?window.Babel.transform(r,{presets:["es2015"]}).code:r,o=[eval][0](i);return o.template=e,o}(s.js,s.html);var c=Os("vue");return s.jsLib.unshift(c),s},Ds=function(n,e){var t,r=n.match(/<style>([\s\S]+)<\/style>/),i=n.match(/<html>([\s\S]+)<\/html>/),o=n.match(/<script>([\s\S]+)<\/script>/),a={css:r&&r[1].replace(/^\n|\n$/g,""),html:i&&i[1].replace(/^\n|\n$/g,""),js:o&&o[1].replace(/^\n|\n$/g,""),jsLib:e.jsLib||[],cssLib:e.cssLib||[]};return a.htmlTpl=a.html,a.jsTpl=a.js,a.script=(t=a.js,window.Babel?window.Babel.transform(t,{presets:["es2015"]}).code:t),a},qs=function(n){return n=n.replace("export default ","").replace(/App\.__style__(\s*)=(\s*)`([\s\S]*)?`/,""),n+='ReactDOM.render(React.createElement(App), document.getElementById("app"))'};function Ls(){var n=Rs(document,"vuepress-plugin-demo-block__wrapper",!0);n.length?n.forEach((function(n){if("true"!==n.dataset.created){n.style.display="block";var e=Rs(n,"vuepress-plugin-demo-block__code"),t=Rs(n,"vuepress-plugin-demo-block__display"),r=Rs(n,"vuepress-plugin-demo-block__footer"),i=Rs(t,"vuepress-plugin-demo-block__app"),o=decodeURIComponent(n.dataset.code),a=decodeURIComponent(n.dataset.config),s=decodeURIComponent(n.dataset.type);a=a?JSON.parse(a):{};var c=e.querySelector("div").clientHeight,l="react"===s?function(n,e){var t=(0,window.Babel.transform)(n,{presets:["es2015","react"]}).code,r="(function(exports){var module={};module.exports=exports;".concat(t,";return module.exports.__esModule?module.exports.default:module.exports;})({})"),i=new Function("return ".concat(r))(),o={js:i,css:i.__style__||"",jsLib:e.jsLib||[],cssLib:e.cssLib||[],jsTpl:qs(n),htmlTpl:zs("")},a=Os("react"),s=Os("reactDOM");return o.jsLib.unshift(a,s),o}(o,a):"vanilla"===s?Ds(o,a):Bs(o,a),p=Ps("button",{className:"".concat("vuepress-plugin-demo-block__expand")});if(r.appendChild(p),p.addEventListener("click",Ms.bind(null,p,c,e,r)),Os("jsfiddle")&&r.appendChild(function(n){var e=n.css,t=n.htmlTpl,r=n.jsTpl,i=n.jsLib,o=n.cssLib,a=i.concat(o).concat(Os("cssLib")).concat(Os("jsLib")).join(",");return Ps("form",{className:"vuepress-plugin-demo-block__jsfiddle",target:"_blank",action:"https://jsfiddle.net/api/post/library/pure/",method:"post"},[{tag:"input",attrs:{type:"hidden",name:"css",value:e}},{tag:"input",attrs:{type:"hidden",name:"html",value:t}},{tag:"input",attrs:{type:"hidden",name:"js",value:r}},{tag:"input",attrs:{type:"hidden",name:"panel_js",value:3}},{tag:"input",attrs:{type:"hidden",name:"wrap",value:1}},{tag:"input",attrs:{type:"hidden",name:"resources",value:a}},{tag:"button",attrs:{type:"submit",className:"vuepress-plugin-demo-block__button",innerHTML:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1547088289967" class="icon" style="" viewBox="0 0 1170 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1952" xmlns:xlink="http://www.w3.org/1999/xlink" width="228.515625" height="200"><defs><style type="text/css"></style></defs><path d="M1028.571429 441.142857q63.428571 26.285714 102.571428 83.142857T1170.285714 650.857143q0 93.714286-67.428571 160.285714T940 877.714286q-2.285714 0-6.571429-0.285715t-6-0.285714H232q-97.142857-5.714286-164.571429-71.714286T0 645.142857q0-62.857143 31.428571-116t84-84q-6.857143-22.285714-6.857142-46.857143 0-65.714286 46.857142-112t113.714286-46.285714q54.285714 0 98.285714 33.142857 42.857143-88 127.142858-141.714286t186.571428-53.714285q94.857143 0 174.857143 46T982.571429 248.571429t46.571428 172q0 3.428571-0.285714 10.285714t-0.285714 10.285714zM267.428571 593.142857q0 69.714286 48 110.285714t118.857143 40.571429q78.285714 0 137.142857-56.571429-9.142857-11.428571-27.142857-32.285714T519.428571 626.285714q-38.285714 37.142857-82.285714 37.142857-31.428571 0-53.428571-19.142857T361.714286 594.285714q0-30.285714 22-49.714285t52.285714-19.428572q25.142857 0 48.285714 12t41.714286 31.428572 37.142857 42.857142 39.428572 46.857143 44 42.857143 55.428571 31.428572 69.428571 12q69.142857 0 116.857143-40.857143T936 594.857143q0-69.142857-48-109.714286t-118.285714-40.571428q-81.714286 0-137.714286 55.428571l53.142857 61.714286q37.714286-36.571429 81.142857-36.571429 29.714286 0 52.571429 18.857143t22.857143 48q0 32.571429-21.142857 52.285714t-53.714286 19.714286q-24.571429 0-47.142857-12t-41.142857-31.428571-37.428572-42.857143-39.714286-46.857143-44.285714-42.857143-55.142857-31.428571T434.285714 444.571429q-69.714286 0-118.285714 40.285714T267.428571 593.142857z" p-id="1953"></path></svg>',datatip:"JSFiddle"}}])}(l)),Os("codepen")&&r.appendChild(function(n){var e=n.css,t=n.htmlTpl,r=n.jsTpl,i=n.jsLib,o=n.cssLib,a=JSON.stringify({css:e,html:t,js:r,js_external:i.concat(Os("jsLib")).join(";"),css_external:o.concat(Os("cssLib")).join(";"),layout:Os("codepenLayout"),js_pre_processor:Os("codepenJsProcessor"),editors:Os("codepenEditors")});return Ps("form",{className:"vuepress-plugin-demo-block__codepen",target:"_blank",action:"https://codepen.io/pen/define",method:"post"},[{tag:"input",attrs:{type:"hidden",name:"data",value:a}},{tag:"button",attrs:{type:"submit",innerHTML:'<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1547088271207" class="icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1737" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M123.428571 668l344.571429 229.714286v-205.142857L277.142857 565.142857z m-35.428571-82.285714l110.285714-73.714286-110.285714-73.714286v147.428572z m468 312l344.571429-229.714286-153.714286-102.857143-190.857143 127.428572v205.142857z m-44-281.714286l155.428571-104-155.428571-104-155.428571 104zM277.142857 458.857143l190.857143-127.428572V126.285714L123.428571 356z m548.571429 53.142857l110.285714 73.714286V438.285714z m-78.857143-53.142857l153.714286-102.857143-344.571429-229.714286v205.142857z m277.142857-102.857143v312q0 23.428571-19.428571 36.571429l-468 312q-12 7.428571-24.571429 7.428571t-24.571429-7.428571L19.428571 704.571429q-19.428571-13.142857-19.428571-36.571429V356q0-23.428571 19.428571-36.571429L487.428571 7.428571q12-7.428571 24.571429-7.428571t24.571429 7.428571l468 312q19.428571 13.142857 19.428571 36.571429z" p-id="1738"></path></svg>',className:"vuepress-plugin-demo-block__button",datatip:"Codepen"}}])}(l)),void 0!==a.horizontal?a.horizontal:Os("horizontal")){n.classList.add("vuepress-plugin-demo-block__horizontal");var d=e.firstChild.cloneNode(!0);d.classList.add("vuepress-plugin-demo-block__h_code"),t.appendChild(d)}if(l.css&&function(n){if(!Is[n]){var e=Ps("style",{innerHTML:n});document.body.appendChild(e),Is[n]=!0}}(l.css),"react"===s)ReactDOM.render(React.createElement(l.js),i);else if("vue"===s){var u=(new(Vue.extend(l.script))).$mount();i.appendChild(u.$el)}else"vanilla"===s&&(i.innerHTML=l.html,new Function("return (function(){".concat(l.script,"})()"))());n.dataset.created="true"}})):setTimeout((function(n){Ls()}),300)}function Ms(n,e,t,r){var i="1"!==n.dataset.isExpand;t.style.height=i?"".concat(e,"px"):0,i?r.classList.add("vuepress-plugin-demo-block__show-link"):r.classList.remove("vuepress-plugin-demo-block__show-link"),n.dataset.isExpand=i?"1":"0"}var Ns={mounted:function(){window.$VUEPRESS_DEMO_BLOCK={jsfiddle:!1,codepen:!0,horizontal:!1},Ls()},updated:function(){Ls()}},$s="auto",Us="zoom-in",Fs="zoom-out",Gs="grab",Hs="move";function Vs(n,e,t){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i={passive:!1};r?n.addEventListener(e,t,i):n.removeEventListener(e,t,i)}function Js(n,e){if(n){var t=new Image;t.onload=function(){e&&e(t)},t.src=n}}function Ws(n){return n.dataset.original?n.dataset.original:"A"===n.parentNode.tagName?n.parentNode.getAttribute("href"):null}function Ks(n,e,t){!function(n){var e=Qs,t=Ys;if(n.transition){var r=n.transition;delete n.transition,n[e]=r}if(n.transform){var i=n.transform;delete n.transform,n[t]=i}}(e);var r=n.style,i={};for(var o in e)t&&(i[o]=r[o]||""),r[o]=e[o];return i}var Qs="transition",Ys="transform",Zs="transform",Xs="transitionend";var nc=function(){},ec={enableGrab:!0,preloadImage:!1,closeOnWindowResize:!0,transitionDuration:.4,transitionTimingFunction:"cubic-bezier(0.4, 0, 0, 1)",bgColor:"rgb(255, 255, 255)",bgOpacity:1,scaleBase:1,scaleExtra:.5,scrollThreshold:40,zIndex:998,customSize:null,onOpen:nc,onClose:nc,onGrab:nc,onMove:nc,onRelease:nc,onBeforeOpen:nc,onBeforeClose:nc,onBeforeGrab:nc,onBeforeRelease:nc,onImageLoading:nc,onImageLoaded:nc},tc={init:function(n){var e,t;e=this,t=n,Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach((function(n){e[n]=e[n].bind(t)}))},click:function(n){if(n.preventDefault(),ic(n))return window.open(this.target.srcOriginal||n.currentTarget.src,"_blank");this.shown?this.released?this.close():this.release():this.open(n.currentTarget)},scroll:function(){var n=document.documentElement||document.body.parentNode||document.body,e=window.pageXOffset||n.scrollLeft,t=window.pageYOffset||n.scrollTop;null===this.lastScrollPosition&&(this.lastScrollPosition={x:e,y:t});var r=this.lastScrollPosition.x-e,i=this.lastScrollPosition.y-t,o=this.options.scrollThreshold;(Math.abs(i)>=o||Math.abs(r)>=o)&&(this.lastScrollPosition=null,this.close())},keydown:function(n){(function(n){return"Escape"===(n.key||n.code)||27===n.keyCode})(n)&&(this.released?this.close():this.release(this.close))},mousedown:function(n){if(rc(n)&&!ic(n)){n.preventDefault();var e=n.clientX,t=n.clientY;this.pressTimer=setTimeout(function(){this.grab(e,t)}.bind(this),200)}},mousemove:function(n){this.released||this.move(n.clientX,n.clientY)},mouseup:function(n){rc(n)&&!ic(n)&&(clearTimeout(this.pressTimer),this.released?this.close():this.release())},touchstart:function(n){n.preventDefault();var e=n.touches[0],t=e.clientX,r=e.clientY;this.pressTimer=setTimeout(function(){this.grab(t,r)}.bind(this),200)},touchmove:function(n){if(!this.released){var e=n.touches[0],t=e.clientX,r=e.clientY;this.move(t,r)}},touchend:function(n){(function(n){n.targetTouches.length})(n)||(clearTimeout(this.pressTimer),this.released?this.close():this.release())},clickOverlay:function(){this.close()},resizeWindow:function(){this.close()}};function rc(n){return 0===n.button}function ic(n){return n.metaKey||n.ctrlKey}var oc={init:function(n){this.el=document.createElement("div"),this.instance=n,this.parent=document.body,Ks(this.el,{position:"fixed",top:0,left:0,right:0,bottom:0,opacity:0}),this.updateStyle(n.options),Vs(this.el,"click",n.handler.clickOverlay.bind(n))},updateStyle:function(n){Ks(this.el,{zIndex:n.zIndex,backgroundColor:n.bgColor,transition:"opacity\n        "+n.transitionDuration+"s\n        "+n.transitionTimingFunction})},insert:function(){this.parent.appendChild(this.el)},remove:function(){this.parent.removeChild(this.el)},fadeIn:function(){this.el.offsetWidth,this.el.style.opacity=this.instance.options.bgOpacity},fadeOut:function(){this.el.style.opacity=0}},ac="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},sc=function(){function n(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),cc=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},lc={init:function(n,e){this.el=n,this.instance=e,this.srcThumbnail=this.el.getAttribute("src"),this.srcset=this.el.getAttribute("srcset"),this.srcOriginal=Ws(this.el),this.rect=this.el.getBoundingClientRect(),this.translate=null,this.scale=null,this.styleOpen=null,this.styleClose=null},zoomIn:function(){var n=this.instance.options,e=n.zIndex,t=n.enableGrab,r=n.transitionDuration,i=n.transitionTimingFunction;this.translate=this.calculateTranslate(),this.scale=this.calculateScale(),this.styleOpen={position:"relative",zIndex:e+1,cursor:t?Gs:Fs,transition:Zs+"\n        "+r+"s\n        "+i,transform:"translate3d("+this.translate.x+"px, "+this.translate.y+"px, 0px)\n        scale("+this.scale.x+","+this.scale.y+")",height:this.rect.height+"px",width:this.rect.width+"px"},this.el.offsetWidth,this.styleClose=Ks(this.el,this.styleOpen,!0)},zoomOut:function(){this.el.offsetWidth,Ks(this.el,{transform:"none"})},grab:function(n,e,t){var r=pc(),i=r.x-n,o=r.y-e;Ks(this.el,{cursor:Hs,transform:"translate3d(\n        "+(this.translate.x+i)+"px, "+(this.translate.y+o)+"px, 0px)\n        scale("+(this.scale.x+t)+","+(this.scale.y+t)+")"})},move:function(n,e,t){var r=pc(),i=r.x-n,o=r.y-e;Ks(this.el,{transition:Zs,transform:"translate3d(\n        "+(this.translate.x+i)+"px, "+(this.translate.y+o)+"px, 0px)\n        scale("+(this.scale.x+t)+","+(this.scale.y+t)+")"})},restoreCloseStyle:function(){Ks(this.el,this.styleClose)},restoreOpenStyle:function(){Ks(this.el,this.styleOpen)},upgradeSource:function(){if(this.srcOriginal){var n=this.el.parentNode;this.srcset&&this.el.removeAttribute("srcset");var e=this.el.cloneNode(!1);e.setAttribute("src",this.srcOriginal),e.style.position="fixed",e.style.visibility="hidden",n.appendChild(e),setTimeout(function(){this.el.setAttribute("src",this.srcOriginal),n.removeChild(e)}.bind(this),50)}},downgradeSource:function(){this.srcOriginal&&(this.srcset&&this.el.setAttribute("srcset",this.srcset),this.el.setAttribute("src",this.srcThumbnail))},calculateTranslate:function(){var n=pc(),e=this.rect.left+this.rect.width/2,t=this.rect.top+this.rect.height/2;return{x:n.x-e,y:n.y-t}},calculateScale:function(){var n=this.el.dataset,e=n.zoomingHeight,t=n.zoomingWidth,r=this.instance.options,i=r.customSize,o=r.scaleBase;if(!i&&e&&t)return{x:t/this.rect.width,y:e/this.rect.height};if(i&&"object"===(void 0===i?"undefined":ac(i)))return{x:i.width/this.rect.width,y:i.height/this.rect.height};var a=this.rect.width/2,s=this.rect.height/2,c=pc(),l={x:c.x-a,y:c.y-s},p=l.x/a,d=l.y/s,u=o+Math.min(p,d);if(i&&"string"==typeof i){var h=t||this.el.naturalWidth,g=e||this.el.naturalHeight,m=parseFloat(i)*h/(100*this.rect.width),f=parseFloat(i)*g/(100*this.rect.height);if(u>m||u>f)return{x:m,y:f}}return{x:u,y:u}}};function pc(){var n=document.documentElement;return{x:Math.min(n.clientWidth,window.innerWidth)/2,y:Math.min(n.clientHeight,window.innerHeight)/2}}function dc(n,e,t){["mousedown","mousemove","mouseup","touchstart","touchmove","touchend"].forEach((function(r){Vs(n,r,e[r],t)}))}var uc=function(){function n(e){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.target=Object.create(lc),this.overlay=Object.create(oc),this.handler=Object.create(tc),this.body=document.body,this.shown=!1,this.lock=!1,this.released=!0,this.lastScrollPosition=null,this.pressTimer=null,this.options=cc({},ec,e),this.overlay.init(this),this.handler.init(this)}return sc(n,[{key:"listen",value:function(n){if("string"==typeof n)for(var e=document.querySelectorAll(n),t=e.length;t--;)this.listen(e[t]);else"IMG"===n.tagName&&(n.style.cursor=Us,Vs(n,"click",this.handler.click),this.options.preloadImage&&Js(Ws(n)));return this}},{key:"config",value:function(n){return n?(cc(this.options,n),this.overlay.updateStyle(this.options),this):this.options}},{key:"open",value:function(n){var e=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.onOpen;if(!this.shown&&!this.lock){var r="string"==typeof n?document.querySelector(n):n;if("IMG"===r.tagName){if(this.options.onBeforeOpen(r),this.target.init(r,this),!this.options.preloadImage){var i=this.target.srcOriginal;null!=i&&(this.options.onImageLoading(r),Js(i,this.options.onImageLoaded))}this.shown=!0,this.lock=!0,this.target.zoomIn(),this.overlay.insert(),this.overlay.fadeIn(),Vs(document,"scroll",this.handler.scroll),Vs(document,"keydown",this.handler.keydown),this.options.closeOnWindowResize&&Vs(window,"resize",this.handler.resizeWindow);var o=function n(){Vs(r,Xs,n,!1),e.lock=!1,e.target.upgradeSource(),e.options.enableGrab&&dc(document,e.handler,!0),t(r)};return Vs(r,Xs,o),this}}}},{key:"close",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.onClose;if(this.shown&&!this.lock){var t=this.target.el;this.options.onBeforeClose(t),this.lock=!0,this.body.style.cursor=$s,this.overlay.fadeOut(),this.target.zoomOut(),Vs(document,"scroll",this.handler.scroll,!1),Vs(document,"keydown",this.handler.keydown,!1),this.options.closeOnWindowResize&&Vs(window,"resize",this.handler.resizeWindow,!1);var r=function r(){Vs(t,Xs,r,!1),n.shown=!1,n.lock=!1,n.target.downgradeSource(),n.options.enableGrab&&dc(document,n.handler,!1),n.target.restoreCloseStyle(),n.overlay.remove(),e(t)};return Vs(t,Xs,r),this}}},{key:"grab",value:function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.options.scaleExtra,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.options.onGrab;if(this.shown&&!this.lock){var i=this.target.el;this.options.onBeforeGrab(i),this.released=!1,this.target.grab(n,e,t);var o=function n(){Vs(i,Xs,n,!1),r(i)};return Vs(i,Xs,o),this}}},{key:"move",value:function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.options.scaleExtra,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.options.onMove;if(this.shown&&!this.lock){this.released=!1,this.body.style.cursor=Hs,this.target.move(n,e,t);var i=this.target.el,o=function n(){Vs(i,Xs,n,!1),r(i)};return Vs(i,Xs,o),this}}},{key:"release",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.onRelease;if(this.shown&&!this.lock){var t=this.target.el;this.options.onBeforeRelease(t),this.lock=!0,this.body.style.cursor=$s,this.target.restoreOpenStyle();var r=function r(){Vs(t,Xs,r,!1),n.lock=!1,n.released=!0,e(t)};return Vs(t,Xs,r),this}}}]),n}();const hc=JSON.parse('{"bgColor":"rgba(0,0,0,0.6)"}'),gc=Number("500");class mc{constructor(){this.instance=new uc(hc)}update(n=".theme-vdoing-content img:not(.no-zoom)"){"undefined"!=typeof window&&this.instance.listen(n)}updateDelay(n=".theme-vdoing-content img:not(.no-zoom)",e=gc){setTimeout(()=>this.update(n),e)}}var fc=[vs,xs,As,js,Ns,{watch:{"$page.path"(){void 0!==this.$vuepress.zooming&&this.$vuepress.zooming.updateDelay()}},mounted(){this.$vuepress.zooming=new mc,this.$vuepress.zooming.updateDelay()}}],vc={name:"GlobalLayout",computed:{layout(){const n=this.getLayout();return us("layout",n),Jt.component(n)}},methods:{getLayout(){if(this.$page.path){const n=this.$page.frontmatter.layout;return n&&(this.$vuepress.getLayoutAsyncComponent(n)||this.$vuepress.getVueComponent(n))?n:"Layout"}return"NotFound"}}},yc=t(1),bc=Object(yc.a)(vc,(function(){return(0,this._self._c)(this.layout,{tag:"component"})}),[],!1,null,null,null).exports;!function(n,e,t){switch(e){case"components":n[e]||(n[e]={}),Object.assign(n[e],t);break;case"mixins":n[e]||(n[e]=[]),n[e].push(...t);break;default:throw new Error("Unknown option name.")}}(bc,"mixins",fc);const kc=[{name:"v-75162340",path:"/article/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-75162340").then(t)}},{path:"/article/index.html",redirect:"/article/"},{path:"/00.目录页/01.文章.html",redirect:"/article/"},{name:"v-80a3b3c8",path:"/favorites/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-80a3b3c8").then(t)}},{path:"/favorites/index.html",redirect:"/favorites/"},{path:"/00.目录页/05.收藏.html",redirect:"/favorites/"},{name:"v-19aaa787",path:"/other/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-19aaa787").then(t)}},{path:"/other/index.html",redirect:"/other/"},{path:"/00.目录页/04.其他.html",redirect:"/other/"},{name:"v-597a1d72",path:"/pages/08e16a/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-597a1d72").then(t)}},{path:"/pages/08e16a/index.html",redirect:"/pages/08e16a/"},{path:"/01.文章/01.Java/01.Java源码阅读调试环境搭建.html",redirect:"/pages/08e16a/"},{name:"v-1e650315",path:"/pages/c9a33b/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-1e650315").then(t)}},{path:"/pages/c9a33b/index.html",redirect:"/pages/c9a33b/"},{path:"/01.文章/01.Java/02.设计模式/01.设计模式.html",redirect:"/pages/c9a33b/"},{name:"v-0ae79a98",path:"/idea/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-0ae79a98").then(t)}},{path:"/idea/index.html",redirect:"/idea/"},{path:"/00.目录页/03.冥思.html",redirect:"/idea/"},{name:"v-d6f8fa64",path:"/pages/c6c51f/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-d6f8fa64").then(t)}},{path:"/pages/c6c51f/index.html",redirect:"/pages/c6c51f/"},{path:"/01.文章/01.Java/02.设计模式/02.工厂模式.html",redirect:"/pages/c6c51f/"},{name:"v-3d51175f",path:"/pages/80ec45/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-3d51175f").then(t)}},{path:"/pages/80ec45/index.html",redirect:"/pages/80ec45/"},{path:"/01.文章/01.Java/02.设计模式/03.单例模式.html",redirect:"/pages/80ec45/"},{name:"v-68ca0134",path:"/pages/e9c9f3/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-68ca0134").then(t)}},{path:"/pages/e9c9f3/index.html",redirect:"/pages/e9c9f3/"},{path:"/01.文章/01.Java/02.设计模式/04.生成器模式.html",redirect:"/pages/e9c9f3/"},{name:"v-7c90548e",path:"/pages/7a035e/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-7c90548e").then(t)}},{path:"/pages/7a035e/index.html",redirect:"/pages/7a035e/"},{path:"/01.文章/01.Java/02.设计模式/06.外观模式.html",redirect:"/pages/7a035e/"},{name:"v-4b4ac04d",path:"/pages/7badac/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-4b4ac04d").then(t)}},{path:"/pages/7badac/index.html",redirect:"/pages/7badac/"},{path:"/01.文章/01.Java/02.设计模式/05.原型模式.html",redirect:"/pages/7badac/"},{name:"v-6d613208",path:"/pages/790ea0/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-6d613208").then(t)}},{path:"/pages/790ea0/index.html",redirect:"/pages/790ea0/"},{path:"/01.文章/01.Java/02.设计模式/08.桥接模式.html",redirect:"/pages/790ea0/"},{name:"v-26e68e78",path:"/pages/112792/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-26e68e78").then(t)}},{path:"/pages/112792/index.html",redirect:"/pages/112792/"},{path:"/01.文章/01.Java/02.设计模式/09.组合模式.html",redirect:"/pages/112792/"},{name:"v-b095581e",path:"/pages/2ed1b3/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-b095581e").then(t)}},{path:"/pages/2ed1b3/index.html",redirect:"/pages/2ed1b3/"},{path:"/01.文章/01.Java/02.设计模式/07.适配器模式.html",redirect:"/pages/2ed1b3/"},{name:"v-18a9c640",path:"/pages/f4535c/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-18a9c640").then(t)}},{path:"/pages/f4535c/index.html",redirect:"/pages/f4535c/"},{path:"/01.文章/05.Spring/01.基础使用/01.SpringBoot集成ShardingSphere4.1.1(自定义分库、分表算法).html",redirect:"/pages/f4535c/"},{name:"v-034236e3",path:"/pages/82388c/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-034236e3").then(t)}},{path:"/pages/82388c/index.html",redirect:"/pages/82388c/"},{path:"/01.文章/05.Spring/01.基础使用/02.使用Flyway对数据库版本控制.html",redirect:"/pages/82388c/"},{name:"v-6a799aad",path:"/pages/024464/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-6a799aad").then(t)}},{path:"/pages/024464/index.html",redirect:"/pages/024464/"},{path:"/01.文章/02.Redis/01.Redis分布式锁(spring-boot-klock-starter快速入门).html",redirect:"/pages/024464/"},{name:"v-890112a2",path:"/pages/d57d55/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-890112a2").then(t)}},{path:"/pages/d57d55/index.html",redirect:"/pages/d57d55/"},{path:"/01.文章/05.Spring/01.基础使用/03.行为验证码(AJ-Captcha快速入门).html",redirect:"/pages/d57d55/"},{name:"v-75fb42a4",path:"/pages/cbaa02/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-75fb42a4").then(t)}},{path:"/pages/cbaa02/index.html",redirect:"/pages/cbaa02/"},{path:"/01.文章/05.Spring/01.基础使用/06.SpringBoot使用Hibernate Validator（后端参数校验）.html",redirect:"/pages/cbaa02/"},{name:"v-3d656a7d",path:"/pages/745182/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-3d656a7d").then(t)}},{path:"/pages/745182/index.html",redirect:"/pages/745182/"},{path:"/01.文章/05.Spring/01.基础使用/05.SpringBoot二维码生成(复制即用).html",redirect:"/pages/745182/"},{name:"v-96d4e666",path:"/pages/32549d/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-96d4e666").then(t)}},{path:"/pages/32549d/index.html",redirect:"/pages/32549d/"},{path:"/01.文章/05.Spring/02.Spring Security/01.Spring Security学习总结.html",redirect:"/pages/32549d/"},{name:"v-8992ebda",path:"/pages/5fbd1a/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-8992ebda").then(t)}},{path:"/pages/5fbd1a/index.html",redirect:"/pages/5fbd1a/"},{path:"/01.文章/05.Spring/02.Spring Security/02.Spring Security.html",redirect:"/pages/5fbd1a/"},{name:"v-17b185ca",path:"/pages/ffa63f/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-17b185ca").then(t)}},{path:"/pages/ffa63f/index.html",redirect:"/pages/ffa63f/"},{path:"/01.文章/05.Spring/02.Spring Security/03.Spring Security OAuth2.html",redirect:"/pages/ffa63f/"},{name:"v-7a84ac66",path:"/pages/0d4207/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-7a84ac66").then(t)}},{path:"/pages/0d4207/index.html",redirect:"/pages/0d4207/"},{path:"/01.文章/05.Spring/02.Spring Security/05.实战模块化(认证授权服务+资源服务).html",redirect:"/pages/0d4207/"},{name:"v-17c98162",path:"/pages/74390a/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-17c98162").then(t)}},{path:"/pages/74390a/index.html",redirect:"/pages/74390a/"},{path:"/01.文章/05.Spring/02.Spring Security/04.实战单体应用(认证授权服务+资源服务).html",redirect:"/pages/74390a/"},{name:"v-f1e6536c",path:"/pages/412c27/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-f1e6536c").then(t)}},{path:"/pages/412c27/index.html",redirect:"/pages/412c27/"},{path:"/01.文章/05.Spring/02.Spring Security/06.Spring Security OAuth2自定义授权模式.html",redirect:"/pages/412c27/"},{name:"v-3ab41fda",path:"/pages/9dc988/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-3ab41fda").then(t)}},{path:"/pages/9dc988/index.html",redirect:"/pages/9dc988/"},{path:"/01.文章/05.Spring/99.收藏/01.SpringBoot使用logback日志框架超详细教程.html",redirect:"/pages/9dc988/"},{name:"v-4df99c9f",path:"/pages/f9c70c/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-4df99c9f").then(t)}},{path:"/pages/f9c70c/index.html",redirect:"/pages/f9c70c/"},{path:"/01.文章/06.工具/01.内网映射工具.html",redirect:"/pages/f9c70c/"},{name:"v-7304e2cd",path:"/pages/996107/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-7304e2cd").then(t)}},{path:"/pages/996107/index.html",redirect:"/pages/996107/"},{path:"/01.文章/06.工具/04.使用PicGo上传图片到自己的图床.html",redirect:"/pages/996107/"},{name:"v-5b97e7b8",path:"/pages/75e36d/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-5b97e7b8").then(t)}},{path:"/pages/75e36d/index.html",redirect:"/pages/75e36d/"},{path:"/01.文章/06.工具/05.好用的截图工具.html",redirect:"/pages/75e36d/"},{name:"v-7330515c",path:"/pages/9da5e5/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-7330515c").then(t)}},{path:"/pages/9da5e5/index.html",redirect:"/pages/9da5e5/"},{path:"/01.文章/07.概念/01.SaaS、PaaS、IaaS的区别.html",redirect:"/pages/9da5e5/"},{name:"v-1f036070",path:"/pages/05448d/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-1f036070").then(t)}},{path:"/pages/05448d/index.html",redirect:"/pages/05448d/"},{path:"/01.文章/07.概念/06.HTTPS加密解析.html",redirect:"/pages/05448d/"},{name:"v-07c556de",path:"/pages/f14098/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-07c556de").then(t)}},{path:"/pages/f14098/index.html",redirect:"/pages/f14098/"},{path:"/01.文章/09.容器/02.Docker.html",redirect:"/pages/f14098/"},{name:"v-aea4643c",path:"/pages/cbd47e/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-aea4643c").then(t)}},{path:"/pages/cbd47e/index.html",redirect:"/pages/cbd47e/"},{path:"/01.文章/09.容器/01.Nacos容器化.html",redirect:"/pages/cbd47e/"},{name:"v-6493a75b",path:"/pages/7e6d51/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-6493a75b").then(t)}},{path:"/pages/7e6d51/index.html",redirect:"/pages/7e6d51/"},{path:"/01.文章/11.实战/01.Sign in with Apple（苹果授权登陆）.html",redirect:"/pages/7e6d51/"},{name:"v-4d9d1213",path:"/pages/0e4b5e/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-4d9d1213").then(t)}},{path:"/pages/0e4b5e/index.html",redirect:"/pages/0e4b5e/"},{path:"/01.文章/11.实战/16.git clone 报错：Filename too long.html",redirect:"/pages/0e4b5e/"},{name:"v-6ac94fd5",path:"/pages/b131bf/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-6ac94fd5").then(t)}},{path:"/pages/b131bf/index.html",redirect:"/pages/b131bf/"},{path:"/01.文章/12.AI/05.ChatGPT/07.免费注册ChatGPT指南.html",redirect:"/pages/b131bf/"},{name:"v-642daeec",path:"/pages/82530f/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-642daeec").then(t)}},{path:"/pages/82530f/index.html",redirect:"/pages/82530f/"},{path:"/01.文章/12.AI/05.ChatGPT/08.ChatGPT Plus订阅指南.html",redirect:"/pages/82530f/"},{name:"v-2a29defe",path:"/pages/8b23f4/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-2a29defe").then(t)}},{path:"/pages/8b23f4/index.html",redirect:"/pages/8b23f4/"},{path:"/01.文章/17.前端/01.使用nvm控制node版本.html",redirect:"/pages/8b23f4/"},{name:"v-09d2ca00",path:"/pages/75d814/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-09d2ca00").then(t)}},{path:"/pages/75d814/index.html",redirect:"/pages/75d814/"},{path:"/03.冥思/01.杂谈/01.马保国文体.html",redirect:"/pages/75d814/"},{name:"v-e4718e2e",path:"/pages/95cf6a/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-e4718e2e").then(t)}},{path:"/pages/95cf6a/index.html",redirect:"/pages/95cf6a/"},{path:"/03.冥思/01.杂谈/03.为什么我会选择购买小米11.html",redirect:"/pages/95cf6a/"},{name:"v-67024f50",path:"/pages/02db65/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-67024f50").then(t)}},{path:"/pages/02db65/index.html",redirect:"/pages/02db65/"},{path:"/01.文章/12.AI/15.Midjourney/01.Midjourney入门.html",redirect:"/pages/02db65/"},{name:"v-91e8ba14",path:"/pages/16a0f4/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-91e8ba14").then(t)}},{path:"/pages/16a0f4/index.html",redirect:"/pages/16a0f4/"},{path:"/03.冥思/01.杂谈/02.写作技巧.html",redirect:"/pages/16a0f4/"},{name:"v-8950dde6",path:"/pages/81a699/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-8950dde6").then(t)}},{path:"/pages/81a699/index.html",redirect:"/pages/81a699/"},{path:"/04.其他/01.关于/01.关于我.html",redirect:"/pages/81a699/"},{name:"v-4bb6cc6a",path:"/pages/339f86/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-4bb6cc6a").then(t)}},{path:"/pages/339f86/index.html",redirect:"/pages/339f86/"},{path:"/04.其他/02.博客/01.博客搭建.html",redirect:"/pages/339f86/"},{name:"v-706a1ec4",path:"/pages/f7be6d/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-706a1ec4").then(t)}},{path:"/pages/f7be6d/index.html",redirect:"/pages/f7be6d/"},{path:"/04.其他/02.博客/02.阿里云服务器选购.html",redirect:"/pages/f7be6d/"},{name:"v-1800cf9a",path:"/pages/5a9b34/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-1800cf9a").then(t)}},{path:"/pages/5a9b34/index.html",redirect:"/pages/5a9b34/"},{path:"/04.其他/02.博客/03.阿里云配置安全组.html",redirect:"/pages/5a9b34/"},{name:"v-7786a12b",path:"/pages/2f563e/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-7786a12b").then(t)}},{path:"/pages/2f563e/index.html",redirect:"/pages/2f563e/"},{path:"/04.其他/02.博客/05.阿里云配置HTTPS.html",redirect:"/pages/2f563e/"},{name:"v-ec52908e",path:"/pages/excerpt/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-ec52908e").then(t)}},{path:"/pages/excerpt/index.html",redirect:"/pages/excerpt/"},{path:"/05.收藏/02.摘录/10.词句摘录.html",redirect:"/pages/excerpt/"},{name:"v-352f39f2",path:"/archives/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-352f39f2").then(t)}},{path:"/archives/index.html",redirect:"/archives/"},{path:"/@pages/archivesPage.html",redirect:"/archives/"},{name:"v-5d3e6532",path:"/categories/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-5d3e6532").then(t)}},{path:"/categories/index.html",redirect:"/categories/"},{path:"/@pages/categoriesPage.html",redirect:"/categories/"},{name:"v-15b1c965",path:"/pages/favorites/url/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-15b1c965").then(t)}},{path:"/pages/favorites/url/index.html",redirect:"/pages/favorites/url/"},{path:"/05.收藏/01.网站收藏/01.网站收藏.html",redirect:"/pages/favorites/url/"},{name:"v-5ad32af2",path:"/tags/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-5ad32af2").then(t)}},{path:"/tags/index.html",redirect:"/tags/"},{path:"/@pages/tagsPage.html",redirect:"/tags/"},{name:"v-0ff9aaa0",path:"/",component:bc,beforeEnter:(n,e,t)=>{ds("Layout","v-0ff9aaa0").then(t)}},{path:"/index.html",redirect:"/"},{path:"*",component:bc}],wc={title:"",description:"",base:"/",headTags:[["link",{rel:"icon",href:"/img/favicon.ico"}],["meta",{name:"keywords",content:"后端技术,rcbb,个人博客"}],["meta",{name:"baidu-site-verification",content:"7F55weZDDc"}],["meta",{name:"theme-color",content:"#7b074b"}],["script",{"data-ad-client":"ca-pub-8621788234752924",async:!0,src:"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8621788234752924",crossorigin:"anonymous"}]],pages:[{title:"文章",frontmatter:{pageComponent:{name:"Catalogue",data:{key:"01.文章",imgUrl:"/img/web.png",description:"后端技术为主"}},title:"文章",date:"2020-03-11T21:50:53.000Z",permalink:"/article",sidebar:!1,article:!1,comment:!0,editLink:!1,readingShow:"top"},regularPath:"/00.%E7%9B%AE%E5%BD%95%E9%A1%B5/01.%E6%96%87%E7%AB%A0.html",relativePath:"00.目录页/01.文章.md",key:"v-75162340",path:"/article/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"7/25/2022",lastUpdatedTimestamp:1658728355e3},{title:"收藏",frontmatter:{pageComponent:{name:"Catalogue",data:{key:"05.收藏",imgUrl:"/img/python.png",description:"一些收藏"}},title:"收藏",date:"2020-03-11T21:50:55.000Z",permalink:"/favorites",sidebar:!1,article:!1,comment:!0,editLink:!1,readingShow:"top"},regularPath:"/00.%E7%9B%AE%E5%BD%95%E9%A1%B5/05.%E6%94%B6%E8%97%8F.html",relativePath:"00.目录页/05.收藏.md",key:"v-80a3b3c8",path:"/favorites/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"7/25/2022",lastUpdatedTimestamp:1658728355e3},{title:"其他",frontmatter:{pageComponent:{name:"Catalogue",data:{key:"04.其他",imgUrl:"/img/more.png",description:"其他一些有趣的东西"}},title:"其他",date:"2020-03-11T21:50:55.000Z",permalink:"/other",sidebar:!1,article:!1,comment:!1,editLink:!1,readingShow:"top"},regularPath:"/00.%E7%9B%AE%E5%BD%95%E9%A1%B5/04.%E5%85%B6%E4%BB%96.html",relativePath:"00.目录页/04.其他.md",key:"v-19aaa787",path:"/other/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"7/25/2022",lastUpdatedTimestamp:1658728355e3},{title:"Java源码阅读调试环境搭建",frontmatter:{title:"Java源码阅读调试环境搭建",date:"2022-07-22T17:34:18.000Z",permalink:"/pages/08e16a/",categories:["文章","Java"],tags:["Java"],readingShow:"top"},regularPath:"/01.%E6%96%87%E7%AB%A0/01.Java/01.Java%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E8%B0%83%E8%AF%95%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA.html",relativePath:"01.文章/01.Java/01.Java源码阅读调试环境搭建.md",key:"v-597a1d72",path:"/pages/08e16a/",headers:[{level:2,title:"搭建步骤",slug:"搭建步骤",normalizedTitle:"搭建步骤",charIndex:42},{level:2,title:"遇到的问题",slug:"遇到的问题",normalizedTitle:"遇到的问题",charIndex:227},{level:3,title:"swing包下的一些内容报错。",slug:"swing包下的一些内容报错。",normalizedTitle:"swing包下的一些内容报错。",charIndex:237},{level:3,title:"com.sun.source包下报错。",slug:"com-sun-source包下报错。",normalizedTitle:"com.sun.source包下报错。",charIndex:286},{level:3,title:"启动调试时 Build 报错，提示系统资源不足。",slug:"启动调试时-build-报错-提示系统资源不足。",normalizedTitle:"启动调试时 build 报错，提示系统资源不足。",charIndex:341},{level:3,title:"F7进不去JDK源码。",slug:"f7进不去jdk源码。",normalizedTitle:"f7进不去jdk源码。",charIndex:405},{level:2,title:"总结",slug:"总结",normalizedTitle:"总结",charIndex:464}],excerpt:'<h1 id="java源码阅读调试环境搭建"><a class="header-anchor" href="#java源码阅读调试环境搭建">#</a> Java源码阅读调试环境搭建</h1>\n<p>Java源码阅读和调试环境搭建....</p>\n<h2 id="搭建步骤"><a class="header-anchor" href="#搭建步骤">#</a> 搭建步骤</h2>\n<ol>\n<li>\n<p>创建一个最普通的 Java 基础项目。</p>\n</li>\n<li>\n<p>创建两个包。</p>\n</li>\n</ol>\n<ul>\n<li>source：用于放 JDK 源码。</li>\n<li>test：用于写测试代码。</li>\n</ul>\n<p><img src="https://rcbb-blog.oss-cn-guangzhou.aliyuncs.com/2021/09/20210901151623-00106a.png?x-oss-process=style/yuantu_shuiyin" alt="效果"></p>\n',headersStr:"搭建步骤 遇到的问题 swing包下的一些内容报错。 com.sun.source包下报错。 启动调试时 Build 报错，提示系统资源不足。 F7进不去JDK源码。 总结",content:"# Java源码阅读调试环境搭建\n\nJava源码阅读和调试环境搭建....\n\n\n# 搭建步骤\n\n 1. 创建一个最普通的 Java 基础项目。\n\n 2. 创建两个包。\n\n * source：用于放 JDK 源码。\n * test：用于写测试代码。\n\n\n\n 3. 导入JDK源码。\n\n将 JDK 安装目录下的 src.zip 解压放到 source 下即可。\n\n\n\n 4. 将 SDKs 中关联的 JDK 源码路径修改为我们这个项目路径下的。\n\n\n\n\n# 遇到的问题\n\n\n# swing包下的一些内容报错。\n\n解决方法：直接把 java.swing 整个删掉。\n\n\n\n\n# com.sun.source包下报错。\n\n解决方法：直接把 com.sun.source 整个删掉。\n\n\n# 启动调试时 Build 报错，提示系统资源不足。\n\n解决方法：加大Build process heap size。\n\n\n\n\n# F7进不去JDK源码。\n\n因为调试时，JDK源码受保护，一般单步调试不让进，但是可以设置。\n\n解决方法：\n\n\n\n\n# 总结\n\nJDK 源码肯定是要看的：\n\n 1. 面试跑不掉。\n 2. 弄懂原理才不慌。\n 3. 学习优秀的代码、思想和模式。\n\n我上传的 JDK8 的源码：\n\n> https://github.com/rcbb-cc/study-source-code",normalizedContent:"# java源码阅读调试环境搭建\n\njava源码阅读和调试环境搭建....\n\n\n# 搭建步骤\n\n 1. 创建一个最普通的 java 基础项目。\n\n 2. 创建两个包。\n\n * source：用于放 jdk 源码。\n * test：用于写测试代码。\n\n\n\n 3. 导入jdk源码。\n\n将 jdk 安装目录下的 src.zip 解压放到 source 下即可。\n\n\n\n 4. 将 sdks 中关联的 jdk 源码路径修改为我们这个项目路径下的。\n\n\n\n\n# 遇到的问题\n\n\n# swing包下的一些内容报错。\n\n解决方法：直接把 java.swing 整个删掉。\n\n\n\n\n# com.sun.source包下报错。\n\n解决方法：直接把 com.sun.source 整个删掉。\n\n\n# 启动调试时 build 报错，提示系统资源不足。\n\n解决方法：加大build process heap size。\n\n\n\n\n# f7进不去jdk源码。\n\n因为调试时，jdk源码受保护，一般单步调试不让进，但是可以设置。\n\n解决方法：\n\n\n\n\n# 总结\n\njdk 源码肯定是要看的：\n\n 1. 面试跑不掉。\n 2. 弄懂原理才不慌。\n 3. 学习优秀的代码、思想和模式。\n\n我上传的 jdk8 的源码：\n\n> https://github.com/rcbb-cc/study-source-code",charsets:{cjk:!0},lastUpdated:"8/4/2022",lastUpdatedTimestamp:1659598045e3},{title:"设计模式",frontmatter:{title:"设计模式",date:"2022-08-11T10:36:44.000Z",permalink:"/pages/c9a33b/",categories:["笔记","设计模式"],tags:["设计模式"],readingShow:"top"},regularPath:"/01.%E6%96%87%E7%AB%A0/01.Java/02.%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/01.%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html",relativePath:"01.文章/01.Java/02.设计模式/01.设计模式.md",key:"v-1e650315",path:"/pages/c9a33b/",headers:[{level:2,title:"设计模式",slug:"设计模式",normalizedTitle:"设计模式",charIndex:2},{level:2,title:"软件设计原则",slug:"软件设计原则",normalizedTitle:"软件设计原则",charIndex:61},{level:2,title:"三种模式",slug:"三种模式",normalizedTitle:"三种模式",charIndex:314},{level:3,title:"创建型模式",slug:"创建型模式",normalizedTitle:"创建型模式",charIndex:323},{level:3,title:"结构型模式",slug:"结构型模式",normalizedTitle:"结构型模式",charIndex:358},{level:3,title:"行为性模式",slug:"行为性模式",normalizedTitle:"行为性模式",charIndex:395}],excerpt:'<h2 id="设计模式"><a class="header-anchor" href="#设计模式">#</a> 设计模式</h2>\n<p>设计模式不是非用不可，但是用好设计模式能更好的帮助我们解决实际问题。</p>\n<p>设计模式最重要的是解耦。</p>\n',headersStr:"设计模式 软件设计原则 三种模式 创建型模式 结构型模式 行为性模式",content:"# 设计模式\n\n设计模式不是非用不可，但是用好设计模式能更好的帮助我们解决实际问题。\n\n设计模式最重要的是解耦。\n\n\n# 软件设计原则\n\n软件设计七大原则。\n\n 1. 单一职责原则：每一个类应该专注于做一件事情。\n 2. 里氏替换原则：子类可以扩展父类的功能但不能改变父类原有的功能。\n 3. 依赖倒置原则：实现尽量依赖抽象，不依赖具体实现。\n 4. 接口隔离原则：使用多个专门的接口，而不使用单一的总接口，即不应该依赖那些它不需要的接口。\n 5. 迪米特法则：最少知识原则，一个类对于其他类知道的越少越好。\n 6. 开闭原则：面向扩展开放，面向修改关闭。\n 7. 组合复用原则：尽量使用合成、聚合达到复用，少用继承。\n\n\n# 三种模式\n\n\n# 创建型模式\n\n * 工厂模式\n * 单例模式\n * 原型模式\n\n\n# 结构型模式\n\n * 适配器模式\n * 装饰器模式\n * 代理模式\n\n\n# 行为性模式\n\n * 策略模式\n * 模版模式\n * 委派模式\n * 观察者模式",normalizedContent:"# 设计模式\n\n设计模式不是非用不可，但是用好设计模式能更好的帮助我们解决实际问题。\n\n设计模式最重要的是解耦。\n\n\n# 软件设计原则\n\n软件设计七大原则。\n\n 1. 单一职责原则：每一个类应该专注于做一件事情。\n 2. 里氏替换原则：子类可以扩展父类的功能但不能改变父类原有的功能。\n 3. 依赖倒置原则：实现尽量依赖抽象，不依赖具体实现。\n 4. 接口隔离原则：使用多个专门的接口，而不使用单一的总接口，即不应该依赖那些它不需要的接口。\n 5. 迪米特法则：最少知识原则，一个类对于其他类知道的越少越好。\n 6. 开闭原则：面向扩展开放，面向修改关闭。\n 7. 组合复用原则：尽量使用合成、聚合达到复用，少用继承。\n\n\n# 三种模式\n\n\n# 创建型模式\n\n * 工厂模式\n * 单例模式\n * 原型模式\n\n\n# 结构型模式\n\n * 适配器模式\n * 装饰器模式\n * 代理模式\n\n\n# 行为性模式\n\n * 策略模式\n * 模版模式\n * 委派模式\n * 观察者模式",charsets:{cjk:!0},lastUpdated:"9/7/2023",lastUpdatedTimestamp:169407526e4},{title:"冥思",frontmatter:{pageComponent:{name:"Catalogue",data:{key:"03.冥思",imgUrl:"/img/other.png",description:"一些随想"}},title:"冥思",date:"2020-03-11T21:50:54.000Z",permalink:"/idea",sidebar:!1,article:!1,comment:!1,editLink:!1,readingShow:"top"},regularPath:"/00.%E7%9B%AE%E5%BD%95%E9%A1%B5/03.%E5%86%A5%E6%80%9D.html",relativePath:"00.目录页/03.冥思.md",key:"v-0ae79a98",path:"/idea/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"7/25/2022",lastUpdatedTimestamp:1658728355e3},{title:"工厂模式",frontmatter:{title:"工厂模式",date:"2022-08-11T10:42:36.000Z",permalink:"/pages/c6c51f/",categories:["笔记","设计模式"],tags:["设计模式","工厂模式"],readingShow:"top"},regularPath:"/01.%E6%96%87%E7%AB%A0/01.Java/02.%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/02.%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F.html",relativePath:"01.文章/01.Java/02.设计模式/02.工厂模式.md",key:"v-d6f8fa64",path:"/pages/c6c51f/",headers:[{level:2,title:"简单工厂(simple factory)",slug:"简单工厂-simple-factory",normalizedTitle:"简单工厂(simple factory)",charIndex:11},{level:2,title:"工厂方法(factory method)",slug:"工厂方法-factory-method",normalizedTitle:"工厂方法(factory method)",charIndex:35},{level:2,title:"抽象工厂(abstract factory)",slug:"抽象工厂-abstract-factory",normalizedTitle:"抽象工厂(abstract factory)",charIndex:59}],excerpt:'<h1 id="工厂模式"><a class="header-anchor" href="#工厂模式">#</a> 工厂模式</h1>\n<ul>\n<li>简单工厂(simple factory)</li>\n<li>工厂方法(factory method)</li>\n<li>抽象工厂(abstract factory)</li>\n</ul>\n',headersStr:"简单工厂(simple factory) 工厂方法(factory method) 抽象工厂(abstract factory)",content:"# 工厂模式\n\n * 简单工厂(simple factory)\n * 工厂方法(factory method)\n * 抽象工厂(abstract factory)\n\n\n# 简单工厂(simple factory)\n\n场景问题：面向接口编程，客户端 New 一个实例，必须要知道具体实现类。\n\n模版定义：提供一个创建对象实例的功能，而无须关系其具体实现。被创建实例的类型可以是接口、抽象类，也可以是具体的类。\n\n模式本质：重点在选择实现，使客户端实现解耦。\n\n使用场景：\n\n * 如果想要完全封装隔离具体实现，让外部只能通过接口来操作封装体。\n * 如果想要把对外创建对象的职责集中管理和控制。\n\n七寸知架构-【创建型模式一】简单工厂(Simple Factory)\n\n\n\n\n\n\n# 工厂方法(factory method)\n\n场景问题：简单数据导出功能，会有一些约定方式，比如导出成：文本格式、Excel 格式、Xml 格式、Json 格式等。\n\n模版定义：提供一个用于创建对象的接口，让子类决定实例化哪一个类，使一个类的实例化延迟到其子类。\n\n模式本质：让父类在不知道具体实现的情况下，完成自身的功能调用，而具体的实现延迟到子类来实现。\n\n使用场景：\n\n * 如果一个类需要创建某个接口的对象，但是又不知道具体的实现。\n * 如果一个类本身就希望由它的子类来创建所需的对象的时候。\n\n七寸知架构-【创建型模式二】工厂方法(Factory Method)\n\n\n\n\n\n\n# 抽象工厂(abstract factory)\n\n场景问题：选择组装电脑配机，组装配件是有整体性的，里面选择的各个配件之间是有关联的。\n\n模式定义：提供一个创建一系列相关或相互依赖对象的接口，而无需指定他们具体的类。\n\n模式本质：选择产品簇的实现。\n\n使用场景：\n\n * 如果希望一个系统独立于它的产品的创建，组合和表示的时候。\n * 如果要强调一系列相关产品的接口，以便联合使用它们的时候。\n\n七寸知架构-【创建型模式三】抽象工厂(Abstract Factory)\n\n\n\n",normalizedContent:"# 工厂模式\n\n * 简单工厂(simple factory)\n * 工厂方法(factory method)\n * 抽象工厂(abstract factory)\n\n\n# 简单工厂(simple factory)\n\n场景问题：面向接口编程，客户端 new 一个实例，必须要知道具体实现类。\n\n模版定义：提供一个创建对象实例的功能，而无须关系其具体实现。被创建实例的类型可以是接口、抽象类，也可以是具体的类。\n\n模式本质：重点在选择实现，使客户端实现解耦。\n\n使用场景：\n\n * 如果想要完全封装隔离具体实现，让外部只能通过接口来操作封装体。\n * 如果想要把对外创建对象的职责集中管理和控制。\n\n七寸知架构-【创建型模式一】简单工厂(simple factory)\n\n\n\n\n\n\n# 工厂方法(factory method)\n\n场景问题：简单数据导出功能，会有一些约定方式，比如导出成：文本格式、excel 格式、xml 格式、json 格式等。\n\n模版定义：提供一个用于创建对象的接口，让子类决定实例化哪一个类，使一个类的实例化延迟到其子类。\n\n模式本质：让父类在不知道具体实现的情况下，完成自身的功能调用，而具体的实现延迟到子类来实现。\n\n使用场景：\n\n * 如果一个类需要创建某个接口的对象，但是又不知道具体的实现。\n * 如果一个类本身就希望由它的子类来创建所需的对象的时候。\n\n七寸知架构-【创建型模式二】工厂方法(factory method)\n\n\n\n\n\n\n# 抽象工厂(abstract factory)\n\n场景问题：选择组装电脑配机，组装配件是有整体性的，里面选择的各个配件之间是有关联的。\n\n模式定义：提供一个创建一系列相关或相互依赖对象的接口，而无需指定他们具体的类。\n\n模式本质：选择产品簇的实现。\n\n使用场景：\n\n * 如果希望一个系统独立于它的产品的创建，组合和表示的时候。\n * 如果要强调一系列相关产品的接口，以便联合使用它们的时候。\n\n七寸知架构-【创建型模式三】抽象工厂(abstract factory)\n\n\n\n",charsets:{cjk:!0},lastUpdated:"9/7/2023",lastUpdatedTimestamp:169407526e4},{title:"单例模式",frontmatter:{title:"单例模式",date:"2022-08-23T19:06:05.000Z",permalink:"/pages/80ec45/",categories:["笔记","设计模式"],tags:["设计模式","单例模式"],readingShow:"top"},regularPath:"/01.%E6%96%87%E7%AB%A0/01.Java/02.%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/03.%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F.html",relativePath:"01.文章/01.Java/02.设计模式/03.单例模式.md",key:"v-3d51175f",path:"/pages/80ec45/",headers:[{level:2,title:"单例模式(Singleton)",slug:"单例模式-singleton",normalizedTitle:"单例模式(singleton)",charIndex:172},{level:2,title:"实例代码",slug:"实例代码",normalizedTitle:"实例代码",charIndex:353},{level:3,title:"懒汉式",slug:"懒汉式",normalizedTitle:"懒汉式",charIndex:92},{level:4,title:"双重检查加锁",slug:"双重检查加锁",normalizedTitle:"双重检查加锁",charIndex:1079},{level:4,title:"Lazy initialization holder class",slug:"lazy-initialization-holder-class",normalizedTitle:"lazy initialization holder class",charIndex:1809},{level:3,title:"饿汉式",slug:"饿汉式",normalizedTitle:"饿汉式",charIndex:97},{level:3,title:"单例和枚举",slug:"单例和枚举",normalizedTitle:"单例和枚举",charIndex:3172}],excerpt:'<h1 id="单例模式"><a class="header-anchor" href="#单例模式">#</a> 单例模式</h1>\n<p>单例模式的功能是用来保证这个类在运行期间只会被创建一个类实例，另外单例模式还提供了一个全局唯一访问这个类实例的访问点，就是 getInstance 的方法。</p>\n<p>不管采用懒汉式还是饿汉式的实现方式，这个全局访问点是一样的。</p>\n<p>对于单例模式而言，不管采用何种实现方式，它都是只关心类实例的创建问题，并不关心具体的业务功能。</p>\n',headersStr:"单例模式(Singleton) 实例代码 懒汉式 双重检查加锁 Lazy initialization holder class 饿汉式 单例和枚举",content:"# 单例模式\n\n单例模式的功能是用来保证这个类在运行期间只会被创建一个类实例，另外单例模式还提供了一个全局唯一访问这个类实例的访问点，就是 getInstance 的方法。\n\n不管采用懒汉式还是饿汉式的实现方式，这个全局访问点是一样的。\n\n对于单例模式而言，不管采用何种实现方式，它都是只关心类实例的创建问题，并不关心具体的业务功能。\n\n\n# 单例模式(Singleton)\n\n场景问题：读取配置文件内容，在系统运行期间，配置类只需要一个实例就可以了。\n\n模式定义：保证一个类仅有一个实例，并提供一个访问它的全局访问点。\n\n模式本质：控制实例数目。\n\n使用场景：当需要控制一个类的实例只能有一个时，而且客户只能从一个全局访问它时。\n\n七寸知架构-【创建型模式四】单例模式(Singleton)\n\n\n\n\n# 实例代码\n\n在 Java 中，单例模式的实现又分为两种，一种称为懒汉式，一种称为饿汉式，其实就是在具体创建对象实例的处理上，有不同的实现方式。\n\n\n# 懒汉式\n\npublic class Singleton {  \n      // 4：定义一个变量来存储创建好的类实例  \n      // 5：因为这个变量要在静态方法中使用，所以需要加上static修饰  \n      private static Singleton instance = null;  \n      // 1：私有化构造方法，好在内部控制创建实例的数目  \n      private Singleton(){      \n      }  \n      // 2：定义一个方法来为客户端提供类实例  \n      // 3：这个方法需要定义成类方法，也就是要加static  \n      public static Singleton getInstance(){  \n          // 6：判断存储实例的变量是否有值  \n          if(instance == null){  \n              // 6.1：如果没有，就创建一个类实例，并把值赋值给存储类实例的变量  \n              instance = new Singleton();  \n          }  \n          // 6.2：如果有值，那就直接使用  \n          return instance;  \n      }  \n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n\n\n# 双重检查加锁\n\n用“双重检查加锁”的方式来实现，就可以既实现线程安全，又能够使性能不受到大的影响。\n\npublic class Singleton {  \n      /**\n       * 对保存实例的变量添加volatile的修饰\n       */  \n      private volatile static Singleton instance = null;  \n      private Singleton(){      \n      }\n\n      public static  Singleton getInstance(){  \n          //先检查实例是否存在，如果不存在才进入下面的同步块  \n          if(instance == null){  \n              //同步块，线程安全的创建实例  \n              synchronized(Singleton.class){  \n                  //再次检查实例是否存在，如果不存在才真的创建实例  \n                  if(instance == null){  \n                      instance = new Singleton();  \n                  }  \n              }  \n          }  \n          return instance;  \n      }  \n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n\n\n# Lazy initialization holder class\n\n采用类级内部类，在这个类级内部类里面去创建对象实例，这样一来，只要不使用到这个类级内部类，那就不会创建对象实例。从而同时实现延迟加载和线程安全。\n\n类级内部类指的是：有 static 修饰的成员式内部类。如果没有static修饰的成员式内部类被称为对象级内部类。\n\n类级内部类相当于其外部类的成员，只有在第一次被使用的时候才会被装载。\n\npublic class Singleton {  \n      /**\n       * 类级的内部类，也就是静态的成员式内部类，该内部类的实例与外部类的实例\n       * 没有绑定关系，而且只有被调用到才会装载，从而实现了延迟加载\n       */  \n      private static class SingletonHolder {  \n          /**\n           * 静态初始化器，由JVM来保证线程安全\n           */  \n          private static Singleton instance = new Singleton();  \n      }  \n      /**\n       * 私有化构造方法\n       */  \n      private Singleton() {  \n      }  \n      public static  Singleton getInstance() {  \n          return SingletonHolder.instance;  \n      }  \n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n\n\n\n# 饿汉式\n\nJava 中 static 的特性：\n\n * static 变量在类装载的时候进行初始化。\n * 多个实例的 static 变量会共享同一块内存区域。\n\n在 Java 中，static 变量只会被初始化一次，就是在类装载的时候，而且多个实例都会共享这个内存空间。\n\npublic class Singleton {  \n    // 4：定义一个静态变量来存储创建好的类实例  \n    // 直接在这里创建类实例，只会创建一次  \n    private static Singleton instance = new Singleton();  \n    // 1：私有化构造方法，好在内部控制创建实例的数目  \n    private Singleton(){          \n    }  \n    // 2：定义一个方法来为客户端提供类实例  \n    // 3：这个方法需要定义成类方法，也就是要加static  \n    // 这个方法里面就不需要控制代码了  \n    public static Singleton getInstance(){  \n        // 5：直接使用已经创建好的实例  \n        return instance;  \n    }  \n}  \n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\n\n# 单例和枚举\n\n按照《高效Java 第二版》中的说法：单元素的枚举类型已经成为实现 Singleton 的最佳方法。\n\n/**\n * 使用枚举来实现单例模式的示例\n */  \npublic enum Singleton {  \n    /**\n     * 定义一个枚举的元素,它就代表了Singleton的一个实例\n     */  \n    uniqueInstance;  \n\n    /**\n     * 示意方法，单例可以有自己的操作\n     */  \n    public void singletonOperation(){  \n        //功能处理  \n    }  \n}  \n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n",normalizedContent:"# 单例模式\n\n单例模式的功能是用来保证这个类在运行期间只会被创建一个类实例，另外单例模式还提供了一个全局唯一访问这个类实例的访问点，就是 getinstance 的方法。\n\n不管采用懒汉式还是饿汉式的实现方式，这个全局访问点是一样的。\n\n对于单例模式而言，不管采用何种实现方式，它都是只关心类实例的创建问题，并不关心具体的业务功能。\n\n\n# 单例模式(singleton)\n\n场景问题：读取配置文件内容，在系统运行期间，配置类只需要一个实例就可以了。\n\n模式定义：保证一个类仅有一个实例，并提供一个访问它的全局访问点。\n\n模式本质：控制实例数目。\n\n使用场景：当需要控制一个类的实例只能有一个时，而且客户只能从一个全局访问它时。\n\n七寸知架构-【创建型模式四】单例模式(singleton)\n\n\n\n\n# 实例代码\n\n在 java 中，单例模式的实现又分为两种，一种称为懒汉式，一种称为饿汉式，其实就是在具体创建对象实例的处理上，有不同的实现方式。\n\n\n# 懒汉式\n\npublic class singleton {  \n      // 4：定义一个变量来存储创建好的类实例  \n      // 5：因为这个变量要在静态方法中使用，所以需要加上static修饰  \n      private static singleton instance = null;  \n      // 1：私有化构造方法，好在内部控制创建实例的数目  \n      private singleton(){      \n      }  \n      // 2：定义一个方法来为客户端提供类实例  \n      // 3：这个方法需要定义成类方法，也就是要加static  \n      public static singleton getinstance(){  \n          // 6：判断存储实例的变量是否有值  \n          if(instance == null){  \n              // 6.1：如果没有，就创建一个类实例，并把值赋值给存储类实例的变量  \n              instance = new singleton();  \n          }  \n          // 6.2：如果有值，那就直接使用  \n          return instance;  \n      }  \n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n\n\n# 双重检查加锁\n\n用“双重检查加锁”的方式来实现，就可以既实现线程安全，又能够使性能不受到大的影响。\n\npublic class singleton {  \n      /**\n       * 对保存实例的变量添加volatile的修饰\n       */  \n      private volatile static singleton instance = null;  \n      private singleton(){      \n      }\n\n      public static  singleton getinstance(){  \n          //先检查实例是否存在，如果不存在才进入下面的同步块  \n          if(instance == null){  \n              //同步块，线程安全的创建实例  \n              synchronized(singleton.class){  \n                  //再次检查实例是否存在，如果不存在才真的创建实例  \n                  if(instance == null){  \n                      instance = new singleton();  \n                  }  \n              }  \n          }  \n          return instance;  \n      }  \n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n\n\n# lazy initialization holder class\n\n采用类级内部类，在这个类级内部类里面去创建对象实例，这样一来，只要不使用到这个类级内部类，那就不会创建对象实例。从而同时实现延迟加载和线程安全。\n\n类级内部类指的是：有 static 修饰的成员式内部类。如果没有static修饰的成员式内部类被称为对象级内部类。\n\n类级内部类相当于其外部类的成员，只有在第一次被使用的时候才会被装载。\n\npublic class singleton {  \n      /**\n       * 类级的内部类，也就是静态的成员式内部类，该内部类的实例与外部类的实例\n       * 没有绑定关系，而且只有被调用到才会装载，从而实现了延迟加载\n       */  \n      private static class singletonholder {  \n          /**\n           * 静态初始化器，由jvm来保证线程安全\n           */  \n          private static singleton instance = new singleton();  \n      }  \n      /**\n       * 私有化构造方法\n       */  \n      private singleton() {  \n      }  \n      public static  singleton getinstance() {  \n          return singletonholder.instance;  \n      }  \n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n\n\n\n# 饿汉式\n\njava 中 static 的特性：\n\n * static 变量在类装载的时候进行初始化。\n * 多个实例的 static 变量会共享同一块内存区域。\n\n在 java 中，static 变量只会被初始化一次，就是在类装载的时候，而且多个实例都会共享这个内存空间。\n\npublic class singleton {  \n    // 4：定义一个静态变量来存储创建好的类实例  \n    // 直接在这里创建类实例，只会创建一次  \n    private static singleton instance = new singleton();  \n    // 1：私有化构造方法，好在内部控制创建实例的数目  \n    private singleton(){          \n    }  \n    // 2：定义一个方法来为客户端提供类实例  \n    // 3：这个方法需要定义成类方法，也就是要加static  \n    // 这个方法里面就不需要控制代码了  \n    public static singleton getinstance(){  \n        // 5：直接使用已经创建好的实例  \n        return instance;  \n    }  \n}  \n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\n\n# 单例和枚举\n\n按照《高效java 第二版》中的说法：单元素的枚举类型已经成为实现 singleton 的最佳方法。\n\n/**\n * 使用枚举来实现单例模式的示例\n */  \npublic enum singleton {  \n    /**\n     * 定义一个枚举的元素,它就代表了singleton的一个实例\n     */  \n    uniqueinstance;  \n\n    /**\n     * 示意方法，单例可以有自己的操作\n     */  \n    public void singletonoperation(){  \n        //功能处理  \n    }  \n}  \n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n",charsets:{cjk:!0},lastUpdated:"9/7/2023",lastUpdatedTimestamp:169407526e4},{title:"生成器模式",frontmatter:{title:"生成器模式",date:"2022-09-05T19:50:36.000Z",permalink:"/pages/e9c9f3/",categories:["笔记","设计模式"],tags:["设计模式","生成器模式"],readingShow:"top"},regularPath:"/01.%E6%96%87%E7%AB%A0/01.Java/02.%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/04.%E7%94%9F%E6%88%90%E5%99%A8%E6%A8%A1%E5%BC%8F.html",relativePath:"01.文章/01.Java/02.设计模式/04.生成器模式.md",key:"v-68ca0134",path:"/pages/e9c9f3/",headers:[{level:2,title:"生成器模式(Builder)",slug:"生成器模式-builder",normalizedTitle:"生成器模式(builder)",charIndex:92}],excerpt:'<h1 id="生成器模式"><a class="header-anchor" href="#生成器模式">#</a> 生成器模式</h1>\n<p>生成器模式的重心在于分离构建算法和具体的构造实现，从而使得构建算法可以重用，具体的构造实现可以很方便的扩展和切换，从而可以灵活的组合来构造出不同的产品对象。</p>\n',headersStr:"生成器模式(Builder)",content:"# 生成器模式\n\n生成器模式的重心在于分离构建算法和具体的构造实现，从而使得构建算法可以重用，具体的构造实现可以很方便的扩展和切换，从而可以灵活的组合来构造出不同的产品对象。\n\n\n# 生成器模式(Builder)\n\n场景问题：继续导出数据功能，导出成文本格式、Excel 格式、Xml 格式等，步骤为：构建文件头、构建文件体、构建文件尾。\n\n模式定义：将一个复杂对象的构建与它的表示分离，使得同样的构建过程可以创建不同的表示。\n\n模式本质：分离整体构建算法和部件构造。\n\n使用场景：\n\n * 如果创建对象的算法，应该独立于该对象的组成部分以及它们的装配方式时。\n * 如果同一个构建过程有着不同的表示时。\n\nJDK 示例：StringBuilder\n\n\n\n七寸知架构-【创建型模式五】生成器(Builder)\n\n\n\n",normalizedContent:"# 生成器模式\n\n生成器模式的重心在于分离构建算法和具体的构造实现，从而使得构建算法可以重用，具体的构造实现可以很方便的扩展和切换，从而可以灵活的组合来构造出不同的产品对象。\n\n\n# 生成器模式(builder)\n\n场景问题：继续导出数据功能，导出成文本格式、excel 格式、xml 格式等，步骤为：构建文件头、构建文件体、构建文件尾。\n\n模式定义：将一个复杂对象的构建与它的表示分离，使得同样的构建过程可以创建不同的表示。\n\n模式本质：分离整体构建算法和部件构造。\n\n使用场景：\n\n * 如果创建对象的算法，应该独立于该对象的组成部分以及它们的装配方式时。\n * 如果同一个构建过程有着不同的表示时。\n\njdk 示例：stringbuilder\n\n\n\n七寸知架构-【创建型模式五】生成器(builder)\n\n\n\n",charsets:{cjk:!0},lastUpdated:"9/7/2023",lastUpdatedTimestamp:169407526e4},{title:"外观模式",frontmatter:{title:"外观模式",date:"2022-09-09T17:35:17.000Z",permalink:"/pages/7a035e/",categories:["笔记","设计模式"],tags:["设计模式","外观模式"],readingShow:"top"},regularPath:"/01.%E6%96%87%E7%AB%A0/01.Java/02.%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/06.%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F.html",relativePath:"01.文章/01.Java/02.设计模式/06.外观模式.md",key:"v-7c90548e",path:"/pages/7a035e/",headers:[{level:2,title:"外观模式(Facade)",slug:"外观模式-facade",normalizedTitle:"外观模式(facade)",charIndex:88}],excerpt:'<h1 id="外观模式"><a class="header-anchor" href="#外观模式">#</a> 外观模式</h1>\n<p>外观模式很好的体现了“最少知识原则”。</p>\n<p>如果不使用外观模式，客户端通常需要和子系统内部的多个模块交互。\n使用外观模式过后，客户端只需要和外观类交互。</p>\n',headersStr:"外观模式(Facade)",content:"# 外观模式\n\n外观模式很好的体现了“最少知识原则”。\n\n如果不使用外观模式，客户端通常需要和子系统内部的多个模块交互。 使用外观模式过后，客户端只需要和外观类交互。\n\n\n# 外观模式(Facade)\n\n场景问题：组装电脑，到电子市场，找一家专业装机的公司，把具体要求一讲，然后就等着拿电脑就好了。\n\n模式定义：为子系统中的一组接口提供一个一致的界面，Facade 模式定义了一个高层接口，这个接口使得这一子系统更加容易使用。\n\n模式本质：封装交互，简化调用，减少与子系统内多个模块的交互，松散耦合。\n\n使用场景：\n\n * 如果你希望一个复杂的子系统提供一个简单接口的时候\n * 如果想让客户程序与抽象类的实现部分松散耦合\n * 如果构建多层结构的系统\n\n\n\n七寸知架构-【结构型模式七】外观模式(Facade)\n\n",normalizedContent:"# 外观模式\n\n外观模式很好的体现了“最少知识原则”。\n\n如果不使用外观模式，客户端通常需要和子系统内部的多个模块交互。 使用外观模式过后，客户端只需要和外观类交互。\n\n\n# 外观模式(facade)\n\n场景问题：组装电脑，到电子市场，找一家专业装机的公司，把具体要求一讲，然后就等着拿电脑就好了。\n\n模式定义：为子系统中的一组接口提供一个一致的界面，facade 模式定义了一个高层接口，这个接口使得这一子系统更加容易使用。\n\n模式本质：封装交互，简化调用，减少与子系统内多个模块的交互，松散耦合。\n\n使用场景：\n\n * 如果你希望一个复杂的子系统提供一个简单接口的时候\n * 如果想让客户程序与抽象类的实现部分松散耦合\n * 如果构建多层结构的系统\n\n\n\n七寸知架构-【结构型模式七】外观模式(facade)\n\n",charsets:{cjk:!0},lastUpdated:"9/7/2023",lastUpdatedTimestamp:169407526e4},{title:"原型模式",frontmatter:{title:"原型模式",date:"2022-09-05T19:55:43.000Z",permalink:"/pages/7badac/",categories:["笔记","设计模式"],tags:["设计模式","原型模式"],readingShow:"top"},regularPath:"/01.%E6%96%87%E7%AB%A0/01.Java/02.%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/05.%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F.html",relativePath:"01.文章/01.Java/02.设计模式/05.原型模式.md",key:"v-4b4ac04d",path:"/pages/7badac/",headers:[{level:2,title:"原型模式(Prototype)",slug:"原型模式-prototype",normalizedTitle:"原型模式(prototype)",charIndex:88}],excerpt:'<h1 id="原型模式"><a class="header-anchor" href="#原型模式">#</a> 原型模式</h1>\n<p>原型模式的本质：克隆生成对象。</p>\n<p>克隆是手段，目的还是生成新的对象实例。正是因为原型的目的是为了生成新的对象实例，原型模式通常是被归类为创建型的模式。</p>\n',headersStr:"原型模式(Prototype)",content:"# 原型模式\n\n原型模式的本质：克隆生成对象。\n\n克隆是手段，目的还是生成新的对象实例。正是因为原型的目的是为了生成新的对象实例，原型模式通常是被归类为创建型的模式。\n\n\n# 原型模式(Prototype)\n\n场景问题：根据业务，订单类型分为：个人、公司，现在想要实现一个通用订单系统，在订单中产品数量 > 1000，自动拆单处理。\n\n模式定义：用原型实例指定创建对象的种类，并通过拷贝这些原型创建新的对象。\n\n模式本质：克隆生成对象。\n\n使用场景：\n\n * 如果一个系统想要独立于它想要使用的对象时。\n * 如果需要实例化的类是在运行时刻动态指定时。\n\nJDK 示例：Object 类中的 clone 方法，需要克隆功能的类，只需要使用java.lang.Cloneable接口，是一个标识接口。分浅克隆和深克隆。\n\n\n\n七寸知架构-【创建型模式六】原型模式(Prototype)\n\n",normalizedContent:"# 原型模式\n\n原型模式的本质：克隆生成对象。\n\n克隆是手段，目的还是生成新的对象实例。正是因为原型的目的是为了生成新的对象实例，原型模式通常是被归类为创建型的模式。\n\n\n# 原型模式(prototype)\n\n场景问题：根据业务，订单类型分为：个人、公司，现在想要实现一个通用订单系统，在订单中产品数量 > 1000，自动拆单处理。\n\n模式定义：用原型实例指定创建对象的种类，并通过拷贝这些原型创建新的对象。\n\n模式本质：克隆生成对象。\n\n使用场景：\n\n * 如果一个系统想要独立于它想要使用的对象时。\n * 如果需要实例化的类是在运行时刻动态指定时。\n\njdk 示例：object 类中的 clone 方法，需要克隆功能的类，只需要使用java.lang.cloneable接口，是一个标识接口。分浅克隆和深克隆。\n\n\n\n七寸知架构-【创建型模式六】原型模式(prototype)\n\n",charsets:{cjk:!0},lastUpdated:"9/7/2023",lastUpdatedTimestamp:169407526e4},{title:"桥接模式",frontmatter:{title:"桥接模式",date:"2022-09-09T17:36:01.000Z",permalink:"/pages/790ea0/",categories:["笔记","设计模式"],tags:["设计模式","桥接模式"],readingShow:"top"},regularPath:"/01.%E6%96%87%E7%AB%A0/01.Java/02.%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/08.%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F.html",relativePath:"01.文章/01.Java/02.设计模式/08.桥接模式.md",key:"v-6d613208",path:"/pages/790ea0/",headers:[{level:2,title:"桥接模式(Bridge)",slug:"桥接模式-bridge",normalizedTitle:"桥接模式(bridge)",charIndex:47}],excerpt:'<h1 id="桥接模式"><a class="header-anchor" href="#桥接模式">#</a> 桥接模式</h1>\n<p>桥接模式最重要的工作就是分离抽象部分和实现部分，这是解决问题的关键。</p>\n',headersStr:"桥接模式(Bridge)",content:"# 桥接模式\n\n桥接模式最重要的工作就是分离抽象部分和实现部分，这是解决问题的关键。\n\n\n# 桥接模式(Bridge)\n\n场景问题：发送提示消息，方式：系统信息、手机短信、邮件、Push 等，类型：普通消息、加急消息、特急消息；\n\n模式定义：将抽象部分与它的实现部分分离，使他们可以独立地变化。\n\n模式本质：分离抽象与实现，为这两部分搭桥。桥接是单向的，只能由抽象部分的对象使用具体实现部分的对象，而不能反过来，也就是个单向桥。\n\n使用场景：\n\n * 如果你不希望在抽象和实现部分采用固定的绑定关系\n * 如果出现抽象部分和实现部分都应该可以扩展的情况\n * 如果希望实现部分的修改，不会对客户产生影响\n * 如果采用继承的实现方案，会导致产生很多子类\n\n\n\n七寸知架构-桥接模式(Bridge)\n\n",normalizedContent:"# 桥接模式\n\n桥接模式最重要的工作就是分离抽象部分和实现部分，这是解决问题的关键。\n\n\n# 桥接模式(bridge)\n\n场景问题：发送提示消息，方式：系统信息、手机短信、邮件、push 等，类型：普通消息、加急消息、特急消息；\n\n模式定义：将抽象部分与它的实现部分分离，使他们可以独立地变化。\n\n模式本质：分离抽象与实现，为这两部分搭桥。桥接是单向的，只能由抽象部分的对象使用具体实现部分的对象，而不能反过来，也就是个单向桥。\n\n使用场景：\n\n * 如果你不希望在抽象和实现部分采用固定的绑定关系\n * 如果出现抽象部分和实现部分都应该可以扩展的情况\n * 如果希望实现部分的修改，不会对客户产生影响\n * 如果采用继承的实现方案，会导致产生很多子类\n\n\n\n七寸知架构-桥接模式(bridge)\n\n",charsets:{cjk:!0},lastUpdated:"9/7/2023",lastUpdatedTimestamp:169407526e4},{title:"组合模式",frontmatter:{title:"组合模式",date:"2022-09-21T19:58:00.000Z",permalink:"/pages/112792/",categories:["笔记","设计模式"],tags:["设计模式","组合模式"],readingShow:"top"},regularPath:"/01.%E6%96%87%E7%AB%A0/01.Java/02.%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/09.%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F.html",relativePath:"01.文章/01.Java/02.设计模式/09.组合模式.md",key:"v-26e68e78",path:"/pages/112792/",headers:[{level:2,title:"组合模式(Composite)",slug:"组合模式-composite",normalizedTitle:"组合模式(composite)",charIndex:109}],excerpt:'<h1 id="组合模式"><a class="header-anchor" href="#组合模式">#</a> 组合模式</h1>\n<p>组合模式通过引入一个抽象的组件对象，作为组合对象和叶子对象的父对象，这样就把组合对象和叶子对象统一起来了，用户使用的时候，始终是在操作组件对象，而不再去区分是在操作组合对象还是在操作叶子对象。</p>\n',headersStr:"组合模式(Composite)",content:"# 组合模式\n\n组合模式通过引入一个抽象的组件对象，作为组合对象和叶子对象的父对象，这样就把组合对象和叶子对象统一起来了，用户使用的时候，始终是在操作组件对象，而不再去区分是在操作组合对象还是在操作叶子对象。\n\n\n# 组合模式(Composite)\n\n场景问题：需要管理商品分类树。\n\n模式定义：将对象组合成树形结构以表示“部分-整体”的层次结构。组合模式使得用户对单个对象和组合对象的使用具有一致性。\n\n模式本质：统一叶子对象和组合对象。\n\n使用场景：\n\n * 如果你想表示对象的部分-整体层次结构\n * 如果你希望统一的使用组合结构中的所有对象\n\n七寸知架构-【结构型模式十】组合模式(Composite)\n\n",normalizedContent:"# 组合模式\n\n组合模式通过引入一个抽象的组件对象，作为组合对象和叶子对象的父对象，这样就把组合对象和叶子对象统一起来了，用户使用的时候，始终是在操作组件对象，而不再去区分是在操作组合对象还是在操作叶子对象。\n\n\n# 组合模式(composite)\n\n场景问题：需要管理商品分类树。\n\n模式定义：将对象组合成树形结构以表示“部分-整体”的层次结构。组合模式使得用户对单个对象和组合对象的使用具有一致性。\n\n模式本质：统一叶子对象和组合对象。\n\n使用场景：\n\n * 如果你想表示对象的部分-整体层次结构\n * 如果你希望统一的使用组合结构中的所有对象\n\n七寸知架构-【结构型模式十】组合模式(composite)\n\n",charsets:{cjk:!0},lastUpdated:"9/7/2023",lastUpdatedTimestamp:169407526e4},{title:"适配器模式",frontmatter:{title:"适配器模式",date:"2022-09-07T17:55:01.000Z",permalink:"/pages/2ed1b3/",categories:["笔记","设计模式"],tags:["设计模式","适配器模式"],readingShow:"top"},regularPath:"/01.%E6%96%87%E7%AB%A0/01.Java/02.%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/07.%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F.html",relativePath:"01.文章/01.Java/02.设计模式/07.适配器模式.md",key:"v-b095581e",path:"/pages/2ed1b3/",headers:[{level:2,title:"适配器模式(Adapter)",slug:"适配器模式-adapter",normalizedTitle:"适配器模式(adapter)",charIndex:87}],excerpt:'<h1 id="适配器模式"><a class="header-anchor" href="#适配器模式">#</a> 适配器模式</h1>\n<p>适配器模式的主要功能是进行转换匹配，目的是复用已有的功能，而不是来实现新的接口。</p>\n<p>适配器模式主要负责把不兼容的接口转换成客户端期望的样子就好了。</p>\n',headersStr:"适配器模式(Adapter)",content:"# 适配器模式\n\n适配器模式的主要功能是进行转换匹配，目的是复用已有的功能，而不是来实现新的接口。\n\n适配器模式主要负责把不兼容的接口转换成客户端期望的样子就好了。\n\n\n# 适配器模式(Adapter)\n\n场景问题：如何使原有的电源类的结构能够适应新的硬盘类的电源接口的需要呢？\n\n模式定义：将一个类的接口转换成客户希望的另一个接口。适配器模式使得原本由于接口不兼容而不能一起工作的那些类可以一起工作。\n\n模式本质：转换匹配，复用功能。\n\n使用场景：\n\n * 如果你想要使用一个已经存在的类，但是它的接口不符合你的需求\n * 如果你想要创建一个可以复用的类，这个类可能和一些不兼容的类一起工作\n * 如果你想使用一些已经存在的子类，但是不可能对每一个子类都进行适配\n\n七寸知架构-【结构型模式八】适配器(Adapter)\n\n",normalizedContent:"# 适配器模式\n\n适配器模式的主要功能是进行转换匹配，目的是复用已有的功能，而不是来实现新的接口。\n\n适配器模式主要负责把不兼容的接口转换成客户端期望的样子就好了。\n\n\n# 适配器模式(adapter)\n\n场景问题：如何使原有的电源类的结构能够适应新的硬盘类的电源接口的需要呢？\n\n模式定义：将一个类的接口转换成客户希望的另一个接口。适配器模式使得原本由于接口不兼容而不能一起工作的那些类可以一起工作。\n\n模式本质：转换匹配，复用功能。\n\n使用场景：\n\n * 如果你想要使用一个已经存在的类，但是它的接口不符合你的需求\n * 如果你想要创建一个可以复用的类，这个类可能和一些不兼容的类一起工作\n * 如果你想使用一些已经存在的子类，但是不可能对每一个子类都进行适配\n\n七寸知架构-【结构型模式八】适配器(adapter)\n\n",charsets:{cjk:!0},lastUpdated:"9/7/2023",lastUpdatedTimestamp:169407526e4},{title:"SpringBoot集成ShardingSphere4.1.1(自定义分库、分表算法)",frontmatter:{title:"SpringBoot集成ShardingSphere4.1.1(自定义分库、分表算法)",date:"2022-08-04T12:00:00.000Z",permalink:"/pages/f4535c/",categories:["文章","Spring"],tags:["ShardingSphere","分库分表"],readingShow:"top"},regularPath:"/01.%E6%96%87%E7%AB%A0/05.Spring/01.%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/01.SpringBoot%E9%9B%86%E6%88%90ShardingSphere4.1.1(%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%86%E5%BA%93%E3%80%81%E5%88%86%E8%A1%A8%E7%AE%97%E6%B3%95).html",relativePath:"01.文章/05.Spring/01.基础使用/01.SpringBoot集成ShardingSphere4.1.1(自定义分库、分表算法).md",key:"v-18a9c640",path:"/pages/f4535c/",headers:[{level:2,title:"ShardingSphere",slug:"shardingsphere",normalizedTitle:"shardingsphere",charIndex:2},{level:2,title:"快速上手",slug:"快速上手",normalizedTitle:"快速上手",charIndex:508},{level:3,title:"依赖",slug:"依赖",normalizedTitle:"依赖",charIndex:517},{level:3,title:"规则配置",slug:"规则配置",normalizedTitle:"规则配置",charIndex:1199},{level:3,title:"测试",slug:"测试",normalizedTitle:"测试",charIndex:2408},{level:2,title:"自定义分库/分表算法",slug:"自定义分库-分表算法",normalizedTitle:"自定义分库/分表算法",charIndex:2554},{level:3,title:"自定义分库算法",slug:"自定义分库算法",normalizedTitle:"自定义分库算法",charIndex:2646},{level:3,title:"自定义分表算法",slug:"自定义分表算法",normalizedTitle:"自定义分表算法",charIndex:3640},{level:3,title:"完整配置",slug:"完整配置",normalizedTitle:"完整配置",charIndex:4945}],excerpt:'<h1 id="shardingsphere4-1-1-demo"><a class="header-anchor" href="#shardingsphere4-1-1-demo">#</a> ShardingSphere4.1.1-demo</h1>\n<p>使用 ShardingSphere4.1.1 进行数据分片。</p>\n<p>自定义分库、分表算法，实现按日期进行分表。</p>\n',headersStr:"ShardingSphere 快速上手 依赖 规则配置 测试 自定义分库/分表算法 自定义分库算法 自定义分表算法 完整配置",content:'# ShardingSphere4.1.1-demo\n\n使用 ShardingSphere4.1.1 进行数据分片。\n\n自定义分库、分表算法，实现按日期进行分表。\n\nShardingSphere4.1.1-demo Github地址\n\n项目中使用的是 PostgreSQL，如需要切换为 MySQL，仅需切换配置文件中 driver-class-name 和 url 等配置即可。\n\n\n# ShardingSphere\n\n> Sharding-Sphere是一套开源的分布式数据库中间件解决方案组成的生态圈，它由Sharding-JDBC、Sharding-Proxy和Sharding-Sidecar这3款相互独立的产品组成。他们均提供标准化的数据分片、读写分离、柔性事务和数据治理功能，可适用于如Java同构、异构语言、容器、云原生等各种多样化的应用场景。\n\nShardingSphere官网\n\n> https://shardingsphere.apache.org/\n\nShardingSphere的当前版本\n\n\n\n由于5.x 版本目前还在 bate 版，线上使用的话，推荐使用稳定的 4.x 版本。\n\n\n# 快速上手\n\n\n# 依赖\n\nShardingSphere4.1.1 是需要引入两个包的。\n\n<properties>\n    <sharding-sphere.version>4.1.1</sharding-sphere.version>\n</properties>\n<dependencies>\n    \x3c!-- for spring boot --\x3e\n    <dependency>\n        <groupId>org.apache.shardingsphere</groupId>\n        <artifactId>sharding-jdbc-spring-boot-starter</artifactId>\n        <version>${sharding-sphere.version}</version>\n    </dependency>\n    \x3c!-- for spring namespace --\x3e\n    <dependency>\n        <groupId>org.apache.shardingsphere</groupId>\n        <artifactId>sharding-jdbc-spring-namespace</artifactId>\n        <version>${sharding-sphere.version}</version>\n    </dependency>\n</dependencies>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n\n\n\n# 规则配置\n\n官方有详细案例：\n\n> https://shardingsphere.apache.org/document/4.1.1/cn/manual/sharding-jdbc/usage/sharding/\n\nyml 配置如下：\n\n我使用的是 PostgreSQL，若切换为 MySQL，仅需修改 driver-class-name 和 url 即可。\n\n使用了多数据源，t_order 表根据 order_id 进行分片。\n\nspring:\n  shardingsphere:\n    datasource:\n      names: ds0,ds1\n      ds0:\n        driver-class-name: org.postgresql.Driver\n        url: jdbc:postgresql://192.168.1.56:5433/sharding_test?&ssl=false&stringtype=unspecified\n        type: com.alibaba.druid.pool.DruidDataSource\n        username: postgres\n        password: jetlinks\n      ds1:\n        driver-class-name: org.postgresql.Driver\n        url: jdbc:postgresql://192.168.1.56:5433/sharding_test?&ssl=false&stringtype=unspecified\n        type: com.alibaba.druid.pool.DruidDataSource\n        username: postgres\n        password: jetlinks\n    props:\n      sql:\n        show: true\n    sharding:\n      default-data-source-name: ds0\n      tables:\n        t_order:\n          actual-data-nodes: ds0.t_order$->{0..3}\n          table-strategy:\n            inline:\n              algorithm-expression: t_order$->{order_id % 4}\n              sharding-column: order_id\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n\n\n\n# 测试\n\n 1. 首先按照配置文件中的配置规则，创建 t_order 表，需要创建 t_order0 t_order1 t_order2 t_order3 是个表。\n 2. 创建对应的实体、Mapper 来进行测试。\n\n\n\n最后的效果，即四个表中，一个表中一条记录。\n\n\n\n分表成功。\n\n\n# 自定义分库/分表算法\n\n有时候根据我们的业务场景，需要根据自己的一些逻辑来进行分库分表。\n\n例如：根据日期进行分表，一天一张表。\n\n这个时候就需要进行自定义分库、分表算法了。\n\n\n# 自定义分库算法\n\n自定义分库算法：根据某个全局唯一的值。\n\n@Slf4j\npublic class DBShardingAlgorithm implements PreciseShardingAlgorithm<Long> {\n    @Override\n    public String doSharding(Collection<String> availableTargetNames, PreciseShardingValue<Long> shardingValue) {\n\n        log.info("[分库算法开始]");\n        // 真实节点\n        availableTargetNames.stream().forEach((item) -> {\n            log.info("[存在的库名<{}>]", item);\n        });\n\n        log.info("[表名<{}> 列名<{}>]", shardingValue.getLogicTableName(), shardingValue.getColumnName());\n\n        //精确分片\n        log.info("[分库列的值<{}>]", shardingValue.getValue());\n\n        long orderId = shardingValue.getValue();\n\n        // 效果等同于 orderId % 2\n        long db_index = orderId & 1;\n\n        for (String each : availableTargetNames) {\n            if (each.equals("ds" + db_index)) {\n                return each;\n            }\n        }\n\n        throw new IllegalArgumentException();\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n\n\n\n# 自定义分表算法\n\n自定义分表算法：根据日期来进行分表。\n\n@Slf4j\npublic class TableShardingAlgorithm implements PreciseShardingAlgorithm<Date> {\n    @Override\n    public String doSharding(Collection<String> availableTargetNames, PreciseShardingValue<Date> shardingValue) {\n        log.info("[分表算法]");\n\n        // 真实节点\n        availableTargetNames.stream().forEach((item) -> {\n            log.info("[存在的表<{}>]", item);\n        });\n        log.info("[表名<{}> 列名<{}>]", shardingValue.getLogicTableName(), shardingValue.getColumnName());\n\n        //精确分片\n        log.info("[分表列的值<{}>]", shardingValue.getValue());\n        // 根据当前日期来分库分表\n        Date date = shardingValue.getValue();\n        String tbName = shardingValue.getLogicTableName() + "_";\n        int year = DateUtil.year(date);\n        int month = DateUtil.month(date) + 1;\n        int day = DateUtil.dayOfMonth(date);\n        log.info("[year<{}> month<{}> day<{}>]", year, month, day);\n        tbName = tbName + year + "_" + month + "_" + day;\n        log.info("[分片确定的表名<{}>]", tbName);\n\n        for (String each : availableTargetNames) {\n            if (each.equals(tbName)) {\n                return each;\n            }\n        }\n        throw new IllegalArgumentException();\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n\n\n\n# 完整配置\n\nspring:\n  shardingsphere:\n    datasource:\n      names: ds0,ds1\n      ds0:\n        driver-class-name: org.postgresql.Driver\n        url: jdbc:postgresql://192.168.1.56:5433/sharding_test?&ssl=false&stringtype=unspecified\n        type: com.alibaba.druid.pool.DruidDataSource\n        username: postgres\n        password: jetlinks\n      ds1:\n        driver-class-name: org.postgresql.Driver\n        url: jdbc:postgresql://192.168.1.56:5433/sharding_test?&ssl=false&stringtype=unspecified\n        type: com.alibaba.druid.pool.DruidDataSource\n        username: postgres\n        password: jetlinks\n    props:\n      sql:\n        show: true\n    sharding:\n      default-data-source-name: ds0\n      tables:\n        t_order:\n          actual-data-nodes: ds0.t_order$->{0..3}\n          table-strategy:\n            inline:\n              algorithm-expression: t_order$->{order_id % 4}\n              sharding-column: order_id\n        t_position:\n          actual-data-nodes: ds$->{0..1}.t_position_$->{2020..2021}_$->{1..12}_$->{1..31}\n          database-strategy:\n            standard:\n              precise-algorithm-class-name: cc.rcbb.sharding.test.config.DBShardingAlgorithm\n              sharding-column: position_id\n          table-strategy:\n            standard:\n              precise-algorithm-class-name: cc.rcbb.sharding.test.config.TableShardingAlgorithm\n              sharding-column: loc_date\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n',normalizedContent:'# shardingsphere4.1.1-demo\n\n使用 shardingsphere4.1.1 进行数据分片。\n\n自定义分库、分表算法，实现按日期进行分表。\n\nshardingsphere4.1.1-demo github地址\n\n项目中使用的是 postgresql，如需要切换为 mysql，仅需切换配置文件中 driver-class-name 和 url 等配置即可。\n\n\n# shardingsphere\n\n> sharding-sphere是一套开源的分布式数据库中间件解决方案组成的生态圈，它由sharding-jdbc、sharding-proxy和sharding-sidecar这3款相互独立的产品组成。他们均提供标准化的数据分片、读写分离、柔性事务和数据治理功能，可适用于如java同构、异构语言、容器、云原生等各种多样化的应用场景。\n\nshardingsphere官网\n\n> https://shardingsphere.apache.org/\n\nshardingsphere的当前版本\n\n\n\n由于5.x 版本目前还在 bate 版，线上使用的话，推荐使用稳定的 4.x 版本。\n\n\n# 快速上手\n\n\n# 依赖\n\nshardingsphere4.1.1 是需要引入两个包的。\n\n<properties>\n    <sharding-sphere.version>4.1.1</sharding-sphere.version>\n</properties>\n<dependencies>\n    \x3c!-- for spring boot --\x3e\n    <dependency>\n        <groupid>org.apache.shardingsphere</groupid>\n        <artifactid>sharding-jdbc-spring-boot-starter</artifactid>\n        <version>${sharding-sphere.version}</version>\n    </dependency>\n    \x3c!-- for spring namespace --\x3e\n    <dependency>\n        <groupid>org.apache.shardingsphere</groupid>\n        <artifactid>sharding-jdbc-spring-namespace</artifactid>\n        <version>${sharding-sphere.version}</version>\n    </dependency>\n</dependencies>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n\n\n\n# 规则配置\n\n官方有详细案例：\n\n> https://shardingsphere.apache.org/document/4.1.1/cn/manual/sharding-jdbc/usage/sharding/\n\nyml 配置如下：\n\n我使用的是 postgresql，若切换为 mysql，仅需修改 driver-class-name 和 url 即可。\n\n使用了多数据源，t_order 表根据 order_id 进行分片。\n\nspring:\n  shardingsphere:\n    datasource:\n      names: ds0,ds1\n      ds0:\n        driver-class-name: org.postgresql.driver\n        url: jdbc:postgresql://192.168.1.56:5433/sharding_test?&ssl=false&stringtype=unspecified\n        type: com.alibaba.druid.pool.druiddatasource\n        username: postgres\n        password: jetlinks\n      ds1:\n        driver-class-name: org.postgresql.driver\n        url: jdbc:postgresql://192.168.1.56:5433/sharding_test?&ssl=false&stringtype=unspecified\n        type: com.alibaba.druid.pool.druiddatasource\n        username: postgres\n        password: jetlinks\n    props:\n      sql:\n        show: true\n    sharding:\n      default-data-source-name: ds0\n      tables:\n        t_order:\n          actual-data-nodes: ds0.t_order$->{0..3}\n          table-strategy:\n            inline:\n              algorithm-expression: t_order$->{order_id % 4}\n              sharding-column: order_id\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n\n\n\n# 测试\n\n 1. 首先按照配置文件中的配置规则，创建 t_order 表，需要创建 t_order0 t_order1 t_order2 t_order3 是个表。\n 2. 创建对应的实体、mapper 来进行测试。\n\n\n\n最后的效果，即四个表中，一个表中一条记录。\n\n\n\n分表成功。\n\n\n# 自定义分库/分表算法\n\n有时候根据我们的业务场景，需要根据自己的一些逻辑来进行分库分表。\n\n例如：根据日期进行分表，一天一张表。\n\n这个时候就需要进行自定义分库、分表算法了。\n\n\n# 自定义分库算法\n\n自定义分库算法：根据某个全局唯一的值。\n\n@slf4j\npublic class dbshardingalgorithm implements preciseshardingalgorithm<long> {\n    @override\n    public string dosharding(collection<string> availabletargetnames, preciseshardingvalue<long> shardingvalue) {\n\n        log.info("[分库算法开始]");\n        // 真实节点\n        availabletargetnames.stream().foreach((item) -> {\n            log.info("[存在的库名<{}>]", item);\n        });\n\n        log.info("[表名<{}> 列名<{}>]", shardingvalue.getlogictablename(), shardingvalue.getcolumnname());\n\n        //精确分片\n        log.info("[分库列的值<{}>]", shardingvalue.getvalue());\n\n        long orderid = shardingvalue.getvalue();\n\n        // 效果等同于 orderid % 2\n        long db_index = orderid & 1;\n\n        for (string each : availabletargetnames) {\n            if (each.equals("ds" + db_index)) {\n                return each;\n            }\n        }\n\n        throw new illegalargumentexception();\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n\n\n\n# 自定义分表算法\n\n自定义分表算法：根据日期来进行分表。\n\n@slf4j\npublic class tableshardingalgorithm implements preciseshardingalgorithm<date> {\n    @override\n    public string dosharding(collection<string> availabletargetnames, preciseshardingvalue<date> shardingvalue) {\n        log.info("[分表算法]");\n\n        // 真实节点\n        availabletargetnames.stream().foreach((item) -> {\n            log.info("[存在的表<{}>]", item);\n        });\n        log.info("[表名<{}> 列名<{}>]", shardingvalue.getlogictablename(), shardingvalue.getcolumnname());\n\n        //精确分片\n        log.info("[分表列的值<{}>]", shardingvalue.getvalue());\n        // 根据当前日期来分库分表\n        date date = shardingvalue.getvalue();\n        string tbname = shardingvalue.getlogictablename() + "_";\n        int year = dateutil.year(date);\n        int month = dateutil.month(date) + 1;\n        int day = dateutil.dayofmonth(date);\n        log.info("[year<{}> month<{}> day<{}>]", year, month, day);\n        tbname = tbname + year + "_" + month + "_" + day;\n        log.info("[分片确定的表名<{}>]", tbname);\n\n        for (string each : availabletargetnames) {\n            if (each.equals(tbname)) {\n                return each;\n            }\n        }\n        throw new illegalargumentexception();\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n\n\n\n# 完整配置\n\nspring:\n  shardingsphere:\n    datasource:\n      names: ds0,ds1\n      ds0:\n        driver-class-name: org.postgresql.driver\n        url: jdbc:postgresql://192.168.1.56:5433/sharding_test?&ssl=false&stringtype=unspecified\n        type: com.alibaba.druid.pool.druiddatasource\n        username: postgres\n        password: jetlinks\n      ds1:\n        driver-class-name: org.postgresql.driver\n        url: jdbc:postgresql://192.168.1.56:5433/sharding_test?&ssl=false&stringtype=unspecified\n        type: com.alibaba.druid.pool.druiddatasource\n        username: postgres\n        password: jetlinks\n    props:\n      sql:\n        show: true\n    sharding:\n      default-data-source-name: ds0\n      tables:\n        t_order:\n          actual-data-nodes: ds0.t_order$->{0..3}\n          table-strategy:\n            inline:\n              algorithm-expression: t_order$->{order_id % 4}\n              sharding-column: order_id\n        t_position:\n          actual-data-nodes: ds$->{0..1}.t_position_$->{2020..2021}_$->{1..12}_$->{1..31}\n          database-strategy:\n            standard:\n              precise-algorithm-class-name: cc.rcbb.sharding.test.config.dbshardingalgorithm\n              sharding-column: position_id\n          table-strategy:\n            standard:\n              precise-algorithm-class-name: cc.rcbb.sharding.test.config.tableshardingalgorithm\n              sharding-column: loc_date\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n',charsets:{cjk:!0},lastUpdated:"10/7/2022",lastUpdatedTimestamp:1665111399e3},{title:"使用Flyway对数据库版本控制",frontmatter:{title:"使用Flyway对数据库版本控制",date:"2022-08-05T10:39:30.000Z",permalink:"/pages/82388c/",categories:["文章","Spring"],tags:["flyway","数据库版本控制"],readingShow:"top"},regularPath:"/01.%E6%96%87%E7%AB%A0/05.Spring/01.%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/02.%E4%BD%BF%E7%94%A8Flyway%E5%AF%B9%E6%95%B0%E6%8D%AE%E5%BA%93%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6.html",relativePath:"01.文章/05.Spring/01.基础使用/02.使用Flyway对数据库版本控制.md",key:"v-034236e3",path:"/pages/82388c/",headers:[{level:2,title:"概念",slug:"概念",normalizedTitle:"概念",charIndex:2},{level:3,title:"什么是Flyway",slug:"什么是flyway",normalizedTitle:"什么是flyway",charIndex:9},{level:3,title:"为什么要用Flyway",slug:"为什么要用flyway",normalizedTitle:"为什么要用flyway",charIndex:51},{level:3,title:"Flyway的特点",slug:"flyway的特点",normalizedTitle:"flyway的特点",charIndex:348},{level:3,title:"Flyway的工作机制",slug:"flyway的工作机制",normalizedTitle:"flyway的工作机制",charIndex:474},{level:2,title:"最佳实践",slug:"最佳实践",normalizedTitle:"最佳实践",charIndex:785},{level:3,title:"仅需被执行一次的",slug:"仅需被执行一次的",normalizedTitle:"仅需被执行一次的",charIndex:1032},{level:3,title:"可重复执行的脚本",slug:"可重复执行的脚本",normalizedTitle:"可重复执行的脚本",charIndex:2535},{level:2,title:"错误验证",slug:"错误验证",normalizedTitle:"错误验证",charIndex:3046},{level:3,title:"刻意修改仅需被执行一次的脚本",slug:"刻意修改仅需被执行一次的脚本",normalizedTitle:"刻意修改仅需被执行一次的脚本",charIndex:3055},{level:3,title:"可重复执行的脚本若存在错误",slug:"可重复执行的脚本若存在错误",normalizedTitle:"可重复执行的脚本若存在错误",charIndex:3265},{level:2,title:"配置",slug:"配置",normalizedTitle:"配置",charIndex:1214},{level:2,title:"总结",slug:"总结",normalizedTitle:"总结",charIndex:6413},{level:2,title:"参考",slug:"参考",normalizedTitle:"参考",charIndex:6669}],excerpt:'<h2 id="概念"><a class="header-anchor" href="#概念">#</a> 概念</h2>\n<h3 id="什么是flyway"><a class="header-anchor" href="#什么是flyway">#</a> 什么是Flyway</h3>\n<p>Flyway 是一个能对数据库变更做版本控制的工具。</p>\n<h3 id="为什么要用flyway"><a class="header-anchor" href="#为什么要用flyway">#</a> 为什么要用Flyway</h3>\n<p>在多人开发的项目中，我们都习惯了使用 SVN 或者 Git 来对代码做版本控制，主要的目的就是为了解决多人开发代码冲突和版本回退的问题。</p>\n<p>其实，数据库的变更也需要版本控制，在日常开发中，我们经常会遇到下面的问题：</p>\n<ol>\n<li>自己写的 SQL 忘了在所有环境执行；</li>\n<li>别人写的 SQL 我们不能确定是否都在所有环境执行过了；</li>\n<li>有人修改了已经执行过的 SQL，期望再次执行；</li>\n<li>需要新增环境做数据迁移；</li>\n<li>每次发版需要手动控制先发 DB 版本，再发布应用版本；</li>\n<li>其它场景...</li>\n</ol>\n<p>有了Flyway，这些问题都能得到很好的解决。</p>\n',headersStr:"概念 什么是Flyway 为什么要用Flyway Flyway的特点 Flyway的工作机制 最佳实践 仅需被执行一次的 可重复执行的脚本 错误验证 刻意修改仅需被执行一次的脚本 可重复执行的脚本若存在错误 配置 总结 参考",content:"# 概念\n\n\n# 什么是Flyway\n\nFlyway 是一个能对数据库变更做版本控制的工具。\n\n\n# 为什么要用Flyway\n\n在多人开发的项目中，我们都习惯了使用 SVN 或者 Git 来对代码做版本控制，主要的目的就是为了解决多人开发代码冲突和版本回退的问题。\n\n其实，数据库的变更也需要版本控制，在日常开发中，我们经常会遇到下面的问题：\n\n 1. 自己写的 SQL 忘了在所有环境执行；\n 2. 别人写的 SQL 我们不能确定是否都在所有环境执行过了；\n 3. 有人修改了已经执行过的 SQL，期望再次执行；\n 4. 需要新增环境做数据迁移；\n 5. 每次发版需要手动控制先发 DB 版本，再发布应用版本；\n 6. 其它场景...\n\n有了Flyway，这些问题都能得到很好的解决。\n\n\n# Flyway的特点\n\n * 简单。非常容易安装和学习，同时迁移的方式也很容易被开发者接受。\n * 转移。Flyway 专注于搞数据库迁移、版本控制而并没有其它副作用。\n * 强大。专为连续交付而设计。让Flyway在应用程序启动时迁移数据库。\n\n\n# Flyway的工作机制\n\nFlyway 需要在 DB 中先创建一个 metadata 表 (缺省表名为 flyway_schema_history), 在该表中保存着每次 migration （迁移）的记录, 记录包含 migration 脚本的版本号和 SQL 脚本的 checksum 值。\n\nFlyway 扫描文件系统或应用程序的类路径读取 DDL 和 DML 以进行迁移。\n根据metadata 表进行检查迁移。\n如果脚本声明的版本号小于或等于标记为当前版本的版本号之一，将忽略它们。\n其余迁移是待处理迁移：可用，但未应用。最后按版本号对它们进行排序并按顺序执行 并将执行结果写入 metadata 表。\n\n\n# 最佳实践\n\n通过 Aliyun Java Initializr 创建项目\n\n\n\n我使用的是 PostgreSQL，创建一个库。\n\n> create database test_flyway;\n\n在src/main/resources目录下面新建db.migration文件夹，默认情况下，该目录下的.sql 文件就算是需要被 flyway 做版本控制的数据库 SQL 语句。\n\n但是此处的 SQL 语句命名需要遵从一定的规范，否则运行的时候 flyway 会报错。命名规则主要有两种：\n\n * 仅需被执行一次的 SQL 。文件命名以大写V字开头，后面可跟上0-9数字，数字之间可用.或_分隔开，然后再以两个下划线分隔，后面为文件名，最后以.sql结尾。例：V1.0.0__init.sql\n\n * 可重复运行的SQL。只要脚本内容发生了变化，项目启动时脚本就会被重新执行。文件名以大写R字开头，后面再以两个下划线分隔后面为文件名，最后以.sql结尾。\n\n项目配置。\n\nspring:\n  application:\n    name: flyway-test\n  datasource:\n    driver-class-name: org.postgresql.Driver\n    url: jdbc:postgresql://192.168.1.56:5432/test_flyway?&ssl=false&stringtype=unspecified\n    username: postgres\n    password: postgres\nserver:\n  port: 8080\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\n初次启动，报错。因为无任何内容。\n\n\n\n\n# 仅需被执行一次的\n\n文件命名以大写V字开头，后面可跟上0-9数字，数字之间可用.或_分隔开，然后再以两个下划线分隔，后面为文件名，最后以.sql结尾。例：V1.0.0__init.sql\n\n创建第一个脚本：V1.0.0_init.sql\n\ncreate table tb_user\n(\n    id          bigserial primary key,\n    username    varchar(30) not null,\n    nickname    varchar(30),\n    age         smallint,\n    create_time bigint,\n    update_time bigint\n);\n\ncomment on table tb_user is '用户表';\ncomment on column tb_user.id is '用户ID';\ncomment on column tb_user.username is '用户名';\ncomment on column tb_user.nickname is '用户昵称';\ncomment on column tb_user.age is '年龄';\ncomment on column tb_user.create_time is '创建时间';\ncomment on column tb_user.update_time is '更新时间';\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n\n\n\n\n我在 db.migration 下还创建了一个 1.0.0 的文件夹，这个不会影响 flyway 对 sql 的识别，可以自行取名和分类。\n\n运行成功。\n\n\n\n创建了flyway_schema_history表，并成功执行一个脚本。\n\n\n\nflyway_schema_history表中记录的是脚本信息和脚本执行状态。\n\n\n\n有了这条记录，下次再启动项目，1.0.0/V1.0.0__init.sql 这个脚本文件就不会执行了，因为系统知道这个脚本已经执行过了。\n如果你还想让 1.0.0/V1.0.0__init.sql脚本再执行一遍，需要手动删除flyway_schema_history 表中的对应记录，那么项目启动时，这个脚本就会被执行了。\n\n\n# 可重复执行的脚本\n\n只要脚本内容发生了变化，项目启动时脚本就会被重新执行。文件名以大写R字开头，后面再以两个下划线分隔后面为文件名，最后以.sql结尾。\n\n接着在 db/migration/1.0.0/下创建R__init_user.sql\n\ninsert into tb_user(username, nickname, age) VALUES ('admin','admin',18);\ninsert into tb_user(username, nickname, age) VALUES ('sys','sys',28);\n\n\n1\n2\n\n\n重新启动项目，运行成功。\n数据库tb_user表中新增两条数据。\nflyway_schema_history新增了一条记录，但 version 字段上为 null。\n\n\n\n重新运行程序第二遍，并未发生变化。\n\n重新修改R__init_user.sql 脚本。\n\ninsert into tb_user(username, nickname, age) VALUES ('test','test',18);\n\n\n1\n\n\n重新运行程序，脚本执行成功，数据变更成功。\n\n\n\n\n# 错误验证\n\n\n# 刻意修改仅需被执行一次的脚本\n\n当直接在V1.0.0__init.sql脚本上进行修改时。重新启动程序会进行报错。\n\n\n\n原因：会检查数据库中对应脚本的checksum字段，发现不对应则说明脚本进行了修改，所以阻止运行。\n\n将修改的内容还原，则可重新运行。\n或者删除flyway_schema_history表中V1.0.0__init.sql脚本对应的记录，则可重新执行V1.0.0__init.sql脚本。\n\n\n# 可重复执行的脚本若存在错误\n\n刻意在R__init_user.sql脚本中添加一条错误的脚本，让其id与库中已存在的数据冲突。\n\n顺便验证数据是否会回滚。\n\ninsert into tb_user(username, nickname, age) VALUES ('test1','test1',18);\ninsert into tb_user(username, nickname, age) VALUES ('test2','test2',28);\ninsert into tb_user(id, username, nickname, age) VALUES (1, 'test2','test2',28);\n\n\n1\n2\n3\n\n\n从报错信息中能很明显的看出来问题，直接给出了具体的语句和错误原因。\n然后上面的语句也未成功添加。\n\n\n\n\n# 配置\n\n 1. 生产务必禁 spring.flyway.cleanDisabled=false 。\n 2. spring.flyway.outOfOrder 取值 生产上使用 true，开发中使用 false。\n 3. 多个系统公用一个 数据库 schema 时配置spring.flyway.table 为不同的系统设置不同的 metadata 表名而不使用缺省值 flyway_schema_history 。\n 4. 开发版本号尽量根据团队来进行多层次的命名避免混乱。比如 V1.0.1__ProjectName_{feat|fix}_Description.sql ，这种命名同时也可以获取更多脚本的开发者和相关功能的信息。\n\n# flyway 配置\nspring:\n  flyway:\n    # 启用或禁用 flyway\n    enabled: true\n    # flyway 的 clean 命令会删除指定 schema 下的所有 table, 生产务必禁掉。这个默认值是 false 理论上作为默认配置是不科学的。\n    clean-disabled: true\n    # SQL 脚本的目录,多个路径使用逗号分隔 默认值 classpath:db/migration\n    locations: classpath:db/migration\n    #  metadata 版本控制信息表 默认 flyway_schema_history\n    table: flyway_schema_history\n    # 如果没有 flyway_schema_history 这个 metadata 表， 在执行 flyway migrate 命令之前, 必须先执行 flyway baseline 命令\n    # 设置为 true 后 flyway 将在需要 baseline 的时候, 自动执行一次 baseline。\n    baseline-on-migrate: true\n    # 指定 baseline 的版本号,默认值为 1, 低于该版本号的 SQL 文件, migrate 时会被忽略\n    baseline-version: 1\n    # 字符编码 默认 UTF-8\n    encoding: UTF-8\n    # 是否允许不按顺序迁移 开发建议 false  生产建议 ture\n    out-of-order: false\n    # 需要 flyway 管控的 schema list,这里我们配置为flyway  缺省的话, 使用spring.datasource.url 配置的那个 schema,\n    # 可以指定多个schema, 但仅会在第一个schema下建立 metadata 表, 也仅在第一个schema应用migration sql 脚本.\n    # 但flyway Clean 命令会依次在这些schema下都执行一遍. 所以 确保生产 spring.flyway.clean-disabled 为 true\n    schemas: flyway\n    # 执行迁移时是否自动调用验证   当你的 版本不符合逻辑 比如 你先执行了 DML 而没有 对应的DDL 会抛出异常\n    validate-on-migrate: true\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n\n\n配置全路径org.springframework.boot.autoconfigure.flyway.FlywayProperties\n\nflyway.baseline-description对执行迁移时基准版本的描述.\nflyway.baseline-on-migrate当迁移时发现目标schema非空，而且带有没有元数据的表时，是否自动执行基准迁移，默认false.\nflyway.baseline-version开始执行基准迁移时对现有的schema的版本打标签，默认值为1.\nflyway.check-location检查迁移脚本的位置是否存在，默认false.\nflyway.clean-on-validation-error当发现校验错误时是否自动调用clean，默认false.\nflyway.enabled是否开启flywary，默认true.\nflyway.encoding设置迁移时的编码，默认UTF-8.\nflyway.ignore-failed-future-migration当读取元数据表时是否忽略错误的迁移，默认false.\nflyway.init-sqls当初始化好连接时要执行的SQL.\nflyway.locations迁移脚本的位置，默认db/migration.\nflyway.out-of-order是否允许无序的迁移，默认false.\nflyway.password目标数据库的密码.\nflyway.placeholder-prefix设置每个placeholder的前缀，默认${.\nflyway.placeholder-replacementplaceholders是否要被替换，默认true.\nflyway.placeholder-suffix设置每个placeholder的后缀，默认}.\nflyway.placeholders.[placeholder name]设置placeholder的value\nflyway.schemas设定需要flywary迁移的schema，大小写敏感，默认为连接默认的schema.\nflyway.sql-migration-prefix迁移文件的前缀，默认为V.\nflyway.sql-migration-separator迁移脚本的文件名分隔符，默认__\nflyway.sql-migration-suffix迁移脚本的后缀，默认为.sql\nflyway.tableflyway使用的元数据表名，默认为schema_version\nflyway.target迁移时使用的目标版本，默认为latest version\nflyway.url迁移时使用的JDBC URL，如果没有指定的话，将使用配置的主数据源\nflyway.user迁移数据库的用户名\nflyway.validate-on-migrate迁移时是否校验，默认为true.\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n\n\n\n# 总结\n\nV开头的脚本，内容不变运行，语句并不会执行，内容修改再运行，程序启动失败！\n\nR开头的脚本，内容不变运行，语句并不会执行，内容修改过再运行，会将文件中的所有语句执行！\n\n每次程序启动会检验目前项目中的 sql 文件名称和文件夹名是否与数据库中存储的对应。\n如果不对应则抛出相应的错误，程序启动失败。\n\nR开头的脚本，更像是当前版本的一个临时补充的区域，为了及时修改当下紧急更新的内容。\n\n源代码地址：\n\n> https://github.com/rcbb-cc/fast-start-guide\n\n\n# 参考\n\nflyway常用配置_Spring Boot 2 实战：使用 Flyway 管理你数据库的版本变更",normalizedContent:"# 概念\n\n\n# 什么是flyway\n\nflyway 是一个能对数据库变更做版本控制的工具。\n\n\n# 为什么要用flyway\n\n在多人开发的项目中，我们都习惯了使用 svn 或者 git 来对代码做版本控制，主要的目的就是为了解决多人开发代码冲突和版本回退的问题。\n\n其实，数据库的变更也需要版本控制，在日常开发中，我们经常会遇到下面的问题：\n\n 1. 自己写的 sql 忘了在所有环境执行；\n 2. 别人写的 sql 我们不能确定是否都在所有环境执行过了；\n 3. 有人修改了已经执行过的 sql，期望再次执行；\n 4. 需要新增环境做数据迁移；\n 5. 每次发版需要手动控制先发 db 版本，再发布应用版本；\n 6. 其它场景...\n\n有了flyway，这些问题都能得到很好的解决。\n\n\n# flyway的特点\n\n * 简单。非常容易安装和学习，同时迁移的方式也很容易被开发者接受。\n * 转移。flyway 专注于搞数据库迁移、版本控制而并没有其它副作用。\n * 强大。专为连续交付而设计。让flyway在应用程序启动时迁移数据库。\n\n\n# flyway的工作机制\n\nflyway 需要在 db 中先创建一个 metadata 表 (缺省表名为 flyway_schema_history), 在该表中保存着每次 migration （迁移）的记录, 记录包含 migration 脚本的版本号和 sql 脚本的 checksum 值。\n\nflyway 扫描文件系统或应用程序的类路径读取 ddl 和 dml 以进行迁移。\n根据metadata 表进行检查迁移。\n如果脚本声明的版本号小于或等于标记为当前版本的版本号之一，将忽略它们。\n其余迁移是待处理迁移：可用，但未应用。最后按版本号对它们进行排序并按顺序执行 并将执行结果写入 metadata 表。\n\n\n# 最佳实践\n\n通过 aliyun java initializr 创建项目\n\n\n\n我使用的是 postgresql，创建一个库。\n\n> create database test_flyway;\n\n在src/main/resources目录下面新建db.migration文件夹，默认情况下，该目录下的.sql 文件就算是需要被 flyway 做版本控制的数据库 sql 语句。\n\n但是此处的 sql 语句命名需要遵从一定的规范，否则运行的时候 flyway 会报错。命名规则主要有两种：\n\n * 仅需被执行一次的 sql 。文件命名以大写v字开头，后面可跟上0-9数字，数字之间可用.或_分隔开，然后再以两个下划线分隔，后面为文件名，最后以.sql结尾。例：v1.0.0__init.sql\n\n * 可重复运行的sql。只要脚本内容发生了变化，项目启动时脚本就会被重新执行。文件名以大写r字开头，后面再以两个下划线分隔后面为文件名，最后以.sql结尾。\n\n项目配置。\n\nspring:\n  application:\n    name: flyway-test\n  datasource:\n    driver-class-name: org.postgresql.driver\n    url: jdbc:postgresql://192.168.1.56:5432/test_flyway?&ssl=false&stringtype=unspecified\n    username: postgres\n    password: postgres\nserver:\n  port: 8080\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\n初次启动，报错。因为无任何内容。\n\n\n\n\n# 仅需被执行一次的\n\n文件命名以大写v字开头，后面可跟上0-9数字，数字之间可用.或_分隔开，然后再以两个下划线分隔，后面为文件名，最后以.sql结尾。例：v1.0.0__init.sql\n\n创建第一个脚本：v1.0.0_init.sql\n\ncreate table tb_user\n(\n    id          bigserial primary key,\n    username    varchar(30) not null,\n    nickname    varchar(30),\n    age         smallint,\n    create_time bigint,\n    update_time bigint\n);\n\ncomment on table tb_user is '用户表';\ncomment on column tb_user.id is '用户id';\ncomment on column tb_user.username is '用户名';\ncomment on column tb_user.nickname is '用户昵称';\ncomment on column tb_user.age is '年龄';\ncomment on column tb_user.create_time is '创建时间';\ncomment on column tb_user.update_time is '更新时间';\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n\n\n\n\n我在 db.migration 下还创建了一个 1.0.0 的文件夹，这个不会影响 flyway 对 sql 的识别，可以自行取名和分类。\n\n运行成功。\n\n\n\n创建了flyway_schema_history表，并成功执行一个脚本。\n\n\n\nflyway_schema_history表中记录的是脚本信息和脚本执行状态。\n\n\n\n有了这条记录，下次再启动项目，1.0.0/v1.0.0__init.sql 这个脚本文件就不会执行了，因为系统知道这个脚本已经执行过了。\n如果你还想让 1.0.0/v1.0.0__init.sql脚本再执行一遍，需要手动删除flyway_schema_history 表中的对应记录，那么项目启动时，这个脚本就会被执行了。\n\n\n# 可重复执行的脚本\n\n只要脚本内容发生了变化，项目启动时脚本就会被重新执行。文件名以大写r字开头，后面再以两个下划线分隔后面为文件名，最后以.sql结尾。\n\n接着在 db/migration/1.0.0/下创建r__init_user.sql\n\ninsert into tb_user(username, nickname, age) values ('admin','admin',18);\ninsert into tb_user(username, nickname, age) values ('sys','sys',28);\n\n\n1\n2\n\n\n重新启动项目，运行成功。\n数据库tb_user表中新增两条数据。\nflyway_schema_history新增了一条记录，但 version 字段上为 null。\n\n\n\n重新运行程序第二遍，并未发生变化。\n\n重新修改r__init_user.sql 脚本。\n\ninsert into tb_user(username, nickname, age) values ('test','test',18);\n\n\n1\n\n\n重新运行程序，脚本执行成功，数据变更成功。\n\n\n\n\n# 错误验证\n\n\n# 刻意修改仅需被执行一次的脚本\n\n当直接在v1.0.0__init.sql脚本上进行修改时。重新启动程序会进行报错。\n\n\n\n原因：会检查数据库中对应脚本的checksum字段，发现不对应则说明脚本进行了修改，所以阻止运行。\n\n将修改的内容还原，则可重新运行。\n或者删除flyway_schema_history表中v1.0.0__init.sql脚本对应的记录，则可重新执行v1.0.0__init.sql脚本。\n\n\n# 可重复执行的脚本若存在错误\n\n刻意在r__init_user.sql脚本中添加一条错误的脚本，让其id与库中已存在的数据冲突。\n\n顺便验证数据是否会回滚。\n\ninsert into tb_user(username, nickname, age) values ('test1','test1',18);\ninsert into tb_user(username, nickname, age) values ('test2','test2',28);\ninsert into tb_user(id, username, nickname, age) values (1, 'test2','test2',28);\n\n\n1\n2\n3\n\n\n从报错信息中能很明显的看出来问题，直接给出了具体的语句和错误原因。\n然后上面的语句也未成功添加。\n\n\n\n\n# 配置\n\n 1. 生产务必禁 spring.flyway.cleandisabled=false 。\n 2. spring.flyway.outoforder 取值 生产上使用 true，开发中使用 false。\n 3. 多个系统公用一个 数据库 schema 时配置spring.flyway.table 为不同的系统设置不同的 metadata 表名而不使用缺省值 flyway_schema_history 。\n 4. 开发版本号尽量根据团队来进行多层次的命名避免混乱。比如 v1.0.1__projectname_{feat|fix}_description.sql ，这种命名同时也可以获取更多脚本的开发者和相关功能的信息。\n\n# flyway 配置\nspring:\n  flyway:\n    # 启用或禁用 flyway\n    enabled: true\n    # flyway 的 clean 命令会删除指定 schema 下的所有 table, 生产务必禁掉。这个默认值是 false 理论上作为默认配置是不科学的。\n    clean-disabled: true\n    # sql 脚本的目录,多个路径使用逗号分隔 默认值 classpath:db/migration\n    locations: classpath:db/migration\n    #  metadata 版本控制信息表 默认 flyway_schema_history\n    table: flyway_schema_history\n    # 如果没有 flyway_schema_history 这个 metadata 表， 在执行 flyway migrate 命令之前, 必须先执行 flyway baseline 命令\n    # 设置为 true 后 flyway 将在需要 baseline 的时候, 自动执行一次 baseline。\n    baseline-on-migrate: true\n    # 指定 baseline 的版本号,默认值为 1, 低于该版本号的 sql 文件, migrate 时会被忽略\n    baseline-version: 1\n    # 字符编码 默认 utf-8\n    encoding: utf-8\n    # 是否允许不按顺序迁移 开发建议 false  生产建议 ture\n    out-of-order: false\n    # 需要 flyway 管控的 schema list,这里我们配置为flyway  缺省的话, 使用spring.datasource.url 配置的那个 schema,\n    # 可以指定多个schema, 但仅会在第一个schema下建立 metadata 表, 也仅在第一个schema应用migration sql 脚本.\n    # 但flyway clean 命令会依次在这些schema下都执行一遍. 所以 确保生产 spring.flyway.clean-disabled 为 true\n    schemas: flyway\n    # 执行迁移时是否自动调用验证   当你的 版本不符合逻辑 比如 你先执行了 dml 而没有 对应的ddl 会抛出异常\n    validate-on-migrate: true\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n\n\n配置全路径org.springframework.boot.autoconfigure.flyway.flywayproperties\n\nflyway.baseline-description对执行迁移时基准版本的描述.\nflyway.baseline-on-migrate当迁移时发现目标schema非空，而且带有没有元数据的表时，是否自动执行基准迁移，默认false.\nflyway.baseline-version开始执行基准迁移时对现有的schema的版本打标签，默认值为1.\nflyway.check-location检查迁移脚本的位置是否存在，默认false.\nflyway.clean-on-validation-error当发现校验错误时是否自动调用clean，默认false.\nflyway.enabled是否开启flywary，默认true.\nflyway.encoding设置迁移时的编码，默认utf-8.\nflyway.ignore-failed-future-migration当读取元数据表时是否忽略错误的迁移，默认false.\nflyway.init-sqls当初始化好连接时要执行的sql.\nflyway.locations迁移脚本的位置，默认db/migration.\nflyway.out-of-order是否允许无序的迁移，默认false.\nflyway.password目标数据库的密码.\nflyway.placeholder-prefix设置每个placeholder的前缀，默认${.\nflyway.placeholder-replacementplaceholders是否要被替换，默认true.\nflyway.placeholder-suffix设置每个placeholder的后缀，默认}.\nflyway.placeholders.[placeholder name]设置placeholder的value\nflyway.schemas设定需要flywary迁移的schema，大小写敏感，默认为连接默认的schema.\nflyway.sql-migration-prefix迁移文件的前缀，默认为v.\nflyway.sql-migration-separator迁移脚本的文件名分隔符，默认__\nflyway.sql-migration-suffix迁移脚本的后缀，默认为.sql\nflyway.tableflyway使用的元数据表名，默认为schema_version\nflyway.target迁移时使用的目标版本，默认为latest version\nflyway.url迁移时使用的jdbc url，如果没有指定的话，将使用配置的主数据源\nflyway.user迁移数据库的用户名\nflyway.validate-on-migrate迁移时是否校验，默认为true.\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n\n\n\n# 总结\n\nv开头的脚本，内容不变运行，语句并不会执行，内容修改再运行，程序启动失败！\n\nr开头的脚本，内容不变运行，语句并不会执行，内容修改过再运行，会将文件中的所有语句执行！\n\n每次程序启动会检验目前项目中的 sql 文件名称和文件夹名是否与数据库中存储的对应。\n如果不对应则抛出相应的错误，程序启动失败。\n\nr开头的脚本，更像是当前版本的一个临时补充的区域，为了及时修改当下紧急更新的内容。\n\n源代码地址：\n\n> https://github.com/rcbb-cc/fast-start-guide\n\n\n# 参考\n\nflyway常用配置_spring boot 2 实战：使用 flyway 管理你数据库的版本变更",charsets:{cjk:!0},lastUpdated:"10/7/2022",lastUpdatedTimestamp:1665111399e3},{title:"Redis分布式锁(spring-boot-klock-starter快速入门)",frontmatter:{title:"Redis分布式锁(spring-boot-klock-starter快速入门)",date:"2022-07-22T17:40:29.000Z",permalink:"/pages/024464/",categories:["文章","Redis"],tags:["Redis","分布式锁"],readingShow:"top"},regularPath:"/01.%E6%96%87%E7%AB%A0/02.Redis/01.Redis%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81(spring-boot-klock-starter%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8).html",relativePath:"01.文章/02.Redis/01.Redis分布式锁(spring-boot-klock-starter快速入门).md",key:"v-6a799aad",path:"/pages/024464/",headers:[{level:2,title:"快速开始",slug:"快速开始",normalizedTitle:"快速开始",charIndex:112},{level:3,title:"核心依赖",slug:"核心依赖",normalizedTitle:"核心依赖",charIndex:139},{level:3,title:"核心配置",slug:"核心配置",normalizedTitle:"核心配置",charIndex:312},{level:3,title:"使用",slug:"使用",normalizedTitle:"使用",charIndex:712},{level:2,title:"@Klock 注解参数说明",slug:"klock-注解参数说明",normalizedTitle:"@klock 注解参数说明",charIndex:1235},{level:2,title:"测试使用",slug:"测试使用",normalizedTitle:"测试使用",charIndex:2638},{level:3,title:"方法级加锁",slug:"方法级加锁",normalizedTitle:"方法级加锁",charIndex:2697},{level:3,title:"针对用户/变量级加锁",slug:"针对用户-变量级加锁",normalizedTitle:"针对用户/变量级加锁",charIndex:3063}],excerpt:'<h1 id="spring-boot-klock-starter"><a class="header-anchor" href="#spring-boot-klock-starter">#</a> spring-boot-klock-starter</h1>\n<p>基于 Redis 的分布式锁 spring-boot starter 组件，使得项目拥有分布式锁能力变得异常简单。</p>\n<p><a href="https://github.com/rcbb-cc/fast-start-guide" target="_blank" rel="noopener noreferrer">klock-demo Github地址<OutboundLink/></a></p>\n',headersStr:"快速开始 核心依赖 核心配置 使用 @Klock 注解参数说明 测试使用 方法级加锁 针对用户/变量级加锁",content:'# spring-boot-klock-starter\n\n基于 Redis 的分布式锁 spring-boot starter 组件，使得项目拥有分布式锁能力变得异常简单。\n\nklock-demo Github地址\n\n\n# 快速开始\n\nSpringBoot 项目接入。\n\n\n# 核心依赖\n\n<dependency>\n    <groupId>cn.keking</groupId>\n    <artifactId>spring-boot-klock-starter</artifactId>\n    <version>1.4-RELEASE</version>\n</dependency>\n\n\n1\n2\n3\n4\n5\n\n\n\n# 核心配置\n\nspring:\n  klock:\n    address: 127.0.0.1:6379 #redis链接地址\n    password: 2021 #redis密码\n    database: 1 #redis数据索引\n    waitTime: 60 #获取锁最长阻塞时间（默认：60，单位：秒）\n    leaseTime: 60 #已获取锁后自动释放时间（默认：60，单位：秒）\n#    cluster-server:\n#      node-addresses: #redis集群配置 如 127.0.0.1:7000,127.0.0.1:7001，127.0.0.1:7002\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\nspring.klock.address 和 spring.klock.cluster-server.node-addresses 选其一即可\n\n\n# 使用\n\n使用非常简单，在需要加分布式锁的方法上，添加注解 @Klock 即可。\n\n@Klock\n@Override\npublic List<User> list(String userName) {\n    log.info("[<{}> 进入UserService.list() 成功获取锁]", userName);\n\n    try {\n        Thread.sleep(10 * 1000);\n    } catch (Exception e) {}\n\n    List<User> list = new ArrayList<>();\n    list.add(new User().setId(1).setName("Jack").setAge(18));\n    list.add(new User().setId(2).setName("Tom").setAge(20));\n    log.info("[<{}> UserService.list() 执行完毕，释放锁]", userName);\n    return list;\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\n\n# @Klock 注解参数说明\n\n/**\n * @author kl\n * @since 2017/12/29\n * Content :加锁注解\n */\n@Target(value = {ElementType.METHOD})\n@Retention(value = RetentionPolicy.RUNTIME)\npublic @interface Klock {\n    /**\n     * 锁的名称 （对应redis的key值。默认为：类名+方法名）\n     */\n    String name() default "";\n    /**\n     * 锁类型（目前支持可重入锁，公平锁，读写锁。默认为：公平锁）\n     */\n    LockType lockType() default LockType.Reentrant;\n    /**\n     * 尝试加锁，最多等待时间（获取锁最长等待时间。默认为：60s。可通过spring.klock.waitTime统一配置）\n     */\n    long waitTime() default Long.MIN_VALUE;\n    /**\n     *上锁以后xxx秒自动解锁（获得锁后，自动释放锁的时间。默认为：60s。可通过spring.klock.leaseTime统一配置）\n     */\n    long leaseTime() default Long.MIN_VALUE;\n\n    /**\n     * 自定义业务key\n     */\n     String [] keys() default {};\n\n     /**\n     * 加锁超时的处理策略，可配置为不做处理、快速失败、阻塞等待的处理策略，默认策略为不做处理\n     */\n     LockTimeoutStrategy lockTimeoutStrategy() default LockTimeoutStrategy.NO_OPERATION;\n\n    /**\n     * 自定义加锁超时的处理策略，需指定自定义处理的方法的方法名，并保持入参一致。\n     */\n     String customLockTimeoutStrategy() default "";\n\n     /**\n     * 释放锁时，持有的锁已超时的处理策略，可配置为不做处理、快速失败的处理策略，默认策略为不做处理\n     */\n     ReleaseTimeoutStrategy releaseTimeoutStrategy() default ReleaseTimeoutStrategy.NO_OPERATION;\n\n    /**\n     * 自定义释放锁时，需指定自定义处理的方法的方法名，并保持入参一致。\n     */\n     String customReleaseTimeoutStrategy() default "";\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n\n\n\n# 测试使用\n\n源码地址：https://github.com/rcbb-cc/fast-start-guide\n\n\n# 方法级加锁\n\n核心代码如下图，最简单的使用，获取用户列表数据。\n\nService 实现代码中会睡眠 10s。\n\n\n\n让 zhangsan、lisi 同一时间调用。\n\n> http://127.0.0.1:8081/user?userName=lisi\n\n> http://127.0.0.1:8081/user?userName=zhangsan\n\nzhangsan、lisi 几乎同时进入 Controller 中，但只有一个用户能进入的 Service 的方法中，当进入的这个用户执行完毕后，后面的用户才能进入。\n\n\n\n通过 Redis 可视化工具可以看到，有一个lock.cc.rcbb.klock.test.service.UserServiceImpl.list类名+方法名的 key，过期时间为默认的 60s。\n\n\n# 针对用户/变量级加锁\n\n核心代码如下图，根据 userId 获取该用户信息。\n\n关键点：@Klock(keys = {"#userId"}) key 根据 userId 产生。\n\n\n\n请求一：\n\n> http://127.0.0.1:8081/user/1\n\n请求二：\n\n> http://127.0.0.1:8081/user/2\n\n请求三：\n\n> http://127.0.0.1:8081/user/2\n\n表现结果：请求一和请求二可同时进入 Service，但请求二和请求三无法同时进入 Service。\n\n',normalizedContent:'# spring-boot-klock-starter\n\n基于 redis 的分布式锁 spring-boot starter 组件，使得项目拥有分布式锁能力变得异常简单。\n\nklock-demo github地址\n\n\n# 快速开始\n\nspringboot 项目接入。\n\n\n# 核心依赖\n\n<dependency>\n    <groupid>cn.keking</groupid>\n    <artifactid>spring-boot-klock-starter</artifactid>\n    <version>1.4-release</version>\n</dependency>\n\n\n1\n2\n3\n4\n5\n\n\n\n# 核心配置\n\nspring:\n  klock:\n    address: 127.0.0.1:6379 #redis链接地址\n    password: 2021 #redis密码\n    database: 1 #redis数据索引\n    waittime: 60 #获取锁最长阻塞时间（默认：60，单位：秒）\n    leasetime: 60 #已获取锁后自动释放时间（默认：60，单位：秒）\n#    cluster-server:\n#      node-addresses: #redis集群配置 如 127.0.0.1:7000,127.0.0.1:7001，127.0.0.1:7002\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\nspring.klock.address 和 spring.klock.cluster-server.node-addresses 选其一即可\n\n\n# 使用\n\n使用非常简单，在需要加分布式锁的方法上，添加注解 @klock 即可。\n\n@klock\n@override\npublic list<user> list(string username) {\n    log.info("[<{}> 进入userservice.list() 成功获取锁]", username);\n\n    try {\n        thread.sleep(10 * 1000);\n    } catch (exception e) {}\n\n    list<user> list = new arraylist<>();\n    list.add(new user().setid(1).setname("jack").setage(18));\n    list.add(new user().setid(2).setname("tom").setage(20));\n    log.info("[<{}> userservice.list() 执行完毕，释放锁]", username);\n    return list;\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\n\n# @klock 注解参数说明\n\n/**\n * @author kl\n * @since 2017/12/29\n * content :加锁注解\n */\n@target(value = {elementtype.method})\n@retention(value = retentionpolicy.runtime)\npublic @interface klock {\n    /**\n     * 锁的名称 （对应redis的key值。默认为：类名+方法名）\n     */\n    string name() default "";\n    /**\n     * 锁类型（目前支持可重入锁，公平锁，读写锁。默认为：公平锁）\n     */\n    locktype locktype() default locktype.reentrant;\n    /**\n     * 尝试加锁，最多等待时间（获取锁最长等待时间。默认为：60s。可通过spring.klock.waittime统一配置）\n     */\n    long waittime() default long.min_value;\n    /**\n     *上锁以后xxx秒自动解锁（获得锁后，自动释放锁的时间。默认为：60s。可通过spring.klock.leasetime统一配置）\n     */\n    long leasetime() default long.min_value;\n\n    /**\n     * 自定义业务key\n     */\n     string [] keys() default {};\n\n     /**\n     * 加锁超时的处理策略，可配置为不做处理、快速失败、阻塞等待的处理策略，默认策略为不做处理\n     */\n     locktimeoutstrategy locktimeoutstrategy() default locktimeoutstrategy.no_operation;\n\n    /**\n     * 自定义加锁超时的处理策略，需指定自定义处理的方法的方法名，并保持入参一致。\n     */\n     string customlocktimeoutstrategy() default "";\n\n     /**\n     * 释放锁时，持有的锁已超时的处理策略，可配置为不做处理、快速失败的处理策略，默认策略为不做处理\n     */\n     releasetimeoutstrategy releasetimeoutstrategy() default releasetimeoutstrategy.no_operation;\n\n    /**\n     * 自定义释放锁时，需指定自定义处理的方法的方法名，并保持入参一致。\n     */\n     string customreleasetimeoutstrategy() default "";\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n\n\n\n# 测试使用\n\n源码地址：https://github.com/rcbb-cc/fast-start-guide\n\n\n# 方法级加锁\n\n核心代码如下图，最简单的使用，获取用户列表数据。\n\nservice 实现代码中会睡眠 10s。\n\n\n\n让 zhangsan、lisi 同一时间调用。\n\n> http://127.0.0.1:8081/user?username=lisi\n\n> http://127.0.0.1:8081/user?username=zhangsan\n\nzhangsan、lisi 几乎同时进入 controller 中，但只有一个用户能进入的 service 的方法中，当进入的这个用户执行完毕后，后面的用户才能进入。\n\n\n\n通过 redis 可视化工具可以看到，有一个lock.cc.rcbb.klock.test.service.userserviceimpl.list类名+方法名的 key，过期时间为默认的 60s。\n\n\n# 针对用户/变量级加锁\n\n核心代码如下图，根据 userid 获取该用户信息。\n\n关键点：@klock(keys = {"#userid"}) key 根据 userid 产生。\n\n\n\n请求一：\n\n> http://127.0.0.1:8081/user/1\n\n请求二：\n\n> http://127.0.0.1:8081/user/2\n\n请求三：\n\n> http://127.0.0.1:8081/user/2\n\n表现结果：请求一和请求二可同时进入 service，但请求二和请求三无法同时进入 service。\n\n',charsets:{cjk:!0},lastUpdated:"8/5/2022",lastUpdatedTimestamp:1659668978e3},{title:"行为验证码(AJ-Captcha快速入门)",frontmatter:{title:"行为验证码(AJ-Captcha快速入门)",date:"2022-08-05T10:51:45.000Z",permalink:"/pages/d57d55/",categories:["文章","Spring"],tags:["行为验证码","AJ-Captcha"],readingShow:"top"},regularPath:"/01.%E6%96%87%E7%AB%A0/05.Spring/01.%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/03.%E8%A1%8C%E4%B8%BA%E9%AA%8C%E8%AF%81%E7%A0%81(AJ-Captcha%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8).html",relativePath:"01.文章/05.Spring/01.基础使用/03.行为验证码(AJ-Captcha快速入门).md",key:"v-890112a2",path:"/pages/d57d55/",headers:[{level:2,title:"行为验证码",slug:"行为验证码",normalizedTitle:"行为验证码",charIndex:2},{level:2,title:"AJ-Captcha",slug:"aj-captcha",normalizedTitle:"aj-captcha",charIndex:160},{level:2,title:"最佳实践",slug:"最佳实践",normalizedTitle:"最佳实践",charIndex:332},{level:2,title:"修改图片资源",slug:"修改图片资源",normalizedTitle:"修改图片资源",charIndex:713}],excerpt:'<h2 id="行为验证码"><a class="header-anchor" href="#行为验证码">#</a> 行为验证码</h2>\n<p>行为验证码采用嵌入式集成方式，接入方便，安全，高效。<br>\n抛弃了传统字符型验证码展示-填写字符-比对答案的流程，采用验证码展示-采集用户行为-分析用户行为流程，用户只需要产生指定的行为轨迹，不需要键盘手动输入，极大优化了传统验证码用户体验不佳的问题。<br>\n同时，快速、准确的返回人机判定结果。</p>\n<p><img src="https://rcbb-blog.oss-cn-guangzhou.aliyuncs.com/2021/07/blockPuzzle-d35b55.png?x-oss-process=style/yuantu_shuiyin" alt="滑动拼图"></p>\n',headersStr:"行为验证码 AJ-Captcha 最佳实践 修改图片资源",content:"# 行为验证码\n\n行为验证码采用嵌入式集成方式，接入方便，安全，高效。\n抛弃了传统字符型验证码展示-填写字符-比对答案的流程，采用验证码展示-采集用户行为-分析用户行为流程，用户只需要产生指定的行为轨迹，不需要键盘手动输入，极大优化了传统验证码用户体验不佳的问题。\n同时，快速、准确的返回人机判定结果。\n\n\n\n\n\n\n# AJ-Captcha\n\nanji-plus / AJ-Captcha\n\nGithu地址： https://github.com/anji-plus/captcha\n\n码云地址： https://gitee.com/anji-plus/captcha\n\n文档地址： https://captcha.anji-plus.com/#/doc\n\n\n# 最佳实践\n\n环境：SpringBoot 2.3.7.RELEASE、Maven\n\n<dependency>\n    <groupId>com.github.anji-plus</groupId>\n    <artifactId>captcha-spring-boot-starter</artifactId>\n    <version>1.2.7</version>\n</dependency>\n\n\n1\n2\n3\n4\n5\n\n\n引入的依赖中，存在 CaptchaController，有默认的实现方式，如果不自定义相关内容，基本不用编写代码。\n\n\n\n默认的效果。\n\n\n\n官方的前端 html 代码我也 copy 了一份过来，放在项目下了，方便自己验证。\n\n\n\n官方前端 Demo 代码，是非常全的。前端代码使用的什么框架，直接看官方 Demo 就行了。\n\n\n\n\n# 修改图片资源\n\n修改验证码的图片资源。\n\n注意目录结构（因为看源码可发现，在初始化图片时，它在硬编码上固定了路径地址）\n注意图片大小（这个与前端展示的大小有关，默认的图片大小为：宽度：311 像素，高度：155 像素）\n\n\n\n使用项目路径，加个水印。\n\nspring:\n  application:\n    name: aj-captcha-demo\nserver:\n  port: 9696\n\naj:\n  captcha:\n    # 支持全路径\n#    jigsaw: C:/Users/Desktop/images/jigsaw\n#    pic-click: C:/Users/Desktop/images/pic-click\n    # 支持项目路径以classpath:开头,取resource目录下路径,例：classpath:images/jigsaw\n    jigsaw: classpath:images/jigsaw\n    pic-click: classpath:images/pic-click\n    # 水印\n    water-mark: www.rcbb.cc\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n\n\n\n\n自定义图片和水印的效果。\n\n\n\n源代码地址：\n\n> https://github.com/rcbb-cc/fast-start-guide",normalizedContent:"# 行为验证码\n\n行为验证码采用嵌入式集成方式，接入方便，安全，高效。\n抛弃了传统字符型验证码展示-填写字符-比对答案的流程，采用验证码展示-采集用户行为-分析用户行为流程，用户只需要产生指定的行为轨迹，不需要键盘手动输入，极大优化了传统验证码用户体验不佳的问题。\n同时，快速、准确的返回人机判定结果。\n\n\n\n\n\n\n# aj-captcha\n\nanji-plus / aj-captcha\n\ngithu地址： https://github.com/anji-plus/captcha\n\n码云地址： https://gitee.com/anji-plus/captcha\n\n文档地址： https://captcha.anji-plus.com/#/doc\n\n\n# 最佳实践\n\n环境：springboot 2.3.7.release、maven\n\n<dependency>\n    <groupid>com.github.anji-plus</groupid>\n    <artifactid>captcha-spring-boot-starter</artifactid>\n    <version>1.2.7</version>\n</dependency>\n\n\n1\n2\n3\n4\n5\n\n\n引入的依赖中，存在 captchacontroller，有默认的实现方式，如果不自定义相关内容，基本不用编写代码。\n\n\n\n默认的效果。\n\n\n\n官方的前端 html 代码我也 copy 了一份过来，放在项目下了，方便自己验证。\n\n\n\n官方前端 demo 代码，是非常全的。前端代码使用的什么框架，直接看官方 demo 就行了。\n\n\n\n\n# 修改图片资源\n\n修改验证码的图片资源。\n\n注意目录结构（因为看源码可发现，在初始化图片时，它在硬编码上固定了路径地址）\n注意图片大小（这个与前端展示的大小有关，默认的图片大小为：宽度：311 像素，高度：155 像素）\n\n\n\n使用项目路径，加个水印。\n\nspring:\n  application:\n    name: aj-captcha-demo\nserver:\n  port: 9696\n\naj:\n  captcha:\n    # 支持全路径\n#    jigsaw: c:/users/desktop/images/jigsaw\n#    pic-click: c:/users/desktop/images/pic-click\n    # 支持项目路径以classpath:开头,取resource目录下路径,例：classpath:images/jigsaw\n    jigsaw: classpath:images/jigsaw\n    pic-click: classpath:images/pic-click\n    # 水印\n    water-mark: www.rcbb.cc\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n\n\n\n\n自定义图片和水印的效果。\n\n\n\n源代码地址：\n\n> https://github.com/rcbb-cc/fast-start-guide",charsets:{cjk:!0},lastUpdated:"10/7/2022",lastUpdatedTimestamp:1665111399e3},{title:"SpringBoot使用Hibernate Validator（后端参数校验）",frontmatter:{title:"SpringBoot使用Hibernate Validator（后端参数校验）",date:"2023-04-01T15:39:48.000Z",permalink:"/pages/cbaa02/",categories:["文章","Spring","基础使用"],tags:["SpringBoot","Hibernate Validator"],readingShow:"top"},regularPath:"/01.%E6%96%87%E7%AB%A0/05.Spring/01.%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/06.SpringBoot%E4%BD%BF%E7%94%A8Hibernate%20Validator%EF%BC%88%E5%90%8E%E7%AB%AF%E5%8F%82%E6%95%B0%E6%A0%A1%E9%AA%8C%EF%BC%89.html",relativePath:"01.文章/05.Spring/01.基础使用/06.SpringBoot使用Hibernate Validator（后端参数校验）.md",key:"v-75fb42a4",path:"/pages/cbaa02/",headers:[{level:2,title:"JSR-303",slug:"jsr-303",normalizedTitle:"jsr-303",charIndex:120},{level:2,title:"SpringBoot使用JSR-303",slug:"springboot使用jsr-303",normalizedTitle:"springboot使用jsr-303",charIndex:709},{level:2,title:"基本使用",slug:"基本使用",normalizedTitle:"基本使用",charIndex:805},{level:2,title:"全局异常处理",slug:"全局异常处理",normalizedTitle:"全局异常处理",charIndex:1600},{level:2,title:"分组校验",slug:"分组校验",normalizedTitle:"分组校验",charIndex:3414},{level:2,title:"顺序校验",slug:"顺序校验",normalizedTitle:"顺序校验",charIndex:4087},{level:2,title:"自定义校验",slug:"自定义校验",normalizedTitle:"自定义校验",charIndex:211},{level:2,title:"源码",slug:"源码",normalizedTitle:"源码",charIndex:6988}],excerpt:'<h1 id="springboot使用hibernate-validator-后端参数校验"><a class="header-anchor" href="#springboot使用hibernate-validator-后端参数校验">#</a> SpringBoot使用Hibernate Validator（后端参数校验）</h1>\n<ol>\n<li>表单提交，前端做的了参数校验，服务器端还需要做参数校验吗？<br/></li>\n<li>服务器端怎么做参数校验？怎么样做参数校验最快捷？<br/></li>\n<li>JSR-303 是什么？如何使用？SpringBoot下如何使用？<br/></li>\n<li>使用一个实体接收提交内容时，新增和更新操作的参数校验标准不同时如何解决？<br/></li>\n<li>如何自定义校验？<br/></li>\n</ol>\n',headersStr:"JSR-303 SpringBoot使用JSR-303 基本使用 全局异常处理 分组校验 顺序校验 自定义校验 源码",content:'# SpringBoot使用Hibernate Validator（后端参数校验）\n\n 1. 表单提交，前端做的了参数校验，服务器端还需要做参数校验吗？\n    \n 2. 服务器端怎么做参数校验？怎么样做参数校验最快捷？\n    \n 3. JSR-303 是什么？如何使用？SpringBoot下如何使用？\n    \n 4. 使用一个实体接收提交内容时，新增和更新操作的参数校验标准不同时如何解决？\n    \n 5. 如何自定义校验？\n    \n\nSpringBoot 使用 JSR303 实现参数验证。\nSpringBoot 使用 Hibernate Validator 校验。\n示例代码，下文所有源代码都在这个仓库。\n\nValidator-demo Github地址\n\n\n# JSR-303\n\n看 JSR-303，首先我们得看看 JSR 是什么含义。\n是指向 JCP(Java Community Process) 提出新增一个标准化技术规范的正式请求。任何人都可以提交JSR，以向Java平台增添新的API和服务。JSR已成为Java界的一个重要标准。 JSR，Java Specification Requests 的缩写，意思是 Java 规范提案。\nJSR-303 是JAVA EE 6 中的一项子规范，叫做 Bean Validation。\n\n\n\nHibernate Validator 是 Bean Validation 的参考实现，Hibernate Validator 提供了 JSR 303 规范中所有内置 constraint 的实现，除此之外还有一些附加的 constraint。\n\n\n\n# SpringBoot使用JSR-303\n\nSpringBoot 使用 JSR303 实现参数验证。\nSpringBoot 使用 Hibernate Validator 实现参数验证。\n\n\n# 基本使用\n\n 1. 在接收参数的 DTO 上加上相关验证条件；\n\n@Data\npublic class TestDTO1 {\n    @NotNull\n    private Long id;\n    @NotBlank\n    private String name;\n    @NotNull\n    private Integer age;\n    @NotNull\n    private Integer status;\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n 2. 开启校验功能 @Valid；\n\n@PostMapping("/test1")\npublic R test1(@Valid @RequestBody TestDTO1 dto) {\n    log.info("[TestDTO1 <{}>]", dto);\n    return R.ok();\n}\n\n\n1\n2\n3\n4\n5\n\n 3. 给校验的 bean 后紧跟一个 BindingResult，就可以获取到校验的结果；\n\n@PostMapping("/test2")\npublic R test2(@Valid @RequestBody TestDTO1 dto, BindingResult result) {\n    log.info("[TestDTO1 <{}>]", dto);\n    log.error("[BindingResult <{}>]", result);\n    if (result != null && result.getErrorCount() > 0) {\n        return R.failed(result.getAllErrors());\n    }\n    return R.ok();\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# 全局异常处理\n\n加上全局异常处理\n\n@Slf4j\n@RestControllerAdvice\npublic class GlobalBizExceptionHandler {\n\n    /**\n     * 全局异常.\n     * @param e the e\n     * @return R\n     */\n    @ExceptionHandler(Exception.class)\n    @ResponseStatus(HttpStatus.INTERNAL_SERVER_ERROR)\n    public R handleGlobalException(Exception e) {\n        log.error("全局异常信息 ex={}", e.getMessage(), e);\n        return R.failed(e.getLocalizedMessage());\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n\n\n使用 @RequestBody 来接收参数时，当传入的参数不符合要求时，抛出的异常为 org.springframework.web.bind.MethodArgumentNotValidException，所以我们对这个异常进行处理。\n\n/**\n * validation Exception\n * @param exception\n * @return R\n */\n@ExceptionHandler({ MethodArgumentNotValidException.class })\n@ResponseStatus(HttpStatus.BAD_REQUEST)\npublic R handleBodyValidException(MethodArgumentNotValidException exception) {\n    List<FieldError> fieldErrors = exception.getBindingResult().getFieldErrors();\n    log.warn("[参数绑定异常,ex = {}]", fieldErrors.get(0).getDefaultMessage());\n    return R.failed(fieldErrors.get(0).getDefaultMessage());\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n使用以 form-data 形式传参时，当传入的参数不符合要求时，抛出的异常为 org.springframework.validation.BindException，所以我们对这个异常进行处理。\n\n/**\n * validation Exception (以form-data形式传参)\n * @param exception\n * @return R\n */\n@ExceptionHandler({ BindException.class })\n@ResponseStatus(HttpStatus.BAD_REQUEST)\npublic R bindExceptionHandler(BindException exception) {\n    List<FieldError> fieldErrors = exception.getBindingResult().getFieldErrors();\n    log.warn("[参数绑定异常,ex = {}]", fieldErrors.get(0).getDefaultMessage());\n    return R.failed(fieldErrors.get(0).getDefaultMessage());\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n加上全局异常捕获后，参数若有不符合，请求的结果如下：\n\n{\n    "code": 1,\n    "msg": "id必须为空",\n    "data": null\n}\n{\n    "code": 1,\n    "msg": "age不能为空",\n    "data": null\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\n\n# 分组校验\n\n使用一个实体接收提交内容时，新增和更新操作的参数校验标准不同时如何解决？\n例：新增操作不需要传入 id，更新操作必须传入 id。\n上面说的问题都是最基础的，那如何实现呢？\n\n 1. 创建分组标识。\n\npublic interface AddGroup {}\npublic interface UpdateGroup {}\n\n\n1\n2\n\n 2. 在接收参数的 DTO 上标识，给校验注解标注什么情况需要进行校验。\n\n@NotNull(message = "id不能为空", groups = {UpdateGroup.class})\n@Null(message = "id必须为空", groups = {AddGroup.class})\nprivate Long id;\n\n\n1\n2\n3\n\n 3. 在 Controller 的方法上，使用 @Validated 指定分组标识。\n\n@PostMapping("/test3")\npublic R test3(@Validated(AddGroup.class) @RequestBody TestDTO3 dto) {\n    log.info("[TestDTO3 <{}>]", dto);\n    return R.ok();\n}\n\n\n1\n2\n3\n4\n5\n\n\n注意点： 默认没有指定分组的校验注解，在分组校验情况下不生效。\n（例：我们有个参数的校验规则没有分组， @NotBlank 没有进行分组，它无论在 AddGroup 或 UpdateGroup 下都是不生效的）\n\n\n# 顺序校验\n\n在一些场景下，参数校验是需要有顺序的。\nJSR-303 校验中专门提供了 @GroupSequence 来实现。\n\n@GroupSequence(value = {ValidateSequence.Validate1.class,\n        ValidateSequence.Validate2.class,\n        ValidateSequence.Validate3.class,\n        ValidateSequence.Validate4.class,\n        ValidateSequence.Default.class,})\npublic interface ValidateSequence {\n    interface Validate1{}\n    interface Validate2{}\n    interface Validate3{}\n    interface Validate4{}\n    interface Default{}\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n@Data\npublic class TestDTO4 {\n    @NotNull(message = "id不能为空", groups = {ValidateSequence.Validate1.class})\n    private Long id;\n    @NotBlank(message = "name不能为空", groups = {  ValidateSequence.Validate2.class})\n    private String name;\n    @NotNull(message = "age不能为空", groups = {  ValidateSequence.Validate2.class})\n    private Integer age;\n    @NotNull(message = "status不能为空")\n    private Integer status;\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n@PostMapping("/test5")\npublic R test5(@Validated(ValidateSequence.class) @RequestBody TestDTO4 dto) {\n    log.info("[TestDTO4 <{}>]", dto);\n    return R.ok();\n}\n\n\n1\n2\n3\n4\n5\n\n\n\n# 自定义校验\n\n有些时候，我们需要的一些校验规则，库中没有提供，这时候我们就需要自定义了。\n\n一些简单的，可以通过正则表达式匹配可以实现。\n\n@Data\npublic class TestDTO5 {\n    @NotNull(message = "id不能为空")\n    private Long id;\n    @NotBlank(message = "name不能为空")\n    @Pattern(regexp = "^[A-Za-z][A-Za-z0-9]{5,17}$", message = "用户名由字母开头的6-18位数字和字母组成")\n    private String name;\n    @NotBlank(message = "phone不能为空")\n    @Pattern(regexp = "^1[3|4|5|6|8|7|9]\\\\d{9}$", message = "手机号格式不正确")\n    private String phone;\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n但是有一些，正则表达式无法判断。\n例：传入的是一个 List，但我们要限制传入的值，只能是固定的一些数。\n1.编写一个自定义的校验注解；\n\n@Documented\n// 可以指定多个不同的校验器\n@Constraint(validatedBy = {ListInValuesValiadator.class})\n@Target({METHOD, FIELD, ANNOTATION_TYPE, CONSTRUCTOR, PARAMETER, TYPE_USE})\n@Retention(RUNTIME)\npublic @interface ListInValues {\n    // 默认提示值可自定义，词条文件：ValidationMessages.properties\n    String message() default "{javax.validation.constraints.NotBlank.message}";\n    Class<?>[] groups() default {};\n    Class<? extends Payload>[] payload() default {};\n    int[] values() default {};\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n2.编写一个自定义的校验器；\n\npublic class ListInValuesValiadator implements ConstraintValidator<ListInValues, Integer> {\n    private Set<Integer> values = new HashSet<>();\n    @Override\n    public void initialize(ListInValues constraintAnnotation) {\n        // 初始化\n        int[] vals = constraintAnnotation.values();\n        for (int val : vals) {\n            values.add(val);\n        }\n    }\n    @Override\n    public boolean isValid(Integer value, ConstraintValidatorContext context) {\n        // 校验\n        return values.contains(value);\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n\n\n3.关联自定义的校验器和自定义的校验注解，@Constraint(validatedBy = {ListInValuesValiadator.class})；\n4.使用；\n\n@NotNull\n@ListInValues(values = {0,1}, message = "错误值")\nprivate Integer status;\n\n\n1\n2\n3\n\n\n\n\n\n# 源码\n\nValidator-demo Github地址\n\n更多好文，请关注我的博客',normalizedContent:'# springboot使用hibernate validator（后端参数校验）\n\n 1. 表单提交，前端做的了参数校验，服务器端还需要做参数校验吗？\n    \n 2. 服务器端怎么做参数校验？怎么样做参数校验最快捷？\n    \n 3. jsr-303 是什么？如何使用？springboot下如何使用？\n    \n 4. 使用一个实体接收提交内容时，新增和更新操作的参数校验标准不同时如何解决？\n    \n 5. 如何自定义校验？\n    \n\nspringboot 使用 jsr303 实现参数验证。\nspringboot 使用 hibernate validator 校验。\n示例代码，下文所有源代码都在这个仓库。\n\nvalidator-demo github地址\n\n\n# jsr-303\n\n看 jsr-303，首先我们得看看 jsr 是什么含义。\n是指向 jcp(java community process) 提出新增一个标准化技术规范的正式请求。任何人都可以提交jsr，以向java平台增添新的api和服务。jsr已成为java界的一个重要标准。 jsr，java specification requests 的缩写，意思是 java 规范提案。\njsr-303 是java ee 6 中的一项子规范，叫做 bean validation。\n\n\n\nhibernate validator 是 bean validation 的参考实现，hibernate validator 提供了 jsr 303 规范中所有内置 constraint 的实现，除此之外还有一些附加的 constraint。\n\n\n\n# springboot使用jsr-303\n\nspringboot 使用 jsr303 实现参数验证。\nspringboot 使用 hibernate validator 实现参数验证。\n\n\n# 基本使用\n\n 1. 在接收参数的 dto 上加上相关验证条件；\n\n@data\npublic class testdto1 {\n    @notnull\n    private long id;\n    @notblank\n    private string name;\n    @notnull\n    private integer age;\n    @notnull\n    private integer status;\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n 2. 开启校验功能 @valid；\n\n@postmapping("/test1")\npublic r test1(@valid @requestbody testdto1 dto) {\n    log.info("[testdto1 <{}>]", dto);\n    return r.ok();\n}\n\n\n1\n2\n3\n4\n5\n\n 3. 给校验的 bean 后紧跟一个 bindingresult，就可以获取到校验的结果；\n\n@postmapping("/test2")\npublic r test2(@valid @requestbody testdto1 dto, bindingresult result) {\n    log.info("[testdto1 <{}>]", dto);\n    log.error("[bindingresult <{}>]", result);\n    if (result != null && result.geterrorcount() > 0) {\n        return r.failed(result.getallerrors());\n    }\n    return r.ok();\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# 全局异常处理\n\n加上全局异常处理\n\n@slf4j\n@restcontrolleradvice\npublic class globalbizexceptionhandler {\n\n    /**\n     * 全局异常.\n     * @param e the e\n     * @return r\n     */\n    @exceptionhandler(exception.class)\n    @responsestatus(httpstatus.internal_server_error)\n    public r handleglobalexception(exception e) {\n        log.error("全局异常信息 ex={}", e.getmessage(), e);\n        return r.failed(e.getlocalizedmessage());\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n\n\n使用 @requestbody 来接收参数时，当传入的参数不符合要求时，抛出的异常为 org.springframework.web.bind.methodargumentnotvalidexception，所以我们对这个异常进行处理。\n\n/**\n * validation exception\n * @param exception\n * @return r\n */\n@exceptionhandler({ methodargumentnotvalidexception.class })\n@responsestatus(httpstatus.bad_request)\npublic r handlebodyvalidexception(methodargumentnotvalidexception exception) {\n    list<fielderror> fielderrors = exception.getbindingresult().getfielderrors();\n    log.warn("[参数绑定异常,ex = {}]", fielderrors.get(0).getdefaultmessage());\n    return r.failed(fielderrors.get(0).getdefaultmessage());\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n使用以 form-data 形式传参时，当传入的参数不符合要求时，抛出的异常为 org.springframework.validation.bindexception，所以我们对这个异常进行处理。\n\n/**\n * validation exception (以form-data形式传参)\n * @param exception\n * @return r\n */\n@exceptionhandler({ bindexception.class })\n@responsestatus(httpstatus.bad_request)\npublic r bindexceptionhandler(bindexception exception) {\n    list<fielderror> fielderrors = exception.getbindingresult().getfielderrors();\n    log.warn("[参数绑定异常,ex = {}]", fielderrors.get(0).getdefaultmessage());\n    return r.failed(fielderrors.get(0).getdefaultmessage());\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n加上全局异常捕获后，参数若有不符合，请求的结果如下：\n\n{\n    "code": 1,\n    "msg": "id必须为空",\n    "data": null\n}\n{\n    "code": 1,\n    "msg": "age不能为空",\n    "data": null\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\n\n# 分组校验\n\n使用一个实体接收提交内容时，新增和更新操作的参数校验标准不同时如何解决？\n例：新增操作不需要传入 id，更新操作必须传入 id。\n上面说的问题都是最基础的，那如何实现呢？\n\n 1. 创建分组标识。\n\npublic interface addgroup {}\npublic interface updategroup {}\n\n\n1\n2\n\n 2. 在接收参数的 dto 上标识，给校验注解标注什么情况需要进行校验。\n\n@notnull(message = "id不能为空", groups = {updategroup.class})\n@null(message = "id必须为空", groups = {addgroup.class})\nprivate long id;\n\n\n1\n2\n3\n\n 3. 在 controller 的方法上，使用 @validated 指定分组标识。\n\n@postmapping("/test3")\npublic r test3(@validated(addgroup.class) @requestbody testdto3 dto) {\n    log.info("[testdto3 <{}>]", dto);\n    return r.ok();\n}\n\n\n1\n2\n3\n4\n5\n\n\n注意点： 默认没有指定分组的校验注解，在分组校验情况下不生效。\n（例：我们有个参数的校验规则没有分组， @notblank 没有进行分组，它无论在 addgroup 或 updategroup 下都是不生效的）\n\n\n# 顺序校验\n\n在一些场景下，参数校验是需要有顺序的。\njsr-303 校验中专门提供了 @groupsequence 来实现。\n\n@groupsequence(value = {validatesequence.validate1.class,\n        validatesequence.validate2.class,\n        validatesequence.validate3.class,\n        validatesequence.validate4.class,\n        validatesequence.default.class,})\npublic interface validatesequence {\n    interface validate1{}\n    interface validate2{}\n    interface validate3{}\n    interface validate4{}\n    interface default{}\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n@data\npublic class testdto4 {\n    @notnull(message = "id不能为空", groups = {validatesequence.validate1.class})\n    private long id;\n    @notblank(message = "name不能为空", groups = {  validatesequence.validate2.class})\n    private string name;\n    @notnull(message = "age不能为空", groups = {  validatesequence.validate2.class})\n    private integer age;\n    @notnull(message = "status不能为空")\n    private integer status;\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n@postmapping("/test5")\npublic r test5(@validated(validatesequence.class) @requestbody testdto4 dto) {\n    log.info("[testdto4 <{}>]", dto);\n    return r.ok();\n}\n\n\n1\n2\n3\n4\n5\n\n\n\n# 自定义校验\n\n有些时候，我们需要的一些校验规则，库中没有提供，这时候我们就需要自定义了。\n\n一些简单的，可以通过正则表达式匹配可以实现。\n\n@data\npublic class testdto5 {\n    @notnull(message = "id不能为空")\n    private long id;\n    @notblank(message = "name不能为空")\n    @pattern(regexp = "^[a-za-z][a-za-z0-9]{5,17}$", message = "用户名由字母开头的6-18位数字和字母组成")\n    private string name;\n    @notblank(message = "phone不能为空")\n    @pattern(regexp = "^1[3|4|5|6|8|7|9]\\\\d{9}$", message = "手机号格式不正确")\n    private string phone;\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n但是有一些，正则表达式无法判断。\n例：传入的是一个 list，但我们要限制传入的值，只能是固定的一些数。\n1.编写一个自定义的校验注解；\n\n@documented\n// 可以指定多个不同的校验器\n@constraint(validatedby = {listinvaluesvaliadator.class})\n@target({method, field, annotation_type, constructor, parameter, type_use})\n@retention(runtime)\npublic @interface listinvalues {\n    // 默认提示值可自定义，词条文件：validationmessages.properties\n    string message() default "{javax.validation.constraints.notblank.message}";\n    class<?>[] groups() default {};\n    class<? extends payload>[] payload() default {};\n    int[] values() default {};\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n2.编写一个自定义的校验器；\n\npublic class listinvaluesvaliadator implements constraintvalidator<listinvalues, integer> {\n    private set<integer> values = new hashset<>();\n    @override\n    public void initialize(listinvalues constraintannotation) {\n        // 初始化\n        int[] vals = constraintannotation.values();\n        for (int val : vals) {\n            values.add(val);\n        }\n    }\n    @override\n    public boolean isvalid(integer value, constraintvalidatorcontext context) {\n        // 校验\n        return values.contains(value);\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n\n\n3.关联自定义的校验器和自定义的校验注解，@constraint(validatedby = {listinvaluesvaliadator.class})；\n4.使用；\n\n@notnull\n@listinvalues(values = {0,1}, message = "错误值")\nprivate integer status;\n\n\n1\n2\n3\n\n\n\n\n\n# 源码\n\nvalidator-demo github地址\n\n更多好文，请关注我的博客',charsets:{cjk:!0},lastUpdated:"4/1/2023",lastUpdatedTimestamp:1680335181e3},{title:"SpringBoot二维码生成(复制即用)",frontmatter:{title:"SpringBoot二维码生成(复制即用)",date:"2022-08-28T23:15:32.000Z",permalink:"/pages/745182/",categories:["文章","Spring"],tags:["二维码生成"],readingShow:"top"},regularPath:"/01.%E6%96%87%E7%AB%A0/05.Spring/01.%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/05.SpringBoot%E4%BA%8C%E7%BB%B4%E7%A0%81%E7%94%9F%E6%88%90(%E5%A4%8D%E5%88%B6%E5%8D%B3%E7%94%A8).html",relativePath:"01.文章/05.Spring/01.基础使用/05.SpringBoot二维码生成(复制即用).md",key:"v-3d656a7d",path:"/pages/745182/",headers:[{level:2,title:"使用场景",slug:"使用场景",normalizedTitle:"使用场景",charIndex:2},{level:2,title:"具体实现",slug:"具体实现",normalizedTitle:"具体实现",charIndex:52},{level:3,title:"依赖",slug:"依赖",normalizedTitle:"依赖",charIndex:61},{level:3,title:"工具类",slug:"工具类",normalizedTitle:"工具类",charIndex:474},{level:3,title:"测试入口",slug:"测试入口",normalizedTitle:"测试入口",charIndex:7061},{level:3,title:"效果",slug:"效果",normalizedTitle:"效果",charIndex:8635},{level:2,title:"源码",slug:"源码",normalizedTitle:"源码",charIndex:105}],excerpt:'<h2 id="使用场景"><a class="header-anchor" href="#使用场景">#</a> 使用场景</h2>\n<p>使用场景：H5 或 APP 上需要根据服务器的某些数据来动态生成二维码的时候。</p>\n<h2 id="具体实现"><a class="header-anchor" href="#具体实现">#</a> 具体实现</h2>\n<h3 id="依赖"><a class="header-anchor" href="#依赖">#</a> 依赖</h3>\n<p>主要是利用 zxing 库，google 的开源库。</p>\n<blockquote>\n<p>ZXing是一个开放源码的，用Java实现的多种格式的1D/2D条码图像处理库，它包含了联系到其他语言的端口。Zxing可以实现使用手机的内置的摄像头完成条形码的扫描及解码。</p>\n</blockquote>\n',headersStr:"使用场景 具体实现 依赖 工具类 测试入口 效果 源码",content:'# 使用场景\n\n使用场景：H5 或 APP 上需要根据服务器的某些数据来动态生成二维码的时候。\n\n\n# 具体实现\n\n\n# 依赖\n\n主要是利用 zxing 库，google 的开源库。\n\n> ZXing是一个开放源码的，用Java实现的多种格式的1D/2D条码图像处理库，它包含了联系到其他语言的端口。Zxing可以实现使用手机的内置的摄像头完成条形码的扫描及解码。\n\n\x3c!-- 二维码生成 --\x3e\n<dependency>\n\t<groupId>com.google.zxing</groupId>\n\t<artifactId>core</artifactId>\n\t<version>3.3.3</version>\n</dependency>\n<dependency>\n\t<groupId>com.google.zxing</groupId>\n\t<artifactId>javase</artifactId>\n\t<version>3.3.3</version>\n</dependency>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n\n# 工具类\n\n/**\n * <p>\n * QRCodeUtil\n * </p>\n *\n * @author rcbb.cc\n * @date 2022/8/28\n */\n@Slf4j\n@UtilityClass\npublic class QRCodeUtil {\n\n    /**\n     * 默认宽度\n     */\n    private static final Integer WIDTH = 140;\n    /**\n     * 默认高度\n     */\n    private static final Integer HEIGHT = 140;\n\n    /**\n     * LOGO 默认宽度\n     */\n    private static final Integer LOGO_WIDTH = 22;\n    /**\n     * LOGO 默认高度\n     */\n    private static final Integer LOGO_HEIGHT = 22;\n\n    /**\n     * 图片格式\n     */\n    private static final String IMAGE_FORMAT = "png";\n    private static final String CHARSET = "utf-8";\n    /**\n     * 原生转码前面没有 data:image/png;base64 这些字段，返回给前端是无法被解析\n     */\n    private static final String BASE64_IMAGE = "data:image/png;base64,%s";\n\n    /**\n     * 生成二维码，使用默认尺寸\n     *\n     * @param content 内容\n     * @return\n     */\n    public String getBase64QRCode(String content) {\n        return getBase64Image(content, WIDTH, HEIGHT, null, null, null);\n    }\n\n    /**\n     * 生成二维码，使用默认尺寸二维码，插入默认尺寸logo\n     *\n     * @param content 内容\n     * @param logoUrl logo地址\n     * @return\n     */\n    public String getBase64QRCode(String content, String logoUrl) {\n        return getBase64Image(content, WIDTH, HEIGHT, logoUrl, LOGO_WIDTH, LOGO_HEIGHT);\n    }\n\n    /**\n     * 生成二维码\n     *\n     * @param content    内容\n     * @param width      二维码宽度\n     * @param height     二维码高度\n     * @param logoUrl    logo 在线地址\n     * @param logoWidth  logo 宽度\n     * @param logoHeight logo 高度\n     * @return\n     */\n    public String getBase64QRCode(String content, Integer width, Integer height, String logoUrl, Integer logoWidth, Integer logoHeight) {\n        return getBase64Image(content, width, height, logoUrl, logoWidth, logoHeight);\n    }\n\n    private String getBase64Image(String content, Integer width, Integer height, String logoUrl, Integer logoWidth, Integer logoHeight) {\n        ByteArrayOutputStream os = new ByteArrayOutputStream();\n        BufferedImage bufferedImage = crateQRCode(content, width, height, logoUrl, logoWidth, logoHeight);\n        try {\n            ImageIO.write(bufferedImage, IMAGE_FORMAT, os);\n        } catch (IOException e) {\n            log.error("[生成二维码，错误{}]", e);\n        }\n        // 转出即可直接使用\n        return String.format(BASE64_IMAGE, Base64.encode(os.toByteArray()));\n    }\n\n\n    /**\n     * 生成二维码\n     *\n     * @param content    内容\n     * @param width      二维码宽度\n     * @param height     二维码高度\n     * @param logoUrl    logo 在线地址\n     * @param logoWidth  logo 宽度\n     * @param logoHeight logo 高度\n     * @return\n     */\n    private BufferedImage crateQRCode(String content, Integer width, Integer height, String logoUrl, Integer logoWidth, Integer logoHeight) {\n        if (StrUtil.isNotBlank(content)) {\n            ServletOutputStream stream = null;\n            HashMap<EncodeHintType, Comparable> hints = new HashMap<>(4);\n            // 指定字符编码为utf-8\n            hints.put(EncodeHintType.CHARACTER_SET, CHARSET);\n            // 指定二维码的纠错等级为中级\n            hints.put(EncodeHintType.ERROR_CORRECTION, ErrorCorrectionLevel.M);\n            // 设置图片的边距\n            hints.put(EncodeHintType.MARGIN, 2);\n            try {\n                QRCodeWriter writer = new QRCodeWriter();\n                BitMatrix bitMatrix = writer.encode(content, BarcodeFormat.QR_CODE, width, height, hints);\n                BufferedImage bufferedImage = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);\n                for (int x = 0; x < width; x++) {\n                    for (int y = 0; y < height; y++) {\n                        bufferedImage.setRGB(x, y, bitMatrix.get(x, y) ? 0xFF000000 : 0xFFFFFFFF);\n                    }\n                }\n                if (StrUtil.isNotBlank(logoUrl)) {\n                    insertLogo(bufferedImage, width, height, logoUrl, logoWidth, logoHeight);\n                }\n                return bufferedImage;\n            } catch (Exception e) {\n                e.printStackTrace();\n            } finally {\n                if (stream != null) {\n                    try {\n                        stream.flush();\n                        stream.close();\n                    } catch (IOException e) {\n                        e.printStackTrace();\n                    }\n                }\n            }\n        }\n        return null;\n    }\n\n    /**\n     * 二维码插入logo\n     *\n     * @param source     二维码\n     * @param width      二维码宽度\n     * @param height     二维码高度\n     * @param logoUrl    logo 在线地址\n     * @param logoWidth  logo 宽度\n     * @param logoHeight logo 高度\n     * @throws Exception\n     */\n    private void insertLogo(BufferedImage source, Integer width, Integer height, String logoUrl, Integer logoWidth, Integer logoHeight) throws Exception {\n        // logo 源可为 File/InputStream/URL\n        Image src = ImageIO.read(new URL(logoUrl));\n        // 插入LOGO\n        Graphics2D graph = source.createGraphics();\n        int x = (width - logoWidth) / 2;\n        int y = (height - logoHeight) / 2;\n        graph.drawImage(src, x, y, logoWidth, logoHeight, null);\n        Shape shape = new RoundRectangle2D.Float(x, y, logoWidth, logoHeight, 6, 6);\n        graph.setStroke(new BasicStroke(3f));\n        graph.draw(shape);\n        graph.dispose();\n    }\n\n\n    /**\n     * 获取二维码\n     *\n     * @param content 内容\n     * @param output  输出流\n     * @throws IOException\n     */\n    public void getQRCode(String content, OutputStream output) throws IOException {\n        BufferedImage image = crateQRCode(content, WIDTH, HEIGHT, null, null, null);\n        ImageIO.write(image, IMAGE_FORMAT, output);\n    }\n\n    /**\n     * 获取二维码\n     *\n     * @param content 内容\n     * @param logoUrl logo资源\n     * @param output  输出流\n     * @throws Exception\n     */\n    public void getQRCode(String content, String logoUrl, OutputStream output) throws Exception {\n        BufferedImage image = crateQRCode(content, WIDTH, HEIGHT, logoUrl, LOGO_WIDTH, LOGO_HEIGHT);\n        ImageIO.write(image, IMAGE_FORMAT, output);\n    }\n\n}\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n74\n75\n76\n77\n78\n79\n80\n81\n82\n83\n84\n85\n86\n87\n88\n89\n90\n91\n92\n93\n94\n95\n96\n97\n98\n99\n100\n101\n102\n103\n104\n105\n106\n107\n108\n109\n110\n111\n112\n113\n114\n115\n116\n117\n118\n119\n120\n121\n122\n123\n124\n125\n126\n127\n128\n129\n130\n131\n132\n133\n134\n135\n136\n137\n138\n139\n140\n141\n142\n143\n144\n145\n146\n147\n148\n149\n150\n151\n152\n153\n154\n155\n156\n157\n158\n159\n160\n161\n162\n163\n164\n165\n166\n167\n168\n169\n170\n171\n172\n173\n174\n175\n176\n177\n178\n179\n180\n181\n182\n183\n184\n185\n186\n187\n188\n189\n190\n191\n192\n\n\n\n# 测试入口\n\n/**\n * <p>\n * QRCodeController\n * </p>\n *\n * @author rcbb.cc\n * @date 2022/8/28\n */\n@RestController\n@RequestMapping("/qrcode")\npublic class QRCodeController {\n\n    /**\n     * 根据 content 生成二维码\n     *\n     * @param content\n     * @param width\n     * @param height\n     * @return\n     */\n    @GetMapping("/getQRCodeBase64")\n    public R getQRCode(@RequestParam("content") String content,\n                       @RequestParam(value = "logoUrl", required = false) String logoUrl,\n                       @RequestParam(value = "width", required = false) Integer width,\n                       @RequestParam(value = "height", required = false) Integer height) {\n        return R.ok(QRCodeUtil.getBase64QRCode(content, logoUrl));\n    }\n\n    /**\n     * 根据 content 生成二维码\n     */\n    @GetMapping(value = "/getQRCode")\n    public void getQRCode(HttpServletResponse response,\n                          @RequestParam("content") String content,\n                          @RequestParam(value = "logoUrl", required = false) String logoUrl) throws Exception {\n        ServletOutputStream stream = null;\n        try {\n            stream = response.getOutputStream();\n            QRCodeUtil.getQRCode(content, logoUrl, stream);\n        } catch (Exception e) {\n            e.getStackTrace();\n        } finally {\n            if (stream != null) {\n                stream.flush();\n                stream.close();\n            }\n        }\n    }\n}\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n\n\n\n# 效果\n\n直接将图片资源以 Base64 的形式返回给了前端。\n\n测试请求：\n\nhttp://localhost:8080/qrcode/getQRCodeBase64?content=www.baidu.com\n\n{\n  "code": 0,\n  "msg": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIwAAACMCAIAAAAhotZpAAABuklEQVR42u3aQY7EMAgEwPz/0zs/WGk0NGCn+hwlscsHZHj+ZH0eWwBJIEESSAIJkkASSJAEEiSBJJAgCSQpRnq68tV3/39454ogQYIECRKk9yFVljF1+9725oa9ggQJEiRIkO5FKqzfcgXbkhVBggQJEiRIkIaWlOOHBAkSJEiQIJ1f3eU6VZAgQYIECRKk8/tJud/Q9IMECRIkSJC6kKYmWKcufowZQ4IECRIkSAcmsR1LVwoJEiRIkCAdjFQ4SZqrlHLDsL8sEBIkSJAgQXo9Um7stPBVOf6GIhMSJEiQIEE6Gamwjlqyd7mzsqWfBAkSJEiQIC1Fyu1O4YfaHoYECRIkSJAgnbB3uXq1/1WQIEGCBAnSRUhtydVR4/UbJEiQIEGCdC/S05Xcd8dbRJAgQYIECdJbkdruY3KXRm1HBxIkSJAgQYIUW3Db4cidlaXVHSRIkCBBgvQ6pLYBmPlGGiRIkCBBggSpuDSaujRq4IcECRIkSJDuRcrdx+QaOTsHYCBBggQJEqQbkaYmWKf++chrIUiQIEGCBGkMSSAJJEgCCZJAEkiQBJJAgiSQBBIkgQRJIMk3+QBWsB+4yRwtkgAAAABJRU5ErkJggg==",\n  "data": null\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n\n\n带 Logo 的二维码，可以传入 logo 的 url，生成的二维码中间会带有 logo。\n\nhttp://localhost:8080/qrcode/getQRCodeBase64?content=www.baidu.com&logoUrl=https://www.baidu.com/img/flexible/logo/pc/result.png\n\n{\n    "code": 0,\n    "msg": null,\n    "data": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIwAAACMCAIAAAAhotZpAAADKElEQVR42u3bP2sUQRgH4OxeSG1hYWMhSNRgISq2gmBlIVhYWOoHEGuxMI1NCMHOwkL8Cn4EK8HOMginYKEQQghYJKgbF4blchcS3flzd8+PZUlg2buZZ2/v3Zm5hd9SfBZ0ASSBBEkgCSRIAkkgQRJIkASSQIIkkKRnpIVUOdHrHn1wmS2CBAkSJEiQ5g+pzzKmv35PduYEfQUJEiRIkCDNLlKP9Vu8gq2QFkGCBAkSJEiQMjUpHj8kSJAgQYIEafqru3gzVZAgQYIECRKk6Z9Pivc2TPpBggQJEiRIqZByrWDNNfBjmTEkSJAgQYI0hYnRHYW2FBIkSJAgQZpipB5XksarlOIthv2fBs4RUlGDhJBi3ccgRUQqcLgd0sRGjn3dS1eHN25+bfbN5jupt/fR75xQy9Nuk17oOK3o8bIrpbqDBAnSDCG1NmfOrjb785ffjzhBKgWpe6p5R+rx2b7HBh9GOv5J4q1pKWU+qSikC1c+nTp9H1JxSHubmwEpPCSNRRou1ZDSIXW7e+vJ47FIzTFhezSo2j8g5UHaebnRnurcxXdrG1vhM3RvUDXb56X6dl01SA8Hldtd9F+GdA9okJp/1xfrO3V192/vh4qu+5y0+/bNzvpasz/8SfrnS2c6hoXKQWr7/fliPQlp5HY3qQSHFBGpdWqRAsyHjz+b/eqLre7BPknZkK7XVRfp1evtgNSa7Q+HzdYiLdcHG6SkSLfqqnu7C3e5LtIR1R2kflp4NFL4WgpI33/sHzw27f0KSOHgpgKcVH+nLPYgDUcGILoHbz97mmtsfn6RmjwYjLndhW3l2pfu7e7byjKkREhpFtRBgpQDKVnirVHNXr/NLFKyuUdIkCBBglQuUq5fmOZarpz9NzaQIEGCBAnSDCHlevLvsSuTXTqQIEGCBAkSpGgNTnZxxLtWCq3uIEGCBAkSpLlDSrYAJv9EGiRIkCBBggSp59Io16BRAn5IkCBBggRpdpHijcfEm8gpcwEMJEiQIEGCNItIuVaw5nrPUzksBAkSJEiQIGVDEkgCCZJAgiSQBBIkgSSQIAkkgQRJIEESSHKS/AGHCLnTQ9OTzwAAAABJRU5ErkJggg=="\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n\n\n也可以选择使用返回流的方式给前端。\n\n\n# 源码\n\nzxing-demo Github地址\n\n更多好文，请关注我的博客',normalizedContent:'# 使用场景\n\n使用场景：h5 或 app 上需要根据服务器的某些数据来动态生成二维码的时候。\n\n\n# 具体实现\n\n\n# 依赖\n\n主要是利用 zxing 库，google 的开源库。\n\n> zxing是一个开放源码的，用java实现的多种格式的1d/2d条码图像处理库，它包含了联系到其他语言的端口。zxing可以实现使用手机的内置的摄像头完成条形码的扫描及解码。\n\n\x3c!-- 二维码生成 --\x3e\n<dependency>\n\t<groupid>com.google.zxing</groupid>\n\t<artifactid>core</artifactid>\n\t<version>3.3.3</version>\n</dependency>\n<dependency>\n\t<groupid>com.google.zxing</groupid>\n\t<artifactid>javase</artifactid>\n\t<version>3.3.3</version>\n</dependency>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n\n# 工具类\n\n/**\n * <p>\n * qrcodeutil\n * </p>\n *\n * @author rcbb.cc\n * @date 2022/8/28\n */\n@slf4j\n@utilityclass\npublic class qrcodeutil {\n\n    /**\n     * 默认宽度\n     */\n    private static final integer width = 140;\n    /**\n     * 默认高度\n     */\n    private static final integer height = 140;\n\n    /**\n     * logo 默认宽度\n     */\n    private static final integer logo_width = 22;\n    /**\n     * logo 默认高度\n     */\n    private static final integer logo_height = 22;\n\n    /**\n     * 图片格式\n     */\n    private static final string image_format = "png";\n    private static final string charset = "utf-8";\n    /**\n     * 原生转码前面没有 data:image/png;base64 这些字段，返回给前端是无法被解析\n     */\n    private static final string base64_image = "data:image/png;base64,%s";\n\n    /**\n     * 生成二维码，使用默认尺寸\n     *\n     * @param content 内容\n     * @return\n     */\n    public string getbase64qrcode(string content) {\n        return getbase64image(content, width, height, null, null, null);\n    }\n\n    /**\n     * 生成二维码，使用默认尺寸二维码，插入默认尺寸logo\n     *\n     * @param content 内容\n     * @param logourl logo地址\n     * @return\n     */\n    public string getbase64qrcode(string content, string logourl) {\n        return getbase64image(content, width, height, logourl, logo_width, logo_height);\n    }\n\n    /**\n     * 生成二维码\n     *\n     * @param content    内容\n     * @param width      二维码宽度\n     * @param height     二维码高度\n     * @param logourl    logo 在线地址\n     * @param logowidth  logo 宽度\n     * @param logoheight logo 高度\n     * @return\n     */\n    public string getbase64qrcode(string content, integer width, integer height, string logourl, integer logowidth, integer logoheight) {\n        return getbase64image(content, width, height, logourl, logowidth, logoheight);\n    }\n\n    private string getbase64image(string content, integer width, integer height, string logourl, integer logowidth, integer logoheight) {\n        bytearrayoutputstream os = new bytearrayoutputstream();\n        bufferedimage bufferedimage = crateqrcode(content, width, height, logourl, logowidth, logoheight);\n        try {\n            imageio.write(bufferedimage, image_format, os);\n        } catch (ioexception e) {\n            log.error("[生成二维码，错误{}]", e);\n        }\n        // 转出即可直接使用\n        return string.format(base64_image, base64.encode(os.tobytearray()));\n    }\n\n\n    /**\n     * 生成二维码\n     *\n     * @param content    内容\n     * @param width      二维码宽度\n     * @param height     二维码高度\n     * @param logourl    logo 在线地址\n     * @param logowidth  logo 宽度\n     * @param logoheight logo 高度\n     * @return\n     */\n    private bufferedimage crateqrcode(string content, integer width, integer height, string logourl, integer logowidth, integer logoheight) {\n        if (strutil.isnotblank(content)) {\n            servletoutputstream stream = null;\n            hashmap<encodehinttype, comparable> hints = new hashmap<>(4);\n            // 指定字符编码为utf-8\n            hints.put(encodehinttype.character_set, charset);\n            // 指定二维码的纠错等级为中级\n            hints.put(encodehinttype.error_correction, errorcorrectionlevel.m);\n            // 设置图片的边距\n            hints.put(encodehinttype.margin, 2);\n            try {\n                qrcodewriter writer = new qrcodewriter();\n                bitmatrix bitmatrix = writer.encode(content, barcodeformat.qr_code, width, height, hints);\n                bufferedimage bufferedimage = new bufferedimage(width, height, bufferedimage.type_int_rgb);\n                for (int x = 0; x < width; x++) {\n                    for (int y = 0; y < height; y++) {\n                        bufferedimage.setrgb(x, y, bitmatrix.get(x, y) ? 0xff000000 : 0xffffffff);\n                    }\n                }\n                if (strutil.isnotblank(logourl)) {\n                    insertlogo(bufferedimage, width, height, logourl, logowidth, logoheight);\n                }\n                return bufferedimage;\n            } catch (exception e) {\n                e.printstacktrace();\n            } finally {\n                if (stream != null) {\n                    try {\n                        stream.flush();\n                        stream.close();\n                    } catch (ioexception e) {\n                        e.printstacktrace();\n                    }\n                }\n            }\n        }\n        return null;\n    }\n\n    /**\n     * 二维码插入logo\n     *\n     * @param source     二维码\n     * @param width      二维码宽度\n     * @param height     二维码高度\n     * @param logourl    logo 在线地址\n     * @param logowidth  logo 宽度\n     * @param logoheight logo 高度\n     * @throws exception\n     */\n    private void insertlogo(bufferedimage source, integer width, integer height, string logourl, integer logowidth, integer logoheight) throws exception {\n        // logo 源可为 file/inputstream/url\n        image src = imageio.read(new url(logourl));\n        // 插入logo\n        graphics2d graph = source.creategraphics();\n        int x = (width - logowidth) / 2;\n        int y = (height - logoheight) / 2;\n        graph.drawimage(src, x, y, logowidth, logoheight, null);\n        shape shape = new roundrectangle2d.float(x, y, logowidth, logoheight, 6, 6);\n        graph.setstroke(new basicstroke(3f));\n        graph.draw(shape);\n        graph.dispose();\n    }\n\n\n    /**\n     * 获取二维码\n     *\n     * @param content 内容\n     * @param output  输出流\n     * @throws ioexception\n     */\n    public void getqrcode(string content, outputstream output) throws ioexception {\n        bufferedimage image = crateqrcode(content, width, height, null, null, null);\n        imageio.write(image, image_format, output);\n    }\n\n    /**\n     * 获取二维码\n     *\n     * @param content 内容\n     * @param logourl logo资源\n     * @param output  输出流\n     * @throws exception\n     */\n    public void getqrcode(string content, string logourl, outputstream output) throws exception {\n        bufferedimage image = crateqrcode(content, width, height, logourl, logo_width, logo_height);\n        imageio.write(image, image_format, output);\n    }\n\n}\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n74\n75\n76\n77\n78\n79\n80\n81\n82\n83\n84\n85\n86\n87\n88\n89\n90\n91\n92\n93\n94\n95\n96\n97\n98\n99\n100\n101\n102\n103\n104\n105\n106\n107\n108\n109\n110\n111\n112\n113\n114\n115\n116\n117\n118\n119\n120\n121\n122\n123\n124\n125\n126\n127\n128\n129\n130\n131\n132\n133\n134\n135\n136\n137\n138\n139\n140\n141\n142\n143\n144\n145\n146\n147\n148\n149\n150\n151\n152\n153\n154\n155\n156\n157\n158\n159\n160\n161\n162\n163\n164\n165\n166\n167\n168\n169\n170\n171\n172\n173\n174\n175\n176\n177\n178\n179\n180\n181\n182\n183\n184\n185\n186\n187\n188\n189\n190\n191\n192\n\n\n\n# 测试入口\n\n/**\n * <p>\n * qrcodecontroller\n * </p>\n *\n * @author rcbb.cc\n * @date 2022/8/28\n */\n@restcontroller\n@requestmapping("/qrcode")\npublic class qrcodecontroller {\n\n    /**\n     * 根据 content 生成二维码\n     *\n     * @param content\n     * @param width\n     * @param height\n     * @return\n     */\n    @getmapping("/getqrcodebase64")\n    public r getqrcode(@requestparam("content") string content,\n                       @requestparam(value = "logourl", required = false) string logourl,\n                       @requestparam(value = "width", required = false) integer width,\n                       @requestparam(value = "height", required = false) integer height) {\n        return r.ok(qrcodeutil.getbase64qrcode(content, logourl));\n    }\n\n    /**\n     * 根据 content 生成二维码\n     */\n    @getmapping(value = "/getqrcode")\n    public void getqrcode(httpservletresponse response,\n                          @requestparam("content") string content,\n                          @requestparam(value = "logourl", required = false) string logourl) throws exception {\n        servletoutputstream stream = null;\n        try {\n            stream = response.getoutputstream();\n            qrcodeutil.getqrcode(content, logourl, stream);\n        } catch (exception e) {\n            e.getstacktrace();\n        } finally {\n            if (stream != null) {\n                stream.flush();\n                stream.close();\n            }\n        }\n    }\n}\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n\n\n\n# 效果\n\n直接将图片资源以 base64 的形式返回给了前端。\n\n测试请求：\n\nhttp://localhost:8080/qrcode/getqrcodebase64?content=www.baidu.com\n\n{\n  "code": 0,\n  "msg": "data:image/png;base64,ivborw0kggoaaaansuheugaaaiwaaacmcaiaaaahotzpaaabukleqvr42u3aqy7emagewpz/0zs/wgk0ngcn+hwlscshzhj+zh0ewwbjieessaijkkassjaeeisbjjagcsqprnq68tv3/39454ogqyiecrkk9yfvljf1+9725oa9ggqjeiriko5fkqzfcgxbkhvbggqjeirikiawloohbaksjeiqij1f3eu6vzagqyiecrkk8/tjud/q9imecriksjc6kkymwkcufowzq4iecriksacmsr1lvwojeirikcadjfq4szqrlhldsl8sebiksjagqxo9um7stpbvof6gihmsjeiqiee6gamwjlqyd7mzsqwfbaksjeiqic1fyu1o4yfahoyecriksjagnbb3uxq1/1wqiegcbansruhtydvr4/ubjeiqiegcdc/s05xcd8dbrjagqyiecdjbkdruy3kxrm1hbxiksjagqyiuw3db4cidlaxvhsrikcbbgvq6plybmplggirikcbbggspudsaujrq4icecriksjdurcrdx+qaotshycbbggqjeqqbkaymwkf++chriuiqiegcbgkmssajjegcczjaekiqbjjagisqbbikgqrjimk3+qbwsb+4yrwtkgaaaabjru5erkjggg==",\n  "data": null\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n\n\n带 logo 的二维码，可以传入 logo 的 url，生成的二维码中间会带有 logo。\n\nhttp://localhost:8080/qrcode/getqrcodebase64?content=www.baidu.com&logourl=https://www.baidu.com/img/flexible/logo/pc/result.png\n\n{\n    "code": 0,\n    "msg": null,\n    "data": "data:image/png;base64,ivborw0kggoaaaansuheugaaaiwaaacmcaiaaaahotzpaaadkeleqvr42u3bp2suqrgh4oxesg1hywmhsnrgisq2gmblivhywooheguxmi1ncmhowkl8cn4ek8homginykeqqghyjkgbf4blchcs3flzd8+pzulg2buzz2/v3zm5hd9sfbz0assbbekgcsriakkgqrjikassqiikkkrnpivuodhrhn1wms2cbaksjeiq5g+pzzkmv35pduyefqujeirikcdnllkp9vu8gq2qfkgcbaksjeiqmjuphj8ksjagqyieafqru3gzvzagqyiecrkk6z9pivc2tppbggqjeiriqzbyrwdnnfbjmteksjagqyi0hynrhyw2fbiksjagqzpipb5xksarloithv2fbs4rulgdhjbi3ccgruqqclgd0srgjn3ds1ehn25+bfbn5jupt/fr75xqy9nuk17ook3o8birpbqdbansdcg1nmforjb785ffjzhbkgwpe6p5r+rx2b7hbh9gov5j4q1pkwu+qsikc1c+ntp9h1jxshubmweppcsnrrou1zdsixw7e+vj47fiztfhezso2j8g5uhaebnrnurcxxdrg1vhm3rvudxb56x6dl01sa8hldtd9f+gda9okjp/1xfro3v192/vh4qu+5y0+/bnzvpasz/8sfrns2c6hoxkqwr7/flipqlp5hy3qqshfbgpdwqrasyhjz+b/eqlre7bpknzkk7xvrfp1evtgnsa7q+hzdyildchg6skslfqqnu7c3e5ltir1r2kflp4nfl4wgpi33/shzw27f0ksohgpgkcvh+nlpygducgilohbz97mmtsfn6rmjwyjlndhw3l2pfu7e7byjkkrehpftrbgpqdkvnirvhnxr/nlfkyuudikcbbglquuq5fmozarpz9nzaqiegcbansdchlevlvssutxtqqiegcbakspggntnzxxltwcq3uiegcbaksplldsryajv9egirikcbbggsp59io16bran5ikcbbggrpdphijcfem8gpcwemjeiqiegcnitiuvaw5nrpuzksbaksjeiqigvdekgcczjagisqbbikgssqiakkgqrjieesshks/aghclntq9otzwaaaabjru5erkjggg=="\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n\n\n也可以选择使用返回流的方式给前端。\n\n\n# 源码\n\nzxing-demo github地址\n\n更多好文，请关注我的博客',charsets:{cjk:!0},lastUpdated:"10/7/2022",lastUpdatedTimestamp:1665111399e3},{title:"Spring Security学习总结",frontmatter:{title:"Spring Security学习总结",date:"2022-10-01T11:44:30.000Z",permalink:"/pages/32549d/",categories:["文章","Spring Security"],tags:["Spring Security"],readingShow:"top"},regularPath:"/01.%E6%96%87%E7%AB%A0/05.Spring/02.Spring%20Security/01.Spring%20Security%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93.html",relativePath:"01.文章/05.Spring/02.Spring Security/01.Spring Security学习总结.md",key:"v-96d4e666",path:"/pages/32549d/",headers:[{level:2,title:"参考资料",slug:"参考资料",normalizedTitle:"参考资料",charIndex:851}],headersStr:"参考资料",content:"# Spring Security学习总结\n\nSpring Security 的学习可谓是从未中断过。\n\n就算仅是想简单的做一个后台管理项目来说，权限管理是绕不开的。权限管理对应的框架就只有shiro和Spring Security了，当时也是使用过shiro的，因为对于Spring Security是有着一种莫名的抵抗的态度。觉得Spring Security这个模块太大了，那时候网上的资料也不是很全，学起来很难，影响最深刻的是慕课网一个老师出的教程。\n\n虽然是跟着把项目敲了一遍，实现了各种三方登录，但是当时也是非常懵懂，无法理解为什么是这样写的。\n\n印象最深刻的就属登录接口，不同的项目，一个登录接口就可以看出很多内容。 登录接口的多种做法：\n\n * 未集成Spring Security，自己写的controller，账号密码正确后，按照自己规则生成token,token会与用户存在关系...\n * 集成了Spring Security，但是还是自己写的controller，账号密码正确后，使用AccessTokenProvider去生成token...\n * 集成了Spring Security，但是还是自己写的controller，通过访问固定的路径，进入自定义的Spring Security Filter（通过继承AbstractAuthenticationProcessingFilter实现），成功通过验证逻辑后，到达自定义的handler（通过继承AuthenticationSuccessHandler实现），通过AuthorizationServerTokenServices来获取token并返回...\n * 集成了Spring Security，通过标准的/oauth/token去使用...\n\n各种方式都能实现，但是又不尽相同。\n\n写文章主要是来记录一下自己踩坑Spring Security的历史和梳理Spring Security源码的整个流程。\n\n\n# 参考资料\n\n * 阮一峰-理解OAuth 2.0\n * 阮一峰-OAuth 2.0 的一个简单解释\n * 阮一峰-OAuth 2.0 的四种方式\n * 阮一峰-GitHub OAuth 第三方登录示例教程\n * 程序员劝退师-TAO SpringSecurity OAuth2开发相关聚合文章\n * 码猿技术专栏-Spring Cloud进阶-OAuth2.0",normalizedContent:"# spring security学习总结\n\nspring security 的学习可谓是从未中断过。\n\n就算仅是想简单的做一个后台管理项目来说，权限管理是绕不开的。权限管理对应的框架就只有shiro和spring security了，当时也是使用过shiro的，因为对于spring security是有着一种莫名的抵抗的态度。觉得spring security这个模块太大了，那时候网上的资料也不是很全，学起来很难，影响最深刻的是慕课网一个老师出的教程。\n\n虽然是跟着把项目敲了一遍，实现了各种三方登录，但是当时也是非常懵懂，无法理解为什么是这样写的。\n\n印象最深刻的就属登录接口，不同的项目，一个登录接口就可以看出很多内容。 登录接口的多种做法：\n\n * 未集成spring security，自己写的controller，账号密码正确后，按照自己规则生成token,token会与用户存在关系...\n * 集成了spring security，但是还是自己写的controller，账号密码正确后，使用accesstokenprovider去生成token...\n * 集成了spring security，但是还是自己写的controller，通过访问固定的路径，进入自定义的spring security filter（通过继承abstractauthenticationprocessingfilter实现），成功通过验证逻辑后，到达自定义的handler（通过继承authenticationsuccesshandler实现），通过authorizationservertokenservices来获取token并返回...\n * 集成了spring security，通过标准的/oauth/token去使用...\n\n各种方式都能实现，但是又不尽相同。\n\n写文章主要是来记录一下自己踩坑spring security的历史和梳理spring security源码的整个流程。\n\n\n# 参考资料\n\n * 阮一峰-理解oauth 2.0\n * 阮一峰-oauth 2.0 的一个简单解释\n * 阮一峰-oauth 2.0 的四种方式\n * 阮一峰-github oauth 第三方登录示例教程\n * 程序员劝退师-tao springsecurity oauth2开发相关聚合文章\n * 码猿技术专栏-spring cloud进阶-oauth2.0",charsets:{cjk:!0},lastUpdated:"10/7/2022",lastUpdatedTimestamp:1665111399e3},{title:"Spring Security",frontmatter:{title:"Spring Security",date:"2022-10-02T12:47:07.000Z",permalink:"/pages/5fbd1a/",categories:["文章","Spring Security"],tags:["Spring Security"],readingShow:"top"},regularPath:"/01.%E6%96%87%E7%AB%A0/05.Spring/02.Spring%20Security/02.Spring%20Security.html",relativePath:"01.文章/05.Spring/02.Spring Security/02.Spring Security.md",key:"v-8992ebda",path:"/pages/5fbd1a/",headers:[{level:2,title:"核心功能",slug:"核心功能",normalizedTitle:"核心功能",charIndex:201},{level:2,title:"基本原理",slug:"基本原理",normalizedTitle:"基本原理",charIndex:253},{level:2,title:"表单认证",slug:"表单认证",normalizedTitle:"表单认证",charIndex:1941},{level:3,title:"源码分析",slug:"源码分析",normalizedTitle:"源码分析",charIndex:1983},{level:2,title:"认证的结果如何在请求间共享",slug:"认证的结果如何在请求间共享",normalizedTitle:"认证的结果如何在请求间共享",charIndex:2328},{level:2,title:"授权流程",slug:"授权流程",normalizedTitle:"授权流程",charIndex:2388}],excerpt:'<h1 id="spring-security"><a class="header-anchor" href="#spring-security">#</a> Spring Security</h1>\n<p><code>Spring Security</code>是一个功能强大且高度可定制的身份验证和访问控制框架。</p>\n<p>它是保护基于<code>Spring</code>的应用程序的官方标准。毕竟是全家桶套餐中的一员。<code>Spring Security</code>是一个专注于为<code>Java</code>应用程序提供身份验证和授权的框架。 像所有<code>Spring</code>项目一样，<code>Spring Security</code>的真正强大之处在于它可以轻松扩展以满足自定义需求。</p>\n',headersStr:"核心功能 基本原理 表单认证 源码分析 认证的结果如何在请求间共享 授权流程",content:"# Spring Security\n\nSpring Security是一个功能强大且高度可定制的身份验证和访问控制框架。\n\n它是保护基于Spring的应用程序的官方标准。毕竟是全家桶套餐中的一员。Spring Security是一个专注于为Java应用程序提供身份验证和授权的框架。 像所有Spring项目一样，Spring Security的真正强大之处在于它可以轻松扩展以满足自定义需求。\n\n\n# 核心功能\n\n 1. 认证（你是谁）\n 2. 授权（你能干啥）\n 3. 攻击防护（防止伪造身份）\n\n\n# 基本原理\n\n\n\n上面是Spring Security的基本原理图，最右边就是我们的Controller接口，前面的所有都是过滤器。\n\n简单理解：Spring Security就是一组过滤器，它的核心也就是这样的一条过滤链，访问的所有请求都会经过 Spring Security 的过滤器。\n\n过滤器链上有很多的过滤器，它们的作用就是用来校验用户的身份，每一个过滤器负责处理一种认证方式。\n\n比如：http.formLogin()对应着UsernamePasswordAuthenticationFilter过滤器。\n比如：http.httpBasic()对应着BasicAuthenticationFilter过滤器。\n\n请求到达过滤器时，如UsernamePasswordAuthenticationFilter这个过滤器时，就会触发当前请求是否是一个登陆请求，判断请求中是否携带用户名和密码等。如果符合条件，那么过滤器就会试图去登陆，若是不满足条件，就会下发给下一个过滤器。\n\n例如UsernamePasswordAuthenticationFilter下一个过滤器是BasicAuthenticationFilter。到达BasicAuthenticationFilter后又会判断是否触发当前过滤器的条件，如请求头中是否携带Basic 登陆的信息，如果有就会尝试解码和登陆。\n\n其他自定义过滤器也是同样的逻辑，按照这个流程一个个的往下走。\n\n如果在某个过滤器上认证成功后会在请求上做一个标记，用来表示当前这个请求的用户授权成功了。\n\nExceptionTranslationFilter\n\nExceptionTranslationFilter异常转换过滤器位于整个过滤链的后方，用来转换整个链路中出现的异常，将其转化，顾名思义，转化以意味本身并不处理。\n\n一般其只处理两大类异常：\n\n * AccessDeniedException访问异常；\n * AuthenticationException认证异常；\n\n这个过滤器非常重要，因为它将Java中的异常和HTTP 的响应连接在了一起，这样在处理异常时，我们不用考虑密码错误该跳到什么页面，账号锁定该如何，只需要关注自己的业务逻辑，抛出相应的异常便可。\n\n如果该过滤器检测到AuthenticationException，则将会交给内部的AuthenticationEntryPoint去处理，如果检测到AccessDeniedException，需要先判断当前用户是不是匿名用户，如果是匿名访问，则和前面一样运行AuthenticationEntryPoint，否则会委托给AccessDeniedHandler去处理，而AccessDeniedHandler的默认实现，是AccessDeniedHandlerImpl。\n\n所以ExceptionTranslationFilter内部的AuthenticationEntryPoint是至关重要的，顾名思义：认证的入口点。\n\n> 已注销-ExceptionTranslationFilter详解\n\nFilterSecurityInterceptor\n\n走过前面所有的过滤器后最后会来到FilterSecurityInterceptor，这个过滤器是整个 Spring Security 过滤器链上的最后一环，它能够决定请求能不能访问 API 请求。\n\nFilterSecurityInterceptor从SecurityContextHolder中获取Authentication对象，然后比对用户拥有的权限和资源所需的权限。前者可以通过Authentication对象直接获得，而后者则需要引入我们之前一直未提到过的两个类：SecurityMetadataSource、AccessDecisionManager。\n\n> 已注销-FilterSecurityInterceptor详解 银河架构师-FilterSecurityInterceptor详解\n\n\n# 表单认证\n\n> 程序员劝退师-TAO-SpringSecurity表单认证\n\n\n# 源码分析\n\n\n\nAuthenticationManager自己并不包含验证的逻辑，它的作用是用来管理AuthenticationProvider。\n\ngetProviders()会拿到整个系统中所有实现AuthenticationProvider的实现类，这里上面提到的AuthenticationManager就是来收集并管理所有AuthenticationProvider的实现类，这里就会循环挨个去比对上面AuthenticationToken类型。\n\n不同的Provider支持的Authentication类型是不一样的，根据传入的Authentication类型这里会挑出一个进行校验处理。\n\n> 程序员劝退师-TAO-SpringSecurity表单登录流程源码分析\n\n\n# 认证的结果如何在请求间共享\n\n\n\n> 程序员劝退师-TAO-SpringSecurity认证的结果在请求间共享\n\n\n# 授权流程\n\nSpring Security真正判断请求能否通过是在FilterSecurityInterceptor过滤器中处理的，如果请求不能通过的话就会根据不同的原因抛出异常，抛出异常以后就会由ExceptionTranslationFilter这个过滤器接收处理。\n\n但有一个特殊的过滤器AnonymousAuthenticationFilter\n\nAnonymousAuthenticationFilter\n\nAnonymousAuthenticationFilter中的逻辑比较简单，就是判断当前的SecurityContextHolder中是否有authentication，是否等于null。\n\n这里的判断实际上就在在判断前面的过滤器是否完成身份的认证，或者在Session中拿到身份的证信息。\n\n如果前面的过滤器一个都没认证的话，那么就会创建一个authentication然后set到SecurityContextHolder中，这里放的并不是认证成功后的用户信息，而是一个字符串anonymousUser。\n\n在Spring Security中，AnonymousAuthenticationFilter是所有认证过滤器的最后一个，也就是不管你前面有没有身份认证成功，SecurityContextHolder中一定是会放一个authentication的。如果前面的过滤器认证成功了，那么放的就是用户身份信息，如果一个都没成功，那么就是一个字符串anonymousUser。\n\n\n\n核心：FilterSecurityInterceptor、AccessDecisionManager、AccessDecisionVoter。\n\nFilterSecurityInterceptor：它是授权的主入口。\n\nAccessDecisionManager：访问决定的管理者，是一个接口，它有一个抽象实现AbstractAccessDecisionManager和三个具体实现AffirmativeBased、ConsensusBased、UnanimousBase。它也管理者一组AccessDecisionVoter。\n\nAccessDecisionVoter：从名字就能看出它是做投票的。\n\n当AccessDecisionManager收到一个请求时这一组AccessDecisionVoter会根据自己的逻辑判断这个请求时过还是不过。\n判断有三套逻辑：\n\n * AffirmativeBased：不管有多少个AccessDecisionVoter投不过，只要有一个投通过，那么请求就可以访问。（Spring Security的默认实现逻辑）\n * UnanimousBased：不管有多少个AccessDecisionVoter投通过，只要有一个投不通过，那么请求就不可以访问。\n * ConsensusBased：判断通过的AccessDecisionVoter多还是不通过的多，哪个多就是哪个。\n\n在判断一个请求能不能过需要两块数据：ConfigAttribute、Authentication。\n\nConfigAttribute\n\n请求的权限信息ConfigAttribute。例：a请求需要什么权限，b请求需要什么权限。\n\n请求到达FilterSecurityInterceptor时就会把这个请求路径所需的权限读出来，封装成一组ConfigAttribute对象。\n\nAuthentication\n\nAuthentication实际上就是当前请求的用户的权限信息，也就是当前用户有哪些权限，这个信息就是封装在Authentication里。",normalizedContent:"# spring security\n\nspring security是一个功能强大且高度可定制的身份验证和访问控制框架。\n\n它是保护基于spring的应用程序的官方标准。毕竟是全家桶套餐中的一员。spring security是一个专注于为java应用程序提供身份验证和授权的框架。 像所有spring项目一样，spring security的真正强大之处在于它可以轻松扩展以满足自定义需求。\n\n\n# 核心功能\n\n 1. 认证（你是谁）\n 2. 授权（你能干啥）\n 3. 攻击防护（防止伪造身份）\n\n\n# 基本原理\n\n\n\n上面是spring security的基本原理图，最右边就是我们的controller接口，前面的所有都是过滤器。\n\n简单理解：spring security就是一组过滤器，它的核心也就是这样的一条过滤链，访问的所有请求都会经过 spring security 的过滤器。\n\n过滤器链上有很多的过滤器，它们的作用就是用来校验用户的身份，每一个过滤器负责处理一种认证方式。\n\n比如：http.formlogin()对应着usernamepasswordauthenticationfilter过滤器。\n比如：http.httpbasic()对应着basicauthenticationfilter过滤器。\n\n请求到达过滤器时，如usernamepasswordauthenticationfilter这个过滤器时，就会触发当前请求是否是一个登陆请求，判断请求中是否携带用户名和密码等。如果符合条件，那么过滤器就会试图去登陆，若是不满足条件，就会下发给下一个过滤器。\n\n例如usernamepasswordauthenticationfilter下一个过滤器是basicauthenticationfilter。到达basicauthenticationfilter后又会判断是否触发当前过滤器的条件，如请求头中是否携带basic 登陆的信息，如果有就会尝试解码和登陆。\n\n其他自定义过滤器也是同样的逻辑，按照这个流程一个个的往下走。\n\n如果在某个过滤器上认证成功后会在请求上做一个标记，用来表示当前这个请求的用户授权成功了。\n\nexceptiontranslationfilter\n\nexceptiontranslationfilter异常转换过滤器位于整个过滤链的后方，用来转换整个链路中出现的异常，将其转化，顾名思义，转化以意味本身并不处理。\n\n一般其只处理两大类异常：\n\n * accessdeniedexception访问异常；\n * authenticationexception认证异常；\n\n这个过滤器非常重要，因为它将java中的异常和http 的响应连接在了一起，这样在处理异常时，我们不用考虑密码错误该跳到什么页面，账号锁定该如何，只需要关注自己的业务逻辑，抛出相应的异常便可。\n\n如果该过滤器检测到authenticationexception，则将会交给内部的authenticationentrypoint去处理，如果检测到accessdeniedexception，需要先判断当前用户是不是匿名用户，如果是匿名访问，则和前面一样运行authenticationentrypoint，否则会委托给accessdeniedhandler去处理，而accessdeniedhandler的默认实现，是accessdeniedhandlerimpl。\n\n所以exceptiontranslationfilter内部的authenticationentrypoint是至关重要的，顾名思义：认证的入口点。\n\n> 已注销-exceptiontranslationfilter详解\n\nfiltersecurityinterceptor\n\n走过前面所有的过滤器后最后会来到filtersecurityinterceptor，这个过滤器是整个 spring security 过滤器链上的最后一环，它能够决定请求能不能访问 api 请求。\n\nfiltersecurityinterceptor从securitycontextholder中获取authentication对象，然后比对用户拥有的权限和资源所需的权限。前者可以通过authentication对象直接获得，而后者则需要引入我们之前一直未提到过的两个类：securitymetadatasource、accessdecisionmanager。\n\n> 已注销-filtersecurityinterceptor详解 银河架构师-filtersecurityinterceptor详解\n\n\n# 表单认证\n\n> 程序员劝退师-tao-springsecurity表单认证\n\n\n# 源码分析\n\n\n\nauthenticationmanager自己并不包含验证的逻辑，它的作用是用来管理authenticationprovider。\n\ngetproviders()会拿到整个系统中所有实现authenticationprovider的实现类，这里上面提到的authenticationmanager就是来收集并管理所有authenticationprovider的实现类，这里就会循环挨个去比对上面authenticationtoken类型。\n\n不同的provider支持的authentication类型是不一样的，根据传入的authentication类型这里会挑出一个进行校验处理。\n\n> 程序员劝退师-tao-springsecurity表单登录流程源码分析\n\n\n# 认证的结果如何在请求间共享\n\n\n\n> 程序员劝退师-tao-springsecurity认证的结果在请求间共享\n\n\n# 授权流程\n\nspring security真正判断请求能否通过是在filtersecurityinterceptor过滤器中处理的，如果请求不能通过的话就会根据不同的原因抛出异常，抛出异常以后就会由exceptiontranslationfilter这个过滤器接收处理。\n\n但有一个特殊的过滤器anonymousauthenticationfilter\n\nanonymousauthenticationfilter\n\nanonymousauthenticationfilter中的逻辑比较简单，就是判断当前的securitycontextholder中是否有authentication，是否等于null。\n\n这里的判断实际上就在在判断前面的过滤器是否完成身份的认证，或者在session中拿到身份的证信息。\n\n如果前面的过滤器一个都没认证的话，那么就会创建一个authentication然后set到securitycontextholder中，这里放的并不是认证成功后的用户信息，而是一个字符串anonymoususer。\n\n在spring security中，anonymousauthenticationfilter是所有认证过滤器的最后一个，也就是不管你前面有没有身份认证成功，securitycontextholder中一定是会放一个authentication的。如果前面的过滤器认证成功了，那么放的就是用户身份信息，如果一个都没成功，那么就是一个字符串anonymoususer。\n\n\n\n核心：filtersecurityinterceptor、accessdecisionmanager、accessdecisionvoter。\n\nfiltersecurityinterceptor：它是授权的主入口。\n\naccessdecisionmanager：访问决定的管理者，是一个接口，它有一个抽象实现abstractaccessdecisionmanager和三个具体实现affirmativebased、consensusbased、unanimousbase。它也管理者一组accessdecisionvoter。\n\naccessdecisionvoter：从名字就能看出它是做投票的。\n\n当accessdecisionmanager收到一个请求时这一组accessdecisionvoter会根据自己的逻辑判断这个请求时过还是不过。\n判断有三套逻辑：\n\n * affirmativebased：不管有多少个accessdecisionvoter投不过，只要有一个投通过，那么请求就可以访问。（spring security的默认实现逻辑）\n * unanimousbased：不管有多少个accessdecisionvoter投通过，只要有一个投不通过，那么请求就不可以访问。\n * consensusbased：判断通过的accessdecisionvoter多还是不通过的多，哪个多就是哪个。\n\n在判断一个请求能不能过需要两块数据：configattribute、authentication。\n\nconfigattribute\n\n请求的权限信息configattribute。例：a请求需要什么权限，b请求需要什么权限。\n\n请求到达filtersecurityinterceptor时就会把这个请求路径所需的权限读出来，封装成一组configattribute对象。\n\nauthentication\n\nauthentication实际上就是当前请求的用户的权限信息，也就是当前用户有哪些权限，这个信息就是封装在authentication里。",charsets:{cjk:!0},lastUpdated:"10/7/2022",lastUpdatedTimestamp:1665111399e3},{title:"Spring Security OAuth2",frontmatter:{title:"Spring Security OAuth2",date:"2022-10-03T13:47:50.000Z",permalink:"/pages/ffa63f/",categories:["文章","Spring Security"],tags:["Spring Security"],readingShow:"top"},regularPath:"/01.%E6%96%87%E7%AB%A0/05.Spring/02.Spring%20Security/03.Spring%20Security%20OAuth2.html",relativePath:"01.文章/05.Spring/02.Spring Security/03.Spring Security OAuth2.md",key:"v-17b185ca",path:"/pages/ffa63f/",headers:[{level:2,title:"Oauth2.0协议",slug:"oauth2-0协议",normalizedTitle:"oauth2.0协议",charIndex:29},{level:2,title:"Spring Security Oauth",slug:"spring-security-oauth",normalizedTitle:"spring security oauth",charIndex:2}],excerpt:'<h1 id="spring-security-oauth2"><a class="header-anchor" href="#spring-security-oauth2">#</a> Spring Security Oauth2</h1>\n<h2 id="oauth2-0协议"><a class="header-anchor" href="#oauth2-0协议">#</a> Oauth2.0协议</h2>\n<p><code>Oauth2.0</code>是目前最流行的授权机制，用来授权第三方应用，获取用户数据。</p>\n',headersStr:"Oauth2.0协议 Spring Security Oauth",content:"# Spring Security Oauth2\n\n\n# Oauth2.0协议\n\nOauth2.0是目前最流行的授权机制，用来授权第三方应用，获取用户数据。\n\n> 阮一峰-OAuth 2.0 的一个简单解释\n\n解决了哪些问题？\n\n 1. 颁发的令牌明确限制只能访问部分资源，并不是所有。\n 2. 令牌会存在有效期，有效期过后需要用户重新授权。\n 3. 不会暴露用户的密码，而是使用的令牌。\n\nOauth2.0协议中的角色：\n\n * 服务提供商Provider：谁提供令牌谁就是服务提供商。\n * 资源所有者Resource Owner：资源是指用户相关数据，所有者是用户。\n * 第三方应用Client：想获取资源的应用。\n\n\n\nOauth2.0四种授权方式\n\n 1. 授权码模式（authorization code）\n 2. 简化模式（implicit）\n 3. 密码模式（resource owner password credentials）\n 4. 客户端模式（client credentials）\n\n> 阮一峰-OAuth 2.0 的四种方式\n\n\n# Spring Security Oauth\n\n\n\n实现Oauth协议中服务提供商这个角色它的所有功能，实际上就是两个服务器。\n\n * 认证服务器\n\n> 认证服务器中需要实现四种授权模式（授权码模式、简化模式、客户端模式、密码模式），Spring Security OAuth里面四种模式已经实现了，用户信息生成Token和存储也提供了一套默认的实现。\n\n * 资源服务器\n\n> 所谓的资源服务器就是要保护我们的资源，采用Spring Security过滤器链加上个OAuth2AuthenticationProcessingFilter。\n\nOAuth2AuthenticationProcessingFilter\n\n作用：从请求中获取我们认证服务器发出去的Token，获取到Token后会根据我们在认证服务器中存储Token的存储策略去对应的存储中找到Token信息，然后根据用户信息是否存在，是否有权限来判断是否能访问资源。",normalizedContent:"# spring security oauth2\n\n\n# oauth2.0协议\n\noauth2.0是目前最流行的授权机制，用来授权第三方应用，获取用户数据。\n\n> 阮一峰-oauth 2.0 的一个简单解释\n\n解决了哪些问题？\n\n 1. 颁发的令牌明确限制只能访问部分资源，并不是所有。\n 2. 令牌会存在有效期，有效期过后需要用户重新授权。\n 3. 不会暴露用户的密码，而是使用的令牌。\n\noauth2.0协议中的角色：\n\n * 服务提供商provider：谁提供令牌谁就是服务提供商。\n * 资源所有者resource owner：资源是指用户相关数据，所有者是用户。\n * 第三方应用client：想获取资源的应用。\n\n\n\noauth2.0四种授权方式\n\n 1. 授权码模式（authorization code）\n 2. 简化模式（implicit）\n 3. 密码模式（resource owner password credentials）\n 4. 客户端模式（client credentials）\n\n> 阮一峰-oauth 2.0 的四种方式\n\n\n# spring security oauth\n\n\n\n实现oauth协议中服务提供商这个角色它的所有功能，实际上就是两个服务器。\n\n * 认证服务器\n\n> 认证服务器中需要实现四种授权模式（授权码模式、简化模式、客户端模式、密码模式），spring security oauth里面四种模式已经实现了，用户信息生成token和存储也提供了一套默认的实现。\n\n * 资源服务器\n\n> 所谓的资源服务器就是要保护我们的资源，采用spring security过滤器链加上个oauth2authenticationprocessingfilter。\n\noauth2authenticationprocessingfilter\n\n作用：从请求中获取我们认证服务器发出去的token，获取到token后会根据我们在认证服务器中存储token的存储策略去对应的存储中找到token信息，然后根据用户信息是否存在，是否有权限来判断是否能访问资源。",charsets:{cjk:!0},lastUpdated:"10/7/2022",lastUpdatedTimestamp:1665111399e3},{title:"实战模块化(认证授权服务+资源服务)",frontmatter:{title:"实战模块化(认证授权服务+资源服务)",date:"2022-10-05T16:48:57.000Z",permalink:"/pages/0d4207/",categories:["文章","Spring Security"],tags:["Spring Security"],readingShow:"top"},regularPath:"/01.%E6%96%87%E7%AB%A0/05.Spring/02.Spring%20Security/05.%E5%AE%9E%E6%88%98%E6%A8%A1%E5%9D%97%E5%8C%96(%E8%AE%A4%E8%AF%81%E6%8E%88%E6%9D%83%E6%9C%8D%E5%8A%A1+%E8%B5%84%E6%BA%90%E6%9C%8D%E5%8A%A1).html",relativePath:"01.文章/05.Spring/02.Spring Security/05.实战模块化(认证授权服务+资源服务).md",key:"v-7a84ac66",path:"/pages/0d4207/",headers:[{level:2,title:"项目结构",slug:"项目结构",normalizedTitle:"项目结构",charIndex:96},{level:2,title:"security-common",slug:"security-common",normalizedTitle:"security-common",charIndex:137},{level:2,title:"auth-demo",slug:"auth-demo",normalizedTitle:"auth-demo",charIndex:234},{level:3,title:"TokenConfig",slug:"tokenconfig",normalizedTitle:"tokenconfig",charIndex:1942},{level:3,title:"AuthorizationServerConfig",slug:"authorizationserverconfig",normalizedTitle:"authorizationserverconfig",charIndex:1916},{level:2,title:"resources-demo",slug:"resources-demo",normalizedTitle:"resources-demo",charIndex:247},{level:2,title:"测试",slug:"测试",normalizedTitle:"测试",charIndex:3460}],excerpt:'<h1 id="实战模块化-认证授权服务-资源服务"><a class="header-anchor" href="#实战模块化-认证授权服务-资源服务">#</a> 实战模块化(认证授权服务+资源服务)</h1>\n<p>在微服务的架构下，对单体应用的认证授权服务和资源服务需要进行拆分和模块化处理。</p>\n<p>该内容基于上一篇：<a href="https://rcbb.cc/pages/74390a/" target="_blank" rel="noopener noreferrer">实战单体应用(认证授权服务+资源服务)<OutboundLink/></a></p>\n',headersStr:"项目结构 security-common auth-demo TokenConfig AuthorizationServerConfig resources-demo 测试",content:'# 实战模块化(认证授权服务+资源服务)\n\n在微服务的架构下，对单体应用的认证授权服务和资源服务需要进行拆分和模块化处理。\n\n该内容基于上一篇：实战单体应用(认证授权服务+资源服务)\n\n\n# 项目结构\n\n主要是将整个Spring Security OAuth2共用的配置写到security-common中，这样后期使用非常方便，只需要创建普通Spring Web项目，然后引用security-common模块即可。\n\nSpringSecurity-demo\n---auth-demo\n---resources-demo\n---security-common\n\n\n1\n2\n3\n4\n\n\nSpringSecurity-demo Github地址\n\n\n# security-common\n\nResourceServerConfig\n\n@Configuration\n@EnableResourceServer\n// 开启注解鉴权\n@EnableGlobalMethodSecurity(securedEnabled = true, prePostEnabled = true)\npublic class ResourceServerConfig extends ResourceServerConfigurerAdapter {\n    @Bean\n    @Primary\n    public ResourceServerTokenServices tokenServices() {\n        // 如果资源服务和认证服务在一起可以使用 DefaultTokenServices 进行本地校验\n        // 使用远程服务请求授权服务器校验token，必须指定url，client_id，client_secret\n        RemoteTokenServices services = new RemoteTokenServices();\n        services.setCheckTokenEndpointUrl("http://127.0.0.1:3000/oauth/check_token");\n        services.setClientId("rcbb");\n        services.setClientSecret("rcbb");\n        return services;\n    }\n\n    @Override\n    public void configure(ResourceServerSecurityConfigurer resources) {\n        resources\n                // 验证令牌的服务\n                .tokenServices(tokenServices())\n                .stateless(true);\n    }\n\n    //配置资源服安全规则\n    @Override\n    public void configure(HttpSecurity http) throws Exception {\n        http\n                // 授权的请求\n                .authorizeRequests()\n                // 任何请求\n                .anyRequest()\n                // 需要身份认证\n                .authenticated()\n                .and().csrf().disable();\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n\n\n并且使用Spring的自动装配，src/main/resources/META-INF/spring.factories配置。\n\norg.springframework.boot.autoconfigure.EnableAutoConfiguration=\\\n  cc.rcbb.springsecurity.demo.common.config.ResourceServerConfig\n\n\n1\n2\n\n\n\n# auth-demo\n\n认证服务的主要几个配置AuthorizationServerConfig、TokenConfig、WebSecurityConfig。\n\n\n# TokenConfig\n\nTokenConfig之前单体的时候没有单独配置，是因为默认就是使用内存存储令牌。单独拎出来是为了后续扩展。\n\n@Configuration\npublic class TokenConfig {\n\n    @Bean\n    public TokenStore tokenStore() {\n        // 使用内存存储令牌（普通令牌）\n        return new InMemoryTokenStore();\n    }\n\n}\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n\n# AuthorizationServerConfig\n\n主要内容是开放授权服远程检验token。 因为认证授权服服务和资源服务分开了，所以token无法共享，可以通过远程的方式校验Token。\n\n还有一种思路就是通过Redis，只要认证授权服服务和资源服务是使用的是同一个Redis，那么资源服务就可自己做校验，直接通过资源服务查询Redis。\n\n@Configuration\n@EnableAuthorizationServer\npublic class AuthorizationServerConfig extends AuthorizationServerConfigurerAdapter {\n\n    @Autowired\n    private TokenStore tokenStore;\n    @Autowired\n    private PasswordEncoder passwordEncoder;\n    @Autowired\n    private ClientDetailsService clientDetailsService;\n    @Autowired\n    private AuthenticationManager authenticationManager;\n\n\n    //令牌管理服务\n    @Bean\n    public AuthorizationServerTokenServices tokenService() {\n        DefaultTokenServices service = new DefaultTokenServices();\n        // 客户端详情服务\n        service.setClientDetailsService(clientDetailsService);\n        // 支持刷新令牌\n        service.setSupportRefreshToken(true);\n        // 令牌存储策略\n        service.setTokenStore(tokenStore);\n        // 令牌默认有效期2小时\n        service.setAccessTokenValiditySeconds(7200);\n        // 刷新令牌默认有效期3天\n        service.setRefreshTokenValiditySeconds(259200);\n        return service;\n    }\n\n    @Override\n    public void configure(ClientDetailsServiceConfigurer clients) throws Exception {\n\n        // 基于内存便于测试，使用in-memory存储\n        clients.inMemory()\n                // client_id\n                .withClient("rcbb")\n                // 未加密\n                //.secret("secret")\n                // 加密\n                .secret(passwordEncoder.encode("rcbb"))\n                // 资源列表\n                //.resourceIds("res1")\n                // 该client允许的授权类型authorization_code,password,refresh_token,implicit,client_credentials\n                .authorizedGrantTypes("authorization_code", "password", "client_credentials", "implicit", "refresh_token")\n                // 允许的授权范围\n                .scopes("all", "ROLE_ADMIN", "ROLE_USER")\n                // false跳转到授权页面\n                //.autoApprove(false)\n                //加上验证回调地址\n                .redirectUris("http://rcbb.cc");\n    }\n\n    /**\n     * 配置令牌的访问端点和令牌服务\n     *\n     * @param endpoints the endpoints configurer\n     * @throws Exception\n     */\n    @Override\n    public void configure(AuthorizationServerEndpointsConfigurer endpoints) throws Exception {\n        // 配置认证管理器\n        endpoints.authenticationManager(authenticationManager)\n                .tokenServices(tokenService());\n    }\n\n    /**\n     * @Description: 用来配置令牌端点(Token Endpoint)的安全约束\n     * Token令牌默认是有签名的，并且资源服务需要验证这个签名，\n     * 因此呢，你需要使用一个对称的Key值，用来参与签名计算，\n     * 这个Key值存在于授权服务以及资源服务之中。\n     * 或者你可以使用非对称加密算法来对Token进行签名，\n     * Public Key公布在/oauth/token_key这个URL连接中，\n     * 默认的访问安全规则是"denyAll()"，\n     * 即在默认的情况下它是关闭的，\n     * 你可以注入一个标准的 SpEL 表达式到 AuthorizationServerSecurityConfigurer 这个配置中来将它开启\n     * （例如使用"permitAll()"来开启可能比较合适，因为它是一个公共密钥）。\n     */\n    @Override\n    public void configure(AuthorizationServerSecurityConfigurer security) throws Exception {\n        security\n                // 开放获取token key(这个是做JWT的时候开放的！也就是资源服可以通过这个请求得到JWT加密的key，目前这里没什么用，可以不用配置)\n                .tokenKeyAccess("permitAll()")\n                // 开放远程token检查\n                .checkTokenAccess("permitAll()")\n                // 允许client使用form的方式进行authentication的授权\n                .allowFormAuthenticationForClients();\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n74\n75\n76\n77\n78\n79\n80\n81\n82\n83\n84\n85\n86\n87\n88\n89\n90\n\n\n\n# resources-demo\n\n基本上资源服务就没什么内容了，核心配置直接引入security-common模块即可。\n\n现在就只剩资源UserController了。\n\n@RestController\n@RequestMapping("/user")\npublic class UserController {\n\n    @PreAuthorize("hasAuthority(\'user_add\')")\n    @PostMapping\n    public String save() {\n        return "save() success";\n    }\n\n    @PreAuthorize("hasAuthority(\'user_remove\')")\n    @DeleteMapping\n    public String remove() {\n        return "remove() success";\n    }\n\n    @PreAuthorize("hasAuthority(\'user_update\')")\n    @PutMapping\n    public String update() {\n        return "update() success";\n    }\n\n    @Secured("ROLE_ADMIN")\n    @GetMapping\n    public String list() {\n        return "list() success";\n    }\n\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n\n\n\n# 测试\n\n启动auth-demo和resources-demo服务。\n\n首先先通过账号密码获取token。\n\n\n\n然后再携带token访问资源服务，需要注意是资源服务是另外一个服务。\n\n\n\n测试成功。',normalizedContent:'# 实战模块化(认证授权服务+资源服务)\n\n在微服务的架构下，对单体应用的认证授权服务和资源服务需要进行拆分和模块化处理。\n\n该内容基于上一篇：实战单体应用(认证授权服务+资源服务)\n\n\n# 项目结构\n\n主要是将整个spring security oauth2共用的配置写到security-common中，这样后期使用非常方便，只需要创建普通spring web项目，然后引用security-common模块即可。\n\nspringsecurity-demo\n---auth-demo\n---resources-demo\n---security-common\n\n\n1\n2\n3\n4\n\n\nspringsecurity-demo github地址\n\n\n# security-common\n\nresourceserverconfig\n\n@configuration\n@enableresourceserver\n// 开启注解鉴权\n@enableglobalmethodsecurity(securedenabled = true, prepostenabled = true)\npublic class resourceserverconfig extends resourceserverconfigureradapter {\n    @bean\n    @primary\n    public resourceservertokenservices tokenservices() {\n        // 如果资源服务和认证服务在一起可以使用 defaulttokenservices 进行本地校验\n        // 使用远程服务请求授权服务器校验token，必须指定url，client_id，client_secret\n        remotetokenservices services = new remotetokenservices();\n        services.setchecktokenendpointurl("http://127.0.0.1:3000/oauth/check_token");\n        services.setclientid("rcbb");\n        services.setclientsecret("rcbb");\n        return services;\n    }\n\n    @override\n    public void configure(resourceserversecurityconfigurer resources) {\n        resources\n                // 验证令牌的服务\n                .tokenservices(tokenservices())\n                .stateless(true);\n    }\n\n    //配置资源服安全规则\n    @override\n    public void configure(httpsecurity http) throws exception {\n        http\n                // 授权的请求\n                .authorizerequests()\n                // 任何请求\n                .anyrequest()\n                // 需要身份认证\n                .authenticated()\n                .and().csrf().disable();\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n\n\n并且使用spring的自动装配，src/main/resources/meta-inf/spring.factories配置。\n\norg.springframework.boot.autoconfigure.enableautoconfiguration=\\\n  cc.rcbb.springsecurity.demo.common.config.resourceserverconfig\n\n\n1\n2\n\n\n\n# auth-demo\n\n认证服务的主要几个配置authorizationserverconfig、tokenconfig、websecurityconfig。\n\n\n# tokenconfig\n\ntokenconfig之前单体的时候没有单独配置，是因为默认就是使用内存存储令牌。单独拎出来是为了后续扩展。\n\n@configuration\npublic class tokenconfig {\n\n    @bean\n    public tokenstore tokenstore() {\n        // 使用内存存储令牌（普通令牌）\n        return new inmemorytokenstore();\n    }\n\n}\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n\n# authorizationserverconfig\n\n主要内容是开放授权服远程检验token。 因为认证授权服服务和资源服务分开了，所以token无法共享，可以通过远程的方式校验token。\n\n还有一种思路就是通过redis，只要认证授权服服务和资源服务是使用的是同一个redis，那么资源服务就可自己做校验，直接通过资源服务查询redis。\n\n@configuration\n@enableauthorizationserver\npublic class authorizationserverconfig extends authorizationserverconfigureradapter {\n\n    @autowired\n    private tokenstore tokenstore;\n    @autowired\n    private passwordencoder passwordencoder;\n    @autowired\n    private clientdetailsservice clientdetailsservice;\n    @autowired\n    private authenticationmanager authenticationmanager;\n\n\n    //令牌管理服务\n    @bean\n    public authorizationservertokenservices tokenservice() {\n        defaulttokenservices service = new defaulttokenservices();\n        // 客户端详情服务\n        service.setclientdetailsservice(clientdetailsservice);\n        // 支持刷新令牌\n        service.setsupportrefreshtoken(true);\n        // 令牌存储策略\n        service.settokenstore(tokenstore);\n        // 令牌默认有效期2小时\n        service.setaccesstokenvalidityseconds(7200);\n        // 刷新令牌默认有效期3天\n        service.setrefreshtokenvalidityseconds(259200);\n        return service;\n    }\n\n    @override\n    public void configure(clientdetailsserviceconfigurer clients) throws exception {\n\n        // 基于内存便于测试，使用in-memory存储\n        clients.inmemory()\n                // client_id\n                .withclient("rcbb")\n                // 未加密\n                //.secret("secret")\n                // 加密\n                .secret(passwordencoder.encode("rcbb"))\n                // 资源列表\n                //.resourceids("res1")\n                // 该client允许的授权类型authorization_code,password,refresh_token,implicit,client_credentials\n                .authorizedgranttypes("authorization_code", "password", "client_credentials", "implicit", "refresh_token")\n                // 允许的授权范围\n                .scopes("all", "role_admin", "role_user")\n                // false跳转到授权页面\n                //.autoapprove(false)\n                //加上验证回调地址\n                .redirecturis("http://rcbb.cc");\n    }\n\n    /**\n     * 配置令牌的访问端点和令牌服务\n     *\n     * @param endpoints the endpoints configurer\n     * @throws exception\n     */\n    @override\n    public void configure(authorizationserverendpointsconfigurer endpoints) throws exception {\n        // 配置认证管理器\n        endpoints.authenticationmanager(authenticationmanager)\n                .tokenservices(tokenservice());\n    }\n\n    /**\n     * @description: 用来配置令牌端点(token endpoint)的安全约束\n     * token令牌默认是有签名的，并且资源服务需要验证这个签名，\n     * 因此呢，你需要使用一个对称的key值，用来参与签名计算，\n     * 这个key值存在于授权服务以及资源服务之中。\n     * 或者你可以使用非对称加密算法来对token进行签名，\n     * public key公布在/oauth/token_key这个url连接中，\n     * 默认的访问安全规则是"denyall()"，\n     * 即在默认的情况下它是关闭的，\n     * 你可以注入一个标准的 spel 表达式到 authorizationserversecurityconfigurer 这个配置中来将它开启\n     * （例如使用"permitall()"来开启可能比较合适，因为它是一个公共密钥）。\n     */\n    @override\n    public void configure(authorizationserversecurityconfigurer security) throws exception {\n        security\n                // 开放获取token key(这个是做jwt的时候开放的！也就是资源服可以通过这个请求得到jwt加密的key，目前这里没什么用，可以不用配置)\n                .tokenkeyaccess("permitall()")\n                // 开放远程token检查\n                .checktokenaccess("permitall()")\n                // 允许client使用form的方式进行authentication的授权\n                .allowformauthenticationforclients();\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n74\n75\n76\n77\n78\n79\n80\n81\n82\n83\n84\n85\n86\n87\n88\n89\n90\n\n\n\n# resources-demo\n\n基本上资源服务就没什么内容了，核心配置直接引入security-common模块即可。\n\n现在就只剩资源usercontroller了。\n\n@restcontroller\n@requestmapping("/user")\npublic class usercontroller {\n\n    @preauthorize("hasauthority(\'user_add\')")\n    @postmapping\n    public string save() {\n        return "save() success";\n    }\n\n    @preauthorize("hasauthority(\'user_remove\')")\n    @deletemapping\n    public string remove() {\n        return "remove() success";\n    }\n\n    @preauthorize("hasauthority(\'user_update\')")\n    @putmapping\n    public string update() {\n        return "update() success";\n    }\n\n    @secured("role_admin")\n    @getmapping\n    public string list() {\n        return "list() success";\n    }\n\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n\n\n\n# 测试\n\n启动auth-demo和resources-demo服务。\n\n首先先通过账号密码获取token。\n\n\n\n然后再携带token访问资源服务，需要注意是资源服务是另外一个服务。\n\n\n\n测试成功。',charsets:{cjk:!0},lastUpdated:"10/7/2022",lastUpdatedTimestamp:1665111399e3},{title:"实战单体应用(认证授权服务+资源服务)",frontmatter:{title:"实战单体应用(认证授权服务+资源服务)",date:"2022-10-04T15:48:32.000Z",permalink:"/pages/74390a/",categories:["文章","Spring Security"],tags:["Spring Security"],readingShow:"top"},regularPath:"/01.%E6%96%87%E7%AB%A0/05.Spring/02.Spring%20Security/04.%E5%AE%9E%E6%88%98%E5%8D%95%E4%BD%93%E5%BA%94%E7%94%A8(%E8%AE%A4%E8%AF%81%E6%8E%88%E6%9D%83%E6%9C%8D%E5%8A%A1+%E8%B5%84%E6%BA%90%E6%9C%8D%E5%8A%A1).html",relativePath:"01.文章/05.Spring/02.Spring Security/04.实战单体应用(认证授权服务+资源服务).md",key:"v-17c98162",path:"/pages/74390a/",headers:[{level:2,title:"环境",slug:"环境",normalizedTitle:"环境",charIndex:116},{level:2,title:"授权配置和测试",slug:"授权配置和测试",normalizedTitle:"授权配置和测试",charIndex:2049},{level:3,title:"1、授权服务核心配置",slug:"_1、授权服务核心配置",normalizedTitle:"1、授权服务核心配置",charIndex:2084},{level:3,title:"2、Spring Security 核心配置",slug:"_2、spring-security-核心配置",normalizedTitle:"2、spring security 核心配置",charIndex:2268},{level:3,title:"3、访问测试",slug:"_3、访问测试",normalizedTitle:"3、访问测试",charIndex:2416},{level:3,title:"4、完善配置",slug:"_4、完善配置",normalizedTitle:"4、完善配置",charIndex:2492},{level:3,title:"5、重启服务测试",slug:"_5、重启服务测试",normalizedTitle:"5、重启服务测试",charIndex:4088},{level:3,title:"6、配置密码模式",slug:"_6、配置密码模式",normalizedTitle:"6、配置密码模式",charIndex:5002},{level:3,title:"7、测试简化模式",slug:"_7、测试简化模式",normalizedTitle:"7、测试简化模式",charIndex:5961},{level:3,title:"8、测试客户端模式",slug:"_8、测试客户端模式",normalizedTitle:"8、测试客户端模式",charIndex:6198},{level:2,title:"认证授权配置和测试",slug:"认证授权配置和测试",normalizedTitle:"认证授权配置和测试",charIndex:6542},{level:3,title:"1、创建测试资源",slug:"_1、创建测试资源",normalizedTitle:"1、创建测试资源",charIndex:6556},{level:3,title:"2、获取token后访问资源",slug:"_2、获取token后访问资源",normalizedTitle:"2、获取token后访问资源",charIndex:7025},{level:3,title:"3、新增资源服务配置",slug:"_3、新增资源服务配置",normalizedTitle:"3、新增资源服务配置",charIndex:7300},{level:3,title:"4、给资源添加权限",slug:"_4、给资源添加权限",normalizedTitle:"4、给资源添加权限",charIndex:8026}],excerpt:'<h1 id="实战-认证授权服务-资源服务"><a class="header-anchor" href="#实战-认证授权服务-资源服务">#</a> 实战(认证授权服务+资源服务)</h1>\n<p>有了前面几篇文章的理论支持，是时候上实战了。</p>\n<p>首先以单体的视角来进行集成，也就是认证服务和资源服务在一起，是一个单体项目。</p>\n',headersStr:"环境 授权配置和测试 1、授权服务核心配置 2、Spring Security 核心配置 3、访问测试 4、完善配置 5、重启服务测试 6、配置密码模式 7、测试简化模式 8、测试客户端模式 认证授权配置和测试 1、创建测试资源 2、获取token后访问资源 3、新增资源服务配置 4、给资源添加权限",content:'# 实战(认证授权服务+资源服务)\n\n有了前面几篇文章的理论支持，是时候上实战了。\n\n首先以单体的视角来进行集成，也就是认证服务和资源服务在一起，是一个单体项目。\n\nauth-resources-demo Github地址\n\n\n# 环境\n\n父类 pom 控制所有依赖版本。\n\n<parent>\n\t<groupId>org.springframework.boot</groupId>\n\t<artifactId>spring-boot-starter-parent</artifactId>\n\t<version>2.7.4</version>\n\t<relativePath/>\n</parent>\n\n<properties>\n\t<java.version>11</java.version>\n\t<spring-boot.version>2.3.2.RELEASE</spring-boot.version>\n\t<spring-cloud.version>Hoxton.SR9</spring-cloud.version>\n\t<spring-cloud-alibaba.version>2.2.5.RELEASE</spring-cloud-alibaba.version>\n</properties>\n\n<dependencyManagement>\n\t<dependencies>\n\t\t\x3c!-- spring cloud alibaba 依赖 --\x3e\n\t\t<dependency>\n\t\t\t<groupId>com.alibaba.cloud</groupId>\n\t\t\t<artifactId>spring-cloud-alibaba-dependencies</artifactId>\n\t\t\t<version>${spring-cloud-alibaba.version}</version>\n\t\t\t<type>pom</type>\n\t\t\t<scope>import</scope>\n\t\t</dependency>\n\t\t\x3c!-- spring cloud 依赖 --\x3e\n\t\t<dependency>\n\t\t\t<groupId>org.springframework.cloud</groupId>\n\t\t\t<artifactId>spring-cloud-dependencies</artifactId>\n\t\t\t<version>${spring-cloud.version}</version>\n\t\t\t<type>pom</type>\n\t\t\t<scope>import</scope>\n\t\t</dependency>\n\t</dependencies>\n</dependencyManagement>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n\n\n子类依赖主要是spring-boot-starter-web和spring-security-oauth2-autoconfigure。 通过微服务版本限定后spring-security-oauth2-autoconfigure的最终版本自动适配为2.1.2。\n\n<dependencies>\n\t<dependency>\n\t\t<groupId>org.springframework.boot</groupId>\n\t\t<artifactId>spring-boot-starter-web</artifactId>\n\t</dependency>\n\n\t<dependency>\n\t\t<groupId>org.springframework.boot</groupId>\n\t\t<artifactId>spring-boot-starter-test</artifactId>\n\t\t<scope>test</scope>\n\t</dependency>\n\t\x3c!--安全模块--\x3e\n\t<dependency>\n\t\t<groupId>org.springframework.security.oauth.boot</groupId>\n\t\t<artifactId>spring-security-oauth2-autoconfigure</artifactId>\n\t</dependency>\n\n\t\x3c!--server-api--\x3e\n\t<dependency>\n\t\t<groupId>javax.servlet</groupId>\n\t\t<artifactId>javax.servlet-api</artifactId>\n\t</dependency>\n</dependencies>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n\n\n\n# 授权配置和测试\n\n需要什么配置就写什么配置，主要是梳理流程。\n\n\n# 1、授权服务核心配置\n\nAuthorizationServerConfig\n\n@Configuration\n@EnableAuthorizationServer\npublic class AuthorizationServerConfig extends AuthorizationServerConfigurerAdapter {\n}\n\n\n1\n2\n3\n4\n\n\n\n# 2、Spring Security 核心配置\n\n@Configuration\n@EnableWebSecurity\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n}\n\n\n\n1\n2\n3\n4\n5\n\n\n\n# 3、访问测试\n\n> http://127.0.0.1:8080/oauth/authorize\n\n\n\n任意输入账号密码，会提示账号或密码错误。\n\n\n# 4、完善配置\n\nWebSecurityConfig，因为重点是在于梳理流程，所以用户信息使用硬编码方式。\n\n@Bean\npublic PasswordEncoder passwordEncoder() {\n    return new BCryptPasswordEncoder();\n}\n\n@Autowired\npublic PasswordEncoder passwordEncoders() {\n    return new BCryptPasswordEncoder();\n}\n\n\n@Autowired\npublic void globalUserDetails(AuthenticationManagerBuilder auth) throws Exception {\n    // 配置全局用户信息\n    auth.inMemoryAuthentication().withUser("admin")\n            .password(passwordEncoders().encode("123456"))\n            .authorities(AuthorityUtils.commaSeparatedStringToAuthorityList("user_add,user_update,ROLE_ADMIN"));\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n\n\nAuthorizationServerConfig，授权服配置端点信息。\n\n@Autowired\nprivate PasswordEncoder passwordEncoder;\n\n@Override\npublic void configure(ClientDetailsServiceConfigurer clients) throws Exception {\n    // 基于内存便于测试，使用in-memory存储\n    clients.inMemory()\n            // client_id\n            .withClient("rcbb")\n            // 未加密\n            //.secret("secret")\n            // 加密\n            .secret(passwordEncoder.encode("rcbb"))\n            // 资源列表\n            //.resourceIds("res1")\n            // 该client允许的授权类型authorization_code,password,refresh_token,implicit,client_credentials\n            .authorizedGrantTypes("authorization_code", "password", "client_credentials", "implicit", "refresh_token")\n            // 允许的授权范围\n            .scopes("all", "ROLE_ADMIN", "ROLE_USER")\n            // false跳转到授权页面\n            //.autoApprove(false)\n            //加上验证回调地址\n            .redirectUris("http://rcbb.cc");\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n\n\n\n# 5、重启服务测试\n\n这次我们使用授权码方式进行测试，加上一些参数。\n\nresponse_type=code client_id=rcbb redirect_uri=http://rcbb.cc scope=all\n\n> http://127.0.0.1:8080/oauth/authorize?response_type=code&client_id=rcbb&redirect_uri=http://rcbb.cc&scope=all\n\n出现登录页面，输入我们WebSecurityConfig配置的用户信息admin/123456。\n\n\n\n然后就会成功，并且让我们选择是否授权。\n\n授权成功后，会跳到对应的网址，并且url会接上我们所需的code。\n\n\n\n拿到授权码后，进行获取token的测试。我使用的是PostMan工具进行测试。\n\n首先需要在Authorization上选择对应的Type并填上AuthorizationServerConfig中配置的client信息。\n\n\n\n然后Body体以x-www-form-urlencoded的方式，填上对应的参数。\n\n\n\n请求的curl\n\ncurl --location --request POST \'http://127.0.0.1:8080/oauth/token\' \\\n--header \'Authorization: Basic cmNiYjpyY2Ji\' \\\n--header \'Content-Type: application/x-www-form-urlencoded\' \\\n--data-urlencode \'grant_type=authorization_code\' \\\n--data-urlencode \'code=fB3uZl\' \\\n--data-urlencode \'redirect_uri=http://rcbb.cc\' \\\n--data-urlencode \'scope=all\' \\\n--data-urlencode \'client_id=rcbb\'\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n测试成功，成功获取token。\n\n\n# 6、配置密码模式\n\n使用密码模式，发现并不支持。\n\n\n\nWebSecurityConfig补充配置认证管理器AuthenticationManager。\n\n@Bean\npublic AuthenticationManager authenticationManagerBean() throws Exception {\n\treturn super.authenticationManagerBean();\n}\n\n\n1\n2\n3\n4\n\n\nAuthorizationServerConfig补充配置密码模式。\n\n@Autowired\nprivate AuthenticationManager authenticationManager;\n\n/**\n * 配置令牌的访问端点和令牌服务\n *\n * @param endpoints the endpoints configurer\n * @throws Exception\n */\n@Override\npublic void configure(AuthorizationServerEndpointsConfigurer endpoints) throws Exception {\n    // 配置认证管理器\n    endpoints.authenticationManager(authenticationManager);\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n\n\n重启服务进行测试。\n\n\n\n请求的curl。\n\ncurl --location --request POST \'http://127.0.0.1:8080/oauth/token\' \\\n--header \'Authorization: Basic cmNiYjpyY2Ji\' \\\n--header \'Content-Type: application/x-www-form-urlencoded\' \\\n--data-urlencode \'grant_type=password\' \\\n--data-urlencode \'username=admin\' \\\n--data-urlencode \'password=123456\'\n\n\n1\n2\n3\n4\n5\n6\n\n\n\n# 7、测试简化模式\n\n请求参数：\n\nresponse_type=token client_id=rcbb redirect_uri=http://rcbb.cc scope=all\n\n> http://127.0.0.1:8080/oauth/authorize?response_type=token&client_id=rcbb&redirect_uri=http://rcbb.cc&scope=all\n\n授权成功后，token的信息直接返回在url上了。\n\n\n\n\n# 8、测试客户端模式\n\n\n\n请求的curl。\n\ncurl --location --request POST \'http://127.0.0.1:8080/oauth/token\' \\\n--header \'Authorization: Basic cmNiYjpyY2Ji\' \\\n--header \'Content-Type: application/x-www-form-urlencoded\' \\\n--data-urlencode \'grant_type=client_credentials\' \\\n--data-urlencode \'client_id=rcbb\' \\\n--data-urlencode \'client_secret=rcbb\'\n\n\n1\n2\n3\n4\n5\n6\n\n\n\n# 认证授权配置和测试\n\n\n# 1、创建测试资源\n\n@RestController\n@RequestMapping("/user")\npublic class UserController {\n\n    @PostMapping\n    public String save() {\n        return "save() success";\n    }\n\n    @PutMapping\n    public String update() {\n        return "update() success";\n    }\n\n    @GetMapping\n    public String list() {\n        return "list() success";\n    }\n    \n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n\n\n三个请求：\n\n * post:/user 新增用户信息\n * put:/user 修改用户信息\n * get:/user 获取用户信息\n\n\n# 2、获取token后访问资源\n\n先获取token。\n\n\n\n虽然请求中携带了token值，但是还是401 Unauthorized。\n\n\n\n这是为啥？？？\n\n正常情况下，认证授权服务和资源服务是分开的。\n\n正常认证授权服务是接管/oauth/token、/oauth/token_key、/oauth/check_token，这三个请求，也就是这三个请求会被Spring Security OAuth2处理。\n\n然后我们自己写的资源应该是在资源服务上，例如/user请求就会被Spring Security处理。\n\n那这种单体情况，如何处理？\n\n\n# 3、新增资源服务配置\n\n认证授权服务和资源服务写在一起。\n\nResourceServerConfig资源服务配置。\n\n@Configuration\n@EnableResourceServer\n// 开启注解鉴权\n@EnableGlobalMethodSecurity(securedEnabled = true, prePostEnabled = true)\npublic class ResourceServerConfig extends ResourceServerConfigurerAdapter {\n\n    //配置资源服安全规则\n    @Override\n    public void configure(HttpSecurity http) throws Exception {\n        http\n                // 授权的请求\n                .authorizeRequests()\n                // 任何请求\n                .anyRequest()\n                // 需要身份认证\n                .authenticated()\n                .and().csrf().disable();\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n\n\n重启服务，再次请求。token错误。\n\n\n\n因为默认token是存在内存中（可以配置存储在MySQL、Redis中）的，所以这里重新获取一次token就行了。\n\n\n\n\n# 4、给资源添加权限\n\n@Secured("ROLE_ADMIN")：专门用于判断是否具有角色。\n\n@PreAuthorize("hasAuthority(\'user_add\')")即可判断权限，也可以判断身份，还可以使用正则判断。\n如果是判断身份，那么需要填写@PreAuthorize("hasRole(\'ROLE_ADMIN\')")。\n\n@RestController\n@RequestMapping("/user")\npublic class UserController {\n\n    @PreAuthorize("hasAuthority(\'user_add\')")\n    @PostMapping\n    public String save() {\n        return "save() success";\n    }\n\n    @PreAuthorize("hasAuthority(\'user_remove\')")\n    @DeleteMapping\n    public String remove() {\n        return "remove() success";\n    }\n\n    @PreAuthorize("hasAuthority(\'user_update\')")\n    @PutMapping\n    public String update() {\n        return "update() success";\n    }\n\n    @Secured("ROLE_ADMIN")\n    @GetMapping\n    public String list() {\n        return "list() success";\n    }\n\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n\n\n我们目前的用户信息是在WebSecurityConfig硬编码配置的。\n\n@Autowired\npublic void globalUserDetails(AuthenticationManagerBuilder auth) throws Exception {\n\t// 配置全局用户信息\n\tauth.inMemoryAuthentication().withUser("admin")\n\t\t\t.password(passwordEncoders().encode("123456"))\n\t\t\t.authorities(AuthorityUtils.commaSeparatedStringToAuthorityList("user_add,user_update,ROLE_ADMIN"));\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n所以对应上面的资源所需权限，DELETE:/user是无法访问的。\n\n\n\n其他资源可正常访问。',normalizedContent:'# 实战(认证授权服务+资源服务)\n\n有了前面几篇文章的理论支持，是时候上实战了。\n\n首先以单体的视角来进行集成，也就是认证服务和资源服务在一起，是一个单体项目。\n\nauth-resources-demo github地址\n\n\n# 环境\n\n父类 pom 控制所有依赖版本。\n\n<parent>\n\t<groupid>org.springframework.boot</groupid>\n\t<artifactid>spring-boot-starter-parent</artifactid>\n\t<version>2.7.4</version>\n\t<relativepath/>\n</parent>\n\n<properties>\n\t<java.version>11</java.version>\n\t<spring-boot.version>2.3.2.release</spring-boot.version>\n\t<spring-cloud.version>hoxton.sr9</spring-cloud.version>\n\t<spring-cloud-alibaba.version>2.2.5.release</spring-cloud-alibaba.version>\n</properties>\n\n<dependencymanagement>\n\t<dependencies>\n\t\t\x3c!-- spring cloud alibaba 依赖 --\x3e\n\t\t<dependency>\n\t\t\t<groupid>com.alibaba.cloud</groupid>\n\t\t\t<artifactid>spring-cloud-alibaba-dependencies</artifactid>\n\t\t\t<version>${spring-cloud-alibaba.version}</version>\n\t\t\t<type>pom</type>\n\t\t\t<scope>import</scope>\n\t\t</dependency>\n\t\t\x3c!-- spring cloud 依赖 --\x3e\n\t\t<dependency>\n\t\t\t<groupid>org.springframework.cloud</groupid>\n\t\t\t<artifactid>spring-cloud-dependencies</artifactid>\n\t\t\t<version>${spring-cloud.version}</version>\n\t\t\t<type>pom</type>\n\t\t\t<scope>import</scope>\n\t\t</dependency>\n\t</dependencies>\n</dependencymanagement>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n\n\n子类依赖主要是spring-boot-starter-web和spring-security-oauth2-autoconfigure。 通过微服务版本限定后spring-security-oauth2-autoconfigure的最终版本自动适配为2.1.2。\n\n<dependencies>\n\t<dependency>\n\t\t<groupid>org.springframework.boot</groupid>\n\t\t<artifactid>spring-boot-starter-web</artifactid>\n\t</dependency>\n\n\t<dependency>\n\t\t<groupid>org.springframework.boot</groupid>\n\t\t<artifactid>spring-boot-starter-test</artifactid>\n\t\t<scope>test</scope>\n\t</dependency>\n\t\x3c!--安全模块--\x3e\n\t<dependency>\n\t\t<groupid>org.springframework.security.oauth.boot</groupid>\n\t\t<artifactid>spring-security-oauth2-autoconfigure</artifactid>\n\t</dependency>\n\n\t\x3c!--server-api--\x3e\n\t<dependency>\n\t\t<groupid>javax.servlet</groupid>\n\t\t<artifactid>javax.servlet-api</artifactid>\n\t</dependency>\n</dependencies>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n\n\n\n# 授权配置和测试\n\n需要什么配置就写什么配置，主要是梳理流程。\n\n\n# 1、授权服务核心配置\n\nauthorizationserverconfig\n\n@configuration\n@enableauthorizationserver\npublic class authorizationserverconfig extends authorizationserverconfigureradapter {\n}\n\n\n1\n2\n3\n4\n\n\n\n# 2、spring security 核心配置\n\n@configuration\n@enablewebsecurity\npublic class websecurityconfig extends websecurityconfigureradapter {\n}\n\n\n\n1\n2\n3\n4\n5\n\n\n\n# 3、访问测试\n\n> http://127.0.0.1:8080/oauth/authorize\n\n\n\n任意输入账号密码，会提示账号或密码错误。\n\n\n# 4、完善配置\n\nwebsecurityconfig，因为重点是在于梳理流程，所以用户信息使用硬编码方式。\n\n@bean\npublic passwordencoder passwordencoder() {\n    return new bcryptpasswordencoder();\n}\n\n@autowired\npublic passwordencoder passwordencoders() {\n    return new bcryptpasswordencoder();\n}\n\n\n@autowired\npublic void globaluserdetails(authenticationmanagerbuilder auth) throws exception {\n    // 配置全局用户信息\n    auth.inmemoryauthentication().withuser("admin")\n            .password(passwordencoders().encode("123456"))\n            .authorities(authorityutils.commaseparatedstringtoauthoritylist("user_add,user_update,role_admin"));\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n\n\nauthorizationserverconfig，授权服配置端点信息。\n\n@autowired\nprivate passwordencoder passwordencoder;\n\n@override\npublic void configure(clientdetailsserviceconfigurer clients) throws exception {\n    // 基于内存便于测试，使用in-memory存储\n    clients.inmemory()\n            // client_id\n            .withclient("rcbb")\n            // 未加密\n            //.secret("secret")\n            // 加密\n            .secret(passwordencoder.encode("rcbb"))\n            // 资源列表\n            //.resourceids("res1")\n            // 该client允许的授权类型authorization_code,password,refresh_token,implicit,client_credentials\n            .authorizedgranttypes("authorization_code", "password", "client_credentials", "implicit", "refresh_token")\n            // 允许的授权范围\n            .scopes("all", "role_admin", "role_user")\n            // false跳转到授权页面\n            //.autoapprove(false)\n            //加上验证回调地址\n            .redirecturis("http://rcbb.cc");\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n\n\n\n# 5、重启服务测试\n\n这次我们使用授权码方式进行测试，加上一些参数。\n\nresponse_type=code client_id=rcbb redirect_uri=http://rcbb.cc scope=all\n\n> http://127.0.0.1:8080/oauth/authorize?response_type=code&client_id=rcbb&redirect_uri=http://rcbb.cc&scope=all\n\n出现登录页面，输入我们websecurityconfig配置的用户信息admin/123456。\n\n\n\n然后就会成功，并且让我们选择是否授权。\n\n授权成功后，会跳到对应的网址，并且url会接上我们所需的code。\n\n\n\n拿到授权码后，进行获取token的测试。我使用的是postman工具进行测试。\n\n首先需要在authorization上选择对应的type并填上authorizationserverconfig中配置的client信息。\n\n\n\n然后body体以x-www-form-urlencoded的方式，填上对应的参数。\n\n\n\n请求的curl\n\ncurl --location --request post \'http://127.0.0.1:8080/oauth/token\' \\\n--header \'authorization: basic cmniyjpyy2ji\' \\\n--header \'content-type: application/x-www-form-urlencoded\' \\\n--data-urlencode \'grant_type=authorization_code\' \\\n--data-urlencode \'code=fb3uzl\' \\\n--data-urlencode \'redirect_uri=http://rcbb.cc\' \\\n--data-urlencode \'scope=all\' \\\n--data-urlencode \'client_id=rcbb\'\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n测试成功，成功获取token。\n\n\n# 6、配置密码模式\n\n使用密码模式，发现并不支持。\n\n\n\nwebsecurityconfig补充配置认证管理器authenticationmanager。\n\n@bean\npublic authenticationmanager authenticationmanagerbean() throws exception {\n\treturn super.authenticationmanagerbean();\n}\n\n\n1\n2\n3\n4\n\n\nauthorizationserverconfig补充配置密码模式。\n\n@autowired\nprivate authenticationmanager authenticationmanager;\n\n/**\n * 配置令牌的访问端点和令牌服务\n *\n * @param endpoints the endpoints configurer\n * @throws exception\n */\n@override\npublic void configure(authorizationserverendpointsconfigurer endpoints) throws exception {\n    // 配置认证管理器\n    endpoints.authenticationmanager(authenticationmanager);\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n\n\n重启服务进行测试。\n\n\n\n请求的curl。\n\ncurl --location --request post \'http://127.0.0.1:8080/oauth/token\' \\\n--header \'authorization: basic cmniyjpyy2ji\' \\\n--header \'content-type: application/x-www-form-urlencoded\' \\\n--data-urlencode \'grant_type=password\' \\\n--data-urlencode \'username=admin\' \\\n--data-urlencode \'password=123456\'\n\n\n1\n2\n3\n4\n5\n6\n\n\n\n# 7、测试简化模式\n\n请求参数：\n\nresponse_type=token client_id=rcbb redirect_uri=http://rcbb.cc scope=all\n\n> http://127.0.0.1:8080/oauth/authorize?response_type=token&client_id=rcbb&redirect_uri=http://rcbb.cc&scope=all\n\n授权成功后，token的信息直接返回在url上了。\n\n\n\n\n# 8、测试客户端模式\n\n\n\n请求的curl。\n\ncurl --location --request post \'http://127.0.0.1:8080/oauth/token\' \\\n--header \'authorization: basic cmniyjpyy2ji\' \\\n--header \'content-type: application/x-www-form-urlencoded\' \\\n--data-urlencode \'grant_type=client_credentials\' \\\n--data-urlencode \'client_id=rcbb\' \\\n--data-urlencode \'client_secret=rcbb\'\n\n\n1\n2\n3\n4\n5\n6\n\n\n\n# 认证授权配置和测试\n\n\n# 1、创建测试资源\n\n@restcontroller\n@requestmapping("/user")\npublic class usercontroller {\n\n    @postmapping\n    public string save() {\n        return "save() success";\n    }\n\n    @putmapping\n    public string update() {\n        return "update() success";\n    }\n\n    @getmapping\n    public string list() {\n        return "list() success";\n    }\n    \n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n\n\n三个请求：\n\n * post:/user 新增用户信息\n * put:/user 修改用户信息\n * get:/user 获取用户信息\n\n\n# 2、获取token后访问资源\n\n先获取token。\n\n\n\n虽然请求中携带了token值，但是还是401 unauthorized。\n\n\n\n这是为啥？？？\n\n正常情况下，认证授权服务和资源服务是分开的。\n\n正常认证授权服务是接管/oauth/token、/oauth/token_key、/oauth/check_token，这三个请求，也就是这三个请求会被spring security oauth2处理。\n\n然后我们自己写的资源应该是在资源服务上，例如/user请求就会被spring security处理。\n\n那这种单体情况，如何处理？\n\n\n# 3、新增资源服务配置\n\n认证授权服务和资源服务写在一起。\n\nresourceserverconfig资源服务配置。\n\n@configuration\n@enableresourceserver\n// 开启注解鉴权\n@enableglobalmethodsecurity(securedenabled = true, prepostenabled = true)\npublic class resourceserverconfig extends resourceserverconfigureradapter {\n\n    //配置资源服安全规则\n    @override\n    public void configure(httpsecurity http) throws exception {\n        http\n                // 授权的请求\n                .authorizerequests()\n                // 任何请求\n                .anyrequest()\n                // 需要身份认证\n                .authenticated()\n                .and().csrf().disable();\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n\n\n重启服务，再次请求。token错误。\n\n\n\n因为默认token是存在内存中（可以配置存储在mysql、redis中）的，所以这里重新获取一次token就行了。\n\n\n\n\n# 4、给资源添加权限\n\n@secured("role_admin")：专门用于判断是否具有角色。\n\n@preauthorize("hasauthority(\'user_add\')")即可判断权限，也可以判断身份，还可以使用正则判断。\n如果是判断身份，那么需要填写@preauthorize("hasrole(\'role_admin\')")。\n\n@restcontroller\n@requestmapping("/user")\npublic class usercontroller {\n\n    @preauthorize("hasauthority(\'user_add\')")\n    @postmapping\n    public string save() {\n        return "save() success";\n    }\n\n    @preauthorize("hasauthority(\'user_remove\')")\n    @deletemapping\n    public string remove() {\n        return "remove() success";\n    }\n\n    @preauthorize("hasauthority(\'user_update\')")\n    @putmapping\n    public string update() {\n        return "update() success";\n    }\n\n    @secured("role_admin")\n    @getmapping\n    public string list() {\n        return "list() success";\n    }\n\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n\n\n我们目前的用户信息是在websecurityconfig硬编码配置的。\n\n@autowired\npublic void globaluserdetails(authenticationmanagerbuilder auth) throws exception {\n\t// 配置全局用户信息\n\tauth.inmemoryauthentication().withuser("admin")\n\t\t\t.password(passwordencoders().encode("123456"))\n\t\t\t.authorities(authorityutils.commaseparatedstringtoauthoritylist("user_add,user_update,role_admin"));\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n所以对应上面的资源所需权限，delete:/user是无法访问的。\n\n\n\n其他资源可正常访问。',charsets:{cjk:!0},lastUpdated:"10/7/2022",lastUpdatedTimestamp:1665111399e3},{title:"Spring Security OAuth2自定义授权模式",frontmatter:{title:"Spring Security OAuth2自定义授权模式",date:"2022-10-06T17:49:55.000Z",permalink:"/pages/412c27/",categories:["文章","Spring Security"],tags:["Spring Security"],readingShow:"top"},regularPath:"/01.%E6%96%87%E7%AB%A0/05.Spring/02.Spring%20Security/06.Spring%20Security%20OAuth2%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%88%E6%9D%83%E6%A8%A1%E5%BC%8F.html",relativePath:"01.文章/05.Spring/02.Spring Security/06.Spring Security OAuth2自定义授权模式.md",key:"v-f1e6536c",path:"/pages/412c27/",headers:[{level:2,title:"验证码登录",slug:"验证码登录",normalizedTitle:"验证码登录",charIndex:158},{level:2,title:"实现思路",slug:"实现思路",normalizedTitle:"实现思路",charIndex:638},{level:2,title:"验证码模式",slug:"验证码模式",normalizedTitle:"验证码模式",charIndex:987},{level:3,title:"1、实现UserDetailsService",slug:"_1、实现userdetailsservice",normalizedTitle:"1、实现userdetailsservice",charIndex:997},{level:3,title:"2、自定义AuthenticationToken",slug:"_2、自定义authenticationtoken",normalizedTitle:"2、自定义authenticationtoken",charIndex:1286},{level:3,title:"3、自定义TokenGranter",slug:"_3、自定义tokengranter",normalizedTitle:"3、自定义tokengranter",charIndex:2597},{level:3,title:"4、自定义AuthenticationProvider",slug:"_4、自定义authenticationprovider",normalizedTitle:"4、自定义authenticationprovider",charIndex:5365},{level:3,title:"5、将自定义的Provider注入容器",slug:"_5、将自定义的provider注入容器",normalizedTitle:"5、将自定义的provider注入容器",charIndex:7722},{level:3,title:"6、加到CompositeTokenGranter集合中",slug:"_6、加到compositetokengranter集合中",normalizedTitle:"6、加到compositetokengranter集合中",charIndex:8759},{level:3,title:"7、测试",slug:"_7、测试",normalizedTitle:"7、测试",charIndex:10634}],excerpt:'<h1 id="spring-security-oauth2自定义授权模式"><a class="header-anchor" href="#spring-security-oauth2自定义授权模式">#</a> Spring Security OAuth2自定义授权模式</h1>\n<p>在实际开发过程中<code>Spring Security OAuth2</code>默认提供的五种授权模式不够用的情况下，就需要我们自己来定义授权模式。</p>\n<p>例如国内比较常见的应用场景：短信验证码授权登录。</p>\n',headersStr:"验证码登录 实现思路 验证码模式 1、实现UserDetailsService 2、自定义AuthenticationToken 3、自定义TokenGranter 4、自定义AuthenticationProvider 5、将自定义的Provider注入容器 6、加到CompositeTokenGranter集合中 7、测试",content:'# Spring Security OAuth2自定义授权模式\n\n在实际开发过程中Spring Security OAuth2默认提供的五种授权模式不够用的情况下，就需要我们自己来定义授权模式。\n\n例如国内比较常见的应用场景：短信验证码授权登录。\n\nSpringSecurity-demo Github地址\n\n\n# 验证码登录\n\n其实实现这个需求有多种实现方式：\n\n第一种：写一个controller接收登录，逻辑通过则在controller中组装token。\n\n第二种：以Spring Security认证的思维，编写一个短信验证码的过滤器，配置在过滤器链上，加一个登录成功处理器，在登录成功后组装token。\n\n这两种写法都可以实现短信验证码登录的这个需求，但是都不太规范。\n\n规范写法：按照Spring Security OAuth2框架的的设计思想来完成自定义授权模式。\n\nSpring Security OAuth2的授权思想和Spring Security有点区别：授权认证的时机不同。\n\n> Spring Security OAuth2是在请求进入controller后得到请求参数，然后使用Spring Security OAuth2提供的一些内置组件完成token的生成，而Spring Security则是依赖过滤器链来实现的，Spring Security是在请求未到达controller时，被匹配的过滤器拦截，然后进行认证，生成token。\n\n\n# 实现思路\n\n密码模式的授权流程：\n\n\n\n重要知识点：\n\n * 每种授权类型都对应一个实现类TokenGranter\n * 所有TokenGranter实现类都通过CompositeTokenGranter中的tokenGranters集合存储\n * 通过判断grantType参数来定位具体使用哪个TokenGranter实现类来处理\n * 每种授权方式都对应一个AuthenticationProvider\n * TokenGranter类会new一个AuthenticationToken实现类传递给ProviderManager\n\n所以自定义一个授权类型，必须构建自己的TokenGranter、AuthenticationProvider、AuthenticationToken。\n\n\n# 验证码模式\n\n\n# 1、实现UserDetailsService\n\n后面主要填充的逻辑就是根据phone查询用户信息。\n\n@Service\npublic class SmsUserDetailsServiceImpl implements UserDetailsService {\n    @Override\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        return null;\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n\n# 2、自定义AuthenticationToken\n\nSmsVerificationCodeAuthenticationToken。\n\npublic class SmsVerificationCodeAuthenticationToken extends AbstractAuthenticationToken {\n    private final Object principal;\n\n    public SmsVerificationCodeAuthenticationToken(Object principal) {\n        super(null);\n        this.principal = principal;\n        setAuthenticated(false);\n    }\n\n\n    public SmsVerificationCodeAuthenticationToken(Object principal, Collection<? extends GrantedAuthority> authorities) {\n        super(authorities);\n        this.principal = principal;\n        // 设置为已认证\n        super.setAuthenticated(true);\n    }\n\n    @Override\n    public Object getCredentials() {\n        return null;\n    }\n\n    @Override\n    public Object getPrincipal() {\n        return this.principal;\n    }\n\n    public void setAuthenticated(boolean isAuthenticated) throws IllegalArgumentException {\n        if (isAuthenticated) {\n            throw new IllegalArgumentException( "Cannot set this token to trusted - use constructor which takes a GrantedAuthority list instead");\n        }\n        super.setAuthenticated(false);\n    }\n\n    @Override\n    public void eraseCredentials() {\n        super.eraseCredentials();\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n\n\n\n# 3、自定义TokenGranter\n\nSmsVerificationCodeTokenGranter。\n\n@Slf4j\n@Slf4j\npublic class SmsVerificationCodeTokenGranter extends AbstractTokenGranter {\n\n    /**\n     * 授权类型，和password是一样的作用\n     */\n    private static final String grantType = "sms_code";\n\n    private final AuthenticationManager authenticationManager;\n\n    public SmsVerificationCodeTokenGranter(AuthenticationManager authenticationManager, AuthorizationServerTokenServices tokenServices, ClientDetailsService clientDetailsService, OAuth2RequestFactory requestFactory) {\n        this(authenticationManager, tokenServices, clientDetailsService, requestFactory, grantType);\n    }\n\n    protected SmsVerificationCodeTokenGranter(AuthenticationManager authenticationManager, AuthorizationServerTokenServices tokenServices, ClientDetailsService clientDetailsService, OAuth2RequestFactory requestFactory, String grantType) {\n        super(tokenServices, clientDetailsService, requestFactory, grantType);\n        this.authenticationManager = authenticationManager;\n    }\n\n    @Override\n    protected OAuth2Authentication getOAuth2Authentication(ClientDetails client, TokenRequest tokenRequest) {\n        // 得到请求参数\n        Map<String, String> parameters = new LinkedHashMap<>(tokenRequest.getRequestParameters());\n        // 手机号\n        String phone = parameters.get("phone");\n        // 验证码\n        String verificationCode = parameters.get("verification_code");\n        log.info("[登录请求 phone<{}> verificationCode<{}>]", phone, verificationCode);\n        \n        Authentication userAuth = new SmsVerificationCodeAuthenticationToken(parameters);\n        ((AbstractAuthenticationToken) userAuth).setDetails(parameters);\n        try {\n            // 调用authenticationManager进行认证，会根据SmsVerificationCodeAuthenticationToken找到对应的Provider\n            userAuth = authenticationManager.authenticate(userAuth);\n        } catch (AccountStatusException ase) {\n            //covers expired, locked, disabled cases (mentioned in section 5.2, draft 31)\n            throw new InvalidGrantException(ase.getMessage());\n        } catch (BadCredentialsException e) {\n            // If the username/password are wrong the spec says we should send 400/invalid grant\n            throw new InvalidGrantException(e.getMessage());\n        }\n        if (userAuth == null || !userAuth.isAuthenticated()) {\n            throw new InvalidGrantException("Could not authenticate user,phone number is: " + phone);\n        }\n        OAuth2Request storedOAuth2Request = getRequestFactory().createOAuth2Request(client, tokenRequest);\n        return new OAuth2Authentication(storedOAuth2Request, userAuth);\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n\n\n\n# 4、自定义AuthenticationProvider\n\n这个类就是真正的处理类，经过TokenGranter后，会找到对应的AuthenticationProvider。\n\nSmsVerificationCodeAuthenticationProvider。\n\n@Slf4j\npublic class SmsVerificationCodeAuthenticationProvider implements AuthenticationProvider {\n\n    /**\n     * 得到UserDetailsService对象用来获取用户信息\n     */\n    private UserDetailsService userDetailsService;\n\n    public SmsVerificationCodeAuthenticationProvider(UserDetailsService userDetailsService) {\n        this.userDetailsService = userDetailsService;\n    }\n\n    public void setUserDetailsService(UserDetailsService userDetailsService) {\n        this.userDetailsService = userDetailsService;\n    }\n\n    /**\n     * 过请求参数查询数据库用户信息，进行匹配\n     *\n     * @param authentication the authentication request object.\n     * @return\n     * @throws AuthenticationException\n     */\n    @Override\n    public Authentication authenticate(Authentication authentication) throws AuthenticationException {\n        SmsVerificationCodeAuthenticationToken authenticationToken = (SmsVerificationCodeAuthenticationToken) authentication;\n        Map<String, String> parameters = (Map<String, String>) authenticationToken.getPrincipal();\n        log.info("[parameters <{}>]", parameters);\n        // 手机号\n        String phone = parameters.get("phone");\n        // 验证码\n        String verificationCode = parameters.get("verification_code");\n        log.info("[登录请求 phone<{}> verificationCode<{}>]", phone, verificationCode);\n        // 1.根据phone查询用户信息是否存在\n        // 2.判断验证码 是否有效\n\n        UserDetails user = new User("rcbb", "rcbb", true, true, true, true,\n                AuthorityUtils.commaSeparatedStringToAuthorityList("user_add,user_update,ROLE_ADMIN"));\n\n        SmsVerificationCodeAuthenticationToken smsVerificationCodeAuthenticationToken = new SmsVerificationCodeAuthenticationToken(user, user.getAuthorities());\n        smsVerificationCodeAuthenticationToken.setDetails(authenticationToken.getDetails());\n        return smsVerificationCodeAuthenticationToken;\n    }\n\n    @Override\n    public boolean supports(Class<?> authentication) {\n        // 判断authentication是否是SmsCodeAuthenticationToken类型\n        return SmsVerificationCodeAuthenticationToken.class.isAssignableFrom(authentication);\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n\n\n\n# 5、将自定义的Provider注入容器\n\nSmsVerificationCodeAuthenticationConfig。\n\n@Component\npublic class SmsVerificationCodeAuthenticationConfig extends SecurityConfigurerAdapter<DefaultSecurityFilterChain, HttpSecurity> {\n    @Autowired\n    private UserDetailsService userDetailsService;\n\n    @Override\n    public void configure(HttpSecurity builder) throws Exception {\n        SmsVerificationCodeAuthenticationProvider provider = new SmsVerificationCodeAuthenticationProvider(userDetailsService);\n        builder.authenticationProvider(provider);\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n在WebSecurityConfig中，注入自定义的授权配置类。\n\n@Configuration\n@EnableWebSecurity\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n\n    // 短信安全验证配置\n    @Autowired\n    private SmsVerificationCodeAuthenticationConfig smsVerificationCodeAuthenticationConfig;\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.apply(smsVerificationCodeAuthenticationConfig);\n    }\n    \n    ...\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\n\n# 6、加到CompositeTokenGranter集合中\n\nclients中的authorizedGrantTypes允许的授权类型添加sms_code。\n\n将自定义的授权类型加到集合CompositeTokenGranter中。\n\n@Configuration\n@EnableAuthorizationServer\npublic class AuthorizationServerConfig extends AuthorizationServerConfigurerAdapter {\n\n    @Override\n    public void configure(ClientDetailsServiceConfigurer clients) throws Exception {\n\n        // 基于内存便于测试，使用in-memory存储\n        clients.inMemory()\n                // client_id\n                .withClient("rcbb")\n                // 未加密\n                //.secret("secret")\n                // 加密\n                .secret(passwordEncoder.encode("rcbb"))\n                // 资源列表\n                //.resourceIds("res1")\n                // 该client允许的授权类型authorization_code,password,refresh_token,implicit,client_credentials\n                .authorizedGrantTypes("authorization_code", "password", "client_credentials", "implicit", "refresh_token","sms_code")\n                // 允许的授权范围\n                .scopes("all", "ROLE_ADMIN", "ROLE_USER")\n                // false跳转到授权页面\n                //.autoApprove(false)\n                //加上验证回调地址\n                .redirectUris("http://rcbb.cc");\n    }\n    \n    @Override\n    public void configure(AuthorizationServerEndpointsConfigurer endpoints) throws Exception {\n        List<TokenGranter> tokenGranters = new ArrayList<>(Collections.singleton(endpoints.getTokenGranter()));\n        tokenGranters.add(new SmsVerificationCodeTokenGranter(authenticationManager, tokenService(), clientDetailsService, new DefaultOAuth2RequestFactory(clientDetailsService)));\n\n        // 配置认证管理器\n        endpoints.authenticationManager(authenticationManager)\n                .tokenServices(tokenService())\n                .tokenGranter(new CompositeTokenGranter(tokenGranters));\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n\n\n\n# 7、测试\n\n使用自定义grant_type=sms_code。\n\n\n\n该请求curl：\n\ncurl --location --request POST \'http://127.0.0.1:3000/oauth/token\' \\\n--header \'Authorization: Basic cmNiYjpyY2Ji\' \\\n--header \'Content-Type: application/x-www-form-urlencoded\' \\\n--data-urlencode \'grant_type=sms_code\' \\\n--data-urlencode \'phone=13838384388\' \\\n--data-urlencode \'verification_code=123456\'\n\n\n1\n2\n3\n4\n5\n6\n\n\n上面例子仅为梳理整个流程，还缺少业务逻辑上数据的校验。',normalizedContent:'# spring security oauth2自定义授权模式\n\n在实际开发过程中spring security oauth2默认提供的五种授权模式不够用的情况下，就需要我们自己来定义授权模式。\n\n例如国内比较常见的应用场景：短信验证码授权登录。\n\nspringsecurity-demo github地址\n\n\n# 验证码登录\n\n其实实现这个需求有多种实现方式：\n\n第一种：写一个controller接收登录，逻辑通过则在controller中组装token。\n\n第二种：以spring security认证的思维，编写一个短信验证码的过滤器，配置在过滤器链上，加一个登录成功处理器，在登录成功后组装token。\n\n这两种写法都可以实现短信验证码登录的这个需求，但是都不太规范。\n\n规范写法：按照spring security oauth2框架的的设计思想来完成自定义授权模式。\n\nspring security oauth2的授权思想和spring security有点区别：授权认证的时机不同。\n\n> spring security oauth2是在请求进入controller后得到请求参数，然后使用spring security oauth2提供的一些内置组件完成token的生成，而spring security则是依赖过滤器链来实现的，spring security是在请求未到达controller时，被匹配的过滤器拦截，然后进行认证，生成token。\n\n\n# 实现思路\n\n密码模式的授权流程：\n\n\n\n重要知识点：\n\n * 每种授权类型都对应一个实现类tokengranter\n * 所有tokengranter实现类都通过compositetokengranter中的tokengranters集合存储\n * 通过判断granttype参数来定位具体使用哪个tokengranter实现类来处理\n * 每种授权方式都对应一个authenticationprovider\n * tokengranter类会new一个authenticationtoken实现类传递给providermanager\n\n所以自定义一个授权类型，必须构建自己的tokengranter、authenticationprovider、authenticationtoken。\n\n\n# 验证码模式\n\n\n# 1、实现userdetailsservice\n\n后面主要填充的逻辑就是根据phone查询用户信息。\n\n@service\npublic class smsuserdetailsserviceimpl implements userdetailsservice {\n    @override\n    public userdetails loaduserbyusername(string username) throws usernamenotfoundexception {\n        return null;\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n\n# 2、自定义authenticationtoken\n\nsmsverificationcodeauthenticationtoken。\n\npublic class smsverificationcodeauthenticationtoken extends abstractauthenticationtoken {\n    private final object principal;\n\n    public smsverificationcodeauthenticationtoken(object principal) {\n        super(null);\n        this.principal = principal;\n        setauthenticated(false);\n    }\n\n\n    public smsverificationcodeauthenticationtoken(object principal, collection<? extends grantedauthority> authorities) {\n        super(authorities);\n        this.principal = principal;\n        // 设置为已认证\n        super.setauthenticated(true);\n    }\n\n    @override\n    public object getcredentials() {\n        return null;\n    }\n\n    @override\n    public object getprincipal() {\n        return this.principal;\n    }\n\n    public void setauthenticated(boolean isauthenticated) throws illegalargumentexception {\n        if (isauthenticated) {\n            throw new illegalargumentexception( "cannot set this token to trusted - use constructor which takes a grantedauthority list instead");\n        }\n        super.setauthenticated(false);\n    }\n\n    @override\n    public void erasecredentials() {\n        super.erasecredentials();\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n\n\n\n# 3、自定义tokengranter\n\nsmsverificationcodetokengranter。\n\n@slf4j\n@slf4j\npublic class smsverificationcodetokengranter extends abstracttokengranter {\n\n    /**\n     * 授权类型，和password是一样的作用\n     */\n    private static final string granttype = "sms_code";\n\n    private final authenticationmanager authenticationmanager;\n\n    public smsverificationcodetokengranter(authenticationmanager authenticationmanager, authorizationservertokenservices tokenservices, clientdetailsservice clientdetailsservice, oauth2requestfactory requestfactory) {\n        this(authenticationmanager, tokenservices, clientdetailsservice, requestfactory, granttype);\n    }\n\n    protected smsverificationcodetokengranter(authenticationmanager authenticationmanager, authorizationservertokenservices tokenservices, clientdetailsservice clientdetailsservice, oauth2requestfactory requestfactory, string granttype) {\n        super(tokenservices, clientdetailsservice, requestfactory, granttype);\n        this.authenticationmanager = authenticationmanager;\n    }\n\n    @override\n    protected oauth2authentication getoauth2authentication(clientdetails client, tokenrequest tokenrequest) {\n        // 得到请求参数\n        map<string, string> parameters = new linkedhashmap<>(tokenrequest.getrequestparameters());\n        // 手机号\n        string phone = parameters.get("phone");\n        // 验证码\n        string verificationcode = parameters.get("verification_code");\n        log.info("[登录请求 phone<{}> verificationcode<{}>]", phone, verificationcode);\n        \n        authentication userauth = new smsverificationcodeauthenticationtoken(parameters);\n        ((abstractauthenticationtoken) userauth).setdetails(parameters);\n        try {\n            // 调用authenticationmanager进行认证，会根据smsverificationcodeauthenticationtoken找到对应的provider\n            userauth = authenticationmanager.authenticate(userauth);\n        } catch (accountstatusexception ase) {\n            //covers expired, locked, disabled cases (mentioned in section 5.2, draft 31)\n            throw new invalidgrantexception(ase.getmessage());\n        } catch (badcredentialsexception e) {\n            // if the username/password are wrong the spec says we should send 400/invalid grant\n            throw new invalidgrantexception(e.getmessage());\n        }\n        if (userauth == null || !userauth.isauthenticated()) {\n            throw new invalidgrantexception("could not authenticate user,phone number is: " + phone);\n        }\n        oauth2request storedoauth2request = getrequestfactory().createoauth2request(client, tokenrequest);\n        return new oauth2authentication(storedoauth2request, userauth);\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n\n\n\n# 4、自定义authenticationprovider\n\n这个类就是真正的处理类，经过tokengranter后，会找到对应的authenticationprovider。\n\nsmsverificationcodeauthenticationprovider。\n\n@slf4j\npublic class smsverificationcodeauthenticationprovider implements authenticationprovider {\n\n    /**\n     * 得到userdetailsservice对象用来获取用户信息\n     */\n    private userdetailsservice userdetailsservice;\n\n    public smsverificationcodeauthenticationprovider(userdetailsservice userdetailsservice) {\n        this.userdetailsservice = userdetailsservice;\n    }\n\n    public void setuserdetailsservice(userdetailsservice userdetailsservice) {\n        this.userdetailsservice = userdetailsservice;\n    }\n\n    /**\n     * 过请求参数查询数据库用户信息，进行匹配\n     *\n     * @param authentication the authentication request object.\n     * @return\n     * @throws authenticationexception\n     */\n    @override\n    public authentication authenticate(authentication authentication) throws authenticationexception {\n        smsverificationcodeauthenticationtoken authenticationtoken = (smsverificationcodeauthenticationtoken) authentication;\n        map<string, string> parameters = (map<string, string>) authenticationtoken.getprincipal();\n        log.info("[parameters <{}>]", parameters);\n        // 手机号\n        string phone = parameters.get("phone");\n        // 验证码\n        string verificationcode = parameters.get("verification_code");\n        log.info("[登录请求 phone<{}> verificationcode<{}>]", phone, verificationcode);\n        // 1.根据phone查询用户信息是否存在\n        // 2.判断验证码 是否有效\n\n        userdetails user = new user("rcbb", "rcbb", true, true, true, true,\n                authorityutils.commaseparatedstringtoauthoritylist("user_add,user_update,role_admin"));\n\n        smsverificationcodeauthenticationtoken smsverificationcodeauthenticationtoken = new smsverificationcodeauthenticationtoken(user, user.getauthorities());\n        smsverificationcodeauthenticationtoken.setdetails(authenticationtoken.getdetails());\n        return smsverificationcodeauthenticationtoken;\n    }\n\n    @override\n    public boolean supports(class<?> authentication) {\n        // 判断authentication是否是smscodeauthenticationtoken类型\n        return smsverificationcodeauthenticationtoken.class.isassignablefrom(authentication);\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n\n\n\n# 5、将自定义的provider注入容器\n\nsmsverificationcodeauthenticationconfig。\n\n@component\npublic class smsverificationcodeauthenticationconfig extends securityconfigureradapter<defaultsecurityfilterchain, httpsecurity> {\n    @autowired\n    private userdetailsservice userdetailsservice;\n\n    @override\n    public void configure(httpsecurity builder) throws exception {\n        smsverificationcodeauthenticationprovider provider = new smsverificationcodeauthenticationprovider(userdetailsservice);\n        builder.authenticationprovider(provider);\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n在websecurityconfig中，注入自定义的授权配置类。\n\n@configuration\n@enablewebsecurity\npublic class websecurityconfig extends websecurityconfigureradapter {\n\n    // 短信安全验证配置\n    @autowired\n    private smsverificationcodeauthenticationconfig smsverificationcodeauthenticationconfig;\n\n    @override\n    protected void configure(httpsecurity http) throws exception {\n        http.apply(smsverificationcodeauthenticationconfig);\n    }\n    \n    ...\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\n\n# 6、加到compositetokengranter集合中\n\nclients中的authorizedgranttypes允许的授权类型添加sms_code。\n\n将自定义的授权类型加到集合compositetokengranter中。\n\n@configuration\n@enableauthorizationserver\npublic class authorizationserverconfig extends authorizationserverconfigureradapter {\n\n    @override\n    public void configure(clientdetailsserviceconfigurer clients) throws exception {\n\n        // 基于内存便于测试，使用in-memory存储\n        clients.inmemory()\n                // client_id\n                .withclient("rcbb")\n                // 未加密\n                //.secret("secret")\n                // 加密\n                .secret(passwordencoder.encode("rcbb"))\n                // 资源列表\n                //.resourceids("res1")\n                // 该client允许的授权类型authorization_code,password,refresh_token,implicit,client_credentials\n                .authorizedgranttypes("authorization_code", "password", "client_credentials", "implicit", "refresh_token","sms_code")\n                // 允许的授权范围\n                .scopes("all", "role_admin", "role_user")\n                // false跳转到授权页面\n                //.autoapprove(false)\n                //加上验证回调地址\n                .redirecturis("http://rcbb.cc");\n    }\n    \n    @override\n    public void configure(authorizationserverendpointsconfigurer endpoints) throws exception {\n        list<tokengranter> tokengranters = new arraylist<>(collections.singleton(endpoints.gettokengranter()));\n        tokengranters.add(new smsverificationcodetokengranter(authenticationmanager, tokenservice(), clientdetailsservice, new defaultoauth2requestfactory(clientdetailsservice)));\n\n        // 配置认证管理器\n        endpoints.authenticationmanager(authenticationmanager)\n                .tokenservices(tokenservice())\n                .tokengranter(new compositetokengranter(tokengranters));\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n\n\n\n# 7、测试\n\n使用自定义grant_type=sms_code。\n\n\n\n该请求curl：\n\ncurl --location --request post \'http://127.0.0.1:3000/oauth/token\' \\\n--header \'authorization: basic cmniyjpyy2ji\' \\\n--header \'content-type: application/x-www-form-urlencoded\' \\\n--data-urlencode \'grant_type=sms_code\' \\\n--data-urlencode \'phone=13838384388\' \\\n--data-urlencode \'verification_code=123456\'\n\n\n1\n2\n3\n4\n5\n6\n\n\n上面例子仅为梳理整个流程，还缺少业务逻辑上数据的校验。',charsets:{cjk:!0},lastUpdated:"10/7/2022",lastUpdatedTimestamp:1665111399e3},{title:"SpringBoot使用logback日志框架超详细教程",frontmatter:{title:"SpringBoot使用logback日志框架超详细教程",date:"2022-08-16T17:34:22.000Z",permalink:"/pages/9dc988/",categories:["文章","Spring"],tags:["SpringBoot","logback"],readingShow:"top"},regularPath:"/01.%E6%96%87%E7%AB%A0/05.Spring/99.%E6%94%B6%E8%97%8F/01.SpringBoot%E4%BD%BF%E7%94%A8logback%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6%E8%B6%85%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B.html",relativePath:"01.文章/05.Spring/99.收藏/01.SpringBoot使用logback日志框架超详细教程.md",key:"v-3ab41fda",path:"/pages/9dc988/",headers:[{level:2,title:"前言",slug:"前言",normalizedTitle:"前言",charIndex:2},{level:2,title:"为什么使用logback",slug:"为什么使用logback",normalizedTitle:"为什么使用logback",charIndex:272},{level:2,title:"开始使用",slug:"开始使用",normalizedTitle:"开始使用",charIndex:401},{level:2,title:"一、添加依赖",slug:"一、添加依赖",normalizedTitle:"一、添加依赖",charIndex:410},{level:2,title:"二、默认配置",slug:"二、默认配置",normalizedTitle:"二、默认配置",charIndex:721},{level:2,title:"三、logback-spring.xml详解",slug:"三、logback-spring-xml详解",normalizedTitle:"三、logback-spring.xml详解",charIndex:1160},{level:3,title:"3.1、<configuration>元素",slug:"_3-1、-configuration-元素",normalizedTitle:"3.1、<configuration>元素",charIndex:2333},{level:3,title:"3.2、<logger>元素",slug:"_3-2、-logger-元素",normalizedTitle:"3.2、<logger>元素",charIndex:2481},{level:3,title:"3.3、<root>元素",slug:"_3-3、-root-元素",normalizedTitle:"3.3、<root>元素",charIndex:2990},{level:3,title:"3.4、<appender>元素",slug:"_3-4、-appender-元素",normalizedTitle:"3.4、<appender>元素",charIndex:3254},{level:4,title:"3.4.1、ConsoleAppender",slug:"_3-4-1、consoleappender",normalizedTitle:"3.4.1、consoleappender",charIndex:3902},{level:4,title:"3.4.2、RollingFileAppender",slug:"_3-4-2、rollingfileappender",normalizedTitle:"3.4.2、rollingfileappender",charIndex:3962},{level:4,title:"3.4.3、滚动策略",slug:"_3-4-3、滚动策略",normalizedTitle:"3.4.3、滚动策略",charIndex:4416},{level:3,title:"3.5、<encoder>元素",slug:"_3-5、-encoder-元素",normalizedTitle:"3.5、<encoder>元素",charIndex:4786},{level:3,title:"3.6、<filter>元素",slug:"_3-6、-filter-元素",normalizedTitle:"3.6、<filter>元素",charIndex:5299},{level:2,title:"四、详细的logback-spring.xml示例",slug:"四、详细的logback-spring-xml示例",normalizedTitle:"四、详细的logback-spring.xml示例",charIndex:6714},{level:2,title:"五、附加内容",slug:"五、附加内容",normalizedTitle:"五、附加内容",charIndex:14200}],excerpt:'<h2 id="前言"><a class="header-anchor" href="#前言">#</a> 前言</h2>\n<p>项目中日志系统是必不可少的，目前比较流行的日志框架有 log4j、logback 等，可能大家还不知道，这两个框架的作者是同一个人，Logback 旨在作为流行的 log4j 项目的后续版本，从而恢复 log4j 离开的位置。</p>\n<p>另外 slf4j(Simple Logging Facade for Java) 则是一个日志门面框架，提供了日志系统中常用的接口，logback 和 log4j 则对slf4j 进行了实现。</p>\n<p>我们本文将讲述如何在 SpringBoot 中应用 logback+slf4j 实现日志的记录。</p>\n',headersStr:"前言 为什么使用logback 开始使用 一、添加依赖 二、默认配置 三、logback-spring.xml详解 3.1、<configuration>元素 3.2、<logger>元素 3.3、<root>元素 3.4、<appender>元素 3.4.1、ConsoleAppender 3.4.2、RollingFileAppender 3.4.3、滚动策略 3.5、<encoder>元素 3.6、<filter>元素 四、详细的logback-spring.xml示例 五、附加内容",content:'# 前言\n\n项目中日志系统是必不可少的，目前比较流行的日志框架有 log4j、logback 等，可能大家还不知道，这两个框架的作者是同一个人，Logback 旨在作为流行的 log4j 项目的后续版本，从而恢复 log4j 离开的位置。\n\n另外 slf4j(Simple Logging Facade for Java) 则是一个日志门面框架，提供了日志系统中常用的接口，logback 和 log4j 则对slf4j 进行了实现。\n\n我们本文将讲述如何在 SpringBoot 中应用 logback+slf4j 实现日志的记录。\n\n\n# 为什么使用logback\n\n * Logback 是log4j 框架的作者开发的新一代日志框架，它效率更高、能够适应诸多的运行环境，同时天然支持 SLF4J。\n * Logback 的定制性更加灵活，同时也是 SpringBoot 的内置日志框架。\n\n\n# 开始使用\n\n\n# 一、添加依赖\n\n实际开发中我们直接引入spring-boot-starter-web依赖即可，因为spring-boot-starter-web包含了spring-boot-starter。\n而spring-boot-starter包含了spring-boot-starter-logging，所以我们只需要引入 web 组件即可。\n\n<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-web</artifactId>\n</dependency>\n\n\n1\n2\n3\n4\n\n\n\n# 二、默认配置\n\n默认情况下 SpringBoot 将日志输出到控制台，不会写到日志文件。\n\n如果要编写除控制台输出之外的日志文件，则需在 application.properties 中设置 logging.file 或 logging.path 属性。\n注：二者不能同时使用，如若同时使用，则只有 logging.file 生效。\n\n * logging.file=文件名（设置文件，可以是绝对路径，也可以是相对路径。例：logging.file=my.log）\n\n * logging.path=日志文件路径（设置目录，会在该目录下创建spring.log文件，并写入日志内容。例：logging.path=/var/log）\n\n * logging.level.包名=指定包下的日志级别\n\n * logging.pattern.console=日志打印规则\n\n可以看到这种方式配置简单，但是能实现的功能也非常有限，如果想要更复杂的需求，就需要下面的定制化配置了。\n\n\n# 三、logback-spring.xml详解\n\nSpringBoot 官方推荐优先使用带有-spring的文件名作为你的日志配置（如使用logback-spring.xml，而不是logback.xml），命名为logback-spring.xml的日志配置文件，将 xml 放至src/main/resource下面。\n\n也可以使用自定义的名称，比如logback-config.xml，只需要在 application.properties 文件中使用logging.config=classpath:logback-config.xml指定即可。\n\n在讲解 logback-spring.xml之前我们先来了解三个单词：\n\n * Logger（记录器）\n * Appenders（附加器）\n * Layouts（布局）\n\nLogback 基于三个主要类：Logger，Appender和Layout。\n\n这三种类型的组件协同工作，使开发人员能够根据消息类型和级别记录消息，并在运行时控制这些消息的格式以及报告的位置。\n\n首先给出一个基本的 xml 配置如下：\n\n<configuration>\n \n  <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">\n    \x3c!-- encoders are assigned the type\n         ch.qos.logback.classic.encoder.PatternLayoutEncoder by default --\x3e\n    <encoder>\n      <pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>\n    </encoder>\n  </appender>\n \n  <logger name="chapters.configuration" level="INFO"/>\n \n  \x3c!-- Strictly speaking, the level attribute is not necessary since --\x3e\n  \x3c!-- the level of the root level is set to DEBUG by default.       --\x3e\n  <root level="DEBUG">          \n    <appender-ref ref="STDOUT" />\n  </root>  \n  \n</configuration>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n\n\n\n# 3.1、<configuration>元素\n\nlogback.xml 配置文件的基本结构可以描述为<configuration>元素，包含零个或多个<appender>元素，后跟零个或多个<logger>元素，后跟最多一个<root>元素(也可以没有)。\n\n下图说明了这种基本结构：\n\n\n\n\n# 3.2、<logger>元素\n\n<logger>元素只接受一个必需的 name 属性，一个可选的 level 属性和一个可选的 additivity 属性，允许值为 true 或 false 。\n\nlevel 属性的值允许一个不区分大小写的字符串值 TRACE，DEBUG，INFO，WARN，ERROR，ALL 或 OFF。\n\n<logger>元素可以包含零个或多个<appender-ref>元素。\n\n这样引用的每个 appender 都被添加到指定的 logger 中，logger 元素级别具有继承性。\n\n例1：仅为根记录器分配了级别。此级别值 DEBUG 由其他记录器 X，X.Y和X.Y.Z 继承。\n\n\n\n例2：所有记录器都有一个指定的级别值。级别继承不起作用。\n\n\n\n例3：记录器 root，X 和 X.Y.Z 分别被分配了 DEBUG，INFO 和 ERROR 级别。Logger X.Y 从其父 X 继承其级别值。\n\n\n\n例4：记录器 root 和 X 分别被分配了 DEBUG 和 INFO 级别。记录器 X.Y 和 X.Y.Z 从其最近的父 X 继承其级别值，该父级具有指定的级别。\n\n\n\n\n# 3.3、<root>元素\n\n<root>元素配置根记录器。\n它支持单个属性，即 level 属性。\n它不允许任何其他属性，因为 additivity 标志不适用于根记录器。\n此外，由于根记录器已被命名为 ROOT ，因此它也不允许使用 name 属性。\n\nlevel 属性的值可以是不区分大小写的字符串 TRACE，DEBUG，INFO，WARN，ERROR，ALL 或 OFF 之一。\n\n<root>元素可以包含零个或多个<appender-ref>元素。\n\n这样引用的每个 appender 都被添加到根记录器中。\n\n\n# 3.4、<appender>元素\n\nappender 使用<appender>元素配置，该元素采用两个必需属性 name 和 class。\nname 属性指定 appender 的名称，而 class 属性指定要实例化的 appender 类的完全限定名称。\n\n<appender>元素可以包含零个或一个<layout>元素，零个或多个<encoder>元素以及零个或多个<filter>元素。\n\n下图说明了常见的结构：\n\n\n\n重要：在 logback 中，输出目标称为 appender，addAppender 方法将 appender 添加到给定的记录器 logger。\n给定记录器的每个启用的日志记录请求都将转发到该记录器中的所有 appender 以及层次结构中较高的 appender。 换句话说，appender 是从记录器层次结构中附加地继承的。\n\n例如，如果将控制台 appender 添加到根记录器，则所有启用的日志记录请求将至少在控制台上打印。\n\n如果另外将文件追加器添加到记录器（例如L），则对 L 和 L 的子项启用的记录请求将打印在文件和控制台上。\n通过将记录器的 additivity 标志设置为 false，可以覆盖此默认行为，以便不再添加 appender 累积。\n\nAppender 是一个接口，它有许多子接口和实现类，具体如下图所示：\n\n\n\n其中最重要的两个Appender为：ConsoleAppender 、RollingFileAppender。\n\n# 3.4.1、ConsoleAppender\n\nConsoleAppender，如名称所示，将日志输出到控制台上。\n\n# 3.4.2、RollingFileAppender\n\nRollingFileAppender，是 FileAppender 的一个子类，扩展了 FileAppender，具有翻转日志文件的功能。\n\n例如，RollingFileAppender 可以记录到名为 log.txt 文件的文件，并且一旦满足某个条件，就将其日志记录目标更改为另一个文件。\n\n有两个与 RollingFileAppender 交互的重要子组件。\n\n * RollingPolicy：负责执行翻转所需的操作。\n * TriggeringPolicy：将确定是否以及何时发生翻转。\n\n因此，RollingPolicy 负责什么和 TriggeringPolicy 负责什么时候。\n\n作为任何用途，RollingFileAppender 必须同时设置 RollingPolicy 和 TriggeringPolicy。\n但是，如果其 RollingPolicy 也实现了TriggeringPolicy 接口，则只需要显式指定前者。\n\n# 3.4.3、滚动策略\n\nTimeBasedRollingPolicy：可能是最受欢迎的滚动策略。它根据时间定义翻转策略，例如按天或按月。\nTimeBasedRollingPolicy 承担滚动和触发所述翻转的责任。实际上，TimeBasedTriggeringPolicy 实现了 RollingPolicy 和 TriggeringPolicy 接口。\n\nSizeAndTimeBasedRollingPolicy：有时您可能希望按日期归档文件，但同时限制每个日志文件的大小，特别是如果后处理工具对日志文件施加大小限制。\n为了满足此要求，logback 提供了 SizeAndTimeBasedRollingPolicy ，它是 TimeBasedRollingPolicy 的一个子类，实现了基于时间和日志文件大小的翻滚策略。\n\n\n# 3.5、<encoder>元素\n\nencoder 中最重要就是 pattern 属性，它负责控制输出日志的格式，这里给出一个我自己写的示例：\n\n> %d{yyyy-MM-dd HH:mm:ss.SSS} %highlight(%-5level) --- [%15.15(%thread)] %cyan(%-40.40(%logger{40})) : %msg%n\n\n\n\n%d{yyyy-MM-dd HH:mm:ss.SSS}：日期\n%-5level：日志级别\n%highlight()：颜色，info为蓝色，warn为浅红，error为加粗红，debug为黑色\n%thread：打印日志的线程\n%15.15():如果记录的线程字符长度小于15(第一个)则用空格在左侧补齐,如果字符长度大于15(第二个),则从开头开始截断多余的字符 \n%logger：日志输出的类名\n%-40.40()：如果记录的logger字符长度小于40(第一个)则用空格在右侧补齐,如果字符长度大于40(第二个),则从开头开始截断多余的字符\n%cyan：颜色\n%msg：日志输出内容\n%n：换行符\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\n\n# 3.6、<filter>元素\n\nfilter 中最重要的两个过滤器为：LevelFilter、ThresholdFilter。\n\nLevelFilter 根据精确的级别匹配过滤事件。\n如果事件的级别等于配置的级别，则筛选器接受或拒绝该事件，具体取决于 onMatch 和 onMismatch 属性的配置。\n\n例如下面配置将只打印 INFO 级别的日志，其余的全部禁止打印输出：\n\n<configuration>\n  <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">\n    <filter class="ch.qos.logback.classic.filter.LevelFilter">\n      <level>INFO</level>\n      <onMatch>ACCEPT</onMatch>\n      <onMismatch>DENY</onMismatch>\n    </filter>\n    <encoder>\n      <pattern>\n        %-4relative [%thread] %-5level %logger{30} - %msg%n\n      </pattern>\n    </encoder>\n  </appender>\n  <root level="DEBUG">\n    <appender-ref ref="CONSOLE" />\n  </root>\n</configuration>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n\n\nThresholdFilter 过滤低于指定阈值的事件。\n对于等于或高于阈值的事件，ThresholdFilter 将在调用其 decision方法时响应 NEUTRAL。\n\n但是，将拒绝级别低于阈值的事件，例如下面的配置将拒绝所有低于 INFO 级别的日志，只输出 INFO 以及以上级别的日志：\n\n<configuration>\n  <appender name="CONSOLE"\n    class="ch.qos.logback.core.ConsoleAppender">\n    \x3c!-- deny all events with a level below INFO, that is TRACE and DEBUG --\x3e\n    <filter class="ch.qos.logback.classic.filter.ThresholdFilter">\n      <level>INFO</level>\n    </filter>\n    <encoder>\n      <pattern>\n        %-4relative [%thread] %-5level %logger{30} - %msg%n\n      </pattern>\n    </encoder>\n  </appender>\n  <root level="DEBUG">\n    <appender-ref ref="CONSOLE" />\n  </root>\n</configuration>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n\n\n\n# 四、详细的logback-spring.xml示例\n\n以上介绍了 xml 中重要的几个元素，下面将我配置的 xml 贴出来以供参考（实现了基于日期和大小翻滚的策略，以及经 INFO 和 ERROR 日志区分输出，还有规范日志输出格式等）\n\n<?xml version="1.0" encoding="UTF-8"?>\n<configuration debug="true">\n \n    \x3c!-- appender是configuration的子节点，是负责写日志的组件。 --\x3e\n    \x3c!-- ConsoleAppender：把日志输出到控制台 --\x3e\n    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">\n        \x3c!-- 默认情况下，每个日志事件都会立即刷新到基础输出流。 这种默认方法更安全，因为如果应用程序在没有正确关闭appender的情况下退出，则日志事件不会丢失。\n         但是，为了显着增加日志记录吞吐量，您可能希望将immediateFlush属性设置为false --\x3e\n        \x3c!--<immediateFlush>true</immediateFlush>--\x3e\n        <encoder>\n            \x3c!-- %37():如果字符没有37个字符长度,则左侧用空格补齐 --\x3e\n            \x3c!-- %-37():如果字符没有37个字符长度,则右侧用空格补齐 --\x3e\n            \x3c!-- %15.15():如果记录的线程字符长度小于15(第一个)则用空格在左侧补齐,如果字符长度大于15(第二个),则从开头开始截断多余的字符 --\x3e\n            \x3c!-- %-40.40():如果记录的logger字符长度小于40(第一个)则用空格在右侧补齐,如果字符长度大于40(第二个),则从开头开始截断多余的字符 --\x3e\n            \x3c!-- %msg：日志打印详情 --\x3e\n            \x3c!-- %n:换行符 --\x3e\n            \x3c!-- %highlight():转换说明符以粗体红色显示其级别为ERROR的事件，红色为WARN，BLUE为INFO，以及其他级别的默认颜色。 --\x3e\n            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} %highlight(%-5level) --- [%15.15(%thread)] %cyan(%-40.40(%logger{40})) : %msg%n</pattern>\n            \x3c!-- 控制台也要使用UTF-8，不要使用GBK，否则会中文乱码 --\x3e\n            <charset>UTF-8</charset>\n        </encoder>\n    </appender>\n \n    \x3c!-- info 日志--\x3e\n    \x3c!-- RollingFileAppender：滚动记录文件，先将日志记录到指定文件，当符合某个条件时，将日志记录到其他文件 --\x3e\n    \x3c!-- 以下的大概意思是：1.先按日期存日志，日期变了，将前一天的日志文件名重命名为XXX%日期%索引，新的日志仍然是project_info.log --\x3e\n    \x3c!--             2.如果日期没有发生变化，但是当前日志的文件大小超过10MB时，对当前日志进行分割 重命名--\x3e\n    <appender name="info_log" class="ch.qos.logback.core.rolling.RollingFileAppender">\n        \x3c!--日志文件路径和名称--\x3e\n        <File>logs/project_info.log</File>\n        \x3c!--是否追加到文件末尾,默认为true--\x3e\n        <append>true</append>\n        <filter class="ch.qos.logback.classic.filter.LevelFilter">\n            <level>ERROR</level>\n            <onMatch>DENY</onMatch>\x3c!-- 如果命中ERROR就禁止这条日志 --\x3e\n            <onMismatch>ACCEPT</onMismatch>\x3c!-- 如果没有命中就使用这条规则 --\x3e\n        </filter>\n        \x3c!--有两个与RollingFileAppender交互的重要子组件。 第一个RollingFileAppender子组件，即RollingPolicy:负责执行翻转所需的操作。\n         RollingFileAppender的第二个子组件，即TriggeringPolicy:将确定是否以及何时发生翻转。 因此，RollingPolicy负责什么和TriggeringPolicy负责什么时候.\n        作为任何用途，RollingFileAppender必须同时设置RollingPolicy和TriggeringPolicy,但是，如果其RollingPolicy也实现了TriggeringPolicy接口，则只需要显式指定前者。--\x3e\n        <rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">\n            \x3c!-- 日志文件的名字会根据fileNamePattern的值，每隔一段时间改变一次 --\x3e\n            \x3c!-- 文件名：logs/project_info.2017-12-05.0.log --\x3e\n            \x3c!-- 注意：SizeAndTimeBasedRollingPolicy中 ％i和％d令牌都是强制性的，必须存在，要不会报错 --\x3e\n            <fileNamePattern>logs/project_info.%d.%i.log</fileNamePattern>\n            \x3c!-- 每产生一个日志文件，该日志文件的保存期限为30天, ps:maxHistory的单位是根据fileNamePattern中的翻转策略自动推算出来的,例如上面选用了yyyy-MM-dd,则单位为天\n            如果上面选用了yyyy-MM,则单位为月,另外上面的单位默认为yyyy-MM-dd--\x3e\n            <maxHistory>30</maxHistory>\n            \x3c!-- 每个日志文件到10mb的时候开始切分，最多保留30天，但最大到20GB，哪怕没到30天也要删除多余的日志 --\x3e\n            <totalSizeCap>20GB</totalSizeCap>\n            \x3c!-- maxFileSize:这是活动文件的大小，默认值是10MB，测试时可改成5KB看效果 --\x3e\n            <maxFileSize>10MB</maxFileSize>\n        </rollingPolicy>\n        \x3c!--编码器--\x3e\n        <encoder>\n            \x3c!-- pattern节点，用来设置日志的输入格式 ps:日志文件中没有设置颜色,否则颜色部分会有ESC[0:39em等乱码--\x3e\n            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} %-5level --- [%15.15(%thread)] %-40.40(%logger{40}) : %msg%n</pattern>\n            \x3c!-- 记录日志的编码:此处设置字符集 - --\x3e\n            <charset>UTF-8</charset>\n        </encoder>\n    </appender>\n \n    \x3c!-- error 日志--\x3e\n    \x3c!-- RollingFileAppender：滚动记录文件，先将日志记录到指定文件，当符合某个条件时，将日志记录到其他文件 --\x3e\n    \x3c!-- 以下的大概意思是：1.先按日期存日志，日期变了，将前一天的日志文件名重命名为XXX%日期%索引，新的日志仍然是project_error.log --\x3e\n    \x3c!--             2.如果日期没有发生变化，但是当前日志的文件大小超过10MB时，对当前日志进行分割 重命名--\x3e\n    <appender name="error_log" class="ch.qos.logback.core.rolling.RollingFileAppender">\n        \x3c!--日志文件路径和名称--\x3e\n        <File>logs/project_error.log</File>\n        \x3c!--是否追加到文件末尾,默认为true--\x3e\n        <append>true</append>\n        \x3c!-- ThresholdFilter过滤低于指定阈值的事件。 对于等于或高于阈值的事件，ThresholdFilter将在调用其decision（）方法时响应NEUTRAL。 但是，将拒绝级别低于阈值的事件 --\x3e\n        <filter class="ch.qos.logback.classic.filter.ThresholdFilter">\n            <level>ERROR</level>\x3c!-- 低于ERROR级别的日志（debug,info）将被拒绝，等于或者高于ERROR的级别将相应NEUTRAL --\x3e\n        </filter>\n        \x3c!--有两个与RollingFileAppender交互的重要子组件。 第一个RollingFileAppender子组件，即RollingPolicy:负责执行翻转所需的操作。\n        RollingFileAppender的第二个子组件，即TriggeringPolicy:将确定是否以及何时发生翻转。 因此，RollingPolicy负责什么和TriggeringPolicy负责什么时候.\n       作为任何用途，RollingFileAppender必须同时设置RollingPolicy和TriggeringPolicy,但是，如果其RollingPolicy也实现了TriggeringPolicy接口，则只需要显式指定前者。--\x3e\n        <rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">\n            \x3c!-- 活动文件的名字会根据fileNamePattern的值，每隔一段时间改变一次 --\x3e\n            \x3c!-- 文件名：logs/project_error.2017-12-05.0.log --\x3e\n            \x3c!-- 注意：SizeAndTimeBasedRollingPolicy中 ％i和％d令牌都是强制性的，必须存在，要不会报错 --\x3e\n            <fileNamePattern>logs/project_error.%d.%i.log</fileNamePattern>\n            \x3c!-- 每产生一个日志文件，该日志文件的保存期限为30天, ps:maxHistory的单位是根据fileNamePattern中的翻转策略自动推算出来的,例如上面选用了yyyy-MM-dd,则单位为天\n            如果上面选用了yyyy-MM,则单位为月,另外上面的单位默认为yyyy-MM-dd--\x3e\n            <maxHistory>30</maxHistory>\n            \x3c!-- 每个日志文件到10mb的时候开始切分，最多保留30天，但最大到20GB，哪怕没到30天也要删除多余的日志 --\x3e\n            <totalSizeCap>20GB</totalSizeCap>\n            \x3c!-- maxFileSize:这是活动文件的大小，默认值是10MB，测试时可改成5KB看效果 --\x3e\n            <maxFileSize>10MB</maxFileSize>\n        </rollingPolicy>\n        \x3c!--编码器--\x3e\n        <encoder>\n            \x3c!-- pattern节点，用来设置日志的输入格式 ps:日志文件中没有设置颜色,否则颜色部分会有ESC[0:39em等乱码--\x3e\n            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} %-5level --- [%15.15(%thread)] %-40.40(%logger{40}) : %msg%n</pattern>\n            \x3c!-- 记录日志的编码:此处设置字符集 - --\x3e\n            <charset>UTF-8</charset>\n        </encoder>\n    </appender>\n \n    \x3c!--给定记录器的每个启用的日志记录请求都将转发到该记录器中的所有appender以及层次结构中较高的appender（不用在意level值）。\n    换句话说，appender是从记录器层次结构中附加地继承的。\n    例如，如果将控制台appender添加到根记录器，则所有启用的日志记录请求将至少在控制台上打印。\n    如果另外将文件追加器添加到记录器（例如L），则对L和L\'子项启用的记录请求将打印在文件和控制台上。\n    通过将记录器的additivity标志设置为false，可以覆盖此默认行为，以便不再添加appender累积--\x3e\n    \x3c!-- configuration中最多允许一个root，别的logger如果没有设置级别则从父级别root继承 --\x3e\n    <root level="INFO">\n        <appender-ref ref="STDOUT" />\n    </root>\n \n    \x3c!-- 指定项目中某个包，当有日志操作行为时的日志记录级别 --\x3e\n    \x3c!-- 级别依次为【从高到低】：FATAL > ERROR > WARN > INFO > DEBUG > TRACE  --\x3e\n    <logger name="com.sailing.springbootmybatis" level="INFO">\n        <appender-ref ref="info_log" />\n        <appender-ref ref="error_log" />\n    </logger>\n \n    \x3c!-- 利用logback输入mybatis的sql日志，\n    注意：如果不加 additivity="false" 则此logger会将输出转发到自身以及祖先的logger中，就会出现日志文件中sql重复打印--\x3e\n    <logger name="com.sailing.springbootmybatis.mapper" level="DEBUG" additivity="false">\n        <appender-ref ref="info_log" />\n        <appender-ref ref="error_log" />\n    </logger>\n \n    \x3c!-- additivity=false代表禁止默认累计的行为，即com.atomikos中的日志只会记录到日志文件中，不会输出层次级别更高的任何appender--\x3e\n    <logger name="com.atomikos" level="INFO" additivity="false">\n        <appender-ref ref="info_log" />\n        <appender-ref ref="error_log" />\n    </logger>\n \n</configuration>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n74\n75\n76\n77\n78\n79\n80\n81\n82\n83\n84\n85\n86\n87\n88\n89\n90\n91\n92\n93\n94\n95\n96\n97\n98\n99\n100\n101\n102\n103\n104\n105\n106\n107\n108\n109\n110\n111\n112\n113\n114\n115\n116\n117\n118\n119\n120\n121\n122\n123\n124\n125\n126\n127\n128\n129\n130\n131\n\n\n\n# 五、附加内容\n\n错误 log 输出方式：\n\nObject entry = new SomeObject(); \nlogger.debug("The entry is " + entry);\n\n\n1\n2\n\n\n上面看起来没什么问题，但是会存在构造消息参数的成本，即将 entry 转换成字符串相加。\n\n并且无论是否记录消息，都是如此，即：那怕日志级别为 INFO，也会执行括号里面的操作，但是日志不会输出。\n\n优化后的写法：首先对设置的日志级别进行了判断，如果为debug模式，才进行参数的构造，对第一种写法进行了改善。\n\nif(logger.isDebugEnabled()) { \n    Object entry = new SomeObject(); \n    logger.debug("The entry is " + entry);\n}\n\n\n1\n2\n3\n4\n\n\n不过还有最好的写法，使用占位符：\n\nObject entry = new SomeObject(); \nlogger.debug("The entry is {}.", entry);\n\n\n1\n2\n\n\n只有在评估是否记录之后，并且只有在决策是肯定的情况下，记录器实现才会格式化消息并将“{}”对替换为条目的字符串值。\n\n换句话说，当禁用日志语句时，此表单不会产生参数构造的成本。\n\nlogback 作者进行测试得出：第一种和第三种写法将产生完全相同的输出。\n但是，在禁用日志记录语句的情况下，第三个变体将比第一个变体优于至少30倍。\n\n如果有多个参数，写法如下：\n\n> logger.debug("The new entry is {}. It replaces {}.", entry, oldEntry);\n\n如果需要传递三个或更多参数，则还可以使用Object [] 变体：\n\nObject[] paramArray = {newVal, below, above};\nlogger.debug("Value {} was inserted between {} and {}.", paramArray); \n\n\n1\n2\n\n\n记录日志的时候我们可能需要在文件中记录下异常的堆栈信息，经过测试，logger.error(e) 不会打印出堆栈信息，正确的写法是：\n\n> logger.error("程序异常, 详细信息:{}", e.getLocalizedMessage() , e);\n\n原文地址：\n\n> white_ice - https://blog.csdn.net/white_ice/article/details/85065219\n\nlogback-demo Github地址',normalizedContent:'# 前言\n\n项目中日志系统是必不可少的，目前比较流行的日志框架有 log4j、logback 等，可能大家还不知道，这两个框架的作者是同一个人，logback 旨在作为流行的 log4j 项目的后续版本，从而恢复 log4j 离开的位置。\n\n另外 slf4j(simple logging facade for java) 则是一个日志门面框架，提供了日志系统中常用的接口，logback 和 log4j 则对slf4j 进行了实现。\n\n我们本文将讲述如何在 springboot 中应用 logback+slf4j 实现日志的记录。\n\n\n# 为什么使用logback\n\n * logback 是log4j 框架的作者开发的新一代日志框架，它效率更高、能够适应诸多的运行环境，同时天然支持 slf4j。\n * logback 的定制性更加灵活，同时也是 springboot 的内置日志框架。\n\n\n# 开始使用\n\n\n# 一、添加依赖\n\n实际开发中我们直接引入spring-boot-starter-web依赖即可，因为spring-boot-starter-web包含了spring-boot-starter。\n而spring-boot-starter包含了spring-boot-starter-logging，所以我们只需要引入 web 组件即可。\n\n<dependency>\n    <groupid>org.springframework.boot</groupid>\n    <artifactid>spring-boot-starter-web</artifactid>\n</dependency>\n\n\n1\n2\n3\n4\n\n\n\n# 二、默认配置\n\n默认情况下 springboot 将日志输出到控制台，不会写到日志文件。\n\n如果要编写除控制台输出之外的日志文件，则需在 application.properties 中设置 logging.file 或 logging.path 属性。\n注：二者不能同时使用，如若同时使用，则只有 logging.file 生效。\n\n * logging.file=文件名（设置文件，可以是绝对路径，也可以是相对路径。例：logging.file=my.log）\n\n * logging.path=日志文件路径（设置目录，会在该目录下创建spring.log文件，并写入日志内容。例：logging.path=/var/log）\n\n * logging.level.包名=指定包下的日志级别\n\n * logging.pattern.console=日志打印规则\n\n可以看到这种方式配置简单，但是能实现的功能也非常有限，如果想要更复杂的需求，就需要下面的定制化配置了。\n\n\n# 三、logback-spring.xml详解\n\nspringboot 官方推荐优先使用带有-spring的文件名作为你的日志配置（如使用logback-spring.xml，而不是logback.xml），命名为logback-spring.xml的日志配置文件，将 xml 放至src/main/resource下面。\n\n也可以使用自定义的名称，比如logback-config.xml，只需要在 application.properties 文件中使用logging.config=classpath:logback-config.xml指定即可。\n\n在讲解 logback-spring.xml之前我们先来了解三个单词：\n\n * logger（记录器）\n * appenders（附加器）\n * layouts（布局）\n\nlogback 基于三个主要类：logger，appender和layout。\n\n这三种类型的组件协同工作，使开发人员能够根据消息类型和级别记录消息，并在运行时控制这些消息的格式以及报告的位置。\n\n首先给出一个基本的 xml 配置如下：\n\n<configuration>\n \n  <appender name="stdout" class="ch.qos.logback.core.consoleappender">\n    \x3c!-- encoders are assigned the type\n         ch.qos.logback.classic.encoder.patternlayoutencoder by default --\x3e\n    <encoder>\n      <pattern>%d{hh:mm:ss.sss} [%thread] %-5level %logger{36} - %msg%n</pattern>\n    </encoder>\n  </appender>\n \n  <logger name="chapters.configuration" level="info"/>\n \n  \x3c!-- strictly speaking, the level attribute is not necessary since --\x3e\n  \x3c!-- the level of the root level is set to debug by default.       --\x3e\n  <root level="debug">          \n    <appender-ref ref="stdout" />\n  </root>  \n  \n</configuration>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n\n\n\n# 3.1、<configuration>元素\n\nlogback.xml 配置文件的基本结构可以描述为<configuration>元素，包含零个或多个<appender>元素，后跟零个或多个<logger>元素，后跟最多一个<root>元素(也可以没有)。\n\n下图说明了这种基本结构：\n\n\n\n\n# 3.2、<logger>元素\n\n<logger>元素只接受一个必需的 name 属性，一个可选的 level 属性和一个可选的 additivity 属性，允许值为 true 或 false 。\n\nlevel 属性的值允许一个不区分大小写的字符串值 trace，debug，info，warn，error，all 或 off。\n\n<logger>元素可以包含零个或多个<appender-ref>元素。\n\n这样引用的每个 appender 都被添加到指定的 logger 中，logger 元素级别具有继承性。\n\n例1：仅为根记录器分配了级别。此级别值 debug 由其他记录器 x，x.y和x.y.z 继承。\n\n\n\n例2：所有记录器都有一个指定的级别值。级别继承不起作用。\n\n\n\n例3：记录器 root，x 和 x.y.z 分别被分配了 debug，info 和 error 级别。logger x.y 从其父 x 继承其级别值。\n\n\n\n例4：记录器 root 和 x 分别被分配了 debug 和 info 级别。记录器 x.y 和 x.y.z 从其最近的父 x 继承其级别值，该父级具有指定的级别。\n\n\n\n\n# 3.3、<root>元素\n\n<root>元素配置根记录器。\n它支持单个属性，即 level 属性。\n它不允许任何其他属性，因为 additivity 标志不适用于根记录器。\n此外，由于根记录器已被命名为 root ，因此它也不允许使用 name 属性。\n\nlevel 属性的值可以是不区分大小写的字符串 trace，debug，info，warn，error，all 或 off 之一。\n\n<root>元素可以包含零个或多个<appender-ref>元素。\n\n这样引用的每个 appender 都被添加到根记录器中。\n\n\n# 3.4、<appender>元素\n\nappender 使用<appender>元素配置，该元素采用两个必需属性 name 和 class。\nname 属性指定 appender 的名称，而 class 属性指定要实例化的 appender 类的完全限定名称。\n\n<appender>元素可以包含零个或一个<layout>元素，零个或多个<encoder>元素以及零个或多个<filter>元素。\n\n下图说明了常见的结构：\n\n\n\n重要：在 logback 中，输出目标称为 appender，addappender 方法将 appender 添加到给定的记录器 logger。\n给定记录器的每个启用的日志记录请求都将转发到该记录器中的所有 appender 以及层次结构中较高的 appender。 换句话说，appender 是从记录器层次结构中附加地继承的。\n\n例如，如果将控制台 appender 添加到根记录器，则所有启用的日志记录请求将至少在控制台上打印。\n\n如果另外将文件追加器添加到记录器（例如l），则对 l 和 l 的子项启用的记录请求将打印在文件和控制台上。\n通过将记录器的 additivity 标志设置为 false，可以覆盖此默认行为，以便不再添加 appender 累积。\n\nappender 是一个接口，它有许多子接口和实现类，具体如下图所示：\n\n\n\n其中最重要的两个appender为：consoleappender 、rollingfileappender。\n\n# 3.4.1、consoleappender\n\nconsoleappender，如名称所示，将日志输出到控制台上。\n\n# 3.4.2、rollingfileappender\n\nrollingfileappender，是 fileappender 的一个子类，扩展了 fileappender，具有翻转日志文件的功能。\n\n例如，rollingfileappender 可以记录到名为 log.txt 文件的文件，并且一旦满足某个条件，就将其日志记录目标更改为另一个文件。\n\n有两个与 rollingfileappender 交互的重要子组件。\n\n * rollingpolicy：负责执行翻转所需的操作。\n * triggeringpolicy：将确定是否以及何时发生翻转。\n\n因此，rollingpolicy 负责什么和 triggeringpolicy 负责什么时候。\n\n作为任何用途，rollingfileappender 必须同时设置 rollingpolicy 和 triggeringpolicy。\n但是，如果其 rollingpolicy 也实现了triggeringpolicy 接口，则只需要显式指定前者。\n\n# 3.4.3、滚动策略\n\ntimebasedrollingpolicy：可能是最受欢迎的滚动策略。它根据时间定义翻转策略，例如按天或按月。\ntimebasedrollingpolicy 承担滚动和触发所述翻转的责任。实际上，timebasedtriggeringpolicy 实现了 rollingpolicy 和 triggeringpolicy 接口。\n\nsizeandtimebasedrollingpolicy：有时您可能希望按日期归档文件，但同时限制每个日志文件的大小，特别是如果后处理工具对日志文件施加大小限制。\n为了满足此要求，logback 提供了 sizeandtimebasedrollingpolicy ，它是 timebasedrollingpolicy 的一个子类，实现了基于时间和日志文件大小的翻滚策略。\n\n\n# 3.5、<encoder>元素\n\nencoder 中最重要就是 pattern 属性，它负责控制输出日志的格式，这里给出一个我自己写的示例：\n\n> %d{yyyy-mm-dd hh:mm:ss.sss} %highlight(%-5level) --- [%15.15(%thread)] %cyan(%-40.40(%logger{40})) : %msg%n\n\n\n\n%d{yyyy-mm-dd hh:mm:ss.sss}：日期\n%-5level：日志级别\n%highlight()：颜色，info为蓝色，warn为浅红，error为加粗红，debug为黑色\n%thread：打印日志的线程\n%15.15():如果记录的线程字符长度小于15(第一个)则用空格在左侧补齐,如果字符长度大于15(第二个),则从开头开始截断多余的字符 \n%logger：日志输出的类名\n%-40.40()：如果记录的logger字符长度小于40(第一个)则用空格在右侧补齐,如果字符长度大于40(第二个),则从开头开始截断多余的字符\n%cyan：颜色\n%msg：日志输出内容\n%n：换行符\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\n\n# 3.6、<filter>元素\n\nfilter 中最重要的两个过滤器为：levelfilter、thresholdfilter。\n\nlevelfilter 根据精确的级别匹配过滤事件。\n如果事件的级别等于配置的级别，则筛选器接受或拒绝该事件，具体取决于 onmatch 和 onmismatch 属性的配置。\n\n例如下面配置将只打印 info 级别的日志，其余的全部禁止打印输出：\n\n<configuration>\n  <appender name="console" class="ch.qos.logback.core.consoleappender">\n    <filter class="ch.qos.logback.classic.filter.levelfilter">\n      <level>info</level>\n      <onmatch>accept</onmatch>\n      <onmismatch>deny</onmismatch>\n    </filter>\n    <encoder>\n      <pattern>\n        %-4relative [%thread] %-5level %logger{30} - %msg%n\n      </pattern>\n    </encoder>\n  </appender>\n  <root level="debug">\n    <appender-ref ref="console" />\n  </root>\n</configuration>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n\n\nthresholdfilter 过滤低于指定阈值的事件。\n对于等于或高于阈值的事件，thresholdfilter 将在调用其 decision方法时响应 neutral。\n\n但是，将拒绝级别低于阈值的事件，例如下面的配置将拒绝所有低于 info 级别的日志，只输出 info 以及以上级别的日志：\n\n<configuration>\n  <appender name="console"\n    class="ch.qos.logback.core.consoleappender">\n    \x3c!-- deny all events with a level below info, that is trace and debug --\x3e\n    <filter class="ch.qos.logback.classic.filter.thresholdfilter">\n      <level>info</level>\n    </filter>\n    <encoder>\n      <pattern>\n        %-4relative [%thread] %-5level %logger{30} - %msg%n\n      </pattern>\n    </encoder>\n  </appender>\n  <root level="debug">\n    <appender-ref ref="console" />\n  </root>\n</configuration>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n\n\n\n# 四、详细的logback-spring.xml示例\n\n以上介绍了 xml 中重要的几个元素，下面将我配置的 xml 贴出来以供参考（实现了基于日期和大小翻滚的策略，以及经 info 和 error 日志区分输出，还有规范日志输出格式等）\n\n<?xml version="1.0" encoding="utf-8"?>\n<configuration debug="true">\n \n    \x3c!-- appender是configuration的子节点，是负责写日志的组件。 --\x3e\n    \x3c!-- consoleappender：把日志输出到控制台 --\x3e\n    <appender name="stdout" class="ch.qos.logback.core.consoleappender">\n        \x3c!-- 默认情况下，每个日志事件都会立即刷新到基础输出流。 这种默认方法更安全，因为如果应用程序在没有正确关闭appender的情况下退出，则日志事件不会丢失。\n         但是，为了显着增加日志记录吞吐量，您可能希望将immediateflush属性设置为false --\x3e\n        \x3c!--<immediateflush>true</immediateflush>--\x3e\n        <encoder>\n            \x3c!-- %37():如果字符没有37个字符长度,则左侧用空格补齐 --\x3e\n            \x3c!-- %-37():如果字符没有37个字符长度,则右侧用空格补齐 --\x3e\n            \x3c!-- %15.15():如果记录的线程字符长度小于15(第一个)则用空格在左侧补齐,如果字符长度大于15(第二个),则从开头开始截断多余的字符 --\x3e\n            \x3c!-- %-40.40():如果记录的logger字符长度小于40(第一个)则用空格在右侧补齐,如果字符长度大于40(第二个),则从开头开始截断多余的字符 --\x3e\n            \x3c!-- %msg：日志打印详情 --\x3e\n            \x3c!-- %n:换行符 --\x3e\n            \x3c!-- %highlight():转换说明符以粗体红色显示其级别为error的事件，红色为warn，blue为info，以及其他级别的默认颜色。 --\x3e\n            <pattern>%d{yyyy-mm-dd hh:mm:ss.sss} %highlight(%-5level) --- [%15.15(%thread)] %cyan(%-40.40(%logger{40})) : %msg%n</pattern>\n            \x3c!-- 控制台也要使用utf-8，不要使用gbk，否则会中文乱码 --\x3e\n            <charset>utf-8</charset>\n        </encoder>\n    </appender>\n \n    \x3c!-- info 日志--\x3e\n    \x3c!-- rollingfileappender：滚动记录文件，先将日志记录到指定文件，当符合某个条件时，将日志记录到其他文件 --\x3e\n    \x3c!-- 以下的大概意思是：1.先按日期存日志，日期变了，将前一天的日志文件名重命名为xxx%日期%索引，新的日志仍然是project_info.log --\x3e\n    \x3c!--             2.如果日期没有发生变化，但是当前日志的文件大小超过10mb时，对当前日志进行分割 重命名--\x3e\n    <appender name="info_log" class="ch.qos.logback.core.rolling.rollingfileappender">\n        \x3c!--日志文件路径和名称--\x3e\n        <file>logs/project_info.log</file>\n        \x3c!--是否追加到文件末尾,默认为true--\x3e\n        <append>true</append>\n        <filter class="ch.qos.logback.classic.filter.levelfilter">\n            <level>error</level>\n            <onmatch>deny</onmatch>\x3c!-- 如果命中error就禁止这条日志 --\x3e\n            <onmismatch>accept</onmismatch>\x3c!-- 如果没有命中就使用这条规则 --\x3e\n        </filter>\n        \x3c!--有两个与rollingfileappender交互的重要子组件。 第一个rollingfileappender子组件，即rollingpolicy:负责执行翻转所需的操作。\n         rollingfileappender的第二个子组件，即triggeringpolicy:将确定是否以及何时发生翻转。 因此，rollingpolicy负责什么和triggeringpolicy负责什么时候.\n        作为任何用途，rollingfileappender必须同时设置rollingpolicy和triggeringpolicy,但是，如果其rollingpolicy也实现了triggeringpolicy接口，则只需要显式指定前者。--\x3e\n        <rollingpolicy class="ch.qos.logback.core.rolling.sizeandtimebasedrollingpolicy">\n            \x3c!-- 日志文件的名字会根据filenamepattern的值，每隔一段时间改变一次 --\x3e\n            \x3c!-- 文件名：logs/project_info.2017-12-05.0.log --\x3e\n            \x3c!-- 注意：sizeandtimebasedrollingpolicy中 ％i和％d令牌都是强制性的，必须存在，要不会报错 --\x3e\n            <filenamepattern>logs/project_info.%d.%i.log</filenamepattern>\n            \x3c!-- 每产生一个日志文件，该日志文件的保存期限为30天, ps:maxhistory的单位是根据filenamepattern中的翻转策略自动推算出来的,例如上面选用了yyyy-mm-dd,则单位为天\n            如果上面选用了yyyy-mm,则单位为月,另外上面的单位默认为yyyy-mm-dd--\x3e\n            <maxhistory>30</maxhistory>\n            \x3c!-- 每个日志文件到10mb的时候开始切分，最多保留30天，但最大到20gb，哪怕没到30天也要删除多余的日志 --\x3e\n            <totalsizecap>20gb</totalsizecap>\n            \x3c!-- maxfilesize:这是活动文件的大小，默认值是10mb，测试时可改成5kb看效果 --\x3e\n            <maxfilesize>10mb</maxfilesize>\n        </rollingpolicy>\n        \x3c!--编码器--\x3e\n        <encoder>\n            \x3c!-- pattern节点，用来设置日志的输入格式 ps:日志文件中没有设置颜色,否则颜色部分会有esc[0:39em等乱码--\x3e\n            <pattern>%d{yyyy-mm-dd hh:mm:ss.sss} %-5level --- [%15.15(%thread)] %-40.40(%logger{40}) : %msg%n</pattern>\n            \x3c!-- 记录日志的编码:此处设置字符集 - --\x3e\n            <charset>utf-8</charset>\n        </encoder>\n    </appender>\n \n    \x3c!-- error 日志--\x3e\n    \x3c!-- rollingfileappender：滚动记录文件，先将日志记录到指定文件，当符合某个条件时，将日志记录到其他文件 --\x3e\n    \x3c!-- 以下的大概意思是：1.先按日期存日志，日期变了，将前一天的日志文件名重命名为xxx%日期%索引，新的日志仍然是project_error.log --\x3e\n    \x3c!--             2.如果日期没有发生变化，但是当前日志的文件大小超过10mb时，对当前日志进行分割 重命名--\x3e\n    <appender name="error_log" class="ch.qos.logback.core.rolling.rollingfileappender">\n        \x3c!--日志文件路径和名称--\x3e\n        <file>logs/project_error.log</file>\n        \x3c!--是否追加到文件末尾,默认为true--\x3e\n        <append>true</append>\n        \x3c!-- thresholdfilter过滤低于指定阈值的事件。 对于等于或高于阈值的事件，thresholdfilter将在调用其decision（）方法时响应neutral。 但是，将拒绝级别低于阈值的事件 --\x3e\n        <filter class="ch.qos.logback.classic.filter.thresholdfilter">\n            <level>error</level>\x3c!-- 低于error级别的日志（debug,info）将被拒绝，等于或者高于error的级别将相应neutral --\x3e\n        </filter>\n        \x3c!--有两个与rollingfileappender交互的重要子组件。 第一个rollingfileappender子组件，即rollingpolicy:负责执行翻转所需的操作。\n        rollingfileappender的第二个子组件，即triggeringpolicy:将确定是否以及何时发生翻转。 因此，rollingpolicy负责什么和triggeringpolicy负责什么时候.\n       作为任何用途，rollingfileappender必须同时设置rollingpolicy和triggeringpolicy,但是，如果其rollingpolicy也实现了triggeringpolicy接口，则只需要显式指定前者。--\x3e\n        <rollingpolicy class="ch.qos.logback.core.rolling.sizeandtimebasedrollingpolicy">\n            \x3c!-- 活动文件的名字会根据filenamepattern的值，每隔一段时间改变一次 --\x3e\n            \x3c!-- 文件名：logs/project_error.2017-12-05.0.log --\x3e\n            \x3c!-- 注意：sizeandtimebasedrollingpolicy中 ％i和％d令牌都是强制性的，必须存在，要不会报错 --\x3e\n            <filenamepattern>logs/project_error.%d.%i.log</filenamepattern>\n            \x3c!-- 每产生一个日志文件，该日志文件的保存期限为30天, ps:maxhistory的单位是根据filenamepattern中的翻转策略自动推算出来的,例如上面选用了yyyy-mm-dd,则单位为天\n            如果上面选用了yyyy-mm,则单位为月,另外上面的单位默认为yyyy-mm-dd--\x3e\n            <maxhistory>30</maxhistory>\n            \x3c!-- 每个日志文件到10mb的时候开始切分，最多保留30天，但最大到20gb，哪怕没到30天也要删除多余的日志 --\x3e\n            <totalsizecap>20gb</totalsizecap>\n            \x3c!-- maxfilesize:这是活动文件的大小，默认值是10mb，测试时可改成5kb看效果 --\x3e\n            <maxfilesize>10mb</maxfilesize>\n        </rollingpolicy>\n        \x3c!--编码器--\x3e\n        <encoder>\n            \x3c!-- pattern节点，用来设置日志的输入格式 ps:日志文件中没有设置颜色,否则颜色部分会有esc[0:39em等乱码--\x3e\n            <pattern>%d{yyyy-mm-dd hh:mm:ss.sss} %-5level --- [%15.15(%thread)] %-40.40(%logger{40}) : %msg%n</pattern>\n            \x3c!-- 记录日志的编码:此处设置字符集 - --\x3e\n            <charset>utf-8</charset>\n        </encoder>\n    </appender>\n \n    \x3c!--给定记录器的每个启用的日志记录请求都将转发到该记录器中的所有appender以及层次结构中较高的appender（不用在意level值）。\n    换句话说，appender是从记录器层次结构中附加地继承的。\n    例如，如果将控制台appender添加到根记录器，则所有启用的日志记录请求将至少在控制台上打印。\n    如果另外将文件追加器添加到记录器（例如l），则对l和l\'子项启用的记录请求将打印在文件和控制台上。\n    通过将记录器的additivity标志设置为false，可以覆盖此默认行为，以便不再添加appender累积--\x3e\n    \x3c!-- configuration中最多允许一个root，别的logger如果没有设置级别则从父级别root继承 --\x3e\n    <root level="info">\n        <appender-ref ref="stdout" />\n    </root>\n \n    \x3c!-- 指定项目中某个包，当有日志操作行为时的日志记录级别 --\x3e\n    \x3c!-- 级别依次为【从高到低】：fatal > error > warn > info > debug > trace  --\x3e\n    <logger name="com.sailing.springbootmybatis" level="info">\n        <appender-ref ref="info_log" />\n        <appender-ref ref="error_log" />\n    </logger>\n \n    \x3c!-- 利用logback输入mybatis的sql日志，\n    注意：如果不加 additivity="false" 则此logger会将输出转发到自身以及祖先的logger中，就会出现日志文件中sql重复打印--\x3e\n    <logger name="com.sailing.springbootmybatis.mapper" level="debug" additivity="false">\n        <appender-ref ref="info_log" />\n        <appender-ref ref="error_log" />\n    </logger>\n \n    \x3c!-- additivity=false代表禁止默认累计的行为，即com.atomikos中的日志只会记录到日志文件中，不会输出层次级别更高的任何appender--\x3e\n    <logger name="com.atomikos" level="info" additivity="false">\n        <appender-ref ref="info_log" />\n        <appender-ref ref="error_log" />\n    </logger>\n \n</configuration>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n74\n75\n76\n77\n78\n79\n80\n81\n82\n83\n84\n85\n86\n87\n88\n89\n90\n91\n92\n93\n94\n95\n96\n97\n98\n99\n100\n101\n102\n103\n104\n105\n106\n107\n108\n109\n110\n111\n112\n113\n114\n115\n116\n117\n118\n119\n120\n121\n122\n123\n124\n125\n126\n127\n128\n129\n130\n131\n\n\n\n# 五、附加内容\n\n错误 log 输出方式：\n\nobject entry = new someobject(); \nlogger.debug("the entry is " + entry);\n\n\n1\n2\n\n\n上面看起来没什么问题，但是会存在构造消息参数的成本，即将 entry 转换成字符串相加。\n\n并且无论是否记录消息，都是如此，即：那怕日志级别为 info，也会执行括号里面的操作，但是日志不会输出。\n\n优化后的写法：首先对设置的日志级别进行了判断，如果为debug模式，才进行参数的构造，对第一种写法进行了改善。\n\nif(logger.isdebugenabled()) { \n    object entry = new someobject(); \n    logger.debug("the entry is " + entry);\n}\n\n\n1\n2\n3\n4\n\n\n不过还有最好的写法，使用占位符：\n\nobject entry = new someobject(); \nlogger.debug("the entry is {}.", entry);\n\n\n1\n2\n\n\n只有在评估是否记录之后，并且只有在决策是肯定的情况下，记录器实现才会格式化消息并将“{}”对替换为条目的字符串值。\n\n换句话说，当禁用日志语句时，此表单不会产生参数构造的成本。\n\nlogback 作者进行测试得出：第一种和第三种写法将产生完全相同的输出。\n但是，在禁用日志记录语句的情况下，第三个变体将比第一个变体优于至少30倍。\n\n如果有多个参数，写法如下：\n\n> logger.debug("the new entry is {}. it replaces {}.", entry, oldentry);\n\n如果需要传递三个或更多参数，则还可以使用object [] 变体：\n\nobject[] paramarray = {newval, below, above};\nlogger.debug("value {} was inserted between {} and {}.", paramarray); \n\n\n1\n2\n\n\n记录日志的时候我们可能需要在文件中记录下异常的堆栈信息，经过测试，logger.error(e) 不会打印出堆栈信息，正确的写法是：\n\n> logger.error("程序异常, 详细信息:{}", e.getlocalizedmessage() , e);\n\n原文地址：\n\n> white_ice - https://blog.csdn.net/white_ice/article/details/85065219\n\nlogback-demo github地址',charsets:{cjk:!0},lastUpdated:"10/18/2022",lastUpdatedTimestamp:1666086619e3},{title:"内网映射工具",frontmatter:{title:"内网映射工具",date:"2022-09-29T20:43:19.000Z",permalink:"/pages/f9c70c/",categories:["文章","工具"],tags:["工具","内网映射"],readingShow:"top"},regularPath:"/01.%E6%96%87%E7%AB%A0/06.%E5%B7%A5%E5%85%B7/01.%E5%86%85%E7%BD%91%E6%98%A0%E5%B0%84%E5%B7%A5%E5%85%B7.html",relativePath:"01.文章/06.工具/01.内网映射工具.md",key:"v-4df99c9f",path:"/pages/f9c70c/",headers:[{level:2,title:"lanproxy",slug:"lanproxy",normalizedTitle:"lanproxy",charIndex:57},{level:3,title:"服务端配置",slug:"服务端配置",normalizedTitle:"服务端配置",charIndex:183},{level:3,title:"客户端配置",slug:"客户端配置",normalizedTitle:"客户端配置",charIndex:1365},{level:3,title:"测试",slug:"测试",normalizedTitle:"测试",charIndex:1843},{level:2,title:"常见问题",slug:"常见问题",normalizedTitle:"常见问题",charIndex:1936}],excerpt:'<h1 id="内网映射"><a class="header-anchor" href="#内网映射">#</a> 内网映射</h1>\n<p>内网映射是 NAT 的一种，功能是把内网IP映射到公网，使公网也能轻松访问所搭建的服务。</p>\n',headersStr:"lanproxy 服务端配置 客户端配置 测试 常见问题",content:"# 内网映射\n\n内网映射是 NAT 的一种，功能是把内网IP映射到公网，使公网也能轻松访问所搭建的服务。\n\n\n# lanproxy\n\nlanproxy 是一个将局域网个人电脑、服务器代理到公网的内网穿透工具，支持tcp流量转发，可支持任何tcp上层协议（访问内网网站、本地支付接口调试、ssh访问、远程桌面...）。\n\nGitHub地址\n\n文件下载地址\n\n\n\n\n# 服务端配置\n\n1、首先你的服务器得安装 Java 环境。\n\n> 云主机安装Java环境\n\n2、下载 proxy-server-0.1.zip 上传到服务器。\n\n> （使用 xftp、FinalShell 等工具）\n\n3、解压 zip 压缩包。\n\n> unzip proxy-server-0.1.zip\n\n> 如果云主机无法解压则需安装软件包，安装 unzip。\n> 命令：yum install -y unzip zip\n> 解压后的结构:\n\n4、配置相关文件\n\n> 目录： proxy-server-0.1/conf\n> config.properties\n> 服务器端按照如下配置即可，需开放云服务的安全组，将其所需要的端口全部放开。 （如：4900、4993、8090）当然自己也可以修改对应的端口。\n\nserver.bind=0.0.0.0\n\n# 与代理客户端通信端口\nserver.port=4900 \n# 这里并不是server项目的启动端口,而是.......\n# 比如说你的一个部署在内网服务器上的项目占用端口4900 ,而你想通过公网ip访问内网中\n# 这个4900端口下的项目,这个server.port就等于4900\n\n# ssl相关配置 如果不适用ssl 此处可以不进行配置\nserver.ssl.enable=true\nserver.ssl.bind=0.0.0.0\nserver.ssl.port=4993\nserver.ssl.jksPath=test.jks\nserver.ssl.keyStorePassword=123456\nserver.ssl.keyManagerPassword=123456\n\n# 这个配置可以忽略\nserver.ssl.needsClientAuth=false\n\n# WEB在线配置管理相关信息\nconfig.server.bind=0.0.0.0\n# 这里是server项目启动和访问端口\nconfig.server.port=8090 \n# 用户名和密码\nconfig.admin.username=admin\nconfig.admin.password=admin\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n\n\n5、修改启动脚本权限\n\n> 目录： proxy-server-0.1/bin\n> chmod +x startup.sh\n> 启动命令： ./startup.sh\n> 启动后则访问后台： 域名:8090 或 ip:8090\n> \n> 看到这个页面则代表启动成功\n\n6、后台配置客户端\n\n> \n\n> 注意状态，目前为 离线\n\n7、配置公网端口和后端ip端口\n\n> 代理配置\n\n\n# 客户端配置\n\n1、首先自己本机也得安装 Java 环境\n\n2、下载客户端文件压缩包\n\n> proxy-java-client-0.1.zip\n> 结构如下：\n\n3、修改配置\n\n> 路径：proxy-java-client-0.1/conf\n> config.properties\n\n# 配置客户端是生成的那个随机秘钥\nclient.key=\n# 与服务器保持一致即可 \nssl.enable=true\nssl.jksPath=test.jks\nssl.keyStorePassword=123456\n\n# 填写自己的公网ip地址\nserver.host=\n\n# 如果使用 ssl，则配置的服务器 ssl.port 对应\n# 如果不使用 ssl，则配置的服务器  server.port 对应\nserver.port=4900\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\n4、启动\n\n> 路径： proxy-java-client-0.1/bin\n> 双击 startup.bat\n> 如果后台管理项目中看见客户端状态改变：\n\n\n# 测试\n\n配置的 3333 端口的请求会映射到本地服务的 127.0.0.1:8900 服务上。\n\n只需要访问云主机上 3333 端口的请求，能够映射到本地服务就代表成功了。\n\n\n\n\n# 常见问题\n\n如果启动失败，状态没有改变，可以查看相应的 log 日志。\n\n1、云服务器未配置安全组，端口未放开。\n\n2、本地 Java 环境未配置好。\n\n3、服务器上 Java 环境未配置好。",normalizedContent:"# 内网映射\n\n内网映射是 nat 的一种，功能是把内网ip映射到公网，使公网也能轻松访问所搭建的服务。\n\n\n# lanproxy\n\nlanproxy 是一个将局域网个人电脑、服务器代理到公网的内网穿透工具，支持tcp流量转发，可支持任何tcp上层协议（访问内网网站、本地支付接口调试、ssh访问、远程桌面...）。\n\ngithub地址\n\n文件下载地址\n\n\n\n\n# 服务端配置\n\n1、首先你的服务器得安装 java 环境。\n\n> 云主机安装java环境\n\n2、下载 proxy-server-0.1.zip 上传到服务器。\n\n> （使用 xftp、finalshell 等工具）\n\n3、解压 zip 压缩包。\n\n> unzip proxy-server-0.1.zip\n\n> 如果云主机无法解压则需安装软件包，安装 unzip。\n> 命令：yum install -y unzip zip\n> 解压后的结构:\n\n4、配置相关文件\n\n> 目录： proxy-server-0.1/conf\n> config.properties\n> 服务器端按照如下配置即可，需开放云服务的安全组，将其所需要的端口全部放开。 （如：4900、4993、8090）当然自己也可以修改对应的端口。\n\nserver.bind=0.0.0.0\n\n# 与代理客户端通信端口\nserver.port=4900 \n# 这里并不是server项目的启动端口,而是.......\n# 比如说你的一个部署在内网服务器上的项目占用端口4900 ,而你想通过公网ip访问内网中\n# 这个4900端口下的项目,这个server.port就等于4900\n\n# ssl相关配置 如果不适用ssl 此处可以不进行配置\nserver.ssl.enable=true\nserver.ssl.bind=0.0.0.0\nserver.ssl.port=4993\nserver.ssl.jkspath=test.jks\nserver.ssl.keystorepassword=123456\nserver.ssl.keymanagerpassword=123456\n\n# 这个配置可以忽略\nserver.ssl.needsclientauth=false\n\n# web在线配置管理相关信息\nconfig.server.bind=0.0.0.0\n# 这里是server项目启动和访问端口\nconfig.server.port=8090 \n# 用户名和密码\nconfig.admin.username=admin\nconfig.admin.password=admin\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n\n\n5、修改启动脚本权限\n\n> 目录： proxy-server-0.1/bin\n> chmod +x startup.sh\n> 启动命令： ./startup.sh\n> 启动后则访问后台： 域名:8090 或 ip:8090\n> \n> 看到这个页面则代表启动成功\n\n6、后台配置客户端\n\n> \n\n> 注意状态，目前为 离线\n\n7、配置公网端口和后端ip端口\n\n> 代理配置\n\n\n# 客户端配置\n\n1、首先自己本机也得安装 java 环境\n\n2、下载客户端文件压缩包\n\n> proxy-java-client-0.1.zip\n> 结构如下：\n\n3、修改配置\n\n> 路径：proxy-java-client-0.1/conf\n> config.properties\n\n# 配置客户端是生成的那个随机秘钥\nclient.key=\n# 与服务器保持一致即可 \nssl.enable=true\nssl.jkspath=test.jks\nssl.keystorepassword=123456\n\n# 填写自己的公网ip地址\nserver.host=\n\n# 如果使用 ssl，则配置的服务器 ssl.port 对应\n# 如果不使用 ssl，则配置的服务器  server.port 对应\nserver.port=4900\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\n4、启动\n\n> 路径： proxy-java-client-0.1/bin\n> 双击 startup.bat\n> 如果后台管理项目中看见客户端状态改变：\n\n\n# 测试\n\n配置的 3333 端口的请求会映射到本地服务的 127.0.0.1:8900 服务上。\n\n只需要访问云主机上 3333 端口的请求，能够映射到本地服务就代表成功了。\n\n\n\n\n# 常见问题\n\n如果启动失败，状态没有改变，可以查看相应的 log 日志。\n\n1、云服务器未配置安全组，端口未放开。\n\n2、本地 java 环境未配置好。\n\n3、服务器上 java 环境未配置好。",charsets:{cjk:!0},lastUpdated:"9/29/2022",lastUpdatedTimestamp:1664455559e3},{title:"使用PicGo上传图片到自己的图床",frontmatter:{title:"使用PicGo上传图片到自己的图床",date:"2022-11-10T14:23:57.000Z",permalink:"/pages/996107/",categories:["文章","工具"],tags:["PicGo","图床"],readingShow:"top"},regularPath:"/01.%E6%96%87%E7%AB%A0/06.%E5%B7%A5%E5%85%B7/04.%E4%BD%BF%E7%94%A8PicGo%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E5%88%B0%E8%87%AA%E5%B7%B1%E7%9A%84%E5%9B%BE%E5%BA%8A.html",relativePath:"01.文章/06.工具/04.使用PicGo上传图片到自己的图床.md",key:"v-7304e2cd",path:"/pages/996107/",headers:[{level:2,title:"阿里云 OSS",slug:"阿里云-oss",normalizedTitle:"阿里云 oss",charIndex:121},{level:3,title:"图片水印",slug:"图片水印",normalizedTitle:"图片水印",charIndex:421},{level:2,title:"PicGo",slug:"picgo",normalizedTitle:"picgo",charIndex:4},{level:3,title:"重命名插件",slug:"重命名插件",normalizedTitle:"重命名插件",charIndex:912},{level:2,title:"组合使用",slug:"组合使用",normalizedTitle:"组合使用",charIndex:1157},{level:3,title:"verycapture",slug:"verycapture",normalizedTitle:"verycapture",charIndex:1196}],excerpt:'<h1 id="使用picgo上传图片到自己的图床"><a class="header-anchor" href="#使用picgo上传图片到自己的图床">#</a> 使用PicGo上传图片到自己的图床</h1>\n<p>PicGo: 一个用于快速上传图片并获取图片 URL 链接的工具。</p>\n<p>PicGo 本体支持如下图床：</p>\n<ul>\n<li>七牛图床</li>\n<li>腾讯云 COS</li>\n<li>又拍云</li>\n<li>GitHub</li>\n<li>SM.MS</li>\n<li>阿里云 OSS</li>\n<li>Imgur</li>\n</ul>\n',headersStr:"阿里云 OSS 图片水印 PicGo 重命名插件 组合使用 verycapture",content:"# 使用PicGo上传图片到自己的图床\n\nPicGo: 一个用于快速上传图片并获取图片 URL 链接的工具。\n\nPicGo 本体支持如下图床：\n\n * 七牛图床\n * 腾讯云 COS\n * 又拍云\n * GitHub\n * SM.MS\n * 阿里云 OSS\n * Imgur\n\nPicGo: https://github.com/Molunerfinn/PicGo\n\n\n# 阿里云 OSS\n\n阿里云注册登录后，在控制台搜索“对象存储 OSS”。\n\n\n\n\n\n修改 权限控制 -> 读写权限，修改为 公共读。\n\n\n\n然后设置账户的 AccessKey。右上角，鼠标放到自己头像上。\n\nAccessKey ID 和 AccessKey Secret 是您访问阿里云 API 的密钥，具有该账户完全的权限，请您妥善保管。\n\n\n\n点击创建 AccessKey，得到AccessKey ID 和 AccessKey Secret，后面需要使用。\n\n\n# 图片水印\n\n可以看到我的图片都是有水印的，这样可以防止盗图。\n\n\n\n可选文字水印，图片水印等。\n\n\n\n记得开启原图保护，不带后缀无法访问图片。\n\n\n\n后缀规则： 例如我创建的的水印名称为test。\n\n\n\n那么后缀就是：?x-oss-process=style/test\n\n举例：\n\n> https://rcbb-test.oss-cn-chengdu.aliyuncs.com/2022/11/20221110114017-b839d9.png?x-oss-process=style/test\n\n\n# PicGo\n\nPicGo：https://molunerfinn.com/PicGo/\n\n选择自己系统类型进行下载，下载后安装，进入主页面。\n\n\n\n界面非常简洁明了，在图床设置中，找到自己使用的图床。\n\n例如我使用的是阿里云OSS：这里需要使用阿里云的AccessKey ID 和 AccessKey Secret。\n\n\n\n填写完相关信息后，进行测试，发现可以上传就 ok 了。\n\n设置网址后缀：\n可以配置上水印后缀：?x-oss-process=style/test\n\n\n# 重命名插件\n\n例如我的需求：我的博客上传的文件全部是按照 年/月/具体文件，这样来进行分组的。\n\n\n\n插件市场：https://github.com/PicGo/Awesome-PicGo\n\n\n\n\n\n然后再 PicGo 中，直接根据名称(picgo-plugin-rename-file)搜索这个插件进行安装即可，安装成功后进行设置。\n\n重命名的文件名称：年/月/文件原名-随机6位数\n\n> {y}/{m}/{origin}-{rand:6}\n\n\n\n配置成功，再上传图片试试。\n\n\n\n\n# 组合使用\n\n一个好用的截图工具。\n\n一个好用的上传图片到图床的工具。\n\n设置 verycapture 矩形截图快捷键，F3。\n\n\n\n设置 PicGo 快捷上传键，F4。\n\n\n\nF3 + F4 组合，起飞~\n\n\n# verycapture\n\n\n\n标注工具栏\n\n\n\n官网：https://verycapture.com/cn/index.html\n\n教程：https://verycapture.com/cn/docs/index.html",normalizedContent:"# 使用picgo上传图片到自己的图床\n\npicgo: 一个用于快速上传图片并获取图片 url 链接的工具。\n\npicgo 本体支持如下图床：\n\n * 七牛图床\n * 腾讯云 cos\n * 又拍云\n * github\n * sm.ms\n * 阿里云 oss\n * imgur\n\npicgo: https://github.com/molunerfinn/picgo\n\n\n# 阿里云 oss\n\n阿里云注册登录后，在控制台搜索“对象存储 oss”。\n\n\n\n\n\n修改 权限控制 -> 读写权限，修改为 公共读。\n\n\n\n然后设置账户的 accesskey。右上角，鼠标放到自己头像上。\n\naccesskey id 和 accesskey secret 是您访问阿里云 api 的密钥，具有该账户完全的权限，请您妥善保管。\n\n\n\n点击创建 accesskey，得到accesskey id 和 accesskey secret，后面需要使用。\n\n\n# 图片水印\n\n可以看到我的图片都是有水印的，这样可以防止盗图。\n\n\n\n可选文字水印，图片水印等。\n\n\n\n记得开启原图保护，不带后缀无法访问图片。\n\n\n\n后缀规则： 例如我创建的的水印名称为test。\n\n\n\n那么后缀就是：?x-oss-process=style/test\n\n举例：\n\n> https://rcbb-test.oss-cn-chengdu.aliyuncs.com/2022/11/20221110114017-b839d9.png?x-oss-process=style/test\n\n\n# picgo\n\npicgo：https://molunerfinn.com/picgo/\n\n选择自己系统类型进行下载，下载后安装，进入主页面。\n\n\n\n界面非常简洁明了，在图床设置中，找到自己使用的图床。\n\n例如我使用的是阿里云oss：这里需要使用阿里云的accesskey id 和 accesskey secret。\n\n\n\n填写完相关信息后，进行测试，发现可以上传就 ok 了。\n\n设置网址后缀：\n可以配置上水印后缀：?x-oss-process=style/test\n\n\n# 重命名插件\n\n例如我的需求：我的博客上传的文件全部是按照 年/月/具体文件，这样来进行分组的。\n\n\n\n插件市场：https://github.com/picgo/awesome-picgo\n\n\n\n\n\n然后再 picgo 中，直接根据名称(picgo-plugin-rename-file)搜索这个插件进行安装即可，安装成功后进行设置。\n\n重命名的文件名称：年/月/文件原名-随机6位数\n\n> {y}/{m}/{origin}-{rand:6}\n\n\n\n配置成功，再上传图片试试。\n\n\n\n\n# 组合使用\n\n一个好用的截图工具。\n\n一个好用的上传图片到图床的工具。\n\n设置 verycapture 矩形截图快捷键，f3。\n\n\n\n设置 picgo 快捷上传键，f4。\n\n\n\nf3 + f4 组合，起飞~\n\n\n# verycapture\n\n\n\n标注工具栏\n\n\n\n官网：https://verycapture.com/cn/index.html\n\n教程：https://verycapture.com/cn/docs/index.html",charsets:{cjk:!0},lastUpdated:"11/10/2022",lastUpdatedTimestamp:1668062081e3},{title:"好用的截图工具",frontmatter:{title:"好用的截图工具",date:"2022-11-10T14:31:00.000Z",permalink:"/pages/75e36d/",categories:["文章","工具"],tags:["工具","截图"],readingShow:"top"},regularPath:"/01.%E6%96%87%E7%AB%A0/06.%E5%B7%A5%E5%85%B7/05.%E5%A5%BD%E7%94%A8%E7%9A%84%E6%88%AA%E5%9B%BE%E5%B7%A5%E5%85%B7.html",relativePath:"01.文章/06.工具/05.好用的截图工具.md",key:"v-5b97e7b8",path:"/pages/75e36d/",headers:[{level:2,title:"verycapture",slug:"verycapture",normalizedTitle:"verycapture",charIndex:108},{level:2,title:"组合使用",slug:"组合使用",normalizedTitle:"组合使用",charIndex:224},{level:3,title:"PicGo",slug:"picgo",normalizedTitle:"picgo",charIndex:293}],excerpt:'<h1 id="好用的截图工具"><a class="header-anchor" href="#好用的截图工具">#</a> 好用的截图工具</h1>\n<p>在写文章时，经常会需要截取一些信息，并且需要做一些标注。</p>\n<p>将实现效果，录制简单的<code>gif</code>图片等。</p>\n<p>常使用的几个功能：</p>\n<ul>\n<li>快速截图，标记</li>\n<li>钉住</li>\n<li>截长图</li>\n<li>gif图</li>\n</ul>\n',headersStr:"verycapture 组合使用 PicGo",content:"# 好用的截图工具\n\n在写文章时，经常会需要截取一些信息，并且需要做一些标注。\n\n将实现效果，录制简单的gif图片等。\n\n常使用的几个功能：\n\n * 快速截图，标记\n * 钉住\n * 截长图\n * gif图\n\n\n# verycapture\n\n\n\n标注工具栏\n\n\n\n官网：https://verycapture.com/cn/index.html\n\n教程：https://verycapture.com/cn/docs/index.html\n\n\n# 组合使用\n\n一个好用的截图工具。\n\n一个好用的上传图片到图床的工具。\n\n设置 verycapture 矩形截图快捷键，F3。\n\n\n\n设置 PicGo 快捷上传键，F4。\n\n\n\nF3 + F4 组合，起飞~\n\n\n# PicGo\n\n使用PicGo上传图片到自己的图床",normalizedContent:"# 好用的截图工具\n\n在写文章时，经常会需要截取一些信息，并且需要做一些标注。\n\n将实现效果，录制简单的gif图片等。\n\n常使用的几个功能：\n\n * 快速截图，标记\n * 钉住\n * 截长图\n * gif图\n\n\n# verycapture\n\n\n\n标注工具栏\n\n\n\n官网：https://verycapture.com/cn/index.html\n\n教程：https://verycapture.com/cn/docs/index.html\n\n\n# 组合使用\n\n一个好用的截图工具。\n\n一个好用的上传图片到图床的工具。\n\n设置 verycapture 矩形截图快捷键，f3。\n\n\n\n设置 picgo 快捷上传键，f4。\n\n\n\nf3 + f4 组合，起飞~\n\n\n# picgo\n\n使用picgo上传图片到自己的图床",charsets:{cjk:!0},lastUpdated:"11/10/2022",lastUpdatedTimestamp:1668062081e3},{title:"SaaS、PaaS、IaaS的区别",frontmatter:{title:"SaaS、PaaS、IaaS的区别",date:"2022-09-06T17:41:57.000Z",permalink:"/pages/9da5e5/",categories:["文章","概念"],tags:["SaaS","PaaS","IaaS"],readingShow:"top"},regularPath:"/01.%E6%96%87%E7%AB%A0/07.%E6%A6%82%E5%BF%B5/01.SaaS%E3%80%81PaaS%E3%80%81IaaS%E7%9A%84%E5%8C%BA%E5%88%AB.html",relativePath:"01.文章/07.概念/01.SaaS、PaaS、IaaS的区别.md",key:"v-7330515c",path:"/pages/9da5e5/",headers:[{level:2,title:"披萨",slug:"披萨",normalizedTitle:"披萨",charIndex:208},{level:3,title:"方案一：IaaS",slug:"方案一-iaas",normalizedTitle:"方案一：iaas",charIndex:339},{level:3,title:"方案二：PaaS",slug:"方案二-paas",normalizedTitle:"方案二：paas",charIndex:384},{level:3,title:"方案三：SaaS",slug:"方案三-saas",normalizedTitle:"方案三：saas",charIndex:497},{level:2,title:"汽车",slug:"汽车",normalizedTitle:"汽车",charIndex:571},{level:3,title:"方案一：IaaS",slug:"方案一-iaas-2",normalizedTitle:"方案一：iaas",charIndex:339},{level:3,title:"方案二：PaaS",slug:"方案二-paas-2",normalizedTitle:"方案二：paas",charIndex:384},{level:3,title:"方案三：SaaS",slug:"方案三-saas-2",normalizedTitle:"方案三：saas",charIndex:497},{level:2,title:"网站",slug:"网站",normalizedTitle:"网站",charIndex:852},{level:3,title:"方案一：IaaS",slug:"方案一-iaas-3",normalizedTitle:"方案一：iaas",charIndex:339},{level:3,title:"方案二：PaaS",slug:"方案二-paas-3",normalizedTitle:"方案二：paas",charIndex:384},{level:3,title:"方案三：SaaS",slug:"方案三-saas-3",normalizedTitle:"方案三：saas",charIndex:497},{level:2,title:"总结",slug:"总结",normalizedTitle:"总结",charIndex:1156},{level:2,title:"参考链接",slug:"参考链接",normalizedTitle:"参考链接",charIndex:1368}],excerpt:'<h1 id="saas、paas、iaas的区别"><a class="header-anchor" href="#saas、paas、iaas的区别">#</a> SaaS、PaaS、IaaS的区别</h1>\n<p>IaaS是（Infrastructure as a Service）的缩写，意思为基础设施即服务。</p>\n<p>PaaS是（Platform as a Service）的缩写，意思为平台即服务。</p>\n<p>SaaS是（Software-as-a-Service）的缩写，意思为软件即服务。</p>\n<p>IaaS &gt; PaaS &gt; SaaS，从左到右，自己承担的工作量（上图蓝色部分）越来越少。</p>\n',headersStr:"披萨 方案一：IaaS 方案二：PaaS 方案三：SaaS 汽车 方案一：IaaS 方案二：PaaS 方案三：SaaS 网站 方案一：IaaS 方案二：PaaS 方案三：SaaS 总结 参考链接",content:"# SaaS、PaaS、IaaS的区别\n\nIaaS是（Infrastructure as a Service）的缩写，意思为基础设施即服务。\n\nPaaS是（Platform as a Service）的缩写，意思为平台即服务。\n\nSaaS是（Software-as-a-Service）的缩写，意思为软件即服务。\n\nIaaS > PaaS > SaaS，从左到右，自己承担的工作量（上图蓝色部分）越来越少。\n\n\n# 披萨\n\nIBM 的软件架构师 Albert Barron 曾经使用披萨作为比喻。\n\n请设想你是一个餐饮业者，打算做披萨生意。\n你可以从头到尾，自己生产披萨，但是这样比较麻烦，需要准备的东西多。\n\n因此你决定外包一部分工作，采用他人的服务，你有三个方案。\n\n\n# 方案一：IaaS\n\n他人提供厨房、炉子、煤气，你使用这些基础设施，来烤你的披萨。\n\n\n# 方案二：PaaS\n\n除了基础设施，他人还提供披萨饼皮。\n\n你只要把自己的配料洒在饼皮上，让他帮你烤出来就行了。\n\n也就是说，你要做的就是设计披萨的味道（海鲜披萨或者鸡肉披萨），他人提供平台服务，让你把自己的设计实现。\n\n\n# 方案三：SaaS\n\n他人直接做好了披萨，不用你的介入，到手的就是一个成品。你要做的就是把它卖出去，最多再包装一下，印上你自己的 Logo。\n\n\n# 汽车\n\n假设你需要出去外出使用交通工具，自己开车，需要维护汽车，是其安全工作。\n同时需要为车上保险，提供燃料。\n（服务器 + 操作系统/数据库 + 应用软件）\n\n你还有其他三个方案。\n\n\n# 方案一：IaaS\n\n从租车公司租一辆车，汽车的维修、安检都由租车公司承担。\n\n你只需要提供燃料。（需要提供操作系统+应用软件）\n\n\n# 方案二：PaaS\n\n除了基础设施（汽车），还为你提供司机，类似出租车。\n\n只需要提供目的地，汽车的行驶和运行都由司机决定。（只需要提供应用软件）。\n\n\n# 方案三：SaaS\n\n类似于坐轨道交通（地铁）， 一切都是由别人控制。\n\n\n# 网站\n\n想要建立一个网站，不采用云服务。\n你所需要的投入大概是：买服务器，安装服务器软件，编写网站程序。\n\n你还有其他三个方案。\n\n\n# 方案一：IaaS\n\n采用 IaaS 服务，那么意味着你就不用自己买服务器了，但是还是需要自己装服务器软件。\n\n\n# 方案二：PaaS\n\n采用 PaaS 的服务，那么意味着你既不需要买服务器，也不需要自己装服务器软件，只需要自己开发网站程序。\n\n\n# 方案三：SaaS\n\n采用 SaaS 的服务，这意味着你也不用自己开发网站程序，只需要使用某些在线论坛或者在线网店的服务，用它们开发好的程序，而且他们会负责程序的升级、维护、增加服务器等，而你只需要专心运营即可。\n\n\n# 总结\n\nIaaS 是云服务的最底层，主要提供一些基础资源。\n它与 PaaS 的区别是，用户需要自己控制底层，实现基础设施的使用逻辑。\n\nPaaS 提供软件部署平台（runtime），抽象掉了硬件和操作系统细节。开发者只需要关注自己的业务逻辑，不需要关注底层。\n\nSaaS 是软件的开发、管理、部署都交给第三方，不需要关心技术问题，可以拿来即用。\n\n目前主流的 IaaS、PaaS 和 SaaS 产品如下图所示：\n\n\n\n\n# 参考链接\n\n阮一峰的网络日志-IaaS，PaaS，SaaS 的区别\n知乎-怎么理解 IaaS、SaaS 和 PaaS 的区别？",normalizedContent:"# saas、paas、iaas的区别\n\niaas是（infrastructure as a service）的缩写，意思为基础设施即服务。\n\npaas是（platform as a service）的缩写，意思为平台即服务。\n\nsaas是（software-as-a-service）的缩写，意思为软件即服务。\n\niaas > paas > saas，从左到右，自己承担的工作量（上图蓝色部分）越来越少。\n\n\n# 披萨\n\nibm 的软件架构师 albert barron 曾经使用披萨作为比喻。\n\n请设想你是一个餐饮业者，打算做披萨生意。\n你可以从头到尾，自己生产披萨，但是这样比较麻烦，需要准备的东西多。\n\n因此你决定外包一部分工作，采用他人的服务，你有三个方案。\n\n\n# 方案一：iaas\n\n他人提供厨房、炉子、煤气，你使用这些基础设施，来烤你的披萨。\n\n\n# 方案二：paas\n\n除了基础设施，他人还提供披萨饼皮。\n\n你只要把自己的配料洒在饼皮上，让他帮你烤出来就行了。\n\n也就是说，你要做的就是设计披萨的味道（海鲜披萨或者鸡肉披萨），他人提供平台服务，让你把自己的设计实现。\n\n\n# 方案三：saas\n\n他人直接做好了披萨，不用你的介入，到手的就是一个成品。你要做的就是把它卖出去，最多再包装一下，印上你自己的 logo。\n\n\n# 汽车\n\n假设你需要出去外出使用交通工具，自己开车，需要维护汽车，是其安全工作。\n同时需要为车上保险，提供燃料。\n（服务器 + 操作系统/数据库 + 应用软件）\n\n你还有其他三个方案。\n\n\n# 方案一：iaas\n\n从租车公司租一辆车，汽车的维修、安检都由租车公司承担。\n\n你只需要提供燃料。（需要提供操作系统+应用软件）\n\n\n# 方案二：paas\n\n除了基础设施（汽车），还为你提供司机，类似出租车。\n\n只需要提供目的地，汽车的行驶和运行都由司机决定。（只需要提供应用软件）。\n\n\n# 方案三：saas\n\n类似于坐轨道交通（地铁）， 一切都是由别人控制。\n\n\n# 网站\n\n想要建立一个网站，不采用云服务。\n你所需要的投入大概是：买服务器，安装服务器软件，编写网站程序。\n\n你还有其他三个方案。\n\n\n# 方案一：iaas\n\n采用 iaas 服务，那么意味着你就不用自己买服务器了，但是还是需要自己装服务器软件。\n\n\n# 方案二：paas\n\n采用 paas 的服务，那么意味着你既不需要买服务器，也不需要自己装服务器软件，只需要自己开发网站程序。\n\n\n# 方案三：saas\n\n采用 saas 的服务，这意味着你也不用自己开发网站程序，只需要使用某些在线论坛或者在线网店的服务，用它们开发好的程序，而且他们会负责程序的升级、维护、增加服务器等，而你只需要专心运营即可。\n\n\n# 总结\n\niaas 是云服务的最底层，主要提供一些基础资源。\n它与 paas 的区别是，用户需要自己控制底层，实现基础设施的使用逻辑。\n\npaas 提供软件部署平台（runtime），抽象掉了硬件和操作系统细节。开发者只需要关注自己的业务逻辑，不需要关注底层。\n\nsaas 是软件的开发、管理、部署都交给第三方，不需要关心技术问题，可以拿来即用。\n\n目前主流的 iaas、paas 和 saas 产品如下图所示：\n\n\n\n\n# 参考链接\n\n阮一峰的网络日志-iaas，paas，saas 的区别\n知乎-怎么理解 iaas、saas 和 paas 的区别？",charsets:{cjk:!0},lastUpdated:"9/9/2022",lastUpdatedTimestamp:1662716514e3},{title:"HTTPS加密解析",frontmatter:{title:"HTTPS加密解析",date:"2023-07-24T11:26:31.000Z",permalink:"/pages/05448d/",categories:["文章","概念"],tags:["HTTPS"],readingShow:"top"},regularPath:"/01.%E6%96%87%E7%AB%A0/07.%E6%A6%82%E5%BF%B5/06.HTTPS%E5%8A%A0%E5%AF%86%E8%A7%A3%E6%9E%90.html",relativePath:"01.文章/07.概念/06.HTTPS加密解析.md",key:"v-1f036070",path:"/pages/05448d/",headers:[{level:2,title:"HTTPS 实现原理",slug:"https-实现原理",normalizedTitle:"https 实现原理",charIndex:91},{level:3,title:"HTTPS 交互过程",slug:"https-交互过程",normalizedTitle:"https 交互过程",charIndex:143},{level:2,title:"问题",slug:"问题",normalizedTitle:"问题",charIndex:16},{level:3,title:"如何验证证书是否合法？",slug:"如何验证证书是否合法",normalizedTitle:"如何验证证书是否合法？",charIndex:388},{level:3,title:"为什么数据传输使用对称加密？",slug:"为什么数据传输使用对称加密",normalizedTitle:"为什么数据传输使用对称加密？",charIndex:762},{level:3,title:"为什么需要CA认证机构颁发证书？",slug:"为什么需要ca认证机构颁发证书",normalizedTitle:"为什么需要ca认证机构颁发证书？",charIndex:839},{level:3,title:"用了HTTPS会被抓包吗？",slug:"用了https会被抓包吗",normalizedTitle:"用了https会被抓包吗？",charIndex:874},{level:2,title:"参考",slug:"参考",normalizedTitle:"参考",charIndex:1071}],excerpt:'<h1 id="https-加密解析"><a class="header-anchor" href="#https-加密解析">#</a> HTTPS 加密解析</h1>\n<p>带着问题学习。</p>\n<ol>\n<li>为什么用了 HTTPS 就是安全的？</li>\n<li>HTTPS 底层原理如何实现？</li>\n<li>用了 HTTPS 就一定安全吗？</li>\n</ol>\n',headersStr:"HTTPS 实现原理 HTTPS 交互过程 问题 如何验证证书是否合法？ 为什么数据传输使用对称加密？ 为什么需要CA认证机构颁发证书？ 用了HTTPS会被抓包吗？ 参考",content:"# HTTPS 加密解析\n\n带着问题学习。\n\n 1. 为什么用了 HTTPS 就是安全的？\n 2. HTTPS 底层原理如何实现？\n 3. 用了 HTTPS 就一定安全吗？\n\n\n# HTTPS 实现原理\n\nHTTPS 在内容传输上使用的是对称加密，在证书验证阶段是非对称加密。\n\n\n# HTTPS 交互过程\n\n证书校验阶段：\n\n 1. 客户端发起 HTTPS 请求。\n 2. 服务器返回 HTTPS 证书。\n 3. 客户端验证证书是否合法，不合法提示告警。\n\n数据传输阶段：\n\n 1. 当证书验证通过后，在客户端本地生成随机对称密钥。\n 2. 通过公钥加密随机对称密钥，并把加密后的随机数传输到服务器端。\n 3. 服务器端通过私钥对随机对称密钥进行解密。\n 4. 服务器端通过客户端传入的随机对称密钥构造对称加密算法，对返回结果内容加密后进行传输。\n\n\n\n\n# 问题\n\n\n# 如何验证证书是否合法？\n\n 1. 验证证书链。\n\n> 客户端会验证服务器证书的有效性和合法性。首先，它会检查证书的签名是否有效，以确保证书未被篡改。然后，它会验证证书链，即证书链中的每个证书都应该是由受信任的根证书颁发机构签发的，以确保其受信任。\n\n 2. 检查证书信任。\n\n> 客户端使用内置的根证书颁发机构（CA）公钥来验证证书是否被受信任的颁发机构所签发。客户端会比对证书链中的每个证书的公钥，以确保其与内置的根证书颁发机构的公钥匹配。\n\n 3. 检查证书有效期。\n\n> 检查证书的有效期，确保证书在当前时间范围内有效。证书通常包含了一个开始和结束的有效期限。\n\n 4. 验证域名匹配。\n\n> 客户端会检查证书中所列的域名与服务器的域名是否匹配。这个验证步骤被称为“主机名验证”，它确保服务器证书只能用于指定的域名，防止中间人攻击。\n\n\n# 为什么数据传输使用对称加密？\n\n因为非对称加密的效率非常低，在 HTTP 的应用场景下端对端之间存在大量的交互，所以非对称加密的效率是不适用的。\n\n\n# 为什么需要CA认证机构颁发证书？\n\n为了防止中间人攻击。\n\n\n\n\n# 用了HTTPS会被抓包吗？\n\nHTTPS 只防护用户在不知情的情况下通信被监听，主动安装证书授权可以进行解密抓包。\n\nHTTPS 的数据是加密的常规下抓包工具代理请求后抓到的包内容是加密状态无法直接查看。\n\n解决方法：使用抓包工具生成一个证书安装到客户端中模拟中间人攻击。\n\n要防止被抓包需要采用应用级的安全防护。例如采用私有对称加密，同时做好移动端的反编译加固，防止本地算法被破解。\n\n\n# 参考\n\n胡凯莉-HTTPS加密解析\n\n顾伊凡-彻底搞懂HTTPS的加密原理",normalizedContent:"# https 加密解析\n\n带着问题学习。\n\n 1. 为什么用了 https 就是安全的？\n 2. https 底层原理如何实现？\n 3. 用了 https 就一定安全吗？\n\n\n# https 实现原理\n\nhttps 在内容传输上使用的是对称加密，在证书验证阶段是非对称加密。\n\n\n# https 交互过程\n\n证书校验阶段：\n\n 1. 客户端发起 https 请求。\n 2. 服务器返回 https 证书。\n 3. 客户端验证证书是否合法，不合法提示告警。\n\n数据传输阶段：\n\n 1. 当证书验证通过后，在客户端本地生成随机对称密钥。\n 2. 通过公钥加密随机对称密钥，并把加密后的随机数传输到服务器端。\n 3. 服务器端通过私钥对随机对称密钥进行解密。\n 4. 服务器端通过客户端传入的随机对称密钥构造对称加密算法，对返回结果内容加密后进行传输。\n\n\n\n\n# 问题\n\n\n# 如何验证证书是否合法？\n\n 1. 验证证书链。\n\n> 客户端会验证服务器证书的有效性和合法性。首先，它会检查证书的签名是否有效，以确保证书未被篡改。然后，它会验证证书链，即证书链中的每个证书都应该是由受信任的根证书颁发机构签发的，以确保其受信任。\n\n 2. 检查证书信任。\n\n> 客户端使用内置的根证书颁发机构（ca）公钥来验证证书是否被受信任的颁发机构所签发。客户端会比对证书链中的每个证书的公钥，以确保其与内置的根证书颁发机构的公钥匹配。\n\n 3. 检查证书有效期。\n\n> 检查证书的有效期，确保证书在当前时间范围内有效。证书通常包含了一个开始和结束的有效期限。\n\n 4. 验证域名匹配。\n\n> 客户端会检查证书中所列的域名与服务器的域名是否匹配。这个验证步骤被称为“主机名验证”，它确保服务器证书只能用于指定的域名，防止中间人攻击。\n\n\n# 为什么数据传输使用对称加密？\n\n因为非对称加密的效率非常低，在 http 的应用场景下端对端之间存在大量的交互，所以非对称加密的效率是不适用的。\n\n\n# 为什么需要ca认证机构颁发证书？\n\n为了防止中间人攻击。\n\n\n\n\n# 用了https会被抓包吗？\n\nhttps 只防护用户在不知情的情况下通信被监听，主动安装证书授权可以进行解密抓包。\n\nhttps 的数据是加密的常规下抓包工具代理请求后抓到的包内容是加密状态无法直接查看。\n\n解决方法：使用抓包工具生成一个证书安装到客户端中模拟中间人攻击。\n\n要防止被抓包需要采用应用级的安全防护。例如采用私有对称加密，同时做好移动端的反编译加固，防止本地算法被破解。\n\n\n# 参考\n\n胡凯莉-https加密解析\n\n顾伊凡-彻底搞懂https的加密原理",charsets:{cjk:!0},lastUpdated:"7/24/2023",lastUpdatedTimestamp:1690170837e3},{title:"Docker",frontmatter:{title:"Docker",date:"2022-07-22T17:58:06.000Z",permalink:"/pages/f14098/",categories:["笔记","常用指令"],tags:["Docker"],readingShow:"top"},regularPath:"/01.%E6%96%87%E7%AB%A0/09.%E5%AE%B9%E5%99%A8/02.Docker.html",relativePath:"01.文章/09.容器/02.Docker.md",key:"v-07c556de",path:"/pages/f14098/",headers:[{level:2,title:"常用指令",slug:"常用指令",normalizedTitle:"常用指令",charIndex:13},{level:2,title:"docker-compose 常用命令",slug:"docker-compose-常用命令",normalizedTitle:"docker-compose 常用命令",charIndex:1348},{level:2,title:"yum更新",slug:"yum更新",normalizedTitle:"yum更新",charIndex:1726},{level:2,title:"Docker安装",slug:"docker安装",normalizedTitle:"docker安装",charIndex:2107},{level:2,title:"Dockerfile",slug:"dockerfile",normalizedTitle:"dockerfile",charIndex:3105},{level:3,title:"举例",slug:"举例",normalizedTitle:"举例",charIndex:4712},{level:2,title:"docker-composes搭建",slug:"docker-composes搭建",normalizedTitle:"docker-composes搭建",charIndex:5798},{level:3,title:"离线安装",slug:"离线安装",normalizedTitle:"离线安装",charIndex:5820},{level:3,title:"在线安装",slug:"在线安装",normalizedTitle:"在线安装",charIndex:6148},{level:2,title:"镜像仓库",slug:"镜像仓库",normalizedTitle:"镜像仓库",charIndex:6478},{level:3,title:"docker hub",slug:"docker-hub",normalizedTitle:"docker hub",charIndex:6487},{level:3,title:"阿里云docker hub",slug:"阿里云docker-hub",normalizedTitle:"阿里云docker hub",charIndex:6955},{level:3,title:"搭建自己的Docker Harbor",slug:"搭建自己的docker-harbor",normalizedTitle:"搭建自己的docker harbor",charIndex:7755},{level:2,title:"Docker compose实现",slug:"docker-compose实现",normalizedTitle:"docker compose实现",charIndex:8433},{level:2,title:"Docker Swarm",slug:"docker-swarm",normalizedTitle:"docker swarm",charIndex:10542},{level:3,title:"Swarm基本操作",slug:"swarm基本操作",normalizedTitle:"swarm基本操作",charIndex:11364},{level:3,title:"多机通信overlay网络",slug:"多机通信overlay网络",normalizedTitle:"多机通信overlay网络",charIndex:11928},{level:3,title:"Swarm中实现",slug:"swarm中实现",normalizedTitle:"swarm中实现",charIndex:13674},{level:2,title:"Routing Mesh",slug:"routing-mesh",normalizedTitle:"routing mesh",charIndex:14930},{level:3,title:"Ingress",slug:"ingress",normalizedTitle:"ingress",charIndex:14947},{level:3,title:"Internal",slug:"internal",normalizedTitle:"internal",charIndex:15347},{level:2,title:"Stack",slug:"stack",normalizedTitle:"stack",charIndex:16290},{level:2,title:"Docker卸载",slug:"docker卸载",normalizedTitle:"docker卸载",charIndex:18305},{level:2,title:"问题汇总",slug:"问题汇总",normalizedTitle:"问题汇总",charIndex:18923},{level:3,title:"日志中文乱码问题",slug:"日志中文乱码问题",normalizedTitle:"日志中文乱码问题",charIndex:18932}],headersStr:"常用指令 docker-compose 常用命令 yum更新 Docker安装 Dockerfile 举例 docker-composes搭建 离线安装 在线安装 镜像仓库 docker hub 阿里云docker hub 搭建自己的Docker Harbor Docker compose实现 Docker Swarm Swarm基本操作 多机通信overlay网络 Swarm中实现 Routing Mesh Ingress Internal Stack Docker卸载 问题汇总 日志中文乱码问题",content:'# Docker\n\n\n# 常用指令\n\n(1)查看运行情况\n    docker ps -a\n\n(2)日志查看\n    docker logs -f IMAGE\n\n(3)进入容器\n    docker exec -it IMAGE sh\n\n(4)删除容器\n    docker rm -f IMAGE\n\n(5)退出容器\n    exit\n\n(6)下载镜像\n    docker pull name:tag\n\n(7)查看本地已下载的镜像\n    docker images\n\n(8)删除镜像\n    docker image rm imageid\n    docker rmi -f imageId\n    docker rmi -f $(docker image ls)\n\n(9)从容器里面拷文件到宿主机\n    docker cp 容器名：要拷贝的文件在容器里面的路径       要拷贝到宿主机的相应路径 \n    docker cp mysql:/super_app.sql /home\n\n(10)从宿主机拷文件到docker容器里面\n    docker cp 要拷贝的文件路径 容器名：要拷贝到容器里面对应的路径\n    docker cp /apps/pg/pg_backup.bak 3cafc3e96cbe:/home\n    \n(11)发布镜像\n    docker push\n    \n(12)清理容器多余数据\n    仅仅清除没有被容器使用的镜像文件：\n    docker image prune -af   \n    清除多余的数据，包括停止的容器、多余的镜像、未被使用的volume等：\n    docker system prune -f  \n\n(13)docker的logs的清理有什么好的方法吗？\n    运行久了发现logs比镜像还大\n    配置 docker 的 log-opts 参数\n    设置每个容器产生的日志文件大小和数量\n    \n(14)查看镜像构建历史\n    docker history\n    \n(15)启动、停止、删除所有镜像\n    docker start $(docker ps -a -q)\n    docker stop $(docker ps -a -q)\n    docker rm $(docker ps -a -q) \n    \n(16)空悬镜像\n    由于新加镜像占用了原有镜像的标签，原有镜像就变成了none镜像\n    删除这些无用镜像\n    docker rmi $(docker images -f "dangling=true" -q)\n\n(17)构建镜像\n    docker build -t nacos-test . \n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n\n\n\n# docker-compose 常用命令\n\n(1)查看版本\n    docker-compose version\n  \n(2)命令聚合每个容器的输出，命令退出时，所有容器都将停止\n    普通运行：docker-compose up\n    后台运行：docker-compose up -d\n    \n(3)根据yml创建service\n    指定yaml：docker-compose up -f xxx.yaml\n\n(4)删除service[同时会删除掉network和volume]\n    docker-compose down\n\n(5)查看该容器的启动的日志打印(日志从头打印)\n    docker-compose logs -f\n\n    \n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n\n\n\n# yum更新\n\n(1)更新yum\n    yum update\n    \n(2)安装 yum-util\n    yum install -y yum-utils\n\n(3)添加yum源\n    yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n    yum-config-manager --add-repo http://download.docker.com/linux/centos/docker-ce.repo\n\n(4)更新索引\n    centos7：yum makecache fast\n    centos8：yum makecache\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\n\n# Docker安装\n\n(1)卸载之前的docker\n\tsudo yum remove docker \\\n                  docker-client \\\n                  docker-client-latest \\\n                  docker-common \\\n                  docker-latest \\\n                  docker-latest-logrotate \\\n                  docker-logrotate \\\n                  docker-engine\n                  \n(2)安装必要的依赖 \n\tsudo yum install -y yum-utils \\\n    device-mapper-persistent-data \\\n    lvm2\n\n(3)设置docker仓库  \n    [访问阿里云，使用自己的阿里云账号登录，查看菜单栏左下角，镜像加速器，使用下面的命令]\n    \n(4)安装docker\n\tsudo yum install -y docker-ce docker-ce-cli containerd.io\n\n(5)启动\n\tsudo systemctl start docker\n\n(6)测试docker安装是否成功\n\tsudo docker run hello-world\n\t\n(7)设置为docker开机自启动\n    chkconfig docker on\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n\n\n阿里云镜像加速器\n\nsudo mkdir -p /etc/docker\nsudo tee /etc/docker/daemon.json <<-\'EOF\'\n{\n  "registry-mirrors": ["https://y11mlmqb.mirror.aliyuncs.com"]\n}\nEOF\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n\n# Dockerfile\n\nFROM\t\n    Dockerfile 除了注释第一行必须是 FROM ，FROM 后面跟镜像名称，代表我们要基于哪个基础镜像构建我们的容器。\n    例：FROM ubuntu:14.04\n\nRUN\t\n    RUN 后面跟一个具体的命令，类似于 Linux 命令行执行命令。\n    在镜像内部执行一些命令，比如安装软件，配置环境等。  \n    例：groupadd -r mysql && useradd -r -g mysql mysql\n\nADD\t\n    将主机的文件复制到镜像内，和COPY类似，只是 ADD 会对压缩文件提取和解压\n    ADD application.yml /etc/test/\n\nCOPY\t\n    将主机的文件复制到镜像内，如果目录不存在，会自动创建所需要的目录，注意只是复制，不会提取和解压。  \n    COPY docker-entrypoint.sh /usr/local/bin/\n\nUSER\t\n    指定容器启动的用户\n\nENTRYPOINT\t\n    容器的启动命令\n    和CMD的使用类似。和CMD的不同 docker run 执行时，会覆盖 CMD 的命令，而 ENTRYPOINT 不会。  \n    ENTRYPOINT ["docker-entrypoint.sh"]  \n\nCMD\t\n    CMD 为 ENTRYPOINT 指令提供默认参数，也可以单独使用 CMD 指定容器启动参数\n    容器启动的时候默认会执行的命令，若有多个CMD命令，则最后一个生效。  \n    CMD ["mysqld"] 或 CMD mysqld\n\nENV\t\n    指定容器运行时的环境变量，格式为 key=value\n    可以通过docker run --e key=value修改，后面可以直接使用 ${MYSQL_MAJOR}。   \n\nARG\t\n    定义外部变量，构建镜像时可以使用 build-arg = 的格式传递参数用于构建\n\nEXPOSE\t\n    指定容器监听的端口，格式为 [port]/tcp 或者 [port]/udp\n    指定镜像要暴露的端口，启动镜像时，可以使用 -p 将该端口映射给宿主机。  \n    EXPOSE 3306  \n\nWORKDIR\t\n    为 Dockerfile 中跟在其后的所有 RUN、CMD、ENTRYPOINT、COPY 和 ADD 命令设置工作目录。\n    指定镜像的工作目录，之后的命令都是基于此目录工作，若不存在则创建。  \n\n    会在/usr/local/tomcat下创建test.txt文件。  \n    WORKDIR /usr/local\n    WORKDIR tomcat\n    RUN touch test.txt\n    \n    会在/root/test下多出一个app.yml文件。  \n    WORKDIR /root  \n     ADD app.yml test/  \n    \nLABEL\n    设置镜像标签。  \n    LABEL email="xxx@163.com"\n    LABEL name="xxx"\n    \nVOLUME\n    指定数据的挂载目录。  \n    VOLUME /var/lib/mysql  \n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n\n\n\n# 举例\n\n(1)创建一个Spring Boot项目\n\n(2)写一个controller\n  @RestController\n  public class DockerController {\n    @GetMapping("/dockerfile")\n    @ResponseBody\n    String dockerfile() {\n    return "hello docker" ;\n   }\n }\n \n(3)mvn clean package打成一个jar包\n    在target下找到"dockerfile-demo-0.0.1-SNAPSHOT.jar"\n\n(4)在docker环境中新建一个目录"first-dockerfile"\n\n(5)上传"dockerfile-demo-0.0.1-SNAPSHOT.jar"到该目录下，并且在此目录创建Dockerfile\n\n(6)创建Dockerfile文件，编写内容\n    FROM openjdk:8\n    MAINTAINER xxx@gmail.com\n    LABEL name="dockerfile-demo" version="1.0" author="xxx"\n    COPY dockerfile-demo-0.0.1-SNAPSHOT.jar dockerfile-image.jar\n    CMD ["java","-jar","dockerfile-image.jar"]\n\n(7)基于Dockerfile构建镜像\n    docker build -t test-docker-image .\n\n(8)基于image创建container\n    docker run -d --name user01 -p 6666:8080 test-docker-image\n\n(9)查看启动日志\n    docker logs user01\n\n(10)宿主机上访问\n    curl localhost:6666/dockerfile\n    hello docker\n\n(11)还可以再次启动一个\n    docker run -d --name user02 -p 8081:8080 test-docker-image\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n\n\n\n# docker-composes搭建\n\n\n# 离线安装\n\n(1)运行以下命令下载最新版本的docker-compose并进行安装  \n    sudo curl -L "https://github.com/docker/compose/releases/download/1.24.1/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose\n    \n(2)更改二进制文件的权限，使其能够运行\n    chmod +x /usr/local/bin/docker-compose\n    \n(3)测试安装\n    docker-compose --version\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n\n# 在线安装\n\n(1)安装python源\n    apt-get update\n    apt-get install python-pip\n\n(2)删除老版docker-compose\n    pip uninstall docker-compose\n\n(3)安装docker-compose\n    pip install docker-compose\n\n    可能安装失败：https://blog.csdn.net/kelly1250230225/article/details/125361721\n\n(4)测试安装\n    docker-compose --vesion\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n\n\n\n# 镜像仓库\n\n\n# docker hub\n\n(1)在docker机器上登录\n    docker login\n(2)输入用户名和密码\n\n(3)给image重命名，并删除掉原来的\n    [注意镜像名称要和docker id一致，不然push不成功]\n    docker tag test-docker-image rcbb/test-docker-image\n    docker rmi -f test-docker-image\n    \n(4)再次推送，刷新hub.docker.com后台，发现成功\n    docker push itcrazy2018/test-docker-image\n\n(5)别人下载，并且运行\n    docker pull itcrazy2018/test-docker-image\n    docker run -d --name user01 -p 6661:8080 itcrazy2018/test-docker-image\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\n\n# 阿里云docker hub\n\n阿里云docker仓库\n\n> https://cr.console.aliyun.com/cn-hangzhou/instances/repositories\n\n参考手册\n\n> https://cr.console.aliyun.com/repository/cn-hangzhou/dreamit/image-repo/details\n\n(1)登录到阿里云docker仓库\n    sudo docker login --username=itcrazy2016@163.com registry.cn-hangzhou.aliyuncs.com\n(2)输入密码\n\n(3)创建命名空间，比如itcrazy2016\n\n(4)给image打tag\n    sudo docker tag [ImageId] registry.cn-hangzhou.aliyuncs.com/itcrazy2016/test-docker-image:v1.0\n\n(5)推送镜像到docker阿里云仓库\n    sudo docker push registry.cn-hangzhou.aliyuncs.com/itcrazy2016/test-docker-image:v1.0\n(6)别人下载，并且运行\n    docker pull registry.cn-hangzhou.aliyuncs.com/itcrazy2016/test-docker-image:v1.0\n    docker run -d --name user01 -p 6661:8080 registry.cn-hangzhou.aliyuncs.com/itcrazy2016/test-docker-image:v1.0\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n\n\n\n# 搭建自己的Docker Harbor\n\n(1)访问github上的harbor项目\n    https://github.com/goharbor/harbor\n\n(2)下载版本，比如1.7.1\n    https://github.com/goharbor/harbor/releases\n\n(3)找一台安装了docker-compose[这个后面的课程会讲解]，上传并解压\n    tar -zxvf xxx.tar.gz\n    tar xvf harbor-offline-installer-v2.5.0.tgz\n    \n(4)进入到harbor目录\n    mv harbor.yml.tmpl harbor.yml\n    修改 harbor.yml 文件：\n    1.hostname 地址的修改成当前机器的ip地址；\n    2.https 不用则注释掉；\n    3.可以修改Harbor的密码，默认是 Harbor12345；（admin/Harbor12345）\n\n(5)安装harbor，需要一些时间\n    sh install.sh\n\n(6)浏览器访问，比如 39.100.39.63，输入用户名和密码即可\n\n\n(1)关闭实例\n    docker-compose down -v\n\n(2)启动Harbor\n    docker-compose up -d\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n\n\n\n# Docker compose实现\n\n(1)新建目录\n    mkdir -p /apps/composetest\n    cd /apps/composetest\n    \n(2)编写 app.py 代码\n    vi app.py\n\n(3)新建 requirements.txt 文件\n    vi requirements.txt\n    \n(4)编写Dockerfile\n    vi Dockerfile\n    \n(5)编写docker-compose.yaml文件\n    vi docker-compose.yaml\n    \n(6)通过docker compose创建容器\n    docker-compose up -d\n    \n(7)访问测试\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n\n\napp.py\n\nimport time\n\nimport redis\nfrom flask import Flask\n\napp = Flask(__name__)\ncache = redis.Redis(host=\'redis\', port=6379)\n\ndef get_hit_count():\n    retries = 5\n    while True:\n        try:\n            return cache.incr(\'hits\')\n        except redis.exceptions.ConnectionError as exc:\n            if retries == 0:\n                raise exc\n            retries -= 1\n            time.sleep(0.5)\n\n@app.route(\'/\')\ndef hello():\n    count = get_hit_count()\n    return \'Hello World! I have been seen {} times.\\n\'.format(count)\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n\n\nrequirements.txt\n\nflask\nredis\n\n\n1\n2\n\n\nDockerfile\n\nFROM python:3.7-alpine\nWORKDIR /code\nENV FLASK_APP app.py\nENV FLASK_RUN_HOST 0.0.0.0\nRUN apk add --no-cache gcc musl-dev linux-headers\nCOPY requirements.txt requirements.txt\nRUN pip install -r requirements.txt\nCOPY . .\nCMD ["flask", "run"]\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\ndocker-compose.yaml\n\nversion: \'3\'\nservices:\n  web:\n    build: .\n    ports:\n      - "5000:5000"\n    networks:\n      - app-net\n\n  redis:\n    image: "redis:alpine"\n    networks:\n      - app-net\n\nnetworks:\n  app-net:\n    driver: bridge\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n\n\n解读 docker-compose.yaml\n\n# 表示 docker-compose 的版本    \nversion: "3.9"\n# 一个 service 表示 container\nservices:\n  web:\n    build: .\n    # 相当于 -p 5000:5000\n    ports:\n      - "5000:5000"\n    # 相当于-v v1:/var/lib/mysql\n    volumes:\n      - .:/\n    # 相当于-e\n    environment:\n      FLASK_ENV: development\n  redis:\n    # 表示使用哪个镜像，本地build则用build，远端则用image\n    image: "redis:alpine"\n    networks:\n      - app-net\n# 相当于 docker network create app-net\nnetworks:\n  app-net:\n    driver: bridge\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n\n\n\n# Docker Swarm\n\n(1)环境准备，准备3台Centos机器\n    manager：192.168.56.10\n    work-node1：192.168.56.11\n    work-node2：192.168.56.12\n    \n(2)进入manager\n    docker swarm init --advertise-addr=192.168.56.10\n    \n    注意观察日志，拿到worker node加入manager node的信息\n    docker swarm join --token SWMTKN-1-0a5ph4nehwdm9wzcmlbj2ckqqso38pkd238rprzwcoawabxtdq-arcpra6yzltedpafk3qyvv0y3 192.168.0.10:2377\n    \n(3)进入两个work-node\n    docker swarm join --token SWMTKN-1-0a5ph4nehwdm9wzcmlbj2ckqqso38pkd238rprzwcoawabxtdq-arcpra6yzltedpafk3qyvv0y3 192.168.0.10:2377\n\n(4)进入manger，查看集群状态\n    docker node ls\n\n(5)node类型的转换\n    可以将worker提升成manager，从而保证manager的高可用\n    docker node promote worker-node1\n    docker node promote worker-node2\n    \n    降级可以用demote\n    docker node demote worker01-node\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n\n\n\n# Swarm基本操作\n\n(1)创建一个tomcat的service\n    docker service create --name my-tomcat tomcat\n    \n(2)查看当前swarm的service\n    docker service ls\n\n(3)查看service的启动日志\n    docker service logs my-tomcat\n\n(4)查看service的详情\n    docker service inspect my-tomcat\n\n(5)查看my-tomcat运行在哪个node上\n    docker service ps my-tomcat\n\n(6)水平扩展service，扩展3个\n    docker service scale my-tomcat=3\n    docker service ls\n    docker service ps my-tomcat\n    \n(7)如果某个node上的my-tomcat挂掉了，这时候会自动扩展\n\n(8)删除service\n    docker service rm my-tomcat\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n\n\n\n# 多机通信overlay网络\n\nworkpress+mysql实现个人博客搭建\n\n> https://hub.docker.com/_/wordpress?tab=description\n\n传统命令方式\n\n(1)创建mysql容器[创建完成等待一会，注意mysql的版本]\n\tdocker run -d --name mysql -v v1:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=examplepass -e MYSQL_DATABASE=db_wordpress mysql:5.6\n\t\n(2)创建wordpress容器[将wordpress的80端口映射到centos的8080端口]\n\tdocker run -d --name wordpress --link mysql -e WORDPRESS_DB_HOST=mysql:3306 -e WORDPRESS_DB_USER=root -e WORDPRESS_DB_PASSWORD=examplepass -e WORDPRESS_DB_NAME=db_wordpress -p 8080:80 wordpress\n\t\n(3)查看默认bridge的网络，可以发现两个容器都在其中\n\tdocker network inspect bridge\n\t\n(4)访问测试\n\twin浏览器中输入：ip[centos]:8080，一直下一步\n\n使用docker compose创建\n\n(1)创建wordpress-mysql文件夹\n\tmkdir -p /tmp/wordpress-mysql\n\tcd /tmp/wordpress-mysql\n\t\n(2)创建 docker-compose.yml 文件\n    vi docker-compose.yml\n    \n(3)根据 docker-compose.yml 文件创建 service  \n    docker-compose up -d\n    \n(4)访问测试\n    win10浏览器ip[centos]:8080，一直下一步\n\n(5)值得关注的点是网络\n\tdocker network ls\n\tdocker network inspect wordpress-mysql_default\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n\n\ndocker-compose.yml 内容\n\nversion: \'3.1\'\n\nservices:\n\n  wordpress:\n    image: wordpress\n    restart: always\n    ports:\n      - 8080:80\n    environment:\n      WORDPRESS_DB_HOST: db\n      WORDPRESS_DB_USER: exampleuser\n      WORDPRESS_DB_PASSWORD: examplepass\n      WORDPRESS_DB_NAME: exampledb\n    volumes:\n      - wordpress:/var/www/html\n\n  db:\n    image: mysql:5.7\n    restart: always\n    environment:\n      MYSQL_DATABASE: exampledb\n      MYSQL_USER: exampleuser\n      MYSQL_PASSWORD: examplepass\n      MYSQL_RANDOM_ROOT_PASSWORD: \'1\'\n    volumes:\n      - db:/var/lib/mysql\n\nvolumes:\n  wordpress:\n  db:\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n\n\n\n# Swarm中实现\n\n(1)创建一个overlay网络，用于docker swarm中多机通信\n    [manager-node]\n    docker network create -d overlay my-overlay-net\n    [此时worker node查看不到]\n    docker network ls\n    \n(2)创建mysql的service\n    [manager-node]\n    1.创建service\n        docker service create --name mysql --mount type=volume,source=v1,destination=/var/lib/mysql --env MYSQL_ROOT_PASSWORD=examplepass --env MYSQL_DATABASE=db_wordpress --network my-overlay-net mysql:5.6\n    \n    2.查看service\n        docker service ls\n\t    docker service ps mysql\n\n(3)创建wordpress的service\n    1.创建service  \n    [注意之所以下面可以通过mysql名字访问，也是因为有DNS解析]\n        docker service create --name wordpress --env WORDPRESS_DB_USER=root --env WORDPRESS_DB_PASSWORD=examplepass --env WORDPRESS_DB_HOST=mysql:3306 --env WORDPRESS_DB_NAME=db_wordpress -p 8080:80 --network my-overlay-net wordpress\n        \n    2.查看service\n        docker service ls\n\t    docker service ps mysql\n\n    3.此时mysql和wordpress的service运行在哪个node上\n        这时候就能看到my-overlay-net的网络\n\n(4)测试\n    win浏览器访问ip[manager/worker01/worker02]:8080都能访问成功\n    \n(5)查看my-overlay-net \n    docker network inspect my-overlay-net\n    \n(6)为什么没有用etcd？\n    docker swarm中有自己的分布式存储机制\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n\n\n\n# Routing Mesh\n\n\n# Ingress\n\n通过前面的案例我们发现，部署一个 wordpress 的 service，映射到主机的 8080 端口，这时候通过 swarm 集群中的任意主机 ip:8080 都能成功访问，这是因为什么？\n\n启动命令：\n\n> docker service create --name tomcat -p 8080:8080 --network my-overlay-net tomcat\n\n(1)记得使用一个自定义的overlay类型的网络\n    --network my-overlay-net\n    \n(2)查看service情况\n    docker service ls\n    docker service ps tomcat\n    \n(3)访问3台机器的ip:8080测试\n    发现都能够访问到tomcat的欢迎页\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\n\n# Internal\n\n之前在实战 wordpress+mysql 的时候，发现 wordpress 中可以直接通过 mysql 名称访问。\n\n这样可以说明两点：\n第一是其中一定有dns解析，第二是两个service的ip是能够ping通的。\n\n思考：不妨再创建一个service，也同样使用上述tomcat的overlay网络，然后来实验。\n\n(1)启动命令\n    docker service create --name whoami -p 8000:8000 --network my-overlay-net -d  jwilder/whoami\n    \n(2)查看whoami的情况\n    docker service ps whoami\n    \n(3)在各自容器中互相ping一下彼此，也就是容器间的通信\n    tomcat容器中ping whoami\n        docker exec -it 9d7d4c2b1b80 ping whoami\n\n    whoami容器中ping tomcat\n        docker exec -it 5c4fe39e7f60 ping tomcat\n\n(4)将whoami进行扩容\n    docker service scale whoami=3\n    docker service ps whoami\n    \n(5)此时再ping whoami service，并且访问whoami服务\n    docker exec -it 9d7d4c2b1b80 ping whoami\n    [多访问几次，得到的结果不同]\n    docker exec -it 9d7d4c2b1b80 curl whoami:8000  \n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n\n\n通过上述的实验可以发现什么？\n\nwhoami服务对其他服务暴露的ip是不变的，但是通过whoami名称访问8000端口，确实访问到的是不同的service。\n\n也就是说whoami service对其他服务提供了一个统一的VIP入口，别的服务访问时会做负载均衡。\n\n\n# Stack\n\ndocker stack deploy：\nhttps://docs.docker.com/engine/reference/commandline/stack_deploy/\n\ncompose-file：\nhttps://docs.docker.com/compose/compose-file/\n\n有没有发现上述部署service很麻烦？\n要是能够类似于docker-compose.yml文件那种方式一起管理该多少？\n这就要涉及到docker swarm中的Stack，我们直接通过前面的wordpress+mysql案例看看怎么使用咯。\n\n\n\n(1)新建service.yml文件\n    vi service.yml\n\n(2)根据service.yml创建service\n    docker statck deploy -c service.yml my-service\n    \n(3)常见操作\n    1.查看stack具体信息\n        docker stack ls\n    2.查看具体的service\n        docker stack services my-service\n    3.查看某个service\n        docker service inspect my-service-db\n        \n(4)测试访问\n    win浏览器ip[manager,worker01,worker02]:8080\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n\n\nservice.yml\n\nversion: \'3\'\n\n    services:\n\n      wordpress:\n        image: wordpress\n        ports:\n          - 8080:80\n        environment:\n          WORDPRESS_DB_HOST: db\n          WORDPRESS_DB_USER: exampleuser\n          WORDPRESS_DB_PASSWORD: examplepass\n          WORDPRESS_DB_NAME: exampledb\n        networks:\n          - ol-net\n        volumes:\n          - wordpress:/var/www/html\n        deploy:\n          mode: replicated\n          replicas: 3\n          restart_policy:\n            condition: on-failure\n            delay: 5s\n            max_attempts: 3\n          update_config:\n            parallelism: 1\n            delay: 10s\n\n      db:\n        image: mysql:5.7\n        environment:\n          MYSQL_DATABASE: exampledb\n          MYSQL_USER: exampleuser\n          MYSQL_PASSWORD: examplepass\n          MYSQL_RANDOM_ROOT_PASSWORD: \'1\'\n        volumes:\n          - db:/var/lib/mysql\n        networks:\n          - ol-net\n        deploy:\n          mode: global\n          placement:\n            constraints:\n              - node.role == manager\n\n    volumes:\n      wordpress:\n      db:\n\n    networks:\n      ol-net:\n        driver: overlay\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n\n\n\n# Docker卸载\n\n(1)杀死所有运行容器\n    docker kill $(docker ps -a -q)\n    \n(2)删除所有容器\n    docker rm $(docker ps -a -q)\n    \n(3)删除所有镜像\n    docker rmi $(docker images -q)\n    \n(4)停止 docker 服务\n    systemctl stop docker\n\n(5)删除存储目录\n    rm -rf /etc/docker\n    rm -rf /run/docker\n    rm -rf /var/lib/dockershim\n    rm -rf /var/lib/docker\n    \n(6)卸载 docker\n    查看已安装的 docker 包\n    yum list installed | grep docker\n    \n    卸载相关包\n    yum remove docker-ce.x86_64 docker-ce-cli.x86_64 docker-ce-rootless-extras.x86_64 docker-scan-plugin.x86_64 containerd.io.x86_64\n    \n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n\n\n\n# 问题汇总\n\n\n# 日志中文乱码问题\n\n在 Dockerfile 中设置编码\n\nENV LC_ALL=zh_CN.utf8\nENV LANG=zh_CN.utf8\nENV LANGUAGE=zh_CN.utf8\n\n\n1\n2\n3\n\n\n或者在 docker-compose.yml 中设置编码\n\ntaas-nms-biz:\n    restart: always\n    container_name: taas-nms-biz\n    image: taas-nms-biz:1.0.0-SNAPSHOT\n    network_mode: "host"\n\tenvironment:\n\t\t- LANG=zh_CN.UTF-8\t\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n有些的',normalizedContent:'# docker\n\n\n# 常用指令\n\n(1)查看运行情况\n    docker ps -a\n\n(2)日志查看\n    docker logs -f image\n\n(3)进入容器\n    docker exec -it image sh\n\n(4)删除容器\n    docker rm -f image\n\n(5)退出容器\n    exit\n\n(6)下载镜像\n    docker pull name:tag\n\n(7)查看本地已下载的镜像\n    docker images\n\n(8)删除镜像\n    docker image rm imageid\n    docker rmi -f imageid\n    docker rmi -f $(docker image ls)\n\n(9)从容器里面拷文件到宿主机\n    docker cp 容器名：要拷贝的文件在容器里面的路径       要拷贝到宿主机的相应路径 \n    docker cp mysql:/super_app.sql /home\n\n(10)从宿主机拷文件到docker容器里面\n    docker cp 要拷贝的文件路径 容器名：要拷贝到容器里面对应的路径\n    docker cp /apps/pg/pg_backup.bak 3cafc3e96cbe:/home\n    \n(11)发布镜像\n    docker push\n    \n(12)清理容器多余数据\n    仅仅清除没有被容器使用的镜像文件：\n    docker image prune -af   \n    清除多余的数据，包括停止的容器、多余的镜像、未被使用的volume等：\n    docker system prune -f  \n\n(13)docker的logs的清理有什么好的方法吗？\n    运行久了发现logs比镜像还大\n    配置 docker 的 log-opts 参数\n    设置每个容器产生的日志文件大小和数量\n    \n(14)查看镜像构建历史\n    docker history\n    \n(15)启动、停止、删除所有镜像\n    docker start $(docker ps -a -q)\n    docker stop $(docker ps -a -q)\n    docker rm $(docker ps -a -q) \n    \n(16)空悬镜像\n    由于新加镜像占用了原有镜像的标签，原有镜像就变成了none镜像\n    删除这些无用镜像\n    docker rmi $(docker images -f "dangling=true" -q)\n\n(17)构建镜像\n    docker build -t nacos-test . \n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n\n\n\n# docker-compose 常用命令\n\n(1)查看版本\n    docker-compose version\n  \n(2)命令聚合每个容器的输出，命令退出时，所有容器都将停止\n    普通运行：docker-compose up\n    后台运行：docker-compose up -d\n    \n(3)根据yml创建service\n    指定yaml：docker-compose up -f xxx.yaml\n\n(4)删除service[同时会删除掉network和volume]\n    docker-compose down\n\n(5)查看该容器的启动的日志打印(日志从头打印)\n    docker-compose logs -f\n\n    \n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n\n\n\n# yum更新\n\n(1)更新yum\n    yum update\n    \n(2)安装 yum-util\n    yum install -y yum-utils\n\n(3)添加yum源\n    yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n    yum-config-manager --add-repo http://download.docker.com/linux/centos/docker-ce.repo\n\n(4)更新索引\n    centos7：yum makecache fast\n    centos8：yum makecache\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n\n\n\n# docker安装\n\n(1)卸载之前的docker\n\tsudo yum remove docker \\\n                  docker-client \\\n                  docker-client-latest \\\n                  docker-common \\\n                  docker-latest \\\n                  docker-latest-logrotate \\\n                  docker-logrotate \\\n                  docker-engine\n                  \n(2)安装必要的依赖 \n\tsudo yum install -y yum-utils \\\n    device-mapper-persistent-data \\\n    lvm2\n\n(3)设置docker仓库  \n    [访问阿里云，使用自己的阿里云账号登录，查看菜单栏左下角，镜像加速器，使用下面的命令]\n    \n(4)安装docker\n\tsudo yum install -y docker-ce docker-ce-cli containerd.io\n\n(5)启动\n\tsudo systemctl start docker\n\n(6)测试docker安装是否成功\n\tsudo docker run hello-world\n\t\n(7)设置为docker开机自启动\n    chkconfig docker on\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n\n\n阿里云镜像加速器\n\nsudo mkdir -p /etc/docker\nsudo tee /etc/docker/daemon.json <<-\'eof\'\n{\n  "registry-mirrors": ["https://y11mlmqb.mirror.aliyuncs.com"]\n}\neof\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n\n# dockerfile\n\nfrom\t\n    dockerfile 除了注释第一行必须是 from ，from 后面跟镜像名称，代表我们要基于哪个基础镜像构建我们的容器。\n    例：from ubuntu:14.04\n\nrun\t\n    run 后面跟一个具体的命令，类似于 linux 命令行执行命令。\n    在镜像内部执行一些命令，比如安装软件，配置环境等。  \n    例：groupadd -r mysql && useradd -r -g mysql mysql\n\nadd\t\n    将主机的文件复制到镜像内，和copy类似，只是 add 会对压缩文件提取和解压\n    add application.yml /etc/test/\n\ncopy\t\n    将主机的文件复制到镜像内，如果目录不存在，会自动创建所需要的目录，注意只是复制，不会提取和解压。  \n    copy docker-entrypoint.sh /usr/local/bin/\n\nuser\t\n    指定容器启动的用户\n\nentrypoint\t\n    容器的启动命令\n    和cmd的使用类似。和cmd的不同 docker run 执行时，会覆盖 cmd 的命令，而 entrypoint 不会。  \n    entrypoint ["docker-entrypoint.sh"]  \n\ncmd\t\n    cmd 为 entrypoint 指令提供默认参数，也可以单独使用 cmd 指定容器启动参数\n    容器启动的时候默认会执行的命令，若有多个cmd命令，则最后一个生效。  \n    cmd ["mysqld"] 或 cmd mysqld\n\nenv\t\n    指定容器运行时的环境变量，格式为 key=value\n    可以通过docker run --e key=value修改，后面可以直接使用 ${mysql_major}。   \n\narg\t\n    定义外部变量，构建镜像时可以使用 build-arg = 的格式传递参数用于构建\n\nexpose\t\n    指定容器监听的端口，格式为 [port]/tcp 或者 [port]/udp\n    指定镜像要暴露的端口，启动镜像时，可以使用 -p 将该端口映射给宿主机。  \n    expose 3306  \n\nworkdir\t\n    为 dockerfile 中跟在其后的所有 run、cmd、entrypoint、copy 和 add 命令设置工作目录。\n    指定镜像的工作目录，之后的命令都是基于此目录工作，若不存在则创建。  \n\n    会在/usr/local/tomcat下创建test.txt文件。  \n    workdir /usr/local\n    workdir tomcat\n    run touch test.txt\n    \n    会在/root/test下多出一个app.yml文件。  \n    workdir /root  \n     add app.yml test/  \n    \nlabel\n    设置镜像标签。  \n    label email="xxx@163.com"\n    label name="xxx"\n    \nvolume\n    指定数据的挂载目录。  \n    volume /var/lib/mysql  \n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n\n\n\n# 举例\n\n(1)创建一个spring boot项目\n\n(2)写一个controller\n  @restcontroller\n  public class dockercontroller {\n    @getmapping("/dockerfile")\n    @responsebody\n    string dockerfile() {\n    return "hello docker" ;\n   }\n }\n \n(3)mvn clean package打成一个jar包\n    在target下找到"dockerfile-demo-0.0.1-snapshot.jar"\n\n(4)在docker环境中新建一个目录"first-dockerfile"\n\n(5)上传"dockerfile-demo-0.0.1-snapshot.jar"到该目录下，并且在此目录创建dockerfile\n\n(6)创建dockerfile文件，编写内容\n    from openjdk:8\n    maintainer xxx@gmail.com\n    label name="dockerfile-demo" version="1.0" author="xxx"\n    copy dockerfile-demo-0.0.1-snapshot.jar dockerfile-image.jar\n    cmd ["java","-jar","dockerfile-image.jar"]\n\n(7)基于dockerfile构建镜像\n    docker build -t test-docker-image .\n\n(8)基于image创建container\n    docker run -d --name user01 -p 6666:8080 test-docker-image\n\n(9)查看启动日志\n    docker logs user01\n\n(10)宿主机上访问\n    curl localhost:6666/dockerfile\n    hello docker\n\n(11)还可以再次启动一个\n    docker run -d --name user02 -p 8081:8080 test-docker-image\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n\n\n\n# docker-composes搭建\n\n\n# 离线安装\n\n(1)运行以下命令下载最新版本的docker-compose并进行安装  \n    sudo curl -l "https://github.com/docker/compose/releases/download/1.24.1/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose\n    \n(2)更改二进制文件的权限，使其能够运行\n    chmod +x /usr/local/bin/docker-compose\n    \n(3)测试安装\n    docker-compose --version\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n\n# 在线安装\n\n(1)安装python源\n    apt-get update\n    apt-get install python-pip\n\n(2)删除老版docker-compose\n    pip uninstall docker-compose\n\n(3)安装docker-compose\n    pip install docker-compose\n\n    可能安装失败：https://blog.csdn.net/kelly1250230225/article/details/125361721\n\n(4)测试安装\n    docker-compose --vesion\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n\n\n\n# 镜像仓库\n\n\n# docker hub\n\n(1)在docker机器上登录\n    docker login\n(2)输入用户名和密码\n\n(3)给image重命名，并删除掉原来的\n    [注意镜像名称要和docker id一致，不然push不成功]\n    docker tag test-docker-image rcbb/test-docker-image\n    docker rmi -f test-docker-image\n    \n(4)再次推送，刷新hub.docker.com后台，发现成功\n    docker push itcrazy2018/test-docker-image\n\n(5)别人下载，并且运行\n    docker pull itcrazy2018/test-docker-image\n    docker run -d --name user01 -p 6661:8080 itcrazy2018/test-docker-image\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\n\n# 阿里云docker hub\n\n阿里云docker仓库\n\n> https://cr.console.aliyun.com/cn-hangzhou/instances/repositories\n\n参考手册\n\n> https://cr.console.aliyun.com/repository/cn-hangzhou/dreamit/image-repo/details\n\n(1)登录到阿里云docker仓库\n    sudo docker login --username=itcrazy2016@163.com registry.cn-hangzhou.aliyuncs.com\n(2)输入密码\n\n(3)创建命名空间，比如itcrazy2016\n\n(4)给image打tag\n    sudo docker tag [imageid] registry.cn-hangzhou.aliyuncs.com/itcrazy2016/test-docker-image:v1.0\n\n(5)推送镜像到docker阿里云仓库\n    sudo docker push registry.cn-hangzhou.aliyuncs.com/itcrazy2016/test-docker-image:v1.0\n(6)别人下载，并且运行\n    docker pull registry.cn-hangzhou.aliyuncs.com/itcrazy2016/test-docker-image:v1.0\n    docker run -d --name user01 -p 6661:8080 registry.cn-hangzhou.aliyuncs.com/itcrazy2016/test-docker-image:v1.0\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n\n\n\n# 搭建自己的docker harbor\n\n(1)访问github上的harbor项目\n    https://github.com/goharbor/harbor\n\n(2)下载版本，比如1.7.1\n    https://github.com/goharbor/harbor/releases\n\n(3)找一台安装了docker-compose[这个后面的课程会讲解]，上传并解压\n    tar -zxvf xxx.tar.gz\n    tar xvf harbor-offline-installer-v2.5.0.tgz\n    \n(4)进入到harbor目录\n    mv harbor.yml.tmpl harbor.yml\n    修改 harbor.yml 文件：\n    1.hostname 地址的修改成当前机器的ip地址；\n    2.https 不用则注释掉；\n    3.可以修改harbor的密码，默认是 harbor12345；（admin/harbor12345）\n\n(5)安装harbor，需要一些时间\n    sh install.sh\n\n(6)浏览器访问，比如 39.100.39.63，输入用户名和密码即可\n\n\n(1)关闭实例\n    docker-compose down -v\n\n(2)启动harbor\n    docker-compose up -d\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n\n\n\n# docker compose实现\n\n(1)新建目录\n    mkdir -p /apps/composetest\n    cd /apps/composetest\n    \n(2)编写 app.py 代码\n    vi app.py\n\n(3)新建 requirements.txt 文件\n    vi requirements.txt\n    \n(4)编写dockerfile\n    vi dockerfile\n    \n(5)编写docker-compose.yaml文件\n    vi docker-compose.yaml\n    \n(6)通过docker compose创建容器\n    docker-compose up -d\n    \n(7)访问测试\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n\n\napp.py\n\nimport time\n\nimport redis\nfrom flask import flask\n\napp = flask(__name__)\ncache = redis.redis(host=\'redis\', port=6379)\n\ndef get_hit_count():\n    retries = 5\n    while true:\n        try:\n            return cache.incr(\'hits\')\n        except redis.exceptions.connectionerror as exc:\n            if retries == 0:\n                raise exc\n            retries -= 1\n            time.sleep(0.5)\n\n@app.route(\'/\')\ndef hello():\n    count = get_hit_count()\n    return \'hello world! i have been seen {} times.\\n\'.format(count)\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n\n\nrequirements.txt\n\nflask\nredis\n\n\n1\n2\n\n\ndockerfile\n\nfrom python:3.7-alpine\nworkdir /code\nenv flask_app app.py\nenv flask_run_host 0.0.0.0\nrun apk add --no-cache gcc musl-dev linux-headers\ncopy requirements.txt requirements.txt\nrun pip install -r requirements.txt\ncopy . .\ncmd ["flask", "run"]\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\ndocker-compose.yaml\n\nversion: \'3\'\nservices:\n  web:\n    build: .\n    ports:\n      - "5000:5000"\n    networks:\n      - app-net\n\n  redis:\n    image: "redis:alpine"\n    networks:\n      - app-net\n\nnetworks:\n  app-net:\n    driver: bridge\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n\n\n解读 docker-compose.yaml\n\n# 表示 docker-compose 的版本    \nversion: "3.9"\n# 一个 service 表示 container\nservices:\n  web:\n    build: .\n    # 相当于 -p 5000:5000\n    ports:\n      - "5000:5000"\n    # 相当于-v v1:/var/lib/mysql\n    volumes:\n      - .:/\n    # 相当于-e\n    environment:\n      flask_env: development\n  redis:\n    # 表示使用哪个镜像，本地build则用build，远端则用image\n    image: "redis:alpine"\n    networks:\n      - app-net\n# 相当于 docker network create app-net\nnetworks:\n  app-net:\n    driver: bridge\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n\n\n\n# docker swarm\n\n(1)环境准备，准备3台centos机器\n    manager：192.168.56.10\n    work-node1：192.168.56.11\n    work-node2：192.168.56.12\n    \n(2)进入manager\n    docker swarm init --advertise-addr=192.168.56.10\n    \n    注意观察日志，拿到worker node加入manager node的信息\n    docker swarm join --token swmtkn-1-0a5ph4nehwdm9wzcmlbj2ckqqso38pkd238rprzwcoawabxtdq-arcpra6yzltedpafk3qyvv0y3 192.168.0.10:2377\n    \n(3)进入两个work-node\n    docker swarm join --token swmtkn-1-0a5ph4nehwdm9wzcmlbj2ckqqso38pkd238rprzwcoawabxtdq-arcpra6yzltedpafk3qyvv0y3 192.168.0.10:2377\n\n(4)进入manger，查看集群状态\n    docker node ls\n\n(5)node类型的转换\n    可以将worker提升成manager，从而保证manager的高可用\n    docker node promote worker-node1\n    docker node promote worker-node2\n    \n    降级可以用demote\n    docker node demote worker01-node\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n\n\n\n# swarm基本操作\n\n(1)创建一个tomcat的service\n    docker service create --name my-tomcat tomcat\n    \n(2)查看当前swarm的service\n    docker service ls\n\n(3)查看service的启动日志\n    docker service logs my-tomcat\n\n(4)查看service的详情\n    docker service inspect my-tomcat\n\n(5)查看my-tomcat运行在哪个node上\n    docker service ps my-tomcat\n\n(6)水平扩展service，扩展3个\n    docker service scale my-tomcat=3\n    docker service ls\n    docker service ps my-tomcat\n    \n(7)如果某个node上的my-tomcat挂掉了，这时候会自动扩展\n\n(8)删除service\n    docker service rm my-tomcat\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n\n\n\n# 多机通信overlay网络\n\nworkpress+mysql实现个人博客搭建\n\n> https://hub.docker.com/_/wordpress?tab=description\n\n传统命令方式\n\n(1)创建mysql容器[创建完成等待一会，注意mysql的版本]\n\tdocker run -d --name mysql -v v1:/var/lib/mysql -e mysql_root_password=examplepass -e mysql_database=db_wordpress mysql:5.6\n\t\n(2)创建wordpress容器[将wordpress的80端口映射到centos的8080端口]\n\tdocker run -d --name wordpress --link mysql -e wordpress_db_host=mysql:3306 -e wordpress_db_user=root -e wordpress_db_password=examplepass -e wordpress_db_name=db_wordpress -p 8080:80 wordpress\n\t\n(3)查看默认bridge的网络，可以发现两个容器都在其中\n\tdocker network inspect bridge\n\t\n(4)访问测试\n\twin浏览器中输入：ip[centos]:8080，一直下一步\n\n使用docker compose创建\n\n(1)创建wordpress-mysql文件夹\n\tmkdir -p /tmp/wordpress-mysql\n\tcd /tmp/wordpress-mysql\n\t\n(2)创建 docker-compose.yml 文件\n    vi docker-compose.yml\n    \n(3)根据 docker-compose.yml 文件创建 service  \n    docker-compose up -d\n    \n(4)访问测试\n    win10浏览器ip[centos]:8080，一直下一步\n\n(5)值得关注的点是网络\n\tdocker network ls\n\tdocker network inspect wordpress-mysql_default\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n\n\ndocker-compose.yml 内容\n\nversion: \'3.1\'\n\nservices:\n\n  wordpress:\n    image: wordpress\n    restart: always\n    ports:\n      - 8080:80\n    environment:\n      wordpress_db_host: db\n      wordpress_db_user: exampleuser\n      wordpress_db_password: examplepass\n      wordpress_db_name: exampledb\n    volumes:\n      - wordpress:/var/www/html\n\n  db:\n    image: mysql:5.7\n    restart: always\n    environment:\n      mysql_database: exampledb\n      mysql_user: exampleuser\n      mysql_password: examplepass\n      mysql_random_root_password: \'1\'\n    volumes:\n      - db:/var/lib/mysql\n\nvolumes:\n  wordpress:\n  db:\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n\n\n\n# swarm中实现\n\n(1)创建一个overlay网络，用于docker swarm中多机通信\n    [manager-node]\n    docker network create -d overlay my-overlay-net\n    [此时worker node查看不到]\n    docker network ls\n    \n(2)创建mysql的service\n    [manager-node]\n    1.创建service\n        docker service create --name mysql --mount type=volume,source=v1,destination=/var/lib/mysql --env mysql_root_password=examplepass --env mysql_database=db_wordpress --network my-overlay-net mysql:5.6\n    \n    2.查看service\n        docker service ls\n\t    docker service ps mysql\n\n(3)创建wordpress的service\n    1.创建service  \n    [注意之所以下面可以通过mysql名字访问，也是因为有dns解析]\n        docker service create --name wordpress --env wordpress_db_user=root --env wordpress_db_password=examplepass --env wordpress_db_host=mysql:3306 --env wordpress_db_name=db_wordpress -p 8080:80 --network my-overlay-net wordpress\n        \n    2.查看service\n        docker service ls\n\t    docker service ps mysql\n\n    3.此时mysql和wordpress的service运行在哪个node上\n        这时候就能看到my-overlay-net的网络\n\n(4)测试\n    win浏览器访问ip[manager/worker01/worker02]:8080都能访问成功\n    \n(5)查看my-overlay-net \n    docker network inspect my-overlay-net\n    \n(6)为什么没有用etcd？\n    docker swarm中有自己的分布式存储机制\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n\n\n\n# routing mesh\n\n\n# ingress\n\n通过前面的案例我们发现，部署一个 wordpress 的 service，映射到主机的 8080 端口，这时候通过 swarm 集群中的任意主机 ip:8080 都能成功访问，这是因为什么？\n\n启动命令：\n\n> docker service create --name tomcat -p 8080:8080 --network my-overlay-net tomcat\n\n(1)记得使用一个自定义的overlay类型的网络\n    --network my-overlay-net\n    \n(2)查看service情况\n    docker service ls\n    docker service ps tomcat\n    \n(3)访问3台机器的ip:8080测试\n    发现都能够访问到tomcat的欢迎页\n\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n\n\n# internal\n\n之前在实战 wordpress+mysql 的时候，发现 wordpress 中可以直接通过 mysql 名称访问。\n\n这样可以说明两点：\n第一是其中一定有dns解析，第二是两个service的ip是能够ping通的。\n\n思考：不妨再创建一个service，也同样使用上述tomcat的overlay网络，然后来实验。\n\n(1)启动命令\n    docker service create --name whoami -p 8000:8000 --network my-overlay-net -d  jwilder/whoami\n    \n(2)查看whoami的情况\n    docker service ps whoami\n    \n(3)在各自容器中互相ping一下彼此，也就是容器间的通信\n    tomcat容器中ping whoami\n        docker exec -it 9d7d4c2b1b80 ping whoami\n\n    whoami容器中ping tomcat\n        docker exec -it 5c4fe39e7f60 ping tomcat\n\n(4)将whoami进行扩容\n    docker service scale whoami=3\n    docker service ps whoami\n    \n(5)此时再ping whoami service，并且访问whoami服务\n    docker exec -it 9d7d4c2b1b80 ping whoami\n    [多访问几次，得到的结果不同]\n    docker exec -it 9d7d4c2b1b80 curl whoami:8000  \n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n\n\n通过上述的实验可以发现什么？\n\nwhoami服务对其他服务暴露的ip是不变的，但是通过whoami名称访问8000端口，确实访问到的是不同的service。\n\n也就是说whoami service对其他服务提供了一个统一的vip入口，别的服务访问时会做负载均衡。\n\n\n# stack\n\ndocker stack deploy：\nhttps://docs.docker.com/engine/reference/commandline/stack_deploy/\n\ncompose-file：\nhttps://docs.docker.com/compose/compose-file/\n\n有没有发现上述部署service很麻烦？\n要是能够类似于docker-compose.yml文件那种方式一起管理该多少？\n这就要涉及到docker swarm中的stack，我们直接通过前面的wordpress+mysql案例看看怎么使用咯。\n\n\n\n(1)新建service.yml文件\n    vi service.yml\n\n(2)根据service.yml创建service\n    docker statck deploy -c service.yml my-service\n    \n(3)常见操作\n    1.查看stack具体信息\n        docker stack ls\n    2.查看具体的service\n        docker stack services my-service\n    3.查看某个service\n        docker service inspect my-service-db\n        \n(4)测试访问\n    win浏览器ip[manager,worker01,worker02]:8080\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n\n\nservice.yml\n\nversion: \'3\'\n\n    services:\n\n      wordpress:\n        image: wordpress\n        ports:\n          - 8080:80\n        environment:\n          wordpress_db_host: db\n          wordpress_db_user: exampleuser\n          wordpress_db_password: examplepass\n          wordpress_db_name: exampledb\n        networks:\n          - ol-net\n        volumes:\n          - wordpress:/var/www/html\n        deploy:\n          mode: replicated\n          replicas: 3\n          restart_policy:\n            condition: on-failure\n            delay: 5s\n            max_attempts: 3\n          update_config:\n            parallelism: 1\n            delay: 10s\n\n      db:\n        image: mysql:5.7\n        environment:\n          mysql_database: exampledb\n          mysql_user: exampleuser\n          mysql_password: examplepass\n          mysql_random_root_password: \'1\'\n        volumes:\n          - db:/var/lib/mysql\n        networks:\n          - ol-net\n        deploy:\n          mode: global\n          placement:\n            constraints:\n              - node.role == manager\n\n    volumes:\n      wordpress:\n      db:\n\n    networks:\n      ol-net:\n        driver: overlay\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n\n\n\n# docker卸载\n\n(1)杀死所有运行容器\n    docker kill $(docker ps -a -q)\n    \n(2)删除所有容器\n    docker rm $(docker ps -a -q)\n    \n(3)删除所有镜像\n    docker rmi $(docker images -q)\n    \n(4)停止 docker 服务\n    systemctl stop docker\n\n(5)删除存储目录\n    rm -rf /etc/docker\n    rm -rf /run/docker\n    rm -rf /var/lib/dockershim\n    rm -rf /var/lib/docker\n    \n(6)卸载 docker\n    查看已安装的 docker 包\n    yum list installed | grep docker\n    \n    卸载相关包\n    yum remove docker-ce.x86_64 docker-ce-cli.x86_64 docker-ce-rootless-extras.x86_64 docker-scan-plugin.x86_64 containerd.io.x86_64\n    \n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n\n\n\n# 问题汇总\n\n\n# 日志中文乱码问题\n\n在 dockerfile 中设置编码\n\nenv lc_all=zh_cn.utf8\nenv lang=zh_cn.utf8\nenv language=zh_cn.utf8\n\n\n1\n2\n3\n\n\n或者在 docker-compose.yml 中设置编码\n\ntaas-nms-biz:\n    restart: always\n    container_name: taas-nms-biz\n    image: taas-nms-biz:1.0.0-snapshot\n    network_mode: "host"\n\tenvironment:\n\t\t- lang=zh_cn.utf-8\t\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n有些的',charsets:{cjk:!0},lastUpdated:"9/7/2023",lastUpdatedTimestamp:169407526e4},{title:"Nacos容器化",frontmatter:{title:"Nacos容器化",date:"2022-11-11T11:29:12.000Z",permalink:"/pages/cbd47e/",categories:["文章","容器"],tags:["Docker","容器","docker-compose"],readingShow:"top"},regularPath:"/01.%E6%96%87%E7%AB%A0/09.%E5%AE%B9%E5%99%A8/01.Nacos%E5%AE%B9%E5%99%A8%E5%8C%96.html",relativePath:"01.文章/09.容器/01.Nacos容器化.md",key:"v-aea4643c",path:"/pages/cbd47e/",headers:[{level:2,title:"官网资料",slug:"官网资料",normalizedTitle:"官网资料",charIndex:71},{level:2,title:"自定义",slug:"自定义",normalizedTitle:"自定义",charIndex:450},{level:3,title:"Dockerfile",slug:"dockerfile",normalizedTitle:"dockerfile",charIndex:473},{level:3,title:"config",slug:"config",normalizedTitle:"config",charIndex:2232},{level:3,title:"构建",slug:"构建",normalizedTitle:"构建",charIndex:58},{level:3,title:"docker-compose",slug:"docker-compose",normalizedTitle:"docker-compose",charIndex:426}],excerpt:'<h1 id="nacos容器化"><a class="header-anchor" href="#nacos容器化">#</a> Nacos容器化</h1>\n<p>Nacos 容器化，因为修改了 Nacos 源码（使其支持 PostgreSQL），所以需要构建自己的镜像。</p>\n',headersStr:"官网资料 自定义 Dockerfile config 构建 docker-compose",content:'# Nacos容器化\n\nNacos 容器化，因为修改了 Nacos 源码（使其支持 PostgreSQL），所以需要构建自己的镜像。\n\n\n# 官网资料\n\n官网提供的下载链接：https://github.com/alibaba/nacos/releases\n\n下载一个官网提供的构造nacos docker镜像的源码，然后根据自己的需求改动。\n\n官网链接：https://nacos.io/zh-cn/docs/quick-start-docker.html\n\n源码链接：https://github.com/nacos-group/nacos-docker.git\n\n文件的结构说明：\n\nnacos-docker-master\n|----build：nacos 镜像制作的源码\n    |----bin：shell脚本\n    |----conf：配置文件\n|----env: docker compose 环境变量文件\n|----example: docker-compose编排例子\n\n\n\n# 自定义\n\n我使用的版本是2.0.4。\n\n\n# Dockerfile\n\n修改Dockerfile文件的内容：\n\n 1. NACOS_VERSION该为自己要使用的版本；\n\n> ARG NACOS_VERSION=2.0.4\n\n 2. 将自己打好的包放到build文件夹中。\n\n> COPY nacos-server-2.0.4.tar.gz /home\n\n 3. 删除从网络获取的命令。\n\n\n\nDockerfile 完整内容。\n\nFROM centos:7.9.2009\nMAINTAINER pader "huangmnlove@163.com"\n\n# set environment\nENV MODE="standalone" \\\n    PREFER_HOST_MODE="ip"\\\n    BASE_DIR="/home/nacos" \\\n    CLASSPATH=".:/home/nacos/conf:$CLASSPATH" \\\n    CLUSTER_CONF="/home/nacos/conf/cluster.conf" \\\n    FUNCTION_MODE="all" \\\n    JAVA_HOME="/usr/lib/jvm/java-1.8.0-openjdk" \\\n    NACOS_USER="nacos" \\\n    JAVA="/usr/lib/jvm/java-1.8.0-openjdk/bin/java" \\\n    JVM_XMS="1g" \\\n    JVM_XMX="1g" \\\n    JVM_XMN="512m" \\\n    JVM_MS="128m" \\\n    JVM_MMS="320m" \\\n    NACOS_DEBUG="n" \\\n    TOMCAT_ACCESSLOG_ENABLED="false" \\\n    TIME_ZONE="Asia/Shanghai"\n\nARG NACOS_VERSION=2.0.4\nARG HOT_FIX_FLAG=""\n\nWORKDIR $BASE_DIR\n\nCOPY nacos-server-2.0.4.tar.gz /home\n\nRUN set -x \\\n    && yum update -y \\\n    && yum install -y java-1.8.0-openjdk java-1.8.0-openjdk-devel wget iputils nc vim libcurl\nRUN tar -xzvf /home/nacos-server-${NACOS_VERSION}.tar.gz -C /home \\\n    && rm -rf /home/nacos-server-${NACOS_VERSION}.tar.gz /home/nacos/bin/* /home/nacos/conf/*.properties /home/nacos/conf/*.example /home/nacos/conf/nacos-mysql.sql\nRUN yum autoremove -y wget \\\n    && ln -snf /usr/share/zoneinfo/$TIME_ZONE /etc/localtime && echo $TIME_ZONE > /etc/timezone \\\n    && yum clean all\n\n\n\n\nADD bin/docker-startup.sh bin/docker-startup.sh\nADD conf/application.properties conf/application.properties\n\n\n# set startup log dir\nRUN mkdir -p logs \\\n\t&& cd logs \\\n\t&& touch start.out \\\n\t&& ln -sf /dev/stdout start.out \\\n\t&& ln -sf /dev/stderr start.out\nRUN chmod +x bin/docker-startup.sh\n\nEXPOSE 8848\nENTRYPOINT ["bin/docker-startup.sh"]\n\n\n\n# config\n\n修改连接数据库的配置。\n\n\n# 构建\n\n(1)cd到build文件夹\n    \n(2)构建命令\n    docker build -t nacos-2.0.4 .\n\n\n\n# docker-compose\n\n官方 example 文件夹中有 docker-compose 编排例子。\n\n需要根据自己的使用去修改。\n\n例如，我的需求是单机启动，然后使用自己的2.0.4版本的镜像。\n\nversion: "3"\nservices:\n  nacos:\n    image: nacos:2.0.4\n    container_name: nacos\n    environment:\n      - PREFER_HOST_MODE=hostname\n      - MODE=standalone\n    volumes:\n      - /home/nacos/logs:/home/nacos/logs\n    ports:\n      - "8848:8848"\n      - "9848:9848"\n    network_mode: "host"\n',normalizedContent:'# nacos容器化\n\nnacos 容器化，因为修改了 nacos 源码（使其支持 postgresql），所以需要构建自己的镜像。\n\n\n# 官网资料\n\n官网提供的下载链接：https://github.com/alibaba/nacos/releases\n\n下载一个官网提供的构造nacos docker镜像的源码，然后根据自己的需求改动。\n\n官网链接：https://nacos.io/zh-cn/docs/quick-start-docker.html\n\n源码链接：https://github.com/nacos-group/nacos-docker.git\n\n文件的结构说明：\n\nnacos-docker-master\n|----build：nacos 镜像制作的源码\n    |----bin：shell脚本\n    |----conf：配置文件\n|----env: docker compose 环境变量文件\n|----example: docker-compose编排例子\n\n\n\n# 自定义\n\n我使用的版本是2.0.4。\n\n\n# dockerfile\n\n修改dockerfile文件的内容：\n\n 1. nacos_version该为自己要使用的版本；\n\n> arg nacos_version=2.0.4\n\n 2. 将自己打好的包放到build文件夹中。\n\n> copy nacos-server-2.0.4.tar.gz /home\n\n 3. 删除从网络获取的命令。\n\n\n\ndockerfile 完整内容。\n\nfrom centos:7.9.2009\nmaintainer pader "huangmnlove@163.com"\n\n# set environment\nenv mode="standalone" \\\n    prefer_host_mode="ip"\\\n    base_dir="/home/nacos" \\\n    classpath=".:/home/nacos/conf:$classpath" \\\n    cluster_conf="/home/nacos/conf/cluster.conf" \\\n    function_mode="all" \\\n    java_home="/usr/lib/jvm/java-1.8.0-openjdk" \\\n    nacos_user="nacos" \\\n    java="/usr/lib/jvm/java-1.8.0-openjdk/bin/java" \\\n    jvm_xms="1g" \\\n    jvm_xmx="1g" \\\n    jvm_xmn="512m" \\\n    jvm_ms="128m" \\\n    jvm_mms="320m" \\\n    nacos_debug="n" \\\n    tomcat_accesslog_enabled="false" \\\n    time_zone="asia/shanghai"\n\narg nacos_version=2.0.4\narg hot_fix_flag=""\n\nworkdir $base_dir\n\ncopy nacos-server-2.0.4.tar.gz /home\n\nrun set -x \\\n    && yum update -y \\\n    && yum install -y java-1.8.0-openjdk java-1.8.0-openjdk-devel wget iputils nc vim libcurl\nrun tar -xzvf /home/nacos-server-${nacos_version}.tar.gz -c /home \\\n    && rm -rf /home/nacos-server-${nacos_version}.tar.gz /home/nacos/bin/* /home/nacos/conf/*.properties /home/nacos/conf/*.example /home/nacos/conf/nacos-mysql.sql\nrun yum autoremove -y wget \\\n    && ln -snf /usr/share/zoneinfo/$time_zone /etc/localtime && echo $time_zone > /etc/timezone \\\n    && yum clean all\n\n\n\n\nadd bin/docker-startup.sh bin/docker-startup.sh\nadd conf/application.properties conf/application.properties\n\n\n# set startup log dir\nrun mkdir -p logs \\\n\t&& cd logs \\\n\t&& touch start.out \\\n\t&& ln -sf /dev/stdout start.out \\\n\t&& ln -sf /dev/stderr start.out\nrun chmod +x bin/docker-startup.sh\n\nexpose 8848\nentrypoint ["bin/docker-startup.sh"]\n\n\n\n# config\n\n修改连接数据库的配置。\n\n\n# 构建\n\n(1)cd到build文件夹\n    \n(2)构建命令\n    docker build -t nacos-2.0.4 .\n\n\n\n# docker-compose\n\n官方 example 文件夹中有 docker-compose 编排例子。\n\n需要根据自己的使用去修改。\n\n例如，我的需求是单机启动，然后使用自己的2.0.4版本的镜像。\n\nversion: "3"\nservices:\n  nacos:\n    image: nacos:2.0.4\n    container_name: nacos\n    environment:\n      - prefer_host_mode=hostname\n      - mode=standalone\n    volumes:\n      - /home/nacos/logs:/home/nacos/logs\n    ports:\n      - "8848:8848"\n      - "9848:9848"\n    network_mode: "host"\n',charsets:{cjk:!0},lastUpdated:"11/11/2022",lastUpdatedTimestamp:1668137612e3},{title:"Sign in with Apple（苹果授权登陆）",frontmatter:{title:"Sign in with Apple（苹果授权登陆）",date:"2022-12-29T14:26:23.000Z",permalink:"/pages/7e6d51/",categories:["文章","实战"],tags:[null],readingShow:"top"},regularPath:"/01.%E6%96%87%E7%AB%A0/11.%E5%AE%9E%E6%88%98/01.Sign%20in%20with%20Apple%EF%BC%88%E8%8B%B9%E6%9E%9C%E6%8E%88%E6%9D%83%E7%99%BB%E9%99%86%EF%BC%89.html",relativePath:"01.文章/11.实战/01.Sign in with Apple（苹果授权登陆）.md",key:"v-6493a75b",path:"/pages/7e6d51/",headers:[{level:2,title:"APP端",slug:"app端",normalizedTitle:"app端",charIndex:185},{level:2,title:"服务端",slug:"服务端",normalizedTitle:"服务端",charIndex:794},{level:3,title:"基于JWT的算法验证",slug:"基于jwt的算法验证",normalizedTitle:"基于jwt的算法验证",charIndex:816},{level:3,title:"基于授权码的验证",slug:"基于授权码的验证",normalizedTitle:"基于授权码的验证",charIndex:832},{level:4,title:"1、获取client_secret",slug:"_1、获取client-secret",normalizedTitle:"1、获取client_secret",charIndex:1088},{level:4,title:"2、进行登录",slug:"_2、进行登录",normalizedTitle:"2、进行登录",charIndex:2348},{level:4,title:"3、解码id_token",slug:"_3、解码id-token",normalizedTitle:"3、解码id_token",charIndex:948},{level:4,title:"源码",slug:"源码",normalizedTitle:"源码",charIndex:4919},{level:2,title:"文章",slug:"文章",normalizedTitle:"文章",charIndex:10652}],excerpt:'<h1 id="sign-in-with-apple-苹果授权登陆"><a class="header-anchor" href="#sign-in-with-apple-苹果授权登陆">#</a> Sign in with Apple（苹果授权登陆）</h1>\n<p>用户是懒的，有快捷登录的情况下，没人会去输入邮箱，接收验证码并输入验证码来完成注册。</p>\n<p>明明有一步完成操作的方式，又有几个用户会选择用几步去完成呢。</p>\n<p>国内的 APP 基本都会加上微信登录，同理换到海外，如果你的 APP 面向是海外的用户，除 Facebook 登录以外，Apple 登录也同样重要。</p>\n',headersStr:"APP端 服务端 基于JWT的算法验证 基于授权码的验证 1、获取client_secret 2、进行登录 3、解码id_token 源码 文章",content:'# Sign in with Apple（苹果授权登陆）\n\n用户是懒的，有快捷登录的情况下，没人会去输入邮箱，接收验证码并输入验证码来完成注册。\n\n明明有一步完成操作的方式，又有几个用户会选择用几步去完成呢。\n\n国内的 APP 基本都会加上微信登录，同理换到海外，如果你的 APP 面向是海外的用户，除 Facebook 登录以外，Apple 登录也同样重要。\n\n\n# APP端\n\n关于手机端登录的代码，这里不做多余介绍，我们看下登录成功后， Apple 返回给手机端的一些参数。\n\nopen var user: String { get }\nopen var state: String? { get }\nopen var authorizedScopes: [ASAuthorization.Scope] { get }\nopen var authorizationCode: Data? { get }\nopen var identityToken: Data? { get }\nopen var email: String? { get }\nopen var fullName: PersonNameComponents? { get }\nopen var realUserStatus: ASUserDetectionStatus\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n登录成功后，从 Apple 拿到 ：user、email、fullName、authorizationCode、identityToken 。\n\n * userID：授权的用户唯一标识\n * email、fullName：授权的用户资料\n * authorizationCode：授权code。（授权code是有时效性的，且使用一次即失效）\n * identityToken：授权用户的JWT凭证\n\n\n# 服务端\n\n服务端校验有两种方式。\n\n 1. 基于JWT的算法验证；\n 2. 基于授权码的验证；\n\n\n# 基于JWT的算法验证\n\nAPP上传userID、identityToken，服务端解析identityToken获取用户唯一标识与userID进行对比。\n\n服务端解析identityToken的步骤跟下面3、解码id_token是一样的。\n\n\n# 基于授权码的验证\n\n 1. 首先需要得到client_secret。\n 2. 根据APP上传上来的authorizationCode请求苹果服务器进行登录，获取id_token。\n 3. 解析id_token，获取用户唯一标识。\n\n# 1、获取client_secret\n\n参考： https://developer.okta.com/blog/2019/06/04/what-the-heck-is-sign-in-with-apple https://developer.apple.com/documentation/sign_in_with_apple/generate_and_validate_tokens\n\n首先需要了解如何构建client_secret。\n\nclient_secret 参数是一个 JWT，singature 部分使用非对称加密 RSASSA【RSA签名算法】 和 ECDSA【椭圆曲线数据签名算法】。\n\n生成client_secret之前：\n\n 1. 获取 APP 的 bundleId。\n 2. 获取开发者账户的 TeamID。\n\n\n\n 1. 创建 privateKey，获取到 Key ID 和 私钥。\n\n\n\n 1. 创建完之后把私钥下载下来，并保存好，注意，私钥只能下载一次。\n 2. 生成client_secret。可以通过如下代码生成 client_secret ，代码为 Ruby 代码，确保已安装 Ruby 环境。\n\nrequire "jwt"\n\nkey_file = "Path to the private key"\nteam_id = "Your Team ID"\nclient_id = "Your App Bundle ID"\nkey_id = "The Key ID of the private key"\nvalidity_period = 180 # In days. Max 180 (6 months) according to Apple docs.\n\nprivate_key = OpenSSL::PKey::EC.new IO.read key_file\n\ntoken = JWT.encode(\n    {\n        iss: team_id,\n        iat: Time.now.to_i,\n        exp: Time.now.to_i + 86400 * validity_period,\n        aud: "https://appleid.apple.com",\n        sub: client_id\n    },\n    private_key,\n    "ES256",\n    header_fields=\n    {\n        kid: key_id \n    }\n)\nputs token\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n\n\n> key_file：私钥路径。\n\n 1. 创建文件secret_gen.rb，把上面代码粘贴进去，执行ruby secret_gen.rb即可生成client_secret。\n\n# 2、进行登录\n\n服务器接收到 APP 提交的信息后，根据authorizationCode获取id_token，然后再获取苹果用户的唯一标识 userId。\n\n> 获取token：https://appleid.apple.com/auth/token\n\n所需参数：\n\nclient_id： string (Required) (Authorization and Validation) The application identifier for your app\n\nclient_secret： string (Required) (Authorization and Validation) A secret generated as a JSON Web Token that uses the secret key generated by the WWDR portal.\n\ncode： string (Authorization) The authorization code received from your application’s user agent. The code is single use only and valid for five minutes.\n\ngrant_type： string (Required) (Authorization and Validation) The grant type that determines how the client interacts with the server. For authorization code validation, use authorization_code. For refresh token validation requests, use refresh_token.\n\nrefresh_token： string (Validation) The refresh token received during the authorization request.\n\nredirect_uri： string (Authorization) The destination URI the code was originally sent to.\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n * client_id 为app的 bundle identifier。\n * code 为 APP 获取到的 authorizationCode。\n * grant_type 传固定字符串 authorization_code。\n * client_secret 是前面生成的，需注意是有时效性的，半年过期。\n\n发起请求，返回的结果为：\n\n{\n  "access_token": "一个token，此处省略",\n  "token_type": "Bearer",\n  "expires_in": 3600,\n  "refresh_token": "一个token，此处省略",\n  "id_token": "结果是JWT，字符串形式，此处省略"\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n参数解释，官方文档：https://developer.apple.com/documentation/sign_in_with_apple/tokenresponse\n\n# 3、解码id_token\n\n解码步骤：\n\n 1. 先要获取Public Key；\n 2. 根据获取Public Key去进行解码。\n\n获取 Public Key。https://appleid.apple.com/auth/keys 结果：\n\n{\n  "keys": [\n    {\n      "kty": "RSA",\n      "kid": "AIDOPK1",\n      "use": "sig",\n      "alg": "RS256",\n      "n": "lxrwmuYSAsTfn-lUu4goZSXBD9ackM9OJuwUVQHmbZo6GW4Fu_auUdN5zI7Y1dEDfgt7m7QXWbHuMD01HLnD4eRtY-RNwCWdjNfEaY_esUPY3OVMrNDI15Ns13xspWS3q-13kdGv9jHI28P87RvMpjz_JCpQ5IM44oSyRnYtVJO-320SB8E2Bw92pmrenbp67KRUzTEVfGU4-obP5RZ09OxvCr1io4KJvEOjDJuuoClF66AT72WymtoMdwzUmhINjR0XSqK6H0MdWsjw7ysyd_JhmqX5CAaT9Pgi0J8lU_pcl215oANqjy7Ob-VMhug9eGyxAWVfu_1u6QJKePlE-w",\n      "e": "AQAB"\n    }\n  ]\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n获取到 Public Key 后，对id_token进行解析。\n\n// claims 解码\n{\n    "iss":"https://appleid.apple.com",  // 苹果签发的标识\n    "aud":"com.skyming.devicemonitor", // 接收者的APP ID\n    "exp":1565668086,\n    "iat":1565667486,\n    "sub":"001247.93b3a799a7c84c0cb46cd08f100797f2.0704", //用户的唯一标识\n    "c_hash":"Oh2am9eMNWVY3dq5JmClbg",\n    "auth_time":1565667486\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n * iss：苹果签发的标识；\n * aud：与你的 app 的 bundleID 一致；\n * sub：与手机端获得的 user 一致；\n\n服务器端通过对比 sub 字段信息是否与手机端上传的 user 信息一致来确定是否成功登录。\n\n# 源码\n\n所需依赖：\n\n<dependency>\n    <groupId>io.jsonwebtoken</groupId>\n    <artifactId>jjwt</artifactId>\n    <version>0.9.1</version>\n</dependency>\n\n\n1\n2\n3\n4\n5\n\n\n代码：\n\nimport cn.hutool.core.codec.Base64;\nimport cn.hutool.core.lang.Dict;\nimport cn.hutool.http.HttpUtil;\nimport cn.hutool.json.JSONArray;\nimport cn.hutool.json.JSONObject;\nimport cn.hutool.json.JSONUtil;\nimport io.jsonwebtoken.Claims;\nimport io.jsonwebtoken.Jws;\nimport io.jsonwebtoken.JwtParser;\nimport io.jsonwebtoken.Jwts;\nimport lombok.extern.slf4j.Slf4j;\n\nimport java.math.BigInteger;\nimport java.security.KeyFactory;\nimport java.security.PublicKey;\nimport java.security.spec.RSAPublicKeySpec;\nimport java.util.HashMap;\nimport java.util.Map;\n\n@Slf4j\npublic class AppleUtil {\n\n    public static void main(String[] args) {\n        String identityToken = "eyJraWQiOiJXNldjT0tCIiwiYWxnIjoiUlMyNTYifQ.eyJpc3MiOiJodHRwczovL2FwcGxlaWQuYXBwbGUuY29tIiwiYXVkIjoiY29tLnVtZW94LnFpYmxhIiwiZXhwIjoxNjcyMzY5NDUwLCJpYXQiOjE2NzIyODMwNTAsInN1YiI6IjAwMTMwNy5mN2NkNWFkYmVlMDY0ZDc0YjI4ZjI2OWE3MmUzNjU4Mi4wNTMwIiwiY19oYXNoIjoiV3VBS1lycUhlcUxiSS12cnRLRkF4ZyIsImVtYWlsIjoiMjgwMDM1NzY4QHFxLmNvbSIsImVtYWlsX3ZlcmlmaWVkIjoidHJ1ZSIsImF1dGhfdGltZSI6MTY3MjI4MzA1MCwibm9uY2Vfc3VwcG9ydGVkIjp0cnVlfQ.TUMsZXG8qjA2EjisrKnyksukDY0vbQnDVXsgl1y7hFrbOlu0pyUkm4FfJHB-OAg1FOKFA5Nn7zGLezgGbsgmmSfnP5piitZMtQkNEZ-5FNuXJ1KRHNJexQePUrEpKrUMTVLoi23WDPZOofNlYuyvRnnkQaO2jG4XZ94IHbwrOpbrPYfNNMF9oaRG2w8RV125TN2Bh2nLHP_Xm7Fd5RQDEJVNTBkSkIJ1xbHlsEemrcEd-SPDtp2jvAliiMNyK5FlsHgShuUeAeW2nmyrx0hUanAymjUUckCCOJsdawia7ps_uzdmjWvbDgvUtuIzZVf-kevWC_dqzwEcDjjlkG1R2Q";\n        AppleUtil.test(identityToken);\n    }\n\n    public static void test(String identityToken) {\n        String clientId = "com.xxx.xxxx";\n        // 解析id_token\n        Map<String, JSONObject> json = parserIdentityToken(identityToken);\n        JSONObject header = json.get("header");\n        String kid = header.getStr("kid");\n        // 根据kid，获取相应的公钥\n        PublicKey publicKey = getPublicKey(kid);\n        if (publicKey == null) {\n            log.error("[苹果登录失败 publicKey获取失败 clientId<{}> kid<{}>]", clientId, kid);\n        }\n        getAppleUserId(clientId, publicKey, identityToken);\n    }\n\n    private static Map<String, Object> getAppleUserId(String appleClientId, PublicKey publicKey, String identityToken) {\n        String appleIssuerUrl = "https://appleid.apple.com";\n        JwtParser jwtParser = Jwts.parser().requireIssuer(appleIssuerUrl).requireAudience(appleClientId).setSigningKey(publicKey);\n        Jws<Claims> claim = jwtParser.parseClaimsJws(identityToken);\n        if (claim != null) {\n            Map<String, Object> result = claim.getBody();\n            String iss = result.get("iss").toString();\n            String sub = result.get("sub").toString();\n            String aud = result.get("aud").toString();\n            Long exp = Long.parseLong(result.get("exp").toString()) * 1000;\n            log.info("[苹果登录iss<{}> sub<{}> aud<{}> exp<{}>]", iss, sub, aud, exp);\n            if (appleIssuerUrl.equals(iss) && appleClientId.equals(aud)) {\n                log.error("[苹果账号登录成功 appleClientId<{}> userId<{}>]", appleClientId, sub);\n                return new Dict().set("userId", sub);\n            }\n        }\n        return null;\n    }\n\n    /**\n     * 解析id_token\n     *\n     * @param identityToken\n     * @return\n     */\n    private static Map<String, JSONObject> parserIdentityToken(String identityToken) {\n        Map<String, JSONObject> map = new HashMap<>(2);\n        String[] arr = identityToken.split("\\\\.");\n        String deHeader = Base64.decodeStr(arr[0]);\n        JSONObject header = JSONUtil.parseObj(deHeader);\n        String dePayload = Base64.decodeStr(arr[1]);\n        JSONObject payload = JSONUtil.parseObj(dePayload);\n        map.put("header", header);\n        map.put("payload", payload);\n        return map;\n    }\n\n    /**\n     * 获取苹果的公钥\n     *\n     * @param kid\n     * @return\n     */\n    private static PublicKey getPublicKey(String kid) {\n        Map<String, Map<String, String>> map = getAppleKeys();\n        try {\n            String n = map.get(kid).get("n");\n            String e = map.get(kid).get("e");\n            BigInteger modulus = new BigInteger(1, Base64.decode(n));\n            BigInteger publicExponent = new BigInteger(1, Base64.decode(e));\n            RSAPublicKeySpec spec = new RSAPublicKeySpec(modulus, publicExponent);\n            //目前kty均为 "RSA"\n            KeyFactory kf = KeyFactory.getInstance("RSA");\n            return kf.generatePublic(spec);\n        } catch (Exception e) {\n            System.err.println("getPublicKey error:{}" + e);\n        }\n        return null;\n    }\n\n    /**\n     * 请求苹果公钥信息\n     *\n     * @return\n     */\n    private static Map<String, Map<String, String>> getAppleKeys() {\n        Map<String, Map<String, String>> result = new HashMap<>(2);\n        String keys = HttpUtil.get("https://appleid.apple.com/auth/keys");\n        JSONObject keysObject = JSONUtil.parseObj(keys);\n        JSONArray jsonArray = keysObject.getJSONArray("keys");\n        for (int i = 0; i < jsonArray.size(); i++) {\n            Map<String, String> m = new HashMap<>();\n            m.put("n", jsonArray.getJSONObject(i).getStr("n"));\n            m.put("e", jsonArray.getJSONObject(i).getStr("e"));\n            result.put(jsonArray.getJSONObject(i).getStr("kid"), m);\n        }\n        return result;\n    }\n\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n74\n75\n76\n77\n78\n79\n80\n81\n82\n83\n84\n85\n86\n87\n88\n89\n90\n91\n92\n93\n94\n95\n96\n97\n98\n99\n100\n101\n102\n103\n104\n105\n106\n107\n108\n109\n110\n111\n112\n113\n114\n115\n116\n117\n118\n119\n120\n121\n\n\n\n# 文章\n\n * 张龙-Sign In With Apple 从登陆到服务器验证\n * SpringBoot Java后端校验Sign in With Apple （苹果授权登录）\n * Sign in with Apple（苹果授权登陆）',normalizedContent:'# sign in with apple（苹果授权登陆）\n\n用户是懒的，有快捷登录的情况下，没人会去输入邮箱，接收验证码并输入验证码来完成注册。\n\n明明有一步完成操作的方式，又有几个用户会选择用几步去完成呢。\n\n国内的 app 基本都会加上微信登录，同理换到海外，如果你的 app 面向是海外的用户，除 facebook 登录以外，apple 登录也同样重要。\n\n\n# app端\n\n关于手机端登录的代码，这里不做多余介绍，我们看下登录成功后， apple 返回给手机端的一些参数。\n\nopen var user: string { get }\nopen var state: string? { get }\nopen var authorizedscopes: [asauthorization.scope] { get }\nopen var authorizationcode: data? { get }\nopen var identitytoken: data? { get }\nopen var email: string? { get }\nopen var fullname: personnamecomponents? { get }\nopen var realuserstatus: asuserdetectionstatus\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n\n\n登录成功后，从 apple 拿到 ：user、email、fullname、authorizationcode、identitytoken 。\n\n * userid：授权的用户唯一标识\n * email、fullname：授权的用户资料\n * authorizationcode：授权code。（授权code是有时效性的，且使用一次即失效）\n * identitytoken：授权用户的jwt凭证\n\n\n# 服务端\n\n服务端校验有两种方式。\n\n 1. 基于jwt的算法验证；\n 2. 基于授权码的验证；\n\n\n# 基于jwt的算法验证\n\napp上传userid、identitytoken，服务端解析identitytoken获取用户唯一标识与userid进行对比。\n\n服务端解析identitytoken的步骤跟下面3、解码id_token是一样的。\n\n\n# 基于授权码的验证\n\n 1. 首先需要得到client_secret。\n 2. 根据app上传上来的authorizationcode请求苹果服务器进行登录，获取id_token。\n 3. 解析id_token，获取用户唯一标识。\n\n# 1、获取client_secret\n\n参考： https://developer.okta.com/blog/2019/06/04/what-the-heck-is-sign-in-with-apple https://developer.apple.com/documentation/sign_in_with_apple/generate_and_validate_tokens\n\n首先需要了解如何构建client_secret。\n\nclient_secret 参数是一个 jwt，singature 部分使用非对称加密 rsassa【rsa签名算法】 和 ecdsa【椭圆曲线数据签名算法】。\n\n生成client_secret之前：\n\n 1. 获取 app 的 bundleid。\n 2. 获取开发者账户的 teamid。\n\n\n\n 1. 创建 privatekey，获取到 key id 和 私钥。\n\n\n\n 1. 创建完之后把私钥下载下来，并保存好，注意，私钥只能下载一次。\n 2. 生成client_secret。可以通过如下代码生成 client_secret ，代码为 ruby 代码，确保已安装 ruby 环境。\n\nrequire "jwt"\n\nkey_file = "path to the private key"\nteam_id = "your team id"\nclient_id = "your app bundle id"\nkey_id = "the key id of the private key"\nvalidity_period = 180 # in days. max 180 (6 months) according to apple docs.\n\nprivate_key = openssl::pkey::ec.new io.read key_file\n\ntoken = jwt.encode(\n    {\n        iss: team_id,\n        iat: time.now.to_i,\n        exp: time.now.to_i + 86400 * validity_period,\n        aud: "https://appleid.apple.com",\n        sub: client_id\n    },\n    private_key,\n    "es256",\n    header_fields=\n    {\n        kid: key_id \n    }\n)\nputs token\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n\n\n> key_file：私钥路径。\n\n 1. 创建文件secret_gen.rb，把上面代码粘贴进去，执行ruby secret_gen.rb即可生成client_secret。\n\n# 2、进行登录\n\n服务器接收到 app 提交的信息后，根据authorizationcode获取id_token，然后再获取苹果用户的唯一标识 userid。\n\n> 获取token：https://appleid.apple.com/auth/token\n\n所需参数：\n\nclient_id： string (required) (authorization and validation) the application identifier for your app\n\nclient_secret： string (required) (authorization and validation) a secret generated as a json web token that uses the secret key generated by the wwdr portal.\n\ncode： string (authorization) the authorization code received from your application’s user agent. the code is single use only and valid for five minutes.\n\ngrant_type： string (required) (authorization and validation) the grant type that determines how the client interacts with the server. for authorization code validation, use authorization_code. for refresh token validation requests, use refresh_token.\n\nrefresh_token： string (validation) the refresh token received during the authorization request.\n\nredirect_uri： string (authorization) the destination uri the code was originally sent to.\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n * client_id 为app的 bundle identifier。\n * code 为 app 获取到的 authorizationcode。\n * grant_type 传固定字符串 authorization_code。\n * client_secret 是前面生成的，需注意是有时效性的，半年过期。\n\n发起请求，返回的结果为：\n\n{\n  "access_token": "一个token，此处省略",\n  "token_type": "bearer",\n  "expires_in": 3600,\n  "refresh_token": "一个token，此处省略",\n  "id_token": "结果是jwt，字符串形式，此处省略"\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n\n\n参数解释，官方文档：https://developer.apple.com/documentation/sign_in_with_apple/tokenresponse\n\n# 3、解码id_token\n\n解码步骤：\n\n 1. 先要获取public key；\n 2. 根据获取public key去进行解码。\n\n获取 public key。https://appleid.apple.com/auth/keys 结果：\n\n{\n  "keys": [\n    {\n      "kty": "rsa",\n      "kid": "aidopk1",\n      "use": "sig",\n      "alg": "rs256",\n      "n": "lxrwmuysastfn-luu4gozsxbd9ackm9ojuwuvqhmbzo6gw4fu_auudn5zi7y1dedfgt7m7qxwbhumd01hlnd4erty-rnwcwdjnfeay_esupy3ovmrndi15ns13xspws3q-13kdgv9jhi28p87rvmpjz_jcpq5im44osyrnytvjo-320sb8e2bw92pmrenbp67kruztevfgu4-obp5rz09oxvcr1io4kjveojdjuuoclf66at72wymtomdwzumhinjr0xsqk6h0mdwsjw7ysyd_jhmqx5caat9pgi0j8lu_pcl215oanqjy7ob-vmhug9egyxawvfu_1u6qjkeple-w",\n      "e": "aqab"\n    }\n  ]\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n获取到 public key 后，对id_token进行解析。\n\n// claims 解码\n{\n    "iss":"https://appleid.apple.com",  // 苹果签发的标识\n    "aud":"com.skyming.devicemonitor", // 接收者的app id\n    "exp":1565668086,\n    "iat":1565667486,\n    "sub":"001247.93b3a799a7c84c0cb46cd08f100797f2.0704", //用户的唯一标识\n    "c_hash":"oh2am9emnwvy3dq5jmclbg",\n    "auth_time":1565667486\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n\n * iss：苹果签发的标识；\n * aud：与你的 app 的 bundleid 一致；\n * sub：与手机端获得的 user 一致；\n\n服务器端通过对比 sub 字段信息是否与手机端上传的 user 信息一致来确定是否成功登录。\n\n# 源码\n\n所需依赖：\n\n<dependency>\n    <groupid>io.jsonwebtoken</groupid>\n    <artifactid>jjwt</artifactid>\n    <version>0.9.1</version>\n</dependency>\n\n\n1\n2\n3\n4\n5\n\n\n代码：\n\nimport cn.hutool.core.codec.base64;\nimport cn.hutool.core.lang.dict;\nimport cn.hutool.http.httputil;\nimport cn.hutool.json.jsonarray;\nimport cn.hutool.json.jsonobject;\nimport cn.hutool.json.jsonutil;\nimport io.jsonwebtoken.claims;\nimport io.jsonwebtoken.jws;\nimport io.jsonwebtoken.jwtparser;\nimport io.jsonwebtoken.jwts;\nimport lombok.extern.slf4j.slf4j;\n\nimport java.math.biginteger;\nimport java.security.keyfactory;\nimport java.security.publickey;\nimport java.security.spec.rsapublickeyspec;\nimport java.util.hashmap;\nimport java.util.map;\n\n@slf4j\npublic class appleutil {\n\n    public static void main(string[] args) {\n        string identitytoken = "eyjrawqioijxnldjt0tciiwiywxnijoiulmyntyifq.eyjpc3mioijodhrwczovl2fwcgxlawquyxbwbguuy29tiiwiyxvkijoiy29tlnvtzw94lnfpymxhiiwizxhwijoxnjcymzy5nduwlcjpyxqioje2nziyodmwntasinn1yii6ijawmtmwny5mn2nknwfkymvlmdy0zdc0yji4zji2owe3mmuznju4mi4wntmwiiwiy19oyxnoijoiv3vbs1lycuhlcuxiss12cnrlrkf4zyisimvtywlsijoimjgwmdm1nzy4qhfxlmnvbsisimvtywlsx3zlcmlmawvkijoidhj1zsisimf1dghfdgltzsi6mty3mji4mza1mcwibm9uy2vfc3vwcg9ydgvkijp0cnvlfq.tumszxg8qja2ejisrknyksukdy0vbqndvxsgl1y7hfrbolu0pyukm4ffjhb-oag1fokfa5nn7zglezggbsgmmsfnp5piitzmtqknez-5fnuxj1krhnjexqepurepkrumtvloi23wdpzoofnlyuyvrnnkqao2jg4xz94ihbwropbrpyfnnmf9oarg2w8rv125tn2bh2nlhp_xm7fd5rqdejvntbkskij1xbhlseemrced-spdtp2jvaliimnyk5flshgshuueaew2nmyrx0huanaymjuuckccojsdawia7ps_uzdmjwvbdgvutuizzvf-kevwc_dqzwecdjjlkg1r2q";\n        appleutil.test(identitytoken);\n    }\n\n    public static void test(string identitytoken) {\n        string clientid = "com.xxx.xxxx";\n        // 解析id_token\n        map<string, jsonobject> json = parseridentitytoken(identitytoken);\n        jsonobject header = json.get("header");\n        string kid = header.getstr("kid");\n        // 根据kid，获取相应的公钥\n        publickey publickey = getpublickey(kid);\n        if (publickey == null) {\n            log.error("[苹果登录失败 publickey获取失败 clientid<{}> kid<{}>]", clientid, kid);\n        }\n        getappleuserid(clientid, publickey, identitytoken);\n    }\n\n    private static map<string, object> getappleuserid(string appleclientid, publickey publickey, string identitytoken) {\n        string appleissuerurl = "https://appleid.apple.com";\n        jwtparser jwtparser = jwts.parser().requireissuer(appleissuerurl).requireaudience(appleclientid).setsigningkey(publickey);\n        jws<claims> claim = jwtparser.parseclaimsjws(identitytoken);\n        if (claim != null) {\n            map<string, object> result = claim.getbody();\n            string iss = result.get("iss").tostring();\n            string sub = result.get("sub").tostring();\n            string aud = result.get("aud").tostring();\n            long exp = long.parselong(result.get("exp").tostring()) * 1000;\n            log.info("[苹果登录iss<{}> sub<{}> aud<{}> exp<{}>]", iss, sub, aud, exp);\n            if (appleissuerurl.equals(iss) && appleclientid.equals(aud)) {\n                log.error("[苹果账号登录成功 appleclientid<{}> userid<{}>]", appleclientid, sub);\n                return new dict().set("userid", sub);\n            }\n        }\n        return null;\n    }\n\n    /**\n     * 解析id_token\n     *\n     * @param identitytoken\n     * @return\n     */\n    private static map<string, jsonobject> parseridentitytoken(string identitytoken) {\n        map<string, jsonobject> map = new hashmap<>(2);\n        string[] arr = identitytoken.split("\\\\.");\n        string deheader = base64.decodestr(arr[0]);\n        jsonobject header = jsonutil.parseobj(deheader);\n        string depayload = base64.decodestr(arr[1]);\n        jsonobject payload = jsonutil.parseobj(depayload);\n        map.put("header", header);\n        map.put("payload", payload);\n        return map;\n    }\n\n    /**\n     * 获取苹果的公钥\n     *\n     * @param kid\n     * @return\n     */\n    private static publickey getpublickey(string kid) {\n        map<string, map<string, string>> map = getapplekeys();\n        try {\n            string n = map.get(kid).get("n");\n            string e = map.get(kid).get("e");\n            biginteger modulus = new biginteger(1, base64.decode(n));\n            biginteger publicexponent = new biginteger(1, base64.decode(e));\n            rsapublickeyspec spec = new rsapublickeyspec(modulus, publicexponent);\n            //目前kty均为 "rsa"\n            keyfactory kf = keyfactory.getinstance("rsa");\n            return kf.generatepublic(spec);\n        } catch (exception e) {\n            system.err.println("getpublickey error:{}" + e);\n        }\n        return null;\n    }\n\n    /**\n     * 请求苹果公钥信息\n     *\n     * @return\n     */\n    private static map<string, map<string, string>> getapplekeys() {\n        map<string, map<string, string>> result = new hashmap<>(2);\n        string keys = httputil.get("https://appleid.apple.com/auth/keys");\n        jsonobject keysobject = jsonutil.parseobj(keys);\n        jsonarray jsonarray = keysobject.getjsonarray("keys");\n        for (int i = 0; i < jsonarray.size(); i++) {\n            map<string, string> m = new hashmap<>();\n            m.put("n", jsonarray.getjsonobject(i).getstr("n"));\n            m.put("e", jsonarray.getjsonobject(i).getstr("e"));\n            result.put(jsonarray.getjsonobject(i).getstr("kid"), m);\n        }\n        return result;\n    }\n\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n74\n75\n76\n77\n78\n79\n80\n81\n82\n83\n84\n85\n86\n87\n88\n89\n90\n91\n92\n93\n94\n95\n96\n97\n98\n99\n100\n101\n102\n103\n104\n105\n106\n107\n108\n109\n110\n111\n112\n113\n114\n115\n116\n117\n118\n119\n120\n121\n\n\n\n# 文章\n\n * 张龙-sign in with apple 从登陆到服务器验证\n * springboot java后端校验sign in with apple （苹果授权登录）\n * sign in with apple（苹果授权登陆）',charsets:{cjk:!0},lastUpdated:"6/9/2023",lastUpdatedTimestamp:168629018e4},{title:"git clone 报错：Filename too long",frontmatter:{title:"git clone 报错：Filename too long",date:"2024-01-26T17:02:07.000Z",permalink:"/pages/0e4b5e/",categories:["文章","实战"],tags:["git"],readingShow:"top"},regularPath:"/01.%E6%96%87%E7%AB%A0/11.%E5%AE%9E%E6%88%98/16.git%20clone%20%E6%8A%A5%E9%94%99%EF%BC%9AFilename%20too%20long.html",relativePath:"01.文章/11.实战/16.git clone 报错：Filename too long.md",key:"v-4d9d1213",path:"/pages/0e4b5e/",headersStr:null,content:"# git clone 报错：Filename too long\n\ngit clone https://github.com/spring-projects/spring-boot.git\n\n报错如下：\n\nfatal: cannot create directory at 'spring-boot-project/spring-boot-tools/spring-boot-buildpack-platform/src/test/resources/org/springframework/boot/buildpack/platform/docker/configuration/with-context/contexts/meta/ea1b2003cc8155cb8af43960c89a4c1e28777d6fd848ff3422cf375329c2626d': Filename too long warning: Clone succeeded, but checkout failed\n\n报错原因：文件路径太长，导致 git 创建路径失败。\n\n解决方案：clone 的时候添加参数-c core.longpaths=true\n\ngit clone -c core.longpaths=true https://github.com/spring-projects/spring-boot.git\n\n",normalizedContent:"# git clone 报错：filename too long\n\ngit clone https://github.com/spring-projects/spring-boot.git\n\n报错如下：\n\nfatal: cannot create directory at 'spring-boot-project/spring-boot-tools/spring-boot-buildpack-platform/src/test/resources/org/springframework/boot/buildpack/platform/docker/configuration/with-context/contexts/meta/ea1b2003cc8155cb8af43960c89a4c1e28777d6fd848ff3422cf375329c2626d': filename too long warning: clone succeeded, but checkout failed\n\n报错原因：文件路径太长，导致 git 创建路径失败。\n\n解决方案：clone 的时候添加参数-c core.longpaths=true\n\ngit clone -c core.longpaths=true https://github.com/spring-projects/spring-boot.git\n\n",charsets:{cjk:!0},lastUpdated:"1/26/2024",lastUpdatedTimestamp:1706259789e3},{title:"免费注册ChatGPT指南",frontmatter:{title:"免费注册ChatGPT指南",date:"2023-03-31T16:33:56.000Z",permalink:"/pages/b131bf/",categories:["文章","工具"],tags:["ChatGPT"],readingShow:"top"},regularPath:"/01.%E6%96%87%E7%AB%A0/12.AI/05.ChatGPT/07.%E5%85%8D%E8%B4%B9%E6%B3%A8%E5%86%8CChatGPT%E6%8C%87%E5%8D%97.html",relativePath:"01.文章/12.AI/05.ChatGPT/07.免费注册ChatGPT指南.md",key:"v-6ac94fd5",path:"/pages/b131bf/",headers:[{level:2,title:"前期准备",slug:"前期准备",normalizedTitle:"前期准备",charIndex:37},{level:2,title:"流程",slug:"流程",normalizedTitle:"流程",charIndex:149},{level:3,title:"注册短信平台",slug:"注册短信平台",normalizedTitle:"注册短信平台",charIndex:85},{level:3,title:"登录",slug:"登录",normalizedTitle:"登录",charIndex:128},{level:3,title:"充值",slug:"充值",normalizedTitle:"充值",charIndex:186},{level:3,title:"选择服务",slug:"选择服务",normalizedTitle:"选择服务",charIndex:419},{level:3,title:"选择国家",slug:"选择国家",normalizedTitle:"选择国家",charIndex:222},{level:3,title:"购买成功",slug:"购买成功",normalizedTitle:"购买成功",charIndex:463},{level:3,title:"ChatGPT注册页",slug:"chatgpt注册页",normalizedTitle:"chatgpt注册页",charIndex:520},{level:2,title:"总结",slug:"总结",normalizedTitle:"总结",charIndex:539}],excerpt:'<h1 id="免费注册chatgpt指南"><a class="header-anchor" href="#免费注册chatgpt指南">#</a> 免费注册ChatGPT指南</h1>\n<p>ChatGPT 你确定不玩玩？</p>\n',headersStr:"前期准备 流程 注册短信平台 登录 充值 选择服务 选择国家 购买成功 ChatGPT注册页 总结",content:"# 免费注册ChatGPT指南\n\nChatGPT 你确定不玩玩？\n\n\n# 前期准备\n\n * 科学上网，先保证你能成功访问 ChatGPT 的网址\n * 准备一个邮箱，用来注册短信平台\n * 准备 Google 账户，ChatGPT 使用 Google 账户登录后绑定一个外网手机号即可使用\n\n\n# 流程\n\n 1.  注册短信平台\n 2.  登录短信平台\n 3.  短信平台充值\n 4.  短信平台，选择 OpenAI 服务\n 5.  短信平台，选择国家\n 6.  短信平台，复制号码\n 7.  ChatGPT 使用 Google 登录后，到需要输入手机号的页面\n 8.  选择对应短信平台选的国家，填写复制的号码\n 9.  短信平台，等待短信\n 10. ChatGPT 输入短信，成功\n\n\n# 注册短信平台\n\n注册短信平台\n\n略...\n\n\n# 登录\n\n略...\n\n\n# 充值\n\n\n\n可选择支付宝进行充值，目前最低充值 2 美金。\n\n\n# 选择服务\n\n\n\n\n# 选择国家\n\n选择一个便宜的即可，点击购物车进行购买。\n\n\n\n\n# 购买成功\n\n现在你有一个可以接码的号码了，复制号码到 OpenAI 验证码界面。\n\n\n\n收到验证码。\n\n\n\n\n# ChatGPT注册页\n\n\n\n\n\n\n# 总结\n\n核心就是使用短信平台接收验证码来注册 OpenAI 的账号。\n\n如果小伙伴们还是觉得麻烦，可以私聊我，直接为你提供一站式服务。\n\n有问题可加我微信，一起讨论，一起进步！\n\n",normalizedContent:"# 免费注册chatgpt指南\n\nchatgpt 你确定不玩玩？\n\n\n# 前期准备\n\n * 科学上网，先保证你能成功访问 chatgpt 的网址\n * 准备一个邮箱，用来注册短信平台\n * 准备 google 账户，chatgpt 使用 google 账户登录后绑定一个外网手机号即可使用\n\n\n# 流程\n\n 1.  注册短信平台\n 2.  登录短信平台\n 3.  短信平台充值\n 4.  短信平台，选择 openai 服务\n 5.  短信平台，选择国家\n 6.  短信平台，复制号码\n 7.  chatgpt 使用 google 登录后，到需要输入手机号的页面\n 8.  选择对应短信平台选的国家，填写复制的号码\n 9.  短信平台，等待短信\n 10. chatgpt 输入短信，成功\n\n\n# 注册短信平台\n\n注册短信平台\n\n略...\n\n\n# 登录\n\n略...\n\n\n# 充值\n\n\n\n可选择支付宝进行充值，目前最低充值 2 美金。\n\n\n# 选择服务\n\n\n\n\n# 选择国家\n\n选择一个便宜的即可，点击购物车进行购买。\n\n\n\n\n# 购买成功\n\n现在你有一个可以接码的号码了，复制号码到 openai 验证码界面。\n\n\n\n收到验证码。\n\n\n\n\n# chatgpt注册页\n\n\n\n\n\n\n# 总结\n\n核心就是使用短信平台接收验证码来注册 openai 的账号。\n\n如果小伙伴们还是觉得麻烦，可以私聊我，直接为你提供一站式服务。\n\n有问题可加我微信，一起讨论，一起进步！\n\n",charsets:{cjk:!0},lastUpdated:"2/24/2024",lastUpdatedTimestamp:1708766299e3},{title:"ChatGPT Plus订阅指南",frontmatter:{title:"ChatGPT Plus订阅指南",date:"2024-02-24T16:07:54.000Z",permalink:"/pages/82530f/",categories:["文章","AI","ChatGPT"],tags:["ChatGPT","ChatGPT Plus","GPT4"],readingShow:"top"},regularPath:"/01.%E6%96%87%E7%AB%A0/12.AI/05.ChatGPT/08.ChatGPT%20Plus%E8%AE%A2%E9%98%85%E6%8C%87%E5%8D%97.html",relativePath:"01.文章/12.AI/05.ChatGPT/08.ChatGPT Plus订阅指南.md",key:"v-642daeec",path:"/pages/82530f/",headers:[{level:2,title:"WildCard注册流程",slug:"wildcard注册流程",normalizedTitle:"wildcard注册流程",charIndex:124},{level:2,title:"使用WildCard操作Open AI升级ChatGPT Plus流程",slug:"使用wildcard操作open-ai升级chatgpt-plus流程",normalizedTitle:"使用wildcard操作open ai升级chatgpt plus流程",charIndex:678},{level:2,title:"ChatGPT Plus 如何取消自动扣费/订阅",slug:"chatgpt-plus-如何取消自动扣费-订阅",normalizedTitle:"chatgpt plus 如何取消自动扣费/订阅",charIndex:886},{level:2,title:"总结",slug:"总结",normalizedTitle:"总结",charIndex:1211}],excerpt:'<h1 id="chatgpt-plus订阅指南"><a class="header-anchor" href="#chatgpt-plus订阅指南">#</a> ChatGPT Plus订阅指南</h1>\n<p>ChatGPT Plus 订阅指南。</p>\n<p>ChatGPT 订阅是需要海外信用卡的，很多小伙伴是没有的，但是有需求的地方就会有人出解决方案的。</p>\n<p>往下看 5 分钟带你轻松订阅 ChatGPT Plus。</p>\n',headersStr:"WildCard注册流程 使用WildCard操作Open AI升级ChatGPT Plus流程 ChatGPT Plus 如何取消自动扣费/订阅 总结",content:"# ChatGPT Plus订阅指南\n\nChatGPT Plus 订阅指南。\n\nChatGPT 订阅是需要海外信用卡的，很多小伙伴是没有的，但是有需求的地方就会有人出解决方案的。\n\n往下看 5 分钟带你轻松订阅 ChatGPT Plus。\n\n\n# WildCard注册流程\n\nWildCard 首页，轻松订阅 ChatGPT Plus。\n\n\n\nWildCard 注册。\n\n\n\n直接使用手机号+验证码进行注册。 铁子们一点要记得带上我的邀请码GPTPLUS888，可以优惠 2$ 我也可以得 2$。大家好才是真的好。快捷链接\n\n\n\n可以直接使用支付宝扫码进行身份验证，十分方便。\n\n\n\n开卡是需要费用得，两年 15.99$-2$ = 13.99，我是选择的两年，看个人选择。\n\n其它国外付费软件订阅都可以用这张卡，2年有效期，一次性开卡 后续不收费。\n\n\n\n支付宝扫码支付。\n\n\n\n支付宝付款订单。\n\n\n\n设置登录密码。\n\n\n\nWildCard 首页，Open AI 的专属服务。\n\n\n\nWildCard 卡片信息。\n\n\n\n因为我要订阅 ChatGPT Plus，20$ 一个月，所以我选择充值 20$。\n\n\n\n支付宝付款订单。\n\n\n\nWildCard 卡片信息 + 20$。\n\n\n\n升级 ChatGPT Plus。\n\n\n\n升级 ChatGPT Plus，选择个人。\n\n\n\n这里 WildCard 告诉了你如何进行操作，将 OpenAI 的付款链接复制出来即可，不用自己手填各种信用卡的信息。\n\n\n\nOpenAI 选择升级 Plus 入口。\n\n\n\n\n\n\n# 使用WildCard操作Open AI升级ChatGPT Plus流程\n\nOpenAI 付款页。\n\n\n\n\n\n复制链接即可。\n\n\n\nWildCard 升级 ChatGPT Plus，选择支付卡片。\n\n\n\n接下来是设置付款密码，填写付款密码。付款后还会有短信通知。\n\n\n\n\n\n\n\n\n\n\n\nChatGPT4 我来了~ model 可以选择 gpt-4 了。\n\n\n\n首先来一个问题：你与GPT3.5有什么不同？\n\n\n\n\n# ChatGPT Plus 如何取消自动扣费/订阅\n\nChatGPT Plus 是一种订阅服务，每个月的订阅费用是 20 美元，每个月都会进行扣费，如果您订阅了 ChatGPT Plus，而帐户余额并不够 20 美元，OpenAI 在多次扣费失败后，可能会封禁我们的帐户，所以如果不继续使用 ChatGPT Plus，请及时取消订阅。\n\n取消订阅的步骤很简单，web 端是这么操作：\n\n 1. 登录 ChatGPT，点击左下角帐户的头像。在弹出的弹窗中，点击「My plan」。\n\n 2. 在弹出的「My plan」弹窗中，选择「Manage my subscription」\n\n 3. 在跳转的订阅页面，选择「取消方案」/ Cancel 。\n\n\n# 总结\n\n 1. 注册 WildCard 账户，购买海外虚拟信用卡。\n 2. 使用 WildCard 购买的虚拟信用卡订阅 Open AI 的 ChatGPT Plus。\n 3. WildCard 支持支付宝付款，使用方便。\n\n如果小伙伴们还是觉得麻烦，可以私聊我，直接为你提供一站式服务。\n\n有问题可加我微信，一起讨论，一起进步！\n\n",normalizedContent:"# chatgpt plus订阅指南\n\nchatgpt plus 订阅指南。\n\nchatgpt 订阅是需要海外信用卡的，很多小伙伴是没有的，但是有需求的地方就会有人出解决方案的。\n\n往下看 5 分钟带你轻松订阅 chatgpt plus。\n\n\n# wildcard注册流程\n\nwildcard 首页，轻松订阅 chatgpt plus。\n\n\n\nwildcard 注册。\n\n\n\n直接使用手机号+验证码进行注册。 铁子们一点要记得带上我的邀请码gptplus888，可以优惠 2$ 我也可以得 2$。大家好才是真的好。快捷链接\n\n\n\n可以直接使用支付宝扫码进行身份验证，十分方便。\n\n\n\n开卡是需要费用得，两年 15.99$-2$ = 13.99，我是选择的两年，看个人选择。\n\n其它国外付费软件订阅都可以用这张卡，2年有效期，一次性开卡 后续不收费。\n\n\n\n支付宝扫码支付。\n\n\n\n支付宝付款订单。\n\n\n\n设置登录密码。\n\n\n\nwildcard 首页，open ai 的专属服务。\n\n\n\nwildcard 卡片信息。\n\n\n\n因为我要订阅 chatgpt plus，20$ 一个月，所以我选择充值 20$。\n\n\n\n支付宝付款订单。\n\n\n\nwildcard 卡片信息 + 20$。\n\n\n\n升级 chatgpt plus。\n\n\n\n升级 chatgpt plus，选择个人。\n\n\n\n这里 wildcard 告诉了你如何进行操作，将 openai 的付款链接复制出来即可，不用自己手填各种信用卡的信息。\n\n\n\nopenai 选择升级 plus 入口。\n\n\n\n\n\n\n# 使用wildcard操作open ai升级chatgpt plus流程\n\nopenai 付款页。\n\n\n\n\n\n复制链接即可。\n\n\n\nwildcard 升级 chatgpt plus，选择支付卡片。\n\n\n\n接下来是设置付款密码，填写付款密码。付款后还会有短信通知。\n\n\n\n\n\n\n\n\n\n\n\nchatgpt4 我来了~ model 可以选择 gpt-4 了。\n\n\n\n首先来一个问题：你与gpt3.5有什么不同？\n\n\n\n\n# chatgpt plus 如何取消自动扣费/订阅\n\nchatgpt plus 是一种订阅服务，每个月的订阅费用是 20 美元，每个月都会进行扣费，如果您订阅了 chatgpt plus，而帐户余额并不够 20 美元，openai 在多次扣费失败后，可能会封禁我们的帐户，所以如果不继续使用 chatgpt plus，请及时取消订阅。\n\n取消订阅的步骤很简单，web 端是这么操作：\n\n 1. 登录 chatgpt，点击左下角帐户的头像。在弹出的弹窗中，点击「my plan」。\n\n 2. 在弹出的「my plan」弹窗中，选择「manage my subscription」\n\n 3. 在跳转的订阅页面，选择「取消方案」/ cancel 。\n\n\n# 总结\n\n 1. 注册 wildcard 账户，购买海外虚拟信用卡。\n 2. 使用 wildcard 购买的虚拟信用卡订阅 open ai 的 chatgpt plus。\n 3. wildcard 支持支付宝付款，使用方便。\n\n如果小伙伴们还是觉得麻烦，可以私聊我，直接为你提供一站式服务。\n\n有问题可加我微信，一起讨论，一起进步！\n\n",charsets:{cjk:!0},lastUpdated:"2/24/2024",lastUpdatedTimestamp:1708766299e3},{title:"使用nvm控制node版本",frontmatter:{title:"使用nvm控制node版本",date:"2024-01-26T17:03:40.000Z",permalink:"/pages/8b23f4/",categories:["文章","前端"],tags:["nvm"],readingShow:"top"},regularPath:"/01.%E6%96%87%E7%AB%A0/17.%E5%89%8D%E7%AB%AF/01.%E4%BD%BF%E7%94%A8nvm%E6%8E%A7%E5%88%B6node%E7%89%88%E6%9C%AC.html",relativePath:"01.文章/17.前端/01.使用nvm控制node版本.md",key:"v-2a29defe",path:"/pages/8b23f4/",headers:[{level:2,title:"下载&安装",slug:"下载-安装",normalizedTitle:"下载&amp;安装",charIndex:null},{level:2,title:"配置",slug:"配置",normalizedTitle:"配置",charIndex:301},{level:2,title:"常用指令",slug:"常用指令",normalizedTitle:"常用指令",charIndex:690},{level:2,title:"举例",slug:"举例",normalizedTitle:"举例",charIndex:1096},{level:2,title:"参考",slug:"参考",normalizedTitle:"参考",charIndex:1798}],excerpt:'<h1 id="使用nvm控制node版本"><a class="header-anchor" href="#使用nvm控制node版本">#</a> 使用nvm控制node版本</h1>\n<p>nvm 是一个 node 版本管理工具，通过它可以安装多种 node 版本并且可以快速、简单的切换 node 版本。</p>\n',headersStr:"下载&安装 配置 常用指令 举例 参考",content:"# 使用nvm控制node版本\n\nnvm 是一个 node 版本管理工具，通过它可以安装多种 node 版本并且可以快速、简单的切换 node 版本。\n\n\n# 下载&安装\n\ngithub & 下载地址\n\n * 安装版使用 nvm-setup.exe\n * 解压版使用 nvm-setup.zip\n\n安装路径的选择：C:\\Users\\_____\\AppData\\Roaming\\nvm node的安装路径的选择：C:\\Program Files\\nodejs\n\n如果不是有路径强迫症，最好不要修改，以免忘记后续存放位置。\n\ncmd 输入 nvm -v 查询版本号，如果成功则代表安装成功。\n\n不成功则需要配置环境变量。\n\n环境变量名         环境变量值\nNVM_HOME      C:\\Users\\_____\\AppData\\Roaming\\nvm\nNVM_SYMLINK   C:\\Program Files\\nodejs\n\n\n# 配置\n\n配置下载镜像\n\n找到 nvm 安装路径(默认路径C:\\Users\\_____\\AppData\\Roaming\\nvm)，配置 nvm 的 setting.txt。\n\nroot: C:\\Users\\_____\\AppData\\Roaming\\nvm\npath: C:\\Program Files\\nodejs\nnode_mirror: https://npmmirror.com/mirrors/node/\nnpm_mirror: https://npmmirror.com/mirrors/npm/\n\n\n1\n2\n3\n4\n\n\n\n# 常用指令\n\n(1)查看目前已经安装的版本\n    nvm ls\n(2)安装指定的版本的nodejs\n    nvm install 10.5.0\n(3)使用指定版本的nodejs\n    nvm use 10.5.0\n(4)显示可下载版本的部分列表\n    nvm list available\n(5)删除已安装的指定版本，语法与install类似\n    nvm uninstall 10.5.0\n(6)给不同的版本号添加别名\n    nvm alias\n(7)删除已定义的别名\n    nvm unalias\n(8)在当前版本node环境下，重新全局安装指定版本号的npm包\n    nvm reinstall-packages <version>\n(9)显示当前的版本\n    nvm current\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n\n\n\n# 举例\n\n 1. 查看目前已经安装的版本。\n 2. 安装 18.17.1。\n 3. 查看目前已经安装的版本。\n 4. 使用指定版本 18.17.1。\n\nMicrosoft Windows [版本 10.0.22621.2861]\n(c) Microsoft Corporation。保留所有权利。\n\nC:\\Users\\_____>nvm ls\n\n  * 14.18.1 (Currently using 64-bit executable)\n\nC:\\Users\\_____>nvm install 18.17.1\nDownloading node.js version 18.17.1 (64-bit)...\nExtracting node and npm...\nComplete\nnpm v9.6.7 installed successfully.\n\n\nInstallation complete. If you want to use this version, type\n\nnvm use 18.17.1\n\nC:\\Users\\_____>nvm list\n\n    18.17.1\n  * 14.18.1 (Currently using 64-bit executable)\n\nC:\\Users\\_____>nvm use 18.17.1\nNow using node v18.17.1 (64-bit)\n\nC:\\Users\\_____>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n\n\n\n# 参考\n\n * 金炑颜-NVM管理node版本\n * 辰风沐阳-.nvmrc 文件使用详解\n * 天猪-【望周知】淘宝 NPM 镜像站喊你切换新域名啦",normalizedContent:"# 使用nvm控制node版本\n\nnvm 是一个 node 版本管理工具，通过它可以安装多种 node 版本并且可以快速、简单的切换 node 版本。\n\n\n# 下载&安装\n\ngithub & 下载地址\n\n * 安装版使用 nvm-setup.exe\n * 解压版使用 nvm-setup.zip\n\n安装路径的选择：c:\\users\\_____\\appdata\\roaming\\nvm node的安装路径的选择：c:\\program files\\nodejs\n\n如果不是有路径强迫症，最好不要修改，以免忘记后续存放位置。\n\ncmd 输入 nvm -v 查询版本号，如果成功则代表安装成功。\n\n不成功则需要配置环境变量。\n\n环境变量名         环境变量值\nnvm_home      c:\\users\\_____\\appdata\\roaming\\nvm\nnvm_symlink   c:\\program files\\nodejs\n\n\n# 配置\n\n配置下载镜像\n\n找到 nvm 安装路径(默认路径c:\\users\\_____\\appdata\\roaming\\nvm)，配置 nvm 的 setting.txt。\n\nroot: c:\\users\\_____\\appdata\\roaming\\nvm\npath: c:\\program files\\nodejs\nnode_mirror: https://npmmirror.com/mirrors/node/\nnpm_mirror: https://npmmirror.com/mirrors/npm/\n\n\n1\n2\n3\n4\n\n\n\n# 常用指令\n\n(1)查看目前已经安装的版本\n    nvm ls\n(2)安装指定的版本的nodejs\n    nvm install 10.5.0\n(3)使用指定版本的nodejs\n    nvm use 10.5.0\n(4)显示可下载版本的部分列表\n    nvm list available\n(5)删除已安装的指定版本，语法与install类似\n    nvm uninstall 10.5.0\n(6)给不同的版本号添加别名\n    nvm alias\n(7)删除已定义的别名\n    nvm unalias\n(8)在当前版本node环境下，重新全局安装指定版本号的npm包\n    nvm reinstall-packages <version>\n(9)显示当前的版本\n    nvm current\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n\n\n\n# 举例\n\n 1. 查看目前已经安装的版本。\n 2. 安装 18.17.1。\n 3. 查看目前已经安装的版本。\n 4. 使用指定版本 18.17.1。\n\nmicrosoft windows [版本 10.0.22621.2861]\n(c) microsoft corporation。保留所有权利。\n\nc:\\users\\_____>nvm ls\n\n  * 14.18.1 (currently using 64-bit executable)\n\nc:\\users\\_____>nvm install 18.17.1\ndownloading node.js version 18.17.1 (64-bit)...\nextracting node and npm...\ncomplete\nnpm v9.6.7 installed successfully.\n\n\ninstallation complete. if you want to use this version, type\n\nnvm use 18.17.1\n\nc:\\users\\_____>nvm list\n\n    18.17.1\n  * 14.18.1 (currently using 64-bit executable)\n\nc:\\users\\_____>nvm use 18.17.1\nnow using node v18.17.1 (64-bit)\n\nc:\\users\\_____>\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n\n\n\n# 参考\n\n * 金炑颜-nvm管理node版本\n * 辰风沐阳-.nvmrc 文件使用详解\n * 天猪-【望周知】淘宝 npm 镜像站喊你切换新域名啦",charsets:{cjk:!0},lastUpdated:"1/26/2024",lastUpdatedTimestamp:1706259949e3},{title:"马保国文体",frontmatter:{title:"马保国文体",date:"2022-07-22T18:04:18.000Z",permalink:"/pages/75d814/",categories:["冥思","杂谈"],tags:["马保国文体"],readingShow:"top"},regularPath:"/03.%E5%86%A5%E6%80%9D/01.%E6%9D%82%E8%B0%88/01.%E9%A9%AC%E4%BF%9D%E5%9B%BD%E6%96%87%E4%BD%93.html",relativePath:"03.冥思/01.杂谈/01.马保国文体.md",key:"v-09d2ca00",path:"/pages/75d814/",excerpt:"<p>佳哥说对新制度有疑问，我说正常，你别计较，他不服气，他说你别整这些有的没的，有问题就是有问题，没问题就是没问题，他说不行，他要试试，很快啊！他啪的一下就把异议发到公司大群了，先是一个疑问句，后是一个题目，再艾特上人事主管，我大意了，我一下没拉住他他就发送了。我说佳哥这你不能怪我，我想拉你，你太快了，我说你不讲司德，他说对不起这次我就是要刚，忍了几年，这次不忍了。啊，看来佳哥是真的人忍不住了，这年轻人不讲司德，说做就做！就是刚给我看，为了给我演示，就这样，这好吗？这不好，我劝，佳哥，你在公司以后，耗子尾汁，好好反思，不要再犯这样的冲动！</p>\n",headersStr:null,content:"佳哥说对新制度有疑问，我说正常，你别计较，他不服气，他说你别整这些有的没的，有问题就是有问题，没问题就是没问题，他说不行，他要试试，很快啊！他啪的一下就把异议发到公司大群了，先是一个疑问句，后是一个题目，再艾特上人事主管，我大意了，我一下没拉住他他就发送了。我说佳哥这你不能怪我，我想拉你，你太快了，我说你不讲司德，他说对不起这次我就是要刚，忍了几年，这次不忍了。啊，看来佳哥是真的人忍不住了，这年轻人不讲司德，说做就做！就是刚给我看，为了给我演示，就这样，这好吗？这不好，我劝，佳哥，你在公司以后，耗子尾汁，好好反思，不要再犯这样的冲动！\n\n面试官一来，我啪的就站起来了，很快啊！然后上来就是手写二分查找，两个有序队列实现堆栈，两数之和，我全都写完了啊，写完了以后自然是传统面试以点到为止，后面几道求空间复杂度和时间复杂度算法就没做了，因为几道题，按照传统答题点到为止，我已经不会做了。面试官说他是乱出的，他可不是乱出的啊，数据结构，算法分析，训练有素，后来他说他以前是阿里p8的，看来是有备而来！这个面试官不讲武德，来，骗！来，愉袭！我工作一年多的菜狗，这好吗，这不好，我劝这位面试官，耗子尾汁，好好反思，以后不要犯这样的聪明，小聪明啊。 面试要以和为贵，不要搞窝外斗～谢谢朋友们\n\n前端要和我联调接口，我说小朋友，你的逻辑尽量按我输出的格式来，他不服气，他说你这个没用，我说有用，传统的前后端分离返回的格式要尽量规范，这样好处理，他说试试，我说行，我接口文档刚写好，他请求啪的一下就返回了，很快啊！ 先是一个JSON数组，一个Post，一个Token啊，我全部接受转换给DTO了啊，转换以后自然是正常处理业务逻辑和入库操作，我笑一下提交测试了，一上正式环境程序突然崩溃了，我大意了啊，没有闪，传了一个undefined，我说前端不讲码德，他说对不起我不懂规矩，后来他说他做了好几年，啊，看来是有一定经验，这个年轻人不讲码德，来！骗！ 来！糊弄 我一个老后端，这好吗？这不好，我劝，这位前端，耗子尾汁，好好反思，不要再犯这样的懒。",normalizedContent:"佳哥说对新制度有疑问，我说正常，你别计较，他不服气，他说你别整这些有的没的，有问题就是有问题，没问题就是没问题，他说不行，他要试试，很快啊！他啪的一下就把异议发到公司大群了，先是一个疑问句，后是一个题目，再艾特上人事主管，我大意了，我一下没拉住他他就发送了。我说佳哥这你不能怪我，我想拉你，你太快了，我说你不讲司德，他说对不起这次我就是要刚，忍了几年，这次不忍了。啊，看来佳哥是真的人忍不住了，这年轻人不讲司德，说做就做！就是刚给我看，为了给我演示，就这样，这好吗？这不好，我劝，佳哥，你在公司以后，耗子尾汁，好好反思，不要再犯这样的冲动！\n\n面试官一来，我啪的就站起来了，很快啊！然后上来就是手写二分查找，两个有序队列实现堆栈，两数之和，我全都写完了啊，写完了以后自然是传统面试以点到为止，后面几道求空间复杂度和时间复杂度算法就没做了，因为几道题，按照传统答题点到为止，我已经不会做了。面试官说他是乱出的，他可不是乱出的啊，数据结构，算法分析，训练有素，后来他说他以前是阿里p8的，看来是有备而来！这个面试官不讲武德，来，骗！来，愉袭！我工作一年多的菜狗，这好吗，这不好，我劝这位面试官，耗子尾汁，好好反思，以后不要犯这样的聪明，小聪明啊。 面试要以和为贵，不要搞窝外斗～谢谢朋友们\n\n前端要和我联调接口，我说小朋友，你的逻辑尽量按我输出的格式来，他不服气，他说你这个没用，我说有用，传统的前后端分离返回的格式要尽量规范，这样好处理，他说试试，我说行，我接口文档刚写好，他请求啪的一下就返回了，很快啊！ 先是一个json数组，一个post，一个token啊，我全部接受转换给dto了啊，转换以后自然是正常处理业务逻辑和入库操作，我笑一下提交测试了，一上正式环境程序突然崩溃了，我大意了啊，没有闪，传了一个undefined，我说前端不讲码德，他说对不起我不懂规矩，后来他说他做了好几年，啊，看来是有一定经验，这个年轻人不讲码德，来！骗！ 来！糊弄 我一个老后端，这好吗？这不好，我劝，这位前端，耗子尾汁，好好反思，不要再犯这样的懒。",charsets:{cjk:!0},lastUpdated:"8/12/2022",lastUpdatedTimestamp:1660298709e3},{title:"为什么我会选择购买小米11",frontmatter:{title:"为什么我会选择购买小米11",date:"2020-12-12T19:41:51.000Z",permalink:"/pages/95cf6a/",categories:["冥思","杂谈"],tags:["小米11"],readingShow:"top"},regularPath:"/03.%E5%86%A5%E6%80%9D/01.%E6%9D%82%E8%B0%88/03.%E4%B8%BA%E4%BB%80%E4%B9%88%E6%88%91%E4%BC%9A%E9%80%89%E6%8B%A9%E8%B4%AD%E4%B9%B0%E5%B0%8F%E7%B1%B311.html",relativePath:"03.冥思/01.杂谈/03.为什么我会选择购买小米11.md",key:"v-e4718e2e",path:"/pages/95cf6a/",headers:[{level:2,title:"现在在用的手机",slug:"现在在用的手机",normalizedTitle:"现在在用的手机",charIndex:2},{level:2,title:"iPhone 12",slug:"iphone-12",normalizedTitle:"iphone 12",charIndex:253},{level:2,title:"挑选品牌",slug:"挑选品牌",normalizedTitle:"挑选品牌",charIndex:606},{level:2,title:"小米10至尊旗舰版",slug:"小米10至尊旗舰版",normalizedTitle:"小米10至尊旗舰版",charIndex:911},{level:2,title:"小米11",slug:"小米11",normalizedTitle:"小米11",charIndex:1065}],excerpt:'<h2 id="现在在用的手机"><a class="header-anchor" href="#现在在用的手机">#</a> 现在在用的手机</h2>\n<p>目前自己手上用的还是 2015 年买的 iPhone 6s Plus 港版 16GB。</p>\n<p>2017 年手机扩容过一次 16GB -&gt; 128GB ，换了块电池。</p>\n<p>满血复活！！！</p>\n',headersStr:"现在在用的手机 iPhone 12 挑选品牌 小米10至尊旗舰版 小米11",content:"# 现在在用的手机\n\n目前自己手上用的还是 2015 年买的 iPhone 6s Plus 港版 16GB。\n\n2017 年手机扩容过一次 16GB -> 128GB ，换了块电池。\n\n满血复活！！！\n\n2019 年手机没办法没办法充电，当时就感觉是电池坏了，充了一晚上，还是无效，最后电池用完。修理员上面检查，换了块电磁，复活！\n\n但是在 2019 年就已经感受到了，手机有点顶不住了，微信经常被杀，手机在地铁上满信号，就是没网。\n\n但是 2019 年没出什么能够打动自己手机，一直想等 2020 年的 iPhone 12 。\n\n这中途，手机发烫明显。除了这个毛病好像也没别的了。\n\n2020 自己换了一块电池，因为明显感觉到那个电池是个垃圾。\n\n不能叫复活了，毕竟已经服役 5 年了，哈哈哈哈。\n\n准备把它换下来了！\n\n\n\n\n# iPhone 12\n\niPhone 12 出了，跟曝光的基本差不了什么东西。\n\n外观回归，各项参数升级。\n\n然鹅呢？？？ 你特么电池这么小？\n\n价格还是苹果的价格，这没啥好说。\n\n没买 iPhone 12 自己总结了一下原因：\n\n 1. 电池太小；\n 2. 升级的内容没啥能打动我；\n 3. 自己是程序员，觉得 Android 可折腾的空间大些，iPhone 基本没啥操作空间；\n 4. 价格依旧那么贵；\n\n所以 iPhone 12 我也没选择，然后就物色其他的手机。\n\n\n# 挑选品牌\n\n小米、华为、一加、魅族....\n\n这些都看了个遍，还是没找到自己满意的。\n\n突然身边的朋友，买了一个 Sony，从来没用过 Sony 手机的我很是惊奇，去看了各种测评视频。\n\n自己都准备剁手了， 索尼（SONY）Xperia1 II 5G 智能手机 4K 屏 骁龙 865 12G + 256G。\n\n\n\n选择这个 Sony 的理由：\n\n 1. 手机屏幕，4K 屏，吹爆；\n 2. 21:9 带鱼屏；\n 3. 有 3.5mm 耳机接口；\n 4. Sony 这个品牌，信仰的力量；\n\n可是价格有点高，一直再等降价，因为知道骁龙 888 要出，肯定 865 的机子要降价的。\n\n等待降价中...\n\n\n# 小米10至尊旗舰版\n\n中间也考虑了一下小米 10 至尊旗舰版 ，大学的好朋友，妥妥的果粉，也入手了这个手机。\n\n而且评价很高，表示用着很爽。\n\n但还是有以下问题（朋友反馈的）：\n\n 1. 屏幕素质问题，发绿；\n 2. 国产屏可视角度有点小；\n 3. 重；\n\n优点就不说了。\n\n\n\n没买的原因：抢不到\n\n\n# 小米11\n\n有一天看公众号，发现，小米推送，骁龙 888 首发，12/28 哈哈哈哈。\n\n我当时想着，以为 888 出来要等到 2021 年了，没想到年底发了。\n\n那岂不是 Sony 要降价了？\n\n\n\n之前还在问别人报价，看是不是降价了准备直接入手了。\n\n12/28 晚，看雷布斯发布会。\n\n我就关注到了几个点：\n\n 1. 屏幕短板补上来了，2K 屏，使用三星的；\n 2. 电池也还行 4600，55W 快充，戳戳有余了，毕竟我 5V1A 用了 5 年；\n 3. 小米系统优化；\n\n最后价格一公布，卧槽，顶配 5000 以下？\n\n那还有啥好想的，冲！\n\n下班直接冲到小米之家，问能不能预订，工作人员说暂时还没出来。\n\n\n\n然后我就先回去自己抢了，结果没抢到。难道又要省波钱了？iPhone 6sp 接着干？\n\n不过米家工作人员发来消息说可以全款预订了，当时还犹豫了下，卡其色和雷布斯签名版没有，难受。\n\n\n\n想了想还是订了，选的烟紫素皮。\n\n\n\n再来个详细配置对比图吧。\n\n\n\n哎，真香警告！\n\n等后续上手体验...",normalizedContent:"# 现在在用的手机\n\n目前自己手上用的还是 2015 年买的 iphone 6s plus 港版 16gb。\n\n2017 年手机扩容过一次 16gb -> 128gb ，换了块电池。\n\n满血复活！！！\n\n2019 年手机没办法没办法充电，当时就感觉是电池坏了，充了一晚上，还是无效，最后电池用完。修理员上面检查，换了块电磁，复活！\n\n但是在 2019 年就已经感受到了，手机有点顶不住了，微信经常被杀，手机在地铁上满信号，就是没网。\n\n但是 2019 年没出什么能够打动自己手机，一直想等 2020 年的 iphone 12 。\n\n这中途，手机发烫明显。除了这个毛病好像也没别的了。\n\n2020 自己换了一块电池，因为明显感觉到那个电池是个垃圾。\n\n不能叫复活了，毕竟已经服役 5 年了，哈哈哈哈。\n\n准备把它换下来了！\n\n\n\n\n# iphone 12\n\niphone 12 出了，跟曝光的基本差不了什么东西。\n\n外观回归，各项参数升级。\n\n然鹅呢？？？ 你特么电池这么小？\n\n价格还是苹果的价格，这没啥好说。\n\n没买 iphone 12 自己总结了一下原因：\n\n 1. 电池太小；\n 2. 升级的内容没啥能打动我；\n 3. 自己是程序员，觉得 android 可折腾的空间大些，iphone 基本没啥操作空间；\n 4. 价格依旧那么贵；\n\n所以 iphone 12 我也没选择，然后就物色其他的手机。\n\n\n# 挑选品牌\n\n小米、华为、一加、魅族....\n\n这些都看了个遍，还是没找到自己满意的。\n\n突然身边的朋友，买了一个 sony，从来没用过 sony 手机的我很是惊奇，去看了各种测评视频。\n\n自己都准备剁手了， 索尼（sony）xperia1 ii 5g 智能手机 4k 屏 骁龙 865 12g + 256g。\n\n\n\n选择这个 sony 的理由：\n\n 1. 手机屏幕，4k 屏，吹爆；\n 2. 21:9 带鱼屏；\n 3. 有 3.5mm 耳机接口；\n 4. sony 这个品牌，信仰的力量；\n\n可是价格有点高，一直再等降价，因为知道骁龙 888 要出，肯定 865 的机子要降价的。\n\n等待降价中...\n\n\n# 小米10至尊旗舰版\n\n中间也考虑了一下小米 10 至尊旗舰版 ，大学的好朋友，妥妥的果粉，也入手了这个手机。\n\n而且评价很高，表示用着很爽。\n\n但还是有以下问题（朋友反馈的）：\n\n 1. 屏幕素质问题，发绿；\n 2. 国产屏可视角度有点小；\n 3. 重；\n\n优点就不说了。\n\n\n\n没买的原因：抢不到\n\n\n# 小米11\n\n有一天看公众号，发现，小米推送，骁龙 888 首发，12/28 哈哈哈哈。\n\n我当时想着，以为 888 出来要等到 2021 年了，没想到年底发了。\n\n那岂不是 sony 要降价了？\n\n\n\n之前还在问别人报价，看是不是降价了准备直接入手了。\n\n12/28 晚，看雷布斯发布会。\n\n我就关注到了几个点：\n\n 1. 屏幕短板补上来了，2k 屏，使用三星的；\n 2. 电池也还行 4600，55w 快充，戳戳有余了，毕竟我 5v1a 用了 5 年；\n 3. 小米系统优化；\n\n最后价格一公布，卧槽，顶配 5000 以下？\n\n那还有啥好想的，冲！\n\n下班直接冲到小米之家，问能不能预订，工作人员说暂时还没出来。\n\n\n\n然后我就先回去自己抢了，结果没抢到。难道又要省波钱了？iphone 6sp 接着干？\n\n不过米家工作人员发来消息说可以全款预订了，当时还犹豫了下，卡其色和雷布斯签名版没有，难受。\n\n\n\n想了想还是订了，选的烟紫素皮。\n\n\n\n再来个详细配置对比图吧。\n\n\n\n哎，真香警告！\n\n等后续上手体验...",charsets:{cjk:!0},lastUpdated:"8/23/2022",lastUpdatedTimestamp:1661255874e3},{title:"Midjourney入门",frontmatter:{title:"Midjourney入门",date:"2023-04-21T14:02:13.000Z",permalink:"/pages/02db65/",categories:["文章","AI","Midjourney"],tags:["AI","Midjourney"],readingShow:"top"},regularPath:"/01.%E6%96%87%E7%AB%A0/12.AI/15.Midjourney/01.Midjourney%E5%85%A5%E9%97%A8.html",relativePath:"01.文章/12.AI/15.Midjourney/01.Midjourney入门.md",key:"v-67024f50",path:"/pages/02db65/",headers:[{level:2,title:"Discord注册",slug:"discord注册",normalizedTitle:"discord注册",charIndex:424},{level:2,title:"Midjourney",slug:"midjourney",normalizedTitle:"midjourney",charIndex:2},{level:2,title:"开始绘画",slug:"开始绘画",normalizedTitle:"开始绘画",charIndex:710}],excerpt:'<h1 id="midjourney入门"><a class="header-anchor" href="#midjourney入门">#</a> Midjourney入门</h1>\n<blockquote>\n<p>Midjourney 是一个由 Midjourney 研究实验室开发的人工智能程序，可根据文本生成图像。\nMidjourney 于2022年7月12日进入公开测试阶段，使用者可通过 Discord 的机器人指令进行操作，可以创作出很多的图像作品。</p>\n</blockquote>\n<p>翻译翻译：\nMidjourney 是一个AI绘画工具，可以使用文字描述，生成高质量的图像。我们只需输入文字描述，就可以获得自动生成的图像。</p>\n<p>以下这些功能它都可以实现。</p>\n<ul>\n<li>人像卡通化：将人物照片转换成有趣的卡通形象。</li>\n<li>轮廓生成：可以根据输入的文字描述生成对应的图像轮廓。</li>\n<li>色彩生成：利用GAN模型，可以生成具有艺术感和创意的彩色图像。</li>\n<li>视频换脸：可以实现对视频中人物的面部进行换脸操作。</li>\n<li>视觉问答：通过图像识别和自然语言处理技术，可以实现对图像的问题回答。</li>\n<li>人脸合成：可以将不同人物的面部特征进行合成，生成新的面孔。</li>\n</ul>\n',headersStr:"Discord注册 Midjourney 开始绘画",content:"# Midjourney入门\n\n> Midjourney 是一个由 Midjourney 研究实验室开发的人工智能程序，可根据文本生成图像。 Midjourney 于2022年7月12日进入公开测试阶段，使用者可通过 Discord 的机器人指令进行操作，可以创作出很多的图像作品。\n\n翻译翻译： Midjourney 是一个AI绘画工具，可以使用文字描述，生成高质量的图像。我们只需输入文字描述，就可以获得自动生成的图像。\n\n以下这些功能它都可以实现。\n\n * 人像卡通化：将人物照片转换成有趣的卡通形象。\n * 轮廓生成：可以根据输入的文字描述生成对应的图像轮廓。\n * 色彩生成：利用GAN模型，可以生成具有艺术感和创意的彩色图像。\n * 视频换脸：可以实现对视频中人物的面部进行换脸操作。\n * 视觉问答：通过图像识别和自然语言处理技术，可以实现对图像的问题回答。\n * 人脸合成：可以将不同人物的面部特征进行合成，生成新的面孔。\n\n\n# Discord注册\n\n> 注：需要梯子才能访问。\n\nMidjourney 目前架设在 Discord 频道上，需要有 Discord 帐号才能使用。\n\n目前 Midjourney 暂时不对免费用户提供体验权限，需要付费订阅才可以使用。\n\nDiscord 是一款免费的通讯软件，主要是可以让你与你的好友，游戏社群以及游戏开发者们进行语音，视频及文字聊天。\n\n注册页，正常注册即可。\n\n\n\n\n# Midjourney\n\nDiscord 登录成功后，之间点击左边的加号，选择加入服务器。\n\n输入Midjourney，即可直接加入。\n\n\n\n加入成功后，直接到达主页。\n\n\n\n\n# 开始绘画\n\n随便加入一个 Midjourney 里的 newbies。\n\n\n\n加入后在下方的聊天框处，可以输入指令 /imagine，后面接上 prompt 。\n\n> /imagine：Midjourney Bot 支持的指令。 prompt：是对要创建的绘画描述。输入完成后回车发送指令。\n\n\n\n第一次使用，需要接受一个协议。\n\n\n\n同意协议。\n\n\n\n再次尝试，还是不行，必须得订阅，没有以前免费的额度了。\n\n> 想要用，得加钱~\n\n\n\n点击 Open subscription page 按钮，或者在聊天框输入/subscribe指令，可以再次收到这个订阅消息。\n\n",normalizedContent:"# midjourney入门\n\n> midjourney 是一个由 midjourney 研究实验室开发的人工智能程序，可根据文本生成图像。 midjourney 于2022年7月12日进入公开测试阶段，使用者可通过 discord 的机器人指令进行操作，可以创作出很多的图像作品。\n\n翻译翻译： midjourney 是一个ai绘画工具，可以使用文字描述，生成高质量的图像。我们只需输入文字描述，就可以获得自动生成的图像。\n\n以下这些功能它都可以实现。\n\n * 人像卡通化：将人物照片转换成有趣的卡通形象。\n * 轮廓生成：可以根据输入的文字描述生成对应的图像轮廓。\n * 色彩生成：利用gan模型，可以生成具有艺术感和创意的彩色图像。\n * 视频换脸：可以实现对视频中人物的面部进行换脸操作。\n * 视觉问答：通过图像识别和自然语言处理技术，可以实现对图像的问题回答。\n * 人脸合成：可以将不同人物的面部特征进行合成，生成新的面孔。\n\n\n# discord注册\n\n> 注：需要梯子才能访问。\n\nmidjourney 目前架设在 discord 频道上，需要有 discord 帐号才能使用。\n\n目前 midjourney 暂时不对免费用户提供体验权限，需要付费订阅才可以使用。\n\ndiscord 是一款免费的通讯软件，主要是可以让你与你的好友，游戏社群以及游戏开发者们进行语音，视频及文字聊天。\n\n注册页，正常注册即可。\n\n\n\n\n# midjourney\n\ndiscord 登录成功后，之间点击左边的加号，选择加入服务器。\n\n输入midjourney，即可直接加入。\n\n\n\n加入成功后，直接到达主页。\n\n\n\n\n# 开始绘画\n\n随便加入一个 midjourney 里的 newbies。\n\n\n\n加入后在下方的聊天框处，可以输入指令 /imagine，后面接上 prompt 。\n\n> /imagine：midjourney bot 支持的指令。 prompt：是对要创建的绘画描述。输入完成后回车发送指令。\n\n\n\n第一次使用，需要接受一个协议。\n\n\n\n同意协议。\n\n\n\n再次尝试，还是不行，必须得订阅，没有以前免费的额度了。\n\n> 想要用，得加钱~\n\n\n\n点击 open subscription page 按钮，或者在聊天框输入/subscribe指令，可以再次收到这个订阅消息。\n\n",charsets:{cjk:!0},lastUpdated:"9/7/2023",lastUpdatedTimestamp:1694075306e3},{title:"写作技巧",frontmatter:{title:"写作技巧",date:"2022-08-12T10:48:30.000Z",permalink:"/pages/16a0f4/",categories:["冥思","杂谈"],tags:["写作"],readingShow:"top"},regularPath:"/03.%E5%86%A5%E6%80%9D/01.%E6%9D%82%E8%B0%88/02.%E5%86%99%E4%BD%9C%E6%8A%80%E5%B7%A7.html",relativePath:"03.冥思/01.杂谈/02.写作技巧.md",key:"v-91e8ba14",path:"/pages/16a0f4/",headers:[{level:2,title:"一、删掉”我认为“、”我觉得“、”我相信“等",slug:"一、删掉-我认为-、-我觉得-、-我相信-等",normalizedTitle:"一、删掉”我认为“、”我觉得“、”我相信“等",charIndex:28},{level:2,title:"二、先写标题",slug:"二、先写标题",normalizedTitle:"二、先写标题",charIndex:145},{level:2,title:"三、写出音乐感",slug:"三、写出音乐感",normalizedTitle:"三、写出音乐感",charIndex:229},{level:2,title:"四、三合音",slug:"四、三合音",normalizedTitle:"四、三合音",charIndex:312},{level:2,title:"五、唤起行动",slug:"五、唤起行动",normalizedTitle:"五、唤起行动",charIndex:393},{level:2,title:"六、一寸相框",slug:"六、一寸相框",normalizedTitle:"六、一寸相框",charIndex:446},{level:2,title:"七、简单和清晰",slug:"七、简单和清晰",normalizedTitle:"七、简单和清晰",charIndex:559},{level:2,title:"八、不说副词",slug:"八、不说副词",normalizedTitle:"八、不说副词",charIndex:665},{level:2,title:"九、填满画布",slug:"九、填满画布",normalizedTitle:"九、填满画布",charIndex:744},{level:2,title:"参考",slug:"参考",normalizedTitle:"参考",charIndex:843}],excerpt:'<h1 id="写作技巧"><a class="header-anchor" href="#写作技巧">#</a> 写作技巧</h1>\n<p>写作是可以改变人生的超级技能~</p>\n',headersStr:"一、删掉”我认为“、”我觉得“、”我相信“等 二、先写标题 三、写出音乐感 四、三合音 五、唤起行动 六、一寸相框 七、简单和清晰 八、不说副词 九、填满画布 参考",content:"# 写作技巧\n\n写作是可以改变人生的超级技能~\n\n\n# 一、删掉”我认为“、”我觉得“、”我相信“等\n\n为什么？\n\n你写的本来就代表你的观点，不需要在重申，另外这些词会弱化你的文章的可信度。\n\n * 我觉得你会喜欢这些技巧\n * 你会喜欢这些技巧\n\n第二句比第一句好 100 倍。\n\n\n# 二、先写标题\n\n“写作是思考，写这写这我就知道主题”\n\n这是 bull shit，别这么干。\n\n先写标题，从下笔第一秒我就知道自己要说什么，这样才能把它说好。\n\n\n# 三、写出音乐感\n\n我尽量写短语，但一直这么干，读起来很干燥。\n\n上面这三句就是一个典型的例子，写作应该长短结合，像写曲子，让读者从视觉上和听觉上感觉到旋律。\n\n\n# 四、三合音\n\n什么是三合音？\n\n这是另外一个关于节奏感的技巧。举例时，只举三个。因为这样读起来最有节奏感。\n\n“于谦老师有三大爱好，抽烟、喝酒和烫头。”\n\n\n# 五、唤起行动\n\n为什么？\n\n你需要让读者有所收获，而告诉他们应该做什么，就是汇报他们的最好方式。\n\n\n# 六、一寸相框\n\n心中有个模糊的想法，却不知道如何动笔？\n\n我经常这样，一个解决办法就是，一寸相框。\n\n先写下眼前已经明确的，最想说的那个点子，不要考虑全文最后的呈现，先写下最想说的话，最想表达的店子，已经成型的想法。\n\n\n# 七、简单和清晰\n\n智慧的最高形式是什么？\n\n爱因斯坦认为是简单（simplicity）。\n当谈到写作时，他说：“为了更清楚地表达，我需要不断提醒自己，丝毫不要在意呈现的优雅。”\n\n表达简单和清晰的观点。\n\n\n# 八、不说副词\n\n你可以从每一篇写作建议里找到这一条，说明专业作家有多么在意这件事。\n\n我也一直不断地从自己的草稿里删掉副词，或者换一个更准确的动词。\n\n\n# 九、填满画布\n\n写作难，如果没有十足的气势，难免半途而废。\n\n当开始写草稿时，应该一鼓作气，先填满画布。\n\n我们不能犹豫，因为犹豫就会败北。\n\n想到一个点子，全部倒出来，你就胜利了一大半。\n\n\n# 参考\n\nhappy xiao🥤coke.do-10个实用写作技巧",normalizedContent:"# 写作技巧\n\n写作是可以改变人生的超级技能~\n\n\n# 一、删掉”我认为“、”我觉得“、”我相信“等\n\n为什么？\n\n你写的本来就代表你的观点，不需要在重申，另外这些词会弱化你的文章的可信度。\n\n * 我觉得你会喜欢这些技巧\n * 你会喜欢这些技巧\n\n第二句比第一句好 100 倍。\n\n\n# 二、先写标题\n\n“写作是思考，写这写这我就知道主题”\n\n这是 bull shit，别这么干。\n\n先写标题，从下笔第一秒我就知道自己要说什么，这样才能把它说好。\n\n\n# 三、写出音乐感\n\n我尽量写短语，但一直这么干，读起来很干燥。\n\n上面这三句就是一个典型的例子，写作应该长短结合，像写曲子，让读者从视觉上和听觉上感觉到旋律。\n\n\n# 四、三合音\n\n什么是三合音？\n\n这是另外一个关于节奏感的技巧。举例时，只举三个。因为这样读起来最有节奏感。\n\n“于谦老师有三大爱好，抽烟、喝酒和烫头。”\n\n\n# 五、唤起行动\n\n为什么？\n\n你需要让读者有所收获，而告诉他们应该做什么，就是汇报他们的最好方式。\n\n\n# 六、一寸相框\n\n心中有个模糊的想法，却不知道如何动笔？\n\n我经常这样，一个解决办法就是，一寸相框。\n\n先写下眼前已经明确的，最想说的那个点子，不要考虑全文最后的呈现，先写下最想说的话，最想表达的店子，已经成型的想法。\n\n\n# 七、简单和清晰\n\n智慧的最高形式是什么？\n\n爱因斯坦认为是简单（simplicity）。\n当谈到写作时，他说：“为了更清楚地表达，我需要不断提醒自己，丝毫不要在意呈现的优雅。”\n\n表达简单和清晰的观点。\n\n\n# 八、不说副词\n\n你可以从每一篇写作建议里找到这一条，说明专业作家有多么在意这件事。\n\n我也一直不断地从自己的草稿里删掉副词，或者换一个更准确的动词。\n\n\n# 九、填满画布\n\n写作难，如果没有十足的气势，难免半途而废。\n\n当开始写草稿时，应该一鼓作气，先填满画布。\n\n我们不能犹豫，因为犹豫就会败北。\n\n想到一个点子，全部倒出来，你就胜利了一大半。\n\n\n# 参考\n\nhappy xiao🥤coke.do-10个实用写作技巧",charsets:{cjk:!0},lastUpdated:"8/23/2022",lastUpdatedTimestamp:1661255874e3},{title:"关于我",frontmatter:{title:"关于我",date:"2022-07-23T11:10:15.000Z",permalink:"/pages/81a699/",categories:["其他","关于我"],tags:["关于我"],readingShow:"top"},regularPath:"/04.%E5%85%B6%E4%BB%96/01.%E5%85%B3%E4%BA%8E/01.%E5%85%B3%E4%BA%8E%E6%88%91.html",relativePath:"04.其他/01.关于/01.关于我.md",key:"v-8950dde6",path:"/pages/81a699/",headers:[{level:2,title:"关于我",slug:"关于我",normalizedTitle:"关于我",charIndex:2},{level:2,title:"微信公众号",slug:"微信公众号",normalizedTitle:"微信公众号",charIndex:99},{level:2,title:"微信",slug:"微信",normalizedTitle:"微信",charIndex:99}],excerpt:'<h2 id="关于我"><a class="header-anchor" href="#关于我">#</a> 关于我</h2>\n<p>一个在深圳奋斗的小年轻！</p>\n<p>博客主要记录自己的技术总结、生活记录、影片分享、工具分享...</p>\n<p>偶尔也发发自己的烂照片...</p>\n<p>希望能把“写点什么”坚持下去，无论写的好坏与否！</p>\n',headersStr:"关于我 微信公众号 微信",content:"# 关于我\n\n一个在深圳奋斗的小年轻！\n\n博客主要记录自己的技术总结、生活记录、影片分享、工具分享...\n\n偶尔也发发自己的烂照片...\n\n希望能把“写点什么”坚持下去，无论写的好坏与否！\n\n\n# 微信公众号\n\n日常bb，分享生活，分享影片，分享好用的工具，可能也会分享一些技术文章，目前是个程序猿~\n\n\n\n\n\n如果觉得对你有帮助，请关注我，持续更新中~\n\n\n# 微信\n\n有问题可加我微信，一起讨论，一起进步！\n\n",normalizedContent:"# 关于我\n\n一个在深圳奋斗的小年轻！\n\n博客主要记录自己的技术总结、生活记录、影片分享、工具分享...\n\n偶尔也发发自己的烂照片...\n\n希望能把“写点什么”坚持下去，无论写的好坏与否！\n\n\n# 微信公众号\n\n日常bb，分享生活，分享影片，分享好用的工具，可能也会分享一些技术文章，目前是个程序猿~\n\n\n\n\n\n如果觉得对你有帮助，请关注我，持续更新中~\n\n\n# 微信\n\n有问题可加我微信，一起讨论，一起进步！\n\n",charsets:{cjk:!0},lastUpdated:"7/28/2022",lastUpdatedTimestamp:1658988411e3},{title:"博客搭建",frontmatter:{title:"博客搭建",date:"2022-07-25T15:54:45.000Z",permalink:"/pages/339f86/",categories:["博客"],tags:["博客搭建"],readingShow:"top"},regularPath:"/04.%E5%85%B6%E4%BB%96/02.%E5%8D%9A%E5%AE%A2/01.%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA.html",relativePath:"04.其他/02.博客/01.博客搭建.md",key:"v-4bb6cc6a",path:"/pages/339f86/",headers:[{level:2,title:"介绍",slug:"介绍",normalizedTitle:"介绍",charIndex:11},{level:2,title:"快速上手",slug:"快速上手",normalizedTitle:"快速上手",charIndex:370},{level:2,title:"构建",slug:"构建",normalizedTitle:"构建",charIndex:77},{level:2,title:"博客如何部署到自己的服务器",slug:"博客如何部署到自己的服务器",normalizedTitle:"博客如何部署到自己的服务器",charIndex:1255},{level:3,title:"ci.yml",slug:"ci-yml",normalizedTitle:"ci.yml",charIndex:1441},{level:4,title:"参数配置",slug:"参数配置",normalizedTitle:"参数配置",charIndex:1472},{level:3,title:"服务器设置",slug:"服务器设置",normalizedTitle:"服务器设置",charIndex:2209},{level:3,title:"测试",slug:"测试",normalizedTitle:"测试",charIndex:2491},{level:2,title:"配置评论功能",slug:"配置评论功能",normalizedTitle:"配置评论功能",charIndex:3213},{level:3,title:"clientID、clientSecret申请",slug:"clientid、clientsecret申请",normalizedTitle:"clientid、clientsecret申请",charIndex:3318}],excerpt:'<h1 id="博客搭建"><a class="header-anchor" href="#博客搭建">#</a> 博客搭建</h1>\n<h2 id="介绍"><a class="header-anchor" href="#介绍">#</a> 介绍</h2>\n<p>博客地址：https://rcbb.cc</p>\n<ol>\n<li>这个主题的初衷是打造一个好用的、面向程序员的知识管理工具。</li>\n<li>轻松构建一个结构化的知识库，让你的知识海洋像一本本书一样清晰易读。</li>\n<li>博客功能提供一种知识的碎片化形态，并支持个性化博客配置。</li>\n<li>简洁高效，以 Markdown 为中心的项目结构。内置自动化工具，以更少的配置完成更多的事。配合多维索引快速定位每个知识点。</li>\n</ol>\n',headersStr:"介绍 快速上手 构建 博客如何部署到自己的服务器 ci.yml 参数配置 服务器设置 测试 配置评论功能 clientID、clientSecret申请",content:"# 博客搭建\n\n\n# 介绍\n\n博客地址：https://rcbb.cc\n\n 1. 这个主题的初衷是打造一个好用的、面向程序员的知识管理工具。\n 2. 轻松构建一个结构化的知识库，让你的知识海洋像一本本书一样清晰易读。\n 3. 博客功能提供一种知识的碎片化形态，并支持个性化博客配置。\n 4. 简洁高效，以 Markdown 为中心的项目结构。内置自动化工具，以更少的配置完成更多的事。配合多维索引快速定位每个知识点。\n\n该博客基于改造：\nvuepress-theme-vdoing主题\nDra-M个人博客\n\n代码拉取（branch：blog-template）\n\n> https://github.com/rcbb-cc/rcbb-blog\n\n下文所有的内容都基于 rcbb-blog（branch：blog-template）。\n\n\n# 快速上手\n\n(1)拉取项目，并切换使用 blog-template 分支。  \n    https://github.com/rcbb-cc/rcbb-blog.git\n\n(2)进入项目目录\n    cd rcbb-blog\n\n(3)安装依赖\n    npm install\n\n(4)启动项目\n    npm run dev\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n正确启动后就可以访问了。\n\n\n# 构建\n\n这里以 zhangsan 做为关键词来构建博客。\n\n需要进行更改的内容。\n\n(1)重命名项目\n    将 rcbb-blog 重命名为 zhangsan-blog\n    \n(2)更改项目中所有的关键字\n    rcbb 更改为 zhangshan\n    日常bb 更改为 张三\n    \n(3)假设你的域名为 zhangsan-blog.com\n    rcbb.cc 更改为 zhangsan-blog.com\n    \n(4)百度推送链接code需要进行更换\n    文件地址为：/rcbb-blog/docs/.vuepress/config/baiduCode.ts\n    需要注册登录百度统计：https://tongji.baidu.com\n    添加自己的域名后\n    百度统计官网：使用设置->代码管理->代码获取\n    获取到code值\n    \n(5)更改百度收录的url\n    文件地址为：/rcbb-blog/baiduPush.sh\n    如何获取百度链接推送的url？\n    登录百度账号后访问：https://ziyuan.baidu.com/\n    百度搜索资源平台官网：搜索服务->资源提交->普通收录\n    https://ziyuan.baidu.com/linksubmit/index?site=https://zhangsan-blog.com\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n\n\n\n# 博客如何部署到自己的服务器\n\n为了方便平时的博客更新内容，项目中并不会直接通过脚本上传到自己的服务器，而是通过 Github Actions 来实现自动更新到自己的服务器。\n\nmqyqingfeng：还不会用 GitHub Actions ？\n\n首先先将项目推送到 github 上，在 Actions 会看到 CI 错误。\n\n\n\n因为rcbb-blog/.github/ci.yml中还有很多参数并未设置。\n\n\n# ci.yml\n\n参数配置在 secrets 中。\n\n\n\n# 参数配置\n\nACCESS_TOKEN\n\nACCESS_TOKEN 从哪获取？\n\nGithub 点击自己头像 Settings -> Developer settings -> Personal access tokens\ntoken设置永不过期，可勾选项全勾上。\n\n\n\n获取到 ACCESS_TOKEN 后设置到 secrets 中。\n\nSecrets设置\n\n到哪设置secrets？\n\n回到 rcbb-blog 项目中 Settings -> Secrets -> Actions\n\n\n\n其他的参数也是这么设置：\n\n# ssh username\nkey：BLOG_USERNAME\nvalue：root\n\n# 远程服务器IP，自己服务器的IP地址\nkey：BLOG_HOST\nvalue：165.56.89.12\n    \n远程服务器ssh端口，默认22\nkey：BLOG_PORT\nvalue：22\n\n认证服务器秘钥对的私钥\nkey：BLOG_SSH_PRIVATE_KEY\nvalue：xxx\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\n\n\n认证服务器私钥\n\n认证服务器秘钥对的私钥怎么获取？\n\n(1)在自己服务器上执行\n    然后一路回车就能创建成功\n    ssh-keygen -m PEM\n    \n(2)把公钥放到服务器中\n    cat /root/.ssh/id_rsa.pub >> /root/.ssh/authorized_keys\n    \n(3)copy私钥\n    cat /root/.ssh/id_rsa\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# 服务器设置\n\n创建所需目录\n\nmkdir -p /apps/www/rcbb.cc\nmkdir -p /apps/www/release\n\n\n1\n2\n\n\n安装 nginx\n\n(1)安装\n    yum install -y nginx\n\n(2)启用 Nginx\n    systemctl start nginx\n\n(3)设置为在系统启动时自动启动\n    systemctl enable nginx\n\n(4)验证\n    在浏览器输入自己的公网IP\n    如果出现nginx页面，则代表成功\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n创建测试文件\n\n(1)创建目录\n    mkdir -p /apps/www/rcbb.cc\n\n(2)进入目录\n    cd /apps/www/rcbb.cc\n\n(3)创建文件\n    touch index.html\n\n(4)写入内容\n    echo '<!doctype html><html><head><meta charset=\"utf-8\"><title>Hello World!</title></head><body>Hello World!</body></html>' > index.html\n    \n(5)进入配置文件目录\n    cd /etc/nginx\n\n(6)修改配置文件内容\n    vim nginx.conf\n    \n(7)在 location / {} 中添加内容\n    location / {\n      root /apps/www/rcbb.cc/;\n      index index.html;\n    }\n    保存退出修改后，重新加载配置文件。\n    \n(8)重新加载配置文件\n    systemctl reload nginx\n    \n(9)验证\n    浏览器输入服务器 IP，看见 Hello World! 就代表成功了。  \n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n\n\n\n# 测试\n\n在 master 分支上进行 push，就会触发 Actions。\n\n\n\n\n\n这时在浏览器中输入自己公网 IP，如果可以正确访问，则代表一切顺利~\n\n\n# 配置评论功能\n\n文件路径：\n\n> docs/.vuepress/config.ts\n\n\n\nclientID：需要申请\nclientSecret：需要申请\nrepo：自己仓库的名称\nowner：自己账号\n\n\n# clientID、clientSecret申请\n\n登录 github，右上角点击 Settings -> Developer settings -> OAuth Apps -> New OAuth App\n\n\n\n将 https://rcbb.cc 更换为自己的域名即可。\n\n然后就可以得到 clientId、clientSecret 了。\n\n\n\n将网站重新部署后，测试评论~\n\n\n\n有用户评论后，会在配置的 github 项目的 issues 中。\n\n",normalizedContent:"# 博客搭建\n\n\n# 介绍\n\n博客地址：https://rcbb.cc\n\n 1. 这个主题的初衷是打造一个好用的、面向程序员的知识管理工具。\n 2. 轻松构建一个结构化的知识库，让你的知识海洋像一本本书一样清晰易读。\n 3. 博客功能提供一种知识的碎片化形态，并支持个性化博客配置。\n 4. 简洁高效，以 markdown 为中心的项目结构。内置自动化工具，以更少的配置完成更多的事。配合多维索引快速定位每个知识点。\n\n该博客基于改造：\nvuepress-theme-vdoing主题\ndra-m个人博客\n\n代码拉取（branch：blog-template）\n\n> https://github.com/rcbb-cc/rcbb-blog\n\n下文所有的内容都基于 rcbb-blog（branch：blog-template）。\n\n\n# 快速上手\n\n(1)拉取项目，并切换使用 blog-template 分支。  \n    https://github.com/rcbb-cc/rcbb-blog.git\n\n(2)进入项目目录\n    cd rcbb-blog\n\n(3)安装依赖\n    npm install\n\n(4)启动项目\n    npm run dev\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n\n\n正确启动后就可以访问了。\n\n\n# 构建\n\n这里以 zhangsan 做为关键词来构建博客。\n\n需要进行更改的内容。\n\n(1)重命名项目\n    将 rcbb-blog 重命名为 zhangsan-blog\n    \n(2)更改项目中所有的关键字\n    rcbb 更改为 zhangshan\n    日常bb 更改为 张三\n    \n(3)假设你的域名为 zhangsan-blog.com\n    rcbb.cc 更改为 zhangsan-blog.com\n    \n(4)百度推送链接code需要进行更换\n    文件地址为：/rcbb-blog/docs/.vuepress/config/baiducode.ts\n    需要注册登录百度统计：https://tongji.baidu.com\n    添加自己的域名后\n    百度统计官网：使用设置->代码管理->代码获取\n    获取到code值\n    \n(5)更改百度收录的url\n    文件地址为：/rcbb-blog/baidupush.sh\n    如何获取百度链接推送的url？\n    登录百度账号后访问：https://ziyuan.baidu.com/\n    百度搜索资源平台官网：搜索服务->资源提交->普通收录\n    https://ziyuan.baidu.com/linksubmit/index?site=https://zhangsan-blog.com\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n\n\n\n# 博客如何部署到自己的服务器\n\n为了方便平时的博客更新内容，项目中并不会直接通过脚本上传到自己的服务器，而是通过 github actions 来实现自动更新到自己的服务器。\n\nmqyqingfeng：还不会用 github actions ？\n\n首先先将项目推送到 github 上，在 actions 会看到 ci 错误。\n\n\n\n因为rcbb-blog/.github/ci.yml中还有很多参数并未设置。\n\n\n# ci.yml\n\n参数配置在 secrets 中。\n\n\n\n# 参数配置\n\naccess_token\n\naccess_token 从哪获取？\n\ngithub 点击自己头像 settings -> developer settings -> personal access tokens\ntoken设置永不过期，可勾选项全勾上。\n\n\n\n获取到 access_token 后设置到 secrets 中。\n\nsecrets设置\n\n到哪设置secrets？\n\n回到 rcbb-blog 项目中 settings -> secrets -> actions\n\n\n\n其他的参数也是这么设置：\n\n# ssh username\nkey：blog_username\nvalue：root\n\n# 远程服务器ip，自己服务器的ip地址\nkey：blog_host\nvalue：165.56.89.12\n    \n远程服务器ssh端口，默认22\nkey：blog_port\nvalue：22\n\n认证服务器秘钥对的私钥\nkey：blog_ssh_private_key\nvalue：xxx\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n\n\n\n\n认证服务器私钥\n\n认证服务器秘钥对的私钥怎么获取？\n\n(1)在自己服务器上执行\n    然后一路回车就能创建成功\n    ssh-keygen -m pem\n    \n(2)把公钥放到服务器中\n    cat /root/.ssh/id_rsa.pub >> /root/.ssh/authorized_keys\n    \n(3)copy私钥\n    cat /root/.ssh/id_rsa\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n# 服务器设置\n\n创建所需目录\n\nmkdir -p /apps/www/rcbb.cc\nmkdir -p /apps/www/release\n\n\n1\n2\n\n\n安装 nginx\n\n(1)安装\n    yum install -y nginx\n\n(2)启用 nginx\n    systemctl start nginx\n\n(3)设置为在系统启动时自动启动\n    systemctl enable nginx\n\n(4)验证\n    在浏览器输入自己的公网ip\n    如果出现nginx页面，则代表成功\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n\n\n创建测试文件\n\n(1)创建目录\n    mkdir -p /apps/www/rcbb.cc\n\n(2)进入目录\n    cd /apps/www/rcbb.cc\n\n(3)创建文件\n    touch index.html\n\n(4)写入内容\n    echo '<!doctype html><html><head><meta charset=\"utf-8\"><title>hello world!</title></head><body>hello world!</body></html>' > index.html\n    \n(5)进入配置文件目录\n    cd /etc/nginx\n\n(6)修改配置文件内容\n    vim nginx.conf\n    \n(7)在 location / {} 中添加内容\n    location / {\n      root /apps/www/rcbb.cc/;\n      index index.html;\n    }\n    保存退出修改后，重新加载配置文件。\n    \n(8)重新加载配置文件\n    systemctl reload nginx\n    \n(9)验证\n    浏览器输入服务器 ip，看见 hello world! 就代表成功了。  \n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n\n\n\n# 测试\n\n在 master 分支上进行 push，就会触发 actions。\n\n\n\n\n\n这时在浏览器中输入自己公网 ip，如果可以正确访问，则代表一切顺利~\n\n\n# 配置评论功能\n\n文件路径：\n\n> docs/.vuepress/config.ts\n\n\n\nclientid：需要申请\nclientsecret：需要申请\nrepo：自己仓库的名称\nowner：自己账号\n\n\n# clientid、clientsecret申请\n\n登录 github，右上角点击 settings -> developer settings -> oauth apps -> new oauth app\n\n\n\n将 https://rcbb.cc 更换为自己的域名即可。\n\n然后就可以得到 clientid、clientsecret 了。\n\n\n\n将网站重新部署后，测试评论~\n\n\n\n有用户评论后，会在配置的 github 项目的 issues 中。\n\n",charsets:{cjk:!0},lastUpdated:"9/9/2022",lastUpdatedTimestamp:1662716514e3},{title:"阿里云服务器选购",frontmatter:{title:"阿里云服务器选购",date:"2022-08-08T15:22:01.000Z",permalink:"/pages/f7be6d/",categories:["博客"],tags:["阿里云","服务器选购"],readingShow:"top"},regularPath:"/04.%E5%85%B6%E4%BB%96/02.%E5%8D%9A%E5%AE%A2/02.%E9%98%BF%E9%87%8C%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%80%89%E8%B4%AD.html",relativePath:"04.其他/02.博客/02.阿里云服务器选购.md",key:"v-706a1ec4",path:"/pages/f7be6d/",headers:[{level:2,title:"主要内容",slug:"主要内容",normalizedTitle:"主要内容",charIndex:2},{level:2,title:"阿里云产品",slug:"阿里云产品",normalizedTitle:"阿里云产品",charIndex:67},{level:3,title:"选购云服务器ECS",slug:"选购云服务器ecs",normalizedTitle:"选购云服务器ecs",charIndex:269},{level:3,title:"一键购买",slug:"一键购买",normalizedTitle:"一键购买",charIndex:285},{level:3,title:"自定义购买",slug:"自定义购买",normalizedTitle:"自定义购买",charIndex:328},{level:3,title:"网络和安全组",slug:"网络和安全组",normalizedTitle:"网络和安全组",charIndex:631},{level:3,title:"系统配置",slug:"系统配置",normalizedTitle:"系统配置",charIndex:789},{level:3,title:"购买完成",slug:"购买完成",normalizedTitle:"购买完成",charIndex:855},{level:2,title:"最高性价比选择",slug:"最高性价比选择",normalizedTitle:"最高性价比选择",charIndex:976}],excerpt:'<h2 id="主要内容"><a class="header-anchor" href="#主要内容">#</a> 主要内容</h2>\n<p>给没有在阿里云购买过服务器的小伙伴一些实质性的参考。</p>\n<p>选购方向主要是针对搭建个人博客、测试服务器等功能的。</p>\n',headersStr:"主要内容 阿里云产品 选购云服务器ECS 一键购买 自定义购买 网络和安全组 系统配置 购买完成 最高性价比选择",content:"# 主要内容\n\n给没有在阿里云购买过服务器的小伙伴一些实质性的参考。\n\n选购方向主要是针对搭建个人博客、测试服务器等功能的。\n\n\n# 阿里云产品\n\n阿里云现在的产品非常的多，自己初次接触阿里云还是在大学的时候，当时有学生活动，凭学生身份可以以非常便宜的价格买到服务器。\n\n还是大学生的小伙伴可以留意一下，能薅的羊毛一定不要漏了。\n\n现在阿里云也有活动，只要是新用户基本服务器是白送，价格十分便宜。\n\n阿里云活动地址\n\n\n\n个人使用的话，一般也就和这几个产品打交道比较多。\n\n * 域名\n * 云服务器ECS\n * 对象存储OSS\n\n\n# 选购云服务器ECS\n\n\n\n\n# 一键购买\n\n一键购买中可以选择的实例全是突发性能实例，如果想选性能比较高的就需要进入到自定义购买。\n\n个人网站或测试使用，一般选择突发性能实例。\n\n\n\n\n# 自定义购买\n\n\n\n付费模式：根据自己需求选择（个人使用一般选择包年包月，特别注意：备案对服务器的有效期时间有要求）\n\n\n\n地域和可用区：主要就是选择一个大致的方位（访问的人与服务器所在地越近肯定也就越快）\n\n实例规格：根据场景化选型，个人应用搭建的话，选择共享标准型，性价比比较高。\n\n\n\n镜像：直接选择公共镜像，选择 CentOS/Ubuntu （云服务器都搞起了，还用Windows？）\n\n存储：选择默认的 ESSD 云盘 40 GB 足够使用\n\n购买时长：看个人需求了，满1年及以上都是有优惠的（注意：备案有时长要求）\n\n\n# 网络和安全组\n\n网络：因为单台使用，不会涉及到集群搭建，所以这一块无需特别注意，默认即可。\n\n公网IP：勾选上分配公网 IPv4 地址\n\n带宽计费模式：按固定带宽、按使用流量（个人经验：个人网站1M固定带宽够用）\n\n安全组：安全组类似防火墙功能，用于设置网络访问控制（主要控制端口的开放） 阿里云配置安全组\n\n\n# 系统配置\n\n登录凭证：密钥对、自定义密码（看个人选择，都挺方便）\n\n实例名称：默认就好\n\n主机名：可以修改一下，默认的太长\n\n\n# 购买完成\n\n\n\n购买成功后就可以在自己的账号中的 “我的资源” 中看到实例。\n\n点击实例即可进入详情。所有的设置都可在这里找到。\n\n\n\n首先重置一下密码，因为之前没设置密码。\n\n\n\n修改密码后，使用 XShell 工具连接即可。\n\n\n\n\n# 最高性价比选择\n\n搭建个人网站、个人博客或软件测试玩玩的话，这样选择就够了。\n\n配置个 1 vCPU 2GiB 内存，高效云盘 40Gib，足够使用。\n\n\n\n",normalizedContent:"# 主要内容\n\n给没有在阿里云购买过服务器的小伙伴一些实质性的参考。\n\n选购方向主要是针对搭建个人博客、测试服务器等功能的。\n\n\n# 阿里云产品\n\n阿里云现在的产品非常的多，自己初次接触阿里云还是在大学的时候，当时有学生活动，凭学生身份可以以非常便宜的价格买到服务器。\n\n还是大学生的小伙伴可以留意一下，能薅的羊毛一定不要漏了。\n\n现在阿里云也有活动，只要是新用户基本服务器是白送，价格十分便宜。\n\n阿里云活动地址\n\n\n\n个人使用的话，一般也就和这几个产品打交道比较多。\n\n * 域名\n * 云服务器ecs\n * 对象存储oss\n\n\n# 选购云服务器ecs\n\n\n\n\n# 一键购买\n\n一键购买中可以选择的实例全是突发性能实例，如果想选性能比较高的就需要进入到自定义购买。\n\n个人网站或测试使用，一般选择突发性能实例。\n\n\n\n\n# 自定义购买\n\n\n\n付费模式：根据自己需求选择（个人使用一般选择包年包月，特别注意：备案对服务器的有效期时间有要求）\n\n\n\n地域和可用区：主要就是选择一个大致的方位（访问的人与服务器所在地越近肯定也就越快）\n\n实例规格：根据场景化选型，个人应用搭建的话，选择共享标准型，性价比比较高。\n\n\n\n镜像：直接选择公共镜像，选择 centos/ubuntu （云服务器都搞起了，还用windows？）\n\n存储：选择默认的 essd 云盘 40 gb 足够使用\n\n购买时长：看个人需求了，满1年及以上都是有优惠的（注意：备案有时长要求）\n\n\n# 网络和安全组\n\n网络：因为单台使用，不会涉及到集群搭建，所以这一块无需特别注意，默认即可。\n\n公网ip：勾选上分配公网 ipv4 地址\n\n带宽计费模式：按固定带宽、按使用流量（个人经验：个人网站1m固定带宽够用）\n\n安全组：安全组类似防火墙功能，用于设置网络访问控制（主要控制端口的开放） 阿里云配置安全组\n\n\n# 系统配置\n\n登录凭证：密钥对、自定义密码（看个人选择，都挺方便）\n\n实例名称：默认就好\n\n主机名：可以修改一下，默认的太长\n\n\n# 购买完成\n\n\n\n购买成功后就可以在自己的账号中的 “我的资源” 中看到实例。\n\n点击实例即可进入详情。所有的设置都可在这里找到。\n\n\n\n首先重置一下密码，因为之前没设置密码。\n\n\n\n修改密码后，使用 xshell 工具连接即可。\n\n\n\n\n# 最高性价比选择\n\n搭建个人网站、个人博客或软件测试玩玩的话，这样选择就够了。\n\n配置个 1 vcpu 2gib 内存，高效云盘 40gib，足够使用。\n\n\n\n",charsets:{cjk:!0},lastUpdated:"9/9/2022",lastUpdatedTimestamp:1662716514e3},{title:"阿里云配置安全组",frontmatter:{title:"阿里云配置安全组",date:"2022-08-08T15:51:43.000Z",permalink:"/pages/5a9b34/",categories:["博客"],tags:["阿里云","安全组"],readingShow:"top"},regularPath:"/04.%E5%85%B6%E4%BB%96/02.%E5%8D%9A%E5%AE%A2/03.%E9%98%BF%E9%87%8C%E4%BA%91%E9%85%8D%E7%BD%AE%E5%AE%89%E5%85%A8%E7%BB%84.html",relativePath:"04.其他/02.博客/03.阿里云配置安全组.md",key:"v-1800cf9a",path:"/pages/5a9b34/",headers:[{level:2,title:"安全组入口",slug:"安全组入口",normalizedTitle:"安全组入口",charIndex:2},{level:2,title:"配置入方向",slug:"配置入方向",normalizedTitle:"配置入方向",charIndex:154},{level:2,title:"测试",slug:"测试",normalizedTitle:"测试",charIndex:215}],excerpt:'<h2 id="安全组入口"><a class="header-anchor" href="#安全组入口">#</a> 安全组入口</h2>\n<p>控制台 -&gt; 产品与服务 -&gt; 云服务器ECS -&gt; 安全组 -&gt; 点击安全组ID</p>\n',headersStr:"安全组入口 配置入方向 测试",content:"# 安全组入口\n\n控制台 -> 产品与服务 -> 云服务器ECS -> 安全组 -> 点击安全组ID\n\n\n\n云服务器ECS -> 安全组\n\n\n\n点击安全组ID\n\n\n\n\n\n入方向：我们提供出给外部访问的端口。\n\n出方向：一般不限制，安全组出方向默认允许所有访问，即从安全组内ECS访问外部都是放行的。\n\n\n# 配置入方向\n\n例如之前的文章，我们修改 MySQL 的端口为 5555 了，现在我们开放 5555 的端口。\n\n\n\n\n# 测试\n\n使用 telnet 命令：telnet ip 5555\n\n如果你的这个端口也是数据库端口的话，就会报密码错误。也证实了我们端口已经开放。\n\n未开通的效果，无法打开到主机连接。\n\n",normalizedContent:"# 安全组入口\n\n控制台 -> 产品与服务 -> 云服务器ecs -> 安全组 -> 点击安全组id\n\n\n\n云服务器ecs -> 安全组\n\n\n\n点击安全组id\n\n\n\n\n\n入方向：我们提供出给外部访问的端口。\n\n出方向：一般不限制，安全组出方向默认允许所有访问，即从安全组内ecs访问外部都是放行的。\n\n\n# 配置入方向\n\n例如之前的文章，我们修改 mysql 的端口为 5555 了，现在我们开放 5555 的端口。\n\n\n\n\n# 测试\n\n使用 telnet 命令：telnet ip 5555\n\n如果你的这个端口也是数据库端口的话，就会报密码错误。也证实了我们端口已经开放。\n\n未开通的效果，无法打开到主机连接。\n\n",charsets:{cjk:!0},lastUpdated:"9/9/2022",lastUpdatedTimestamp:1662716514e3},{title:"阿里云配置HTTPS",frontmatter:{title:"阿里云配置HTTPS",date:"2022-08-08T17:12:10.000Z",permalink:"/pages/2f563e/",categories:["博客"],tags:["阿里云","HTTPS"],readingShow:"top"},regularPath:"/04.%E5%85%B6%E4%BB%96/02.%E5%8D%9A%E5%AE%A2/05.%E9%98%BF%E9%87%8C%E4%BA%91%E9%85%8D%E7%BD%AEHTTPS.html",relativePath:"04.其他/02.博客/05.阿里云配置HTTPS.md",key:"v-7786a12b",path:"/pages/2f563e/",headers:[{level:2,title:"带着问题看内容",slug:"带着问题看内容",normalizedTitle:"带着问题看内容",charIndex:2},{level:2,title:"介绍",slug:"介绍",normalizedTitle:"介绍",charIndex:59},{level:2,title:"证书申请",slug:"证书申请",normalizedTitle:"证书申请",charIndex:106},{level:2,title:"配置Nginx",slug:"配置nginx",normalizedTitle:"配置nginx",charIndex:396}],excerpt:'<h2 id="带着问题看内容"><a class="header-anchor" href="#带着问题看内容">#</a> 带着问题看内容</h2>\n<p>白嫖 HTTPS！<br/>\n阿里云平台如何配置 SSL？<br/>\n如何配置自己的网站为 HTTPS？<br/></p>\n',headersStr:"带着问题看内容 介绍 证书申请 配置Nginx",content:"# 带着问题看内容\n\n白嫖 HTTPS！\n阿里云平台如何配置 SSL？\n如何配置自己的网站为 HTTPS？\n\n\n\n# 介绍\n\n阿里云上有免费的 SSL 证书，自己的域名也是阿里云管理的，那不得白嫖一波。\n\n\n# 证书申请\n\n首先登录上阿里云管理控制台\n\n在产品与服务，直接搜索 “证书”\n\n\n\n点击购买证书\n\n\n\n证书类型选 “DV域名级SSL”，才会有免费版，可以看到总配置费用为 0\n\n\n\n购买之后就可以看到这个 SSL 列表了，但是还要进行申请，点击“证书申请”\n\n\n\n证书申请这些东西如实填写就行了\n\n\n\n然后就产生了一个解析配置，注意看上面的那些小字，域名管理控制台\n\n\n\n可以看到解析设置已经有了，阿里直接帮我设置了\n\n\n\n点击验证，验证通过\n\n\n\n然后在证书列表就可以看到了\n\n\n\n下载证书，直接使用的哪种就下哪种，我用的 Nginx\n\n\n\n文件下载下来就是这样的\n\n\n\n\n# 配置Nginx\n\n首先在云服务器的安全组上添加端口为 443 的安全组，80 端口是 http 默认端口，443 为 https 默认端口，打开 nginx 的文件夹下的 nginx.conf，配置 server{} 里的内容。\n\nserver {\n    listen       443 ssl;\n    server_name  rcbb.cn www.rcbb.cn;\n    ssl on;\n    #root html;\n    #index index.html index.htm;\n\n    ssl_certificate      cert/a.pem; #.pem文件的地址\n    ssl_certificate_key  cert/a.key;  #.key文件的地址\n\n    # ssl_session_cache    shared:SSL:1m;\n    ssl_session_timeout  5m;\n    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;\n\n    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n    #ssl_ciphers  HIGH:!aNULL:!MD5;\n    ssl_prefer_server_ciphers  on;\n\n    location / {\n        proxy_pass  http://127.0.0.1:8080/;#代理到哪个端口\n       # root   html;\n       # index  index.html index.htm;\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n",normalizedContent:"# 带着问题看内容\n\n白嫖 https！\n阿里云平台如何配置 ssl？\n如何配置自己的网站为 https？\n\n\n\n# 介绍\n\n阿里云上有免费的 ssl 证书，自己的域名也是阿里云管理的，那不得白嫖一波。\n\n\n# 证书申请\n\n首先登录上阿里云管理控制台\n\n在产品与服务，直接搜索 “证书”\n\n\n\n点击购买证书\n\n\n\n证书类型选 “dv域名级ssl”，才会有免费版，可以看到总配置费用为 0\n\n\n\n购买之后就可以看到这个 ssl 列表了，但是还要进行申请，点击“证书申请”\n\n\n\n证书申请这些东西如实填写就行了\n\n\n\n然后就产生了一个解析配置，注意看上面的那些小字，域名管理控制台\n\n\n\n可以看到解析设置已经有了，阿里直接帮我设置了\n\n\n\n点击验证，验证通过\n\n\n\n然后在证书列表就可以看到了\n\n\n\n下载证书，直接使用的哪种就下哪种，我用的 nginx\n\n\n\n文件下载下来就是这样的\n\n\n\n\n# 配置nginx\n\n首先在云服务器的安全组上添加端口为 443 的安全组，80 端口是 http 默认端口，443 为 https 默认端口，打开 nginx 的文件夹下的 nginx.conf，配置 server{} 里的内容。\n\nserver {\n    listen       443 ssl;\n    server_name  rcbb.cn www.rcbb.cn;\n    ssl on;\n    #root html;\n    #index index.html index.htm;\n\n    ssl_certificate      cert/a.pem; #.pem文件的地址\n    ssl_certificate_key  cert/a.key;  #.key文件的地址\n\n    # ssl_session_cache    shared:ssl:1m;\n    ssl_session_timeout  5m;\n    ssl_ciphers ecdhe-rsa-aes128-gcm-sha256:ecdhe:ecdh:aes:high:!null:!anull:!md5:!adh:!rc4;\n\n    ssl_protocols tlsv1 tlsv1.1 tlsv1.2;\n    #ssl_ciphers  high:!anull:!md5;\n    ssl_prefer_server_ciphers  on;\n\n    location / {\n        proxy_pass  http://127.0.0.1:8080/;#代理到哪个端口\n       # root   html;\n       # index  index.html index.htm;\n    }\n}\n\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n",charsets:{cjk:!0},lastUpdated:"9/9/2022",lastUpdatedTimestamp:1662716514e3},{title:"词句摘录",frontmatter:{title:"词句摘录",date:"2020-08-25 14:14",permalink:"/pages/excerpt/",categories:["收藏"],tags:["摘录"],readingShow:"top"},regularPath:"/05.%E6%94%B6%E8%97%8F/02.%E6%91%98%E5%BD%95/10.%E8%AF%8D%E5%8F%A5%E6%91%98%E5%BD%95.html",relativePath:"05.收藏/02.摘录/10.词句摘录.md",key:"v-ec52908e",path:"/pages/excerpt/",headers:[{level:3,title:"词句",slug:"词句",normalizedTitle:"词句",charIndex:2},{level:3,title:"诗句",slug:"诗句",normalizedTitle:"诗句",charIndex:147},{level:3,title:"国家与革命",slug:"国家与革命",normalizedTitle:"国家与革命",charIndex:154},{level:3,title:"名言",slug:"名言",normalizedTitle:"名言",charIndex:164}],excerpt:'<h3 id="词句"><a class="header-anchor" href="#词句">#</a> 词句</h3>\n<div class="custom-block theorem"><p class="title">事不过三，三则重构。</p><p>任何一个傻瓜都能写出计算机可以理解的代码。唯有能写出人类容易理解的代码的，才是优秀的程序员。</p>\n<p>一旦我需要思考“这段代码到底在做什么”，我就会自问：能不能重构这段代码，令其一目了然？</p>\n<div class="custom-block right">\n<p>《重构改善既有代码的设计（第2版）》Martin Fowler</p>\n</div>\n</div>',headersStr:"词句 诗句 国家与革命 名言",content:"# 词句\n\n事不过三，三则重构。\n\n任何一个傻瓜都能写出计算机可以理解的代码。唯有能写出人类容易理解的代码的，才是优秀的程序员。\n\n一旦我需要思考“这段代码到底在做什么”，我就会自问：能不能重构这段代码，令其一目了然？\n\n《重构改善既有代码的设计（第2版）》Martin Fowler\n\n\n# 诗句\n\n\n# 国家与革命\n\n\n# 名言\n\n我绝不会为我的信仰而献身，因为我可能是错的。\n\n罗素\n\n在最后，我们会记得的不是敌人的话语，而是朋友们的沉默。\n\n马丁路德金\n\n人是无法通过不正义的手段去实现正义的目的\n\n人是无法通过不正义的手段去实现正义的目的。因为手段是种子，而目的是树，有毒的种子，永远长不出正义的大树。\n\n罗翔\n\n《圆圈正义》\n\n我最近写了一本书叫《圆圈正义》，我一直在思考这个问题，大家能画出圆这个概念吗？你能画出一个完美的圆吗？同学们觉得完美的圆这个概念存在不存在，圆这个概念是人的发明还是发现？圆是主观的还是客观的？是客观的。但是人所画的所有的圆，都不圆。但是圆这个概念存不存在？存在。我们人类不断的在追求一个完美的圆，但是我们在现实中永远画不出一个完美的圆。我们虽然看不到正义，但不代表正义这个概念不存在，它依然是我们前进的方向。我们所有法律人为什么要追求公平和正义，因为正义是客观存在的，它不断的挑动我们的心弦，让我们虽不能至，心向往之，这就叫做正义。\n\n罗翔",normalizedContent:"# 词句\n\n事不过三，三则重构。\n\n任何一个傻瓜都能写出计算机可以理解的代码。唯有能写出人类容易理解的代码的，才是优秀的程序员。\n\n一旦我需要思考“这段代码到底在做什么”，我就会自问：能不能重构这段代码，令其一目了然？\n\n《重构改善既有代码的设计（第2版）》martin fowler\n\n\n# 诗句\n\n\n# 国家与革命\n\n\n# 名言\n\n我绝不会为我的信仰而献身，因为我可能是错的。\n\n罗素\n\n在最后，我们会记得的不是敌人的话语，而是朋友们的沉默。\n\n马丁路德金\n\n人是无法通过不正义的手段去实现正义的目的\n\n人是无法通过不正义的手段去实现正义的目的。因为手段是种子，而目的是树，有毒的种子，永远长不出正义的大树。\n\n罗翔\n\n《圆圈正义》\n\n我最近写了一本书叫《圆圈正义》，我一直在思考这个问题，大家能画出圆这个概念吗？你能画出一个完美的圆吗？同学们觉得完美的圆这个概念存在不存在，圆这个概念是人的发明还是发现？圆是主观的还是客观的？是客观的。但是人所画的所有的圆，都不圆。但是圆这个概念存不存在？存在。我们人类不断的在追求一个完美的圆，但是我们在现实中永远画不出一个完美的圆。我们虽然看不到正义，但不代表正义这个概念不存在，它依然是我们前进的方向。我们所有法律人为什么要追求公平和正义，因为正义是客观存在的，它不断的挑动我们的心弦，让我们虽不能至，心向往之，这就叫做正义。\n\n罗翔",charsets:{cjk:!0},lastUpdated:"7/25/2022",lastUpdatedTimestamp:1658728355e3},{title:"归档",frontmatter:{archivesPage:!0,title:"归档",permalink:"/archives/",article:!1,readingShow:"top"},regularPath:"/@pages/archivesPage.html",relativePath:"@pages/archivesPage.md",key:"v-352f39f2",path:"/archives/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"7/25/2022",lastUpdatedTimestamp:1658728355e3},{title:"分类",frontmatter:{categoriesPage:!0,title:"分类",permalink:"/categories/",article:!1,readingShow:"top"},regularPath:"/@pages/categoriesPage.html",relativePath:"@pages/categoriesPage.md",key:"v-5d3e6532",path:"/categories/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"7/25/2022",lastUpdatedTimestamp:1658728355e3},{title:"网站收藏",frontmatter:{title:"网站收藏",permalink:"/pages/favorites/url",date:"2020-04-19T11:33:04.000Z",categories:["收藏"],tags:[null],readingShow:"top"},regularPath:"/05.%E6%94%B6%E8%97%8F/01.%E7%BD%91%E7%AB%99%E6%94%B6%E8%97%8F/01.%E7%BD%91%E7%AB%99%E6%94%B6%E8%97%8F.html",relativePath:"05.收藏/01.网站收藏/01.网站收藏.md",key:"v-15b1c965",path:"/pages/favorites/url/",headers:[{level:2,title:"摸鱼",slug:"摸鱼",normalizedTitle:"摸鱼",charIndex:29},{level:2,title:"开发",slug:"开发",normalizedTitle:"开发",charIndex:8},{level:3,title:"文档",slug:"文档",normalizedTitle:"文档",charIndex:354},{level:3,title:"项目",slug:"项目",normalizedTitle:"项目",charIndex:516},{level:2,title:"UI",slug:"ui",normalizedTitle:"ui",charIndex:619},{level:3,title:"图标",slug:"图标",normalizedTitle:"图标",charIndex:653},{level:3,title:"CSS",slug:"css",normalizedTitle:"css",charIndex:811},{level:3,title:"组件库",slug:"组件库",normalizedTitle:"组件库",charIndex:968},{level:2,title:"工具",slug:"工具",normalizedTitle:"工具",charIndex:307},{level:3,title:"搜索",slug:"搜索",normalizedTitle:"搜索",charIndex:1007},{level:3,title:"图片处理",slug:"图片处理",normalizedTitle:"图片处理",charIndex:1024},{level:3,title:"作图",slug:"作图",normalizedTitle:"作图",charIndex:1206},{level:3,title:"CDN加速",slug:"cdn加速",normalizedTitle:"cdn加速",charIndex:1269},{level:3,title:"正则表达式",slug:"正则表达式",normalizedTitle:"正则表达式",charIndex:1329},{level:3,title:"JSON",slug:"json",normalizedTitle:"json",charIndex:1351},{level:3,title:"MarkDown",slug:"markdown",normalizedTitle:"markdown",charIndex:1383},{level:3,title:"Emoji表情",slug:"emoji表情",normalizedTitle:"emoji表情",charIndex:1429},{level:3,title:"加密解密/转换器",slug:"加密解密-转换器",normalizedTitle:"加密解密/转换器",charIndex:1504},{level:2,title:"设计",slug:"设计",normalizedTitle:"设计",charIndex:11},{level:3,title:"配色",slug:"配色",normalizedTitle:"配色",charIndex:1668},{level:3,title:"LOGO制作",slug:"logo制作",normalizedTitle:"logo制作",charIndex:1855},{level:3,title:"动画",slug:"动画",normalizedTitle:"动画",charIndex:123},{level:3,title:"海报",slug:"海报",normalizedTitle:"海报",charIndex:2089},{level:3,title:"图库",slug:"图库",normalizedTitle:"图库",charIndex:2127},{level:4,title:"Banner",slug:"banner",normalizedTitle:"banner",charIndex:2133},{level:4,title:"背景",slug:"背景",normalizedTitle:"背景",charIndex:958},{level:4,title:"素材",slug:"素材",normalizedTitle:"素材",charIndex:2276},{level:3,title:"3D",slug:"_3d",normalizedTitle:"3d",charIndex:503}],excerpt:'<div class="custom-block tip"><p class="custom-block-title">提示</p>\n<p>收集一些开发、设计资源，持续整理中...</p>\n</div>\n<h2 id="摸鱼"><a class="header-anchor" href="#摸鱼">#</a> 摸鱼</h2>\n<ul>\n<li><a href="https://996.icu/#/zh_CN" target="_blank" rel="noopener noreferrer">996.icu<OutboundLink/></a> 必看网站</li>\n<li><a href="https://fuun.fun/" target="_blank" rel="noopener noreferrer">奇趣网站收藏家<OutboundLink/></a> 收藏了很多有趣的网站</li>\n<li><a href="https://www.sdmz.net/map/" target="_blank" rel="noopener noreferrer">地理名著<OutboundLink/></a> 四大名著地图</li>\n<li><a href="https://lab.magiconch.com/nbnhhsh/" target="_blank" rel="noopener noreferrer">网络黑话翻译<OutboundLink/></a> 能不能好好说话</li>\n<li><a href="http://matthewrayfield.com/articles/animating-urls-with-javascript-and-emojis/#%F0%9F%8C%96" target="_blank" rel="noopener noreferrer">URL 地址播放 Emojis 动画<OutboundLink/></a> 在地址栏里面播放 emoji</li>\n<li><a href="http://guozhivip.com/rank/" target="_blank" rel="noopener noreferrer">果汁排行榜<OutboundLink/></a> 多种排行榜的集合</li>\n</ul>\n',headersStr:"摸鱼 开发 文档 项目 UI 图标 CSS 组件库 工具 搜索 图片处理 作图 CDN加速 正则表达式 JSON MarkDown Emoji表情 加密解密/转换器 设计 配色 LOGO制作 动画 海报 图库 Banner 背景 素材 3D",content:"提示\n\n收集一些开发、设计资源，持续整理中...\n\n\n# 摸鱼\n\n * 996.icu 必看网站\n * 奇趣网站收藏家 收藏了很多有趣的网站\n * 地理名著 四大名著地图\n * 网络黑话翻译 能不能好好说话\n * URL 地址播放 Emojis 动画 在地址栏里面播放 emoji\n * 果汁排行榜 多种排行榜的集合\n\n\n# 开发\n\n * DeepL 人工智能翻译，全世界最准的翻译\n * 掘金 一个帮助开发者成长的社区\n * 简书 有很多频道的创作社区\n * 思否 解决技术问题的社区\n * V2EX\n * 开发热榜 整合了多个开发者网站的热榜\n * 码力全开资源库 很全很强大，独立开发者/设计干货/优质利器/工具资源...\n * Dev Hints 常用速查表,快速查询各类框架和库的常用方法\n\n\n# 文档\n\n * MDN Web技术权威文档\n * 现代JavaScript教程 以最新标准为基准的JS教程\n * ES5教程 阮一峰的JS教程\n * ES6教程 阮一峰的ES6教程\n * Bash 脚本教程 阮一峰编写\n * 菜鸟教程 涵盖多种语言的初级教程\n * 腾讯云开发者手册\n * Unity3D中文用户手册\n\n\n# 项目\n\n * MALL学习文档 mall项目是一套电商系统，涵盖了SpringBoot、MyBatis、Elasticsearch、RabbitMQ、Redis、Mongodb、Mysql等技术。\n\n\n# UI\n\n * Can't Unsee 检查你对设计稿敏感度\n\n\n# 图标\n\n * iconfont 阿里巴巴矢量图标库\n * undraw 免费的矢量插画\n * icomoon 矢量图标库\n * cssicon 所有的 icon 都是纯 css 画的 缺点：icon 不够多\n * feather 免费的 icons\n * remixicon 又一个提供免费图标 icons\n\n\n# CSS\n\n * clippy 在线帮你使用 css clip-path 做出各种形状的图形\n * CSS Tricks CSS技巧收集与演示 / 图形生成\n * CSS生成器 凹凸质感生成\n * CSS渐变生成器\n * CSS3-Box Shadow(阴影)\n * 贝塞尔曲线生成器\n * 花纹背景生成器\n\n\n# 组件库\n\n * Vuetify 一个 Vue UI 库\n\n\n# 工具\n\n\n# 搜索\n\n * 国家统计局\n\n\n# 图片处理\n\n * tinypng图片压缩 压缩png很有用\n * Squoosh 谷歌出品在线免费图片压缩工具\n * waifu2x 通过卷积网络放大图片\n * vectormagic 矢量图转换\n * vectorizer 真正的 png 转 svg 神器\n * 在线AI图片处理 黑白修复、无损放大、动漫化、铅笔画等。\n * 一件抠图\n * 转ico\n\n\n# 作图\n\n * processon在线作图 流程图、思维导图、原型图等，PS快捷键，巨方便！\n * 百度脑图 思维导图\n\n\n# CDN加速\n\n * jsDelivr 国外的一家优秀的公共 CDN 服务提供商\n * unpkg cdn 服务\n\n\n# 正则表达式\n\n * 正则表达式测试\n\n\n# JSON\n\n * JSON格式化 也可以生成java类\n\n\n# MarkDown\n\n * markdown在线编辑\n * markdown表格生成\n\n\n# Emoji表情\n\n * emoji表情 emoji百科\n * emoji表情备忘录\n\n> windows系统下按Win+.快速打开表情选择框\n\n\n# 加密解密/转换器\n\n * 文字加密解密 base64、url\n * 时间戳转换\n * 坐标系获取和转换\n\n\n# 设计\n\n * 创造师导航\n * 设计师网址导航\n * Bēhance dribbble 是设计师的微博，Bēhance 是设计师的博客\n * design.youzan 有赞设计原则\n * 站酷\n * 花瓣\n\n\n# 配色\n\n * coolors 帮你在线配色的网站 你能找到不少配色灵感\n * colorhunt 另一个配色网站\n * uigradients 渐变色网站\n * colorkitty 从你的图片中提取配色\n * nord 北欧性冷淡风主题配色\n * nipponcolors 日系配色\n * Flat UI 色表 Flat UI 色表\n * 0to255 颜色梯度\n\n\n# LOGO制作\n\n * Logojoy 使用 ai 做 logo 的网站，做出来的 logo 质量还不错。\n * brandmark 另一个在线制作 logo 网站\n * instant 又一个 logo 制作网站\n * logo-maker 又一个 logo 制作网站 这个更简单点 就是选模板之后微调\n\n\n# 动画\n\n * uimovement 能从这个网站找到不少动画交互的灵感\n * dribbble 经常能在上面找到很多有创意好看的 gif 或者图片\n\n\n# 海报\n\n * designcap 在线海报设计\n * 词语图形生成\n\n\n# 图库\n\n# Banner\n\n * freepik banner 图库\n\n# 背景\n\n * Lorem Picsum 提供免费的占位图\n * Unsplash 提供免费的高清图片\n * uigradients 渐变色生成工具\n * NASA 太空拍摄的图片\n * wallhaven 壁纸网站\n\n# 素材\n\n * 觅元素 一天免费下载十张 psd\n * 搞定设计 可以抠图\n * beTheme\n * UI 中国\n * 各种姿势图片\n\n\n# 3D\n\n * 3D图形生成\n\n##其他\n\n * 零基础新手破解学习导航帖",normalizedContent:"提示\n\n收集一些开发、设计资源，持续整理中...\n\n\n# 摸鱼\n\n * 996.icu 必看网站\n * 奇趣网站收藏家 收藏了很多有趣的网站\n * 地理名著 四大名著地图\n * 网络黑话翻译 能不能好好说话\n * url 地址播放 emojis 动画 在地址栏里面播放 emoji\n * 果汁排行榜 多种排行榜的集合\n\n\n# 开发\n\n * deepl 人工智能翻译，全世界最准的翻译\n * 掘金 一个帮助开发者成长的社区\n * 简书 有很多频道的创作社区\n * 思否 解决技术问题的社区\n * v2ex\n * 开发热榜 整合了多个开发者网站的热榜\n * 码力全开资源库 很全很强大，独立开发者/设计干货/优质利器/工具资源...\n * dev hints 常用速查表,快速查询各类框架和库的常用方法\n\n\n# 文档\n\n * mdn web技术权威文档\n * 现代javascript教程 以最新标准为基准的js教程\n * es5教程 阮一峰的js教程\n * es6教程 阮一峰的es6教程\n * bash 脚本教程 阮一峰编写\n * 菜鸟教程 涵盖多种语言的初级教程\n * 腾讯云开发者手册\n * unity3d中文用户手册\n\n\n# 项目\n\n * mall学习文档 mall项目是一套电商系统，涵盖了springboot、mybatis、elasticsearch、rabbitmq、redis、mongodb、mysql等技术。\n\n\n# ui\n\n * can't unsee 检查你对设计稿敏感度\n\n\n# 图标\n\n * iconfont 阿里巴巴矢量图标库\n * undraw 免费的矢量插画\n * icomoon 矢量图标库\n * cssicon 所有的 icon 都是纯 css 画的 缺点：icon 不够多\n * feather 免费的 icons\n * remixicon 又一个提供免费图标 icons\n\n\n# css\n\n * clippy 在线帮你使用 css clip-path 做出各种形状的图形\n * css tricks css技巧收集与演示 / 图形生成\n * css生成器 凹凸质感生成\n * css渐变生成器\n * css3-box shadow(阴影)\n * 贝塞尔曲线生成器\n * 花纹背景生成器\n\n\n# 组件库\n\n * vuetify 一个 vue ui 库\n\n\n# 工具\n\n\n# 搜索\n\n * 国家统计局\n\n\n# 图片处理\n\n * tinypng图片压缩 压缩png很有用\n * squoosh 谷歌出品在线免费图片压缩工具\n * waifu2x 通过卷积网络放大图片\n * vectormagic 矢量图转换\n * vectorizer 真正的 png 转 svg 神器\n * 在线ai图片处理 黑白修复、无损放大、动漫化、铅笔画等。\n * 一件抠图\n * 转ico\n\n\n# 作图\n\n * processon在线作图 流程图、思维导图、原型图等，ps快捷键，巨方便！\n * 百度脑图 思维导图\n\n\n# cdn加速\n\n * jsdelivr 国外的一家优秀的公共 cdn 服务提供商\n * unpkg cdn 服务\n\n\n# 正则表达式\n\n * 正则表达式测试\n\n\n# json\n\n * json格式化 也可以生成java类\n\n\n# markdown\n\n * markdown在线编辑\n * markdown表格生成\n\n\n# emoji表情\n\n * emoji表情 emoji百科\n * emoji表情备忘录\n\n> windows系统下按win+.快速打开表情选择框\n\n\n# 加密解密/转换器\n\n * 文字加密解密 base64、url\n * 时间戳转换\n * 坐标系获取和转换\n\n\n# 设计\n\n * 创造师导航\n * 设计师网址导航\n * behance dribbble 是设计师的微博，behance 是设计师的博客\n * design.youzan 有赞设计原则\n * 站酷\n * 花瓣\n\n\n# 配色\n\n * coolors 帮你在线配色的网站 你能找到不少配色灵感\n * colorhunt 另一个配色网站\n * uigradients 渐变色网站\n * colorkitty 从你的图片中提取配色\n * nord 北欧性冷淡风主题配色\n * nipponcolors 日系配色\n * flat ui 色表 flat ui 色表\n * 0to255 颜色梯度\n\n\n# logo制作\n\n * logojoy 使用 ai 做 logo 的网站，做出来的 logo 质量还不错。\n * brandmark 另一个在线制作 logo 网站\n * instant 又一个 logo 制作网站\n * logo-maker 又一个 logo 制作网站 这个更简单点 就是选模板之后微调\n\n\n# 动画\n\n * uimovement 能从这个网站找到不少动画交互的灵感\n * dribbble 经常能在上面找到很多有创意好看的 gif 或者图片\n\n\n# 海报\n\n * designcap 在线海报设计\n * 词语图形生成\n\n\n# 图库\n\n# banner\n\n * freepik banner 图库\n\n# 背景\n\n * lorem picsum 提供免费的占位图\n * unsplash 提供免费的高清图片\n * uigradients 渐变色生成工具\n * nasa 太空拍摄的图片\n * wallhaven 壁纸网站\n\n# 素材\n\n * 觅元素 一天免费下载十张 psd\n * 搞定设计 可以抠图\n * betheme\n * ui 中国\n * 各种姿势图片\n\n\n# 3d\n\n * 3d图形生成\n\n##其他\n\n * 零基础新手破解学习导航帖",charsets:{cjk:!0},lastUpdated:"7/25/2022",lastUpdatedTimestamp:1658728355e3},{title:"标签",frontmatter:{tagsPage:!0,title:"标签",permalink:"/tags/",article:!1,readingShow:"top"},regularPath:"/@pages/tagsPage.html",relativePath:"@pages/tagsPage.md",key:"v-5ad32af2",path:"/tags/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"7/25/2022",lastUpdatedTimestamp:1658728355e3},{title:"Home",frontmatter:{home:!0,heroText:"日常bb",tagline:"一些技术，一些随想，一些资源收藏~",bannerBg:"/img/bg.jpg",readingShow:"top"},regularPath:"/",relativePath:"index.md",key:"v-0ff9aaa0",path:"/",headersStr:null,content:"",normalizedContent:"",charsets:{},lastUpdated:"7/25/2022",lastUpdatedTimestamp:1658728355e3}],themeConfig:{nav:[{text:"首页",link:"/"},{text:"文章",link:"/article/"},{text:"冥思",link:"/idea/"},{text:"其他",link:"/other/"},{text:"收藏",link:"/favorites/"},{text:"索引",link:"/archives/",items:[{text:"分类",link:"/categories/"},{text:"标签",link:"/tags/"},{text:"归档",link:"/archives/"}]}],sidebarDepth:2,logo:"/img/logo.png",repo:"rcbb-cc",searchMaxSuggestions:10,lastUpdated:"上次更新",docsDir:"docs",editLinks:!1,editLinkText:"编辑",sidebar:{"/00.目录页/":[["01.文章.md","文章","/article"],["03.冥思.md","冥思","/idea"],["04.其他.md","其他","/other"],["05.收藏.md","收藏","/favorites"]],catalogue:{"文章":"/article","冥思":"/idea","其他":"/other","收藏":"/favorites"},"/01.文章/":[{title:"Java",collapsable:!0,children:[["01.Java/01.Java源码阅读调试环境搭建.md","Java源码阅读调试环境搭建","/pages/08e16a/"],{title:"设计模式",collapsable:!0,children:[["01.Java/02.设计模式/01.设计模式.md","设计模式","/pages/c9a33b/"],["01.Java/02.设计模式/02.工厂模式.md","工厂模式","/pages/c6c51f/"],["01.Java/02.设计模式/03.单例模式.md","单例模式","/pages/80ec45/"],["01.Java/02.设计模式/04.生成器模式.md","生成器模式","/pages/e9c9f3/"],["01.Java/02.设计模式/05.原型模式.md","原型模式","/pages/7badac/"],["01.Java/02.设计模式/06.外观模式.md","外观模式","/pages/7a035e/"],["01.Java/02.设计模式/07.适配器模式.md","适配器模式","/pages/2ed1b3/"],["01.Java/02.设计模式/08.桥接模式.md","桥接模式","/pages/790ea0/"],["01.Java/02.设计模式/09.组合模式.md","组合模式","/pages/112792/"]]}]},{title:"Redis",collapsable:!0,children:[["02.Redis/01.Redis分布式锁(spring-boot-klock-starter快速入门).md","Redis分布式锁(spring-boot-klock-starter快速入门)","/pages/024464/"]]},{title:"Spring",collapsable:!0,children:[{title:"基础使用",collapsable:!0,children:[["05.Spring/01.基础使用/01.SpringBoot集成ShardingSphere4.1.1(自定义分库、分表算法).md","SpringBoot集成ShardingSphere4.1.1(自定义分库、分表算法)","/pages/f4535c/"],["05.Spring/01.基础使用/02.使用Flyway对数据库版本控制.md","使用Flyway对数据库版本控制","/pages/82388c/"],["05.Spring/01.基础使用/03.行为验证码(AJ-Captcha快速入门).md","行为验证码(AJ-Captcha快速入门)","/pages/d57d55/"],["05.Spring/01.基础使用/05.SpringBoot二维码生成(复制即用).md","SpringBoot二维码生成(复制即用)","/pages/745182/"],["05.Spring/01.基础使用/06.SpringBoot使用Hibernate Validator（后端参数校验）.md","SpringBoot使用Hibernate Validator（后端参数校验）","/pages/cbaa02/"]]},{title:"Spring Security",collapsable:!0,children:[["05.Spring/02.Spring Security/01.Spring Security学习总结.md","Spring Security学习总结","/pages/32549d/"],["05.Spring/02.Spring Security/02.Spring Security.md","Spring Security","/pages/5fbd1a/"],["05.Spring/02.Spring Security/03.Spring Security OAuth2.md","Spring Security OAuth2","/pages/ffa63f/"],["05.Spring/02.Spring Security/04.实战单体应用(认证授权服务+资源服务).md","实战单体应用(认证授权服务+资源服务)","/pages/74390a/"],["05.Spring/02.Spring Security/05.实战模块化(认证授权服务+资源服务).md","实战模块化(认证授权服务+资源服务)","/pages/0d4207/"],["05.Spring/02.Spring Security/06.Spring Security OAuth2自定义授权模式.md","Spring Security OAuth2自定义授权模式","/pages/412c27/"]]},{title:"收藏",collapsable:!0,children:[["05.Spring/99.收藏/01.SpringBoot使用logback日志框架超详细教程.md","SpringBoot使用logback日志框架超详细教程","/pages/9dc988/"]]}]},{title:"工具",collapsable:!0,children:[["06.工具/01.内网映射工具.md","内网映射工具","/pages/f9c70c/"],["06.工具/04.使用PicGo上传图片到自己的图床.md","使用PicGo上传图片到自己的图床","/pages/996107/"],["06.工具/05.好用的截图工具.md","好用的截图工具","/pages/75e36d/"]]},{title:"概念",collapsable:!0,children:[["07.概念/01.SaaS、PaaS、IaaS的区别.md","SaaS、PaaS、IaaS的区别","/pages/9da5e5/"],["07.概念/06.HTTPS加密解析.md","HTTPS加密解析","/pages/05448d/"]]},{title:"容器",collapsable:!0,children:[["09.容器/01.Nacos容器化.md","Nacos容器化","/pages/cbd47e/"],["09.容器/02.Docker.md","Docker","/pages/f14098/"]]},{title:"实战",collapsable:!0,children:[["11.实战/01.Sign in with Apple（苹果授权登陆）.md","Sign in with Apple（苹果授权登陆）","/pages/7e6d51/"],["11.实战/16.git clone 报错：Filename too long.md","git clone 报错：Filename too long","/pages/0e4b5e/"]]},{title:"AI",collapsable:!0,children:[{title:"ChatGPT",collapsable:!0,children:[["12.AI/05.ChatGPT/07.免费注册ChatGPT指南.md","免费注册ChatGPT指南","/pages/b131bf/"],["12.AI/05.ChatGPT/08.ChatGPT Plus订阅指南.md","ChatGPT Plus订阅指南","/pages/82530f/"]]},{title:"Midjourney",collapsable:!0,children:[["12.AI/15.Midjourney/01.Midjourney入门.md","Midjourney入门","/pages/02db65/"]]}]},{title:"前端",collapsable:!0,children:[["17.前端/01.使用nvm控制node版本.md","使用nvm控制node版本","/pages/8b23f4/"]]}],"/03.冥思/":[{title:"杂谈",collapsable:!0,children:[["01.杂谈/01.马保国文体.md","马保国文体","/pages/75d814/"],["01.杂谈/02.写作技巧.md","写作技巧","/pages/16a0f4/"],["01.杂谈/03.为什么我会选择购买小米11.md","为什么我会选择购买小米11","/pages/95cf6a/"]]}],"/04.其他/":[{title:"关于",collapsable:!0,children:[["01.关于/01.关于我.md","关于我","/pages/81a699/"]]},{title:"博客",collapsable:!0,children:[["02.博客/01.博客搭建.md","博客搭建","/pages/339f86/"],["02.博客/02.阿里云服务器选购.md","阿里云服务器选购","/pages/f7be6d/"],["02.博客/03.阿里云配置安全组.md","阿里云配置安全组","/pages/5a9b34/"],["02.博客/05.阿里云配置HTTPS.md","阿里云配置HTTPS","/pages/2f563e/"]]}],"/05.收藏/":[{title:"网站收藏",collapsable:!0,children:[["01.网站收藏/01.网站收藏.md","网站收藏","/pages/favorites/url"]]},{title:"摘录",collapsable:!0,children:[["02.摘录/10.词句摘录.md","词句摘录","/pages/excerpt/"]]}]},author:{name:"rcbb",link:"https://rcbb.cc/"},blogger:{avatar:"https://rcbb-public.oss-cn-guangzhou.aliyuncs.com/avatar.jpg",name:"日常bb",slogan:"想起来全是问题，做起来才有答案。"},social:{icons:[{iconClass:"icon-github",title:"Star我",link:"https://github.com/rcbb-cc"},{iconClass:"icon-erji",title:"有品位的歌单",link:"https://music.163.com/playlist?id=5161366267"}]},footer:{createYear:2021,copyrightInfo:'日常bb | <a href="https://beian.miit.gov.cn/" target="_blank" style="font-weight:normal">鄂ICP备17023998号</a> '},htmlModules:{homeSidebarB:'<ins class="adsbygoogle"\n     style="display:block"\n     data-ad-client="ca-pub-8621788234752924"\n     data-ad-slot="9814056513"\n     data-ad-format="auto"\n     data-full-width-responsive="true"></ins>\n<script>\n     (adsbygoogle = window.adsbygoogle || []).push({});\n<\/script>',sidebarB:'<ins class="adsbygoogle"\n     style="display:block"\n     data-ad-client="ca-pub-8621788234752924"\n     data-ad-slot="8498052873"\n     data-ad-format="auto"\n     data-full-width-responsive="true"></ins>\n<script>\n     (adsbygoogle = window.adsbygoogle || []).push({});\n<\/script>',pageB:'</br><ins class="adsbygoogle"\n     style="display:block; text-align:center;"\n     data-ad-layout="in-article"\n     data-ad-format="auto"\n     data-ad-client="ca-pub-8621788234752924"\n     data-ad-slot="7043271566"></ins>\n<script>\n     (adsbygoogle = window.adsbygoogle || []).push({});\n<\/script>',pageBshowMode:"article"}},locales:{"/":{lang:"zh-CN",title:"日常bb",description:"一些技术，一些随想，一些资源收藏。",path:"/"}}};var _c=t(96),xc=t(97),Sc=t(11);var Ec={computed:{$filterPosts(){return this.$site.pages.filter(n=>{const{frontmatter:{pageComponent:e,article:t,home:r}}=n;return!(e||!1===t||!0===r)})},$sortPosts(){return(n=this.$filterPosts).sort((n,e)=>{const t=n.frontmatter.sticky,r=e.frontmatter.sticky;return t&&r?t==r?Object(Sc.a)(n,e):t-r:t&&!r?-1:!t&&r?1:Object(Sc.a)(n,e)}),n;var n},$sortPostsByDate(){return(n=this.$filterPosts).sort((n,e)=>Object(Sc.a)(n,e)),n;var n},$groupPosts(){return function(n){const e={},t={};for(let r=0,i=n.length;r<i;r++){const{frontmatter:{categories:i,tags:o}}=n[r];"array"===Object(Sc.n)(i)&&i.forEach(t=>{t&&(e[t]||(e[t]=[]),e[t].push(n[r]))}),"array"===Object(Sc.n)(o)&&o.forEach(e=>{e&&(t[e]||(t[e]=[]),t[e].push(n[r]))})}return{categories:e,tags:t}}(this.$sortPosts)},$categoriesAndTags(){return function(n){const e=[],t=[];for(let t in n.categories)e.push({key:t,length:n.categories[t].length});for(let e in n.tags)t.push({key:e,length:n.tags[e].length});return{categories:e,tags:t}}(this.$groupPosts)}}};Jt.component(_c.default),Jt.component(xc.default);function Ac(n){return n.toString().padStart(2,"0")}t(246);Jt.component("Badge",()=>Promise.all([t.e(0),t.e(3)]).then(t.bind(null,401))),Jt.component("CodeBlock",()=>Promise.resolve().then(t.bind(null,96))),Jt.component("CodeGroup",()=>Promise.resolve().then(t.bind(null,97)));t(247);var Tc={name:"ReadingProgress",data:()=>({readingTop:0,readingHeight:1,progressStyle:null,transform:void 0,running:!1}),watch:{$readingShow(){this.progressStyle=this.getProgressStyle(),this.$readingShow&&window.addEventListener("scroll",this.base)}},mounted(){this.transform=this.getTransform(),this.progressStyle=this.getProgressStyle(),this.$readingShow&&window.addEventListener("scroll",this.base)},beforeDestroy(){this.$readingShow&&window.removeEventListener("scroll",this.base)},methods:{base(){this.running||(this.running=!0,requestAnimationFrame(this.getReadingBase))},getReadingBase(){this.readingHeight=this.getReadingHeight()-this.getScreenHeight(),this.readingTop=this.getReadingTop(),this.progressStyle=this.getProgressStyle(),this.running=!1},getReadingHeight:()=>Math.max(document.body.scrollHeight,document.body.offsetHeight,0),getScreenHeight:()=>Math.max(window.innerHeight,document.documentElement.clientHeight,0),getReadingTop:()=>Math.max(window.pageYOffset,document.documentElement.scrollTop,0),getTransform(){const n=document.createElement("div");return["transform","-webkit-transform","-moz-transform","-o-transform","-ms-transform"].find(e=>e in n.style)||void 0},getProgressStyle(){const n=this.readingTop/this.readingHeight;switch(this.$readingShow){case"top":case"bottom":return this.transform?`${this.transform}: scaleX(${n})`:`width: ${100*n}%`;case"left":case"right":return this.transform?`${this.transform}: scaleY(${n})`:`height: ${100*n}%`;default:return null}}}},jc=(t(248),Object(yc.a)(Tc,(function(){var n=this._self._c;return n("ClientOnly",[this.$readingShow?n("div",{staticClass:"reading-progress",class:this.$readingShow},[n("div",{staticClass:"progress",style:this.progressStyle})]):this._e()])}),[],!1,null,"3640397f",null).exports),Cc=(t(249),t(95)),Ic=t.n(Cc),zc=t(27);let Oc,Pc;var Rc;"valine"===(Rc="gitalk")?t.e(61).then(t.t.bind(null,342,7)).then(n=>Pc=n.default):"gitalk"===Rc&&Promise.all([t.e(0),t.e(60)]).then(t.t.bind(null,343,7)).then(()=>t.e(59).then(t.t.bind(null,344,7))).then(n=>Oc=n.default);function Bc(n,e){const t={};return Reflect.ownKeys(n).forEach(r=>{if("string"==typeof n[r])try{t[r]=Ic.a.render(n[r],e)}catch(e){console.warn(`Comment config option error at key named "${r}"`),console.warn("More info: "+e.message),t[r]=n[r]}else t[r]=n[r]}),t}console.log(`How to use "gitalk" in ${zc.name}@v${zc.version}:`,zc.homepage);const Dc={gitalk:{render(n,e){const t=document.createElement("div");t.id=e;document.querySelector("main.page").appendChild(t);new Oc(Bc({clientID:"7fa39bf189d19a263326",clientSecret:"f6a0f93f4daf93003c712317c540993517512fd3",repo:"rcbb-blog",owner:"rcbb-cc",admin:["rcbb-cc"],pagerDirection:"last",id:"<%- (frontmatter.permalink || frontmatter.to.path).slice(-16) %>",title:"「评论」<%- frontmatter.title %>",labels:["Gitalk","Comment"],body:"页面：<%- window.location.origin + (frontmatter.to.path || window.location.pathname) %>"},{frontmatter:n})).render(e)},clear(n){const e=document.querySelector("#"+n);return e&&e.remove(),!0}},valine:{render(n,e){const t=document.createElement("div");t.id=e;document.querySelector("main.page").appendChild(t),new Pc({...Bc({clientID:"7fa39bf189d19a263326",clientSecret:"f6a0f93f4daf93003c712317c540993517512fd3",repo:"rcbb-blog",owner:"rcbb-cc",admin:["rcbb-cc"],pagerDirection:"last",id:"<%- (frontmatter.permalink || frontmatter.to.path).slice(-16) %>",title:"「评论」<%- frontmatter.title %>",labels:["Gitalk","Comment"],body:"页面：<%- window.location.origin + (frontmatter.to.path || window.location.pathname) %>"},{frontmatter:n}),el:"#"+e})},clear(n){const e=document.querySelector("#"+n);return e&&e.remove(),!0}}},qc="vuepress-plugin-comment";let Lc=null;function Mc(n){return Dc.gitalk.clear(qc)}function Nc(n){return!1!==n.comment&&!1!==n.comments}function $c(n){clearTimeout(Lc);if(document.querySelector("main.page"))return Dc.gitalk.render(n,qc);Lc=setTimeout(()=>$c(n),200)}var Uc={mounted(){Lc=setTimeout(()=>{const n={to:{},from:{},...this.$frontmatter};Mc()&&Nc(n)&&$c(n)},1e3),this.$router.afterEach((n,e)=>{if(n&&e&&n.path===e.path)return;const t={to:n,from:e,...this.$frontmatter};Mc()&&Nc(t)&&$c(t)})}},Fc=Object(yc.a)(Uc,(function(){return(0,this._self._c)("div")}),[],!1,null,null,null).exports,Gc=[({Vue:n,options:e,router:t,siteData:r})=>{},({Vue:n,options:e,router:t,siteData:r})=>{r.pages.map(n=>{const{frontmatter:{date:e,author:t}}=n;"string"==typeof e&&"Z"===e.charAt(e.length-1)&&(n.frontmatter.date=function(n){n instanceof Date||(n=new Date(n));return`${n.getUTCFullYear()}-${Ac(n.getUTCMonth()+1)}-${Ac(n.getUTCDate())} ${Ac(n.getUTCHours())}:${Ac(n.getUTCMinutes())}:${Ac(n.getUTCSeconds())}`}(e)),t?n.author=t:r.themeConfig.author&&(n.author=r.themeConfig.author)}),n.mixin(Ec)},{},({Vue:n})=>{n.mixin({computed:{$dataBlock(){return this.$options.__data__block__}}})},{},{},({router:n})=>{"undefined"!=typeof window&&function(){var n=document.createElement("script"),e=window.location.protocol.split(":")[0];n.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(n,t)}()},({Vue:n})=>{n.component(jc.name,jc),n.mixin({computed:{$readingShow(){return this.$page.frontmatter.readingShow}}})},({router:n})=>{"undefined"!=typeof window&&(window._hmt=window._hmt||[],function(){var n=document.createElement("script");n.src="https://hm.baidu.com/hm.js?296d2539b4bc91f0d50b2cf04b43c29c";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(n,e)}(),n.afterEach((function(n){_hmt.push(["_trackPageview",n.fullPath])})))},({Vue:n})=>{n.component("Comment",Fc)}],Hc=["ReadingProgress","Comment"];class Vc extends class{constructor(){this.store=new Jt({data:{state:{}}})}$get(n){return this.store.state[n]}$set(n,e){Jt.set(this.store.state,n,e)}$emit(...n){this.store.$emit(...n)}$on(...n){this.store.$on(...n)}}{}Object.assign(Vc.prototype,{getPageAsyncComponent:ss,getLayoutAsyncComponent:cs,getAsyncComponent:ls,getVueComponent:ps});var Jc={install(n){const e=new Vc;n.$vuepress=e,n.prototype.$vuepress=e}};function Wc(n,e){const t=e.toLowerCase();return n.options.routes.some(n=>n.path.toLowerCase()===t)}var Kc={props:{pageKey:String,slotKey:{type:String,default:"default"}},render(n){const e=this.pageKey||this.$parent.$page.key;return us("pageKey",e),Jt.component(e)||Jt.component(e,ss(e)),Jt.component(e)?n(e):n("")}},Qc={functional:!0,props:{slotKey:String,required:!0},render:(n,{props:e,slots:t})=>n("div",{class:["content__"+e.slotKey]},t()[e.slotKey])},Yc={computed:{openInNewWindowTitle(){return this.$themeLocaleConfig.openNewWindowText||"(opens new window)"}}},Zc=(t(255),t(256),Object(yc.a)(Yc,(function(){var n=this._self._c;return n("span",[n("svg",{staticClass:"icon outbound",attrs:{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15"}},[n("path",{attrs:{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}}),this._v(" "),n("polygon",{attrs:{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"}})]),this._v(" "),n("span",{staticClass:"sr-only"},[this._v(this._s(this.openInNewWindowTitle))])])}),[],!1,null,null,null).exports),Xc={functional:!0,render(n,{parent:e,children:t}){if(e._isMounted)return t;e.$once("hook:mounted",()=>{e.$forceUpdate()})}};Jt.config.productionTip=!1,Jt.use(Ha),Jt.use(Jc),Jt.mixin(function(n,e,t=Jt){!function(n){n.locales&&Object.keys(n.locales).forEach(e=>{n.locales[e].path=e});Object.freeze(n)}(e),t.$vuepress.$set("siteData",e);const r=new(n(t.$vuepress.$get("siteData"))),i=Object.getOwnPropertyDescriptors(Object.getPrototypeOf(r)),o={};return Object.keys(i).reduce((n,e)=>(e.startsWith("$")&&(n[e]=i[e].get),n),o),{computed:o}}(n=>class{setPage(n){this.__page=n}get $site(){return n}get $themeConfig(){return this.$site.themeConfig}get $frontmatter(){return this.$page.frontmatter}get $localeConfig(){const{locales:n={}}=this.$site;let e,t;for(const r in n)"/"===r?t=n[r]:0===this.$page.path.indexOf(r)&&(e=n[r]);return e||t||{}}get $siteTitle(){return this.$localeConfig.title||this.$site.title||""}get $canonicalUrl(){const{canonicalUrl:n}=this.$page.frontmatter;return"string"==typeof n&&n}get $title(){const n=this.$page,{metaTitle:e}=this.$page.frontmatter;if("string"==typeof e)return e;const t=this.$siteTitle,r=n.frontmatter.home?null:n.frontmatter.title||n.title;return t?r?r+" | "+t:t:r||"VuePress"}get $description(){const n=function(n){if(n){const e=n.filter(n=>"description"===n.name)[0];if(e)return e.content}}(this.$page.frontmatter.meta);return n||(this.$page.frontmatter.description||this.$localeConfig.description||this.$site.description||"")}get $lang(){return this.$page.frontmatter.lang||this.$localeConfig.lang||"en-US"}get $localePath(){return this.$localeConfig.path||"/"}get $themeLocaleConfig(){return(this.$site.themeConfig.locales||{})[this.$localePath]||{}}get $page(){return this.__page?this.__page:function(n,e){for(let t=0;t<n.length;t++){const r=n[t];if(r.path.toLowerCase()===e.toLowerCase())return r}return{path:"",frontmatter:{}}}(this.$site.pages,this.$route.path)}},wc)),Jt.component("Content",Kc),Jt.component("ContentSlotsDistributor",Qc),Jt.component("OutboundLink",Zc),Jt.component("ClientOnly",Xc),Jt.component("Layout",cs("Layout")),Jt.component("NotFound",cs("NotFound")),Jt.prototype.$withBase=function(n){const e=this.$site.base;return"/"===n.charAt(0)?e+n.slice(1):n},window.__VUEPRESS__={version:"1.9.5",hash:"922a332"},async function(n){const e="undefined"!=typeof window&&window.__VUEPRESS_ROUTER_BASE__?window.__VUEPRESS_ROUTER_BASE__:wc.routerBase||wc.base,t=new Ha({base:e,mode:"history",fallback:!1,routes:kc,scrollBehavior:(n,e,t)=>t||(n.hash?!Jt.$vuepress.$get("disableScrollBehavior")&&{selector:decodeURIComponent(n.hash)}:{x:0,y:0})});!function(n){n.beforeEach((e,t,r)=>{if(Wc(n,e.path))r();else if(/(\/|\.html)$/.test(e.path))if(/\/$/.test(e.path)){const t=e.path.replace(/\/$/,"")+".html";Wc(n,t)?r(t):r()}else r();else{const t=e.path+"/",i=e.path+".html";Wc(n,i)?r(i):Wc(n,t)?r(t):r()}})}(t);const r={};try{await Promise.all(Gc.filter(n=>"function"==typeof n).map(e=>e({Vue:Jt,options:r,router:t,siteData:wc,isServer:n})))}catch(n){console.error(n)}return{app:new Jt(Object.assign(r,{router:t,render:n=>n("div",{attrs:{id:"app"}},[n("RouterView",{ref:"layout"}),n("div",{class:"global-ui"},Hc.map(e=>n(e)))])})),router:t}}(!1).then(({app:n,router:e})=>{e.onReady(()=>{n.$mount("#app")})})}]);