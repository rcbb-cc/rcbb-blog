(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{391:function(s,n,a){"use strict";a.r(n);var t=a(1),e=Object(t.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"博客搭建"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#博客搭建"}},[s._v("#")]),s._v(" 博客搭建")]),s._v(" "),n("h2",{attrs:{id:"介绍"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[s._v("#")]),s._v(" 介绍")]),s._v(" "),n("p",[s._v("博客地址：https://rcbb.cc")]),s._v(" "),n("ol",[n("li",[s._v("这个主题的初衷是打造一个好用的、面向程序员的知识管理工具。")]),s._v(" "),n("li",[s._v("轻松构建一个结构化的知识库，让你的知识海洋像一本本书一样清晰易读。")]),s._v(" "),n("li",[s._v("博客功能提供一种知识的碎片化形态，并支持个性化博客配置。")]),s._v(" "),n("li",[s._v("简洁高效，以 Markdown 为中心的项目结构。内置自动化工具，以更少的配置完成更多的事。配合多维索引快速定位每个知识点。")])]),s._v(" "),n("p",[s._v("该博客基于改造："),n("br"),s._v(" "),n("a",{attrs:{href:"https://doc.xugaoyi.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("vuepress-theme-vdoing主题"),n("OutboundLink")],1),n("br"),s._v(" "),n("a",{attrs:{href:"https://github.com/moxiaolong/dram-vdiong",target:"_blank",rel:"noopener noreferrer"}},[s._v("Dra-M个人博客"),n("OutboundLink")],1)]),s._v(" "),n("p",[s._v("代码拉取（branch：blog-template）")]),s._v(" "),n("blockquote",[n("p",[s._v("https://github.com/rcbb-cc/rcbb-blog")])]),s._v(" "),n("p",[s._v("下文所有的内容都基于 rcbb-blog（branch：blog-template）。")]),s._v(" "),n("h2",{attrs:{id:"快速上手"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#快速上手"}},[s._v("#")]),s._v(" 快速上手")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("(1)拉取项目，并切换使用 blog-template 分支。  \n    https://github.com/rcbb-cc/rcbb-blog.git\n\n(2)进入项目目录\n    cd rcbb-blog\n\n(3)安装依赖\n    npm install\n\n(4)启动项目\n    npm run dev\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("p",[s._v("正确启动后就可以访问了。")]),s._v(" "),n("h2",{attrs:{id:"构建"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#构建"}},[s._v("#")]),s._v(" 构建")]),s._v(" "),n("p",[s._v("这里以 zhangsan 做为关键词来构建博客。")]),s._v(" "),n("p",[s._v("需要进行更改的内容。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("(1)重命名项目\n    将 rcbb-blog 重命名为 zhangsan-blog\n    \n(2)更改项目中所有的关键字\n    rcbb 更改为 zhangshan\n    日常bb 更改为 张三\n    \n(3)假设你的域名为 zhangsan-blog.com\n    rcbb.cc 更改为 zhangsan-blog.com\n    \n(4)百度推送链接code需要进行更换\n    文件地址为：/rcbb-blog/docs/.vuepress/config/baiduCode.ts\n    需要注册登录百度统计：https://tongji.baidu.com\n    添加自己的域名后\n    百度统计官网：使用设置->代码管理->代码获取\n    获取到code值\n    \n(5)更改百度收录的url\n    文件地址为：/rcbb-blog/baiduPush.sh\n    如何获取百度链接推送的url？\n    登录百度账号后访问：https://ziyuan.baidu.com/\n    百度搜索资源平台官网：搜索服务->资源提交->普通收录\n    https://ziyuan.baidu.com/linksubmit/index?site=https://zhangsan-blog.com\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br")])]),n("h2",{attrs:{id:"博客如何部署到自己的服务器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#博客如何部署到自己的服务器"}},[s._v("#")]),s._v(" 博客如何部署到自己的服务器")]),s._v(" "),n("p",[s._v("为了方便平时的博客更新内容，项目中并不会直接通过脚本上传到自己的服务器，而是通过 Github Actions 来实现自动更新到自己的服务器。")]),s._v(" "),n("p",[n("a",{attrs:{href:"https://github.com/mqyqingfeng/Blog/issues/237",target:"_blank",rel:"noopener noreferrer"}},[s._v("mqyqingfeng：还不会用 GitHub Actions ？"),n("OutboundLink")],1)]),s._v(" "),n("p",[s._v("首先先将项目推送到 github 上，在 Actions 会看到 CI 错误。")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://rcbb-blog.oss-cn-guangzhou.aliyuncs.com/2022/07/20220725144306-dc50b2.png?x-oss-process=style/yuantu_shuiyin",alt:"CI错误"}})]),s._v(" "),n("p",[s._v("因为"),n("code",[s._v("rcbb-blog/.github/ci.yml")]),s._v("中还有很多参数并未设置。")]),s._v(" "),n("h3",{attrs:{id:"ci-yml"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ci-yml"}},[s._v("#")]),s._v(" ci.yml")]),s._v(" "),n("p",[s._v("参数配置在 secrets 中。")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://rcbb-blog.oss-cn-guangzhou.aliyuncs.com/2022/07/20220725145715-3fa094.png?x-oss-process=style/yuantu_shuiyin",alt:"secrets参数"}})]),s._v(" "),n("h4",{attrs:{id:"参数配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参数配置"}},[s._v("#")]),s._v(" 参数配置")]),s._v(" "),n("p",[n("strong",[s._v("ACCESS_TOKEN")])]),s._v(" "),n("p",[s._v("ACCESS_TOKEN 从哪获取？")]),s._v(" "),n("p",[s._v("Github 点击自己头像 Settings -> Developer settings -> Personal access tokens"),n("br"),s._v("\ntoken设置永不过期，可勾选项全勾上。")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://rcbb-blog.oss-cn-guangzhou.aliyuncs.com/2022/07/20220725145539-31a25f.png?x-oss-process=style/yuantu_shuiyin",alt:"ACCESS_TOKEN获取"}})]),s._v(" "),n("p",[s._v("获取到 ACCESS_TOKEN 后设置到 secrets 中。")]),s._v(" "),n("p",[n("strong",[s._v("Secrets设置")])]),s._v(" "),n("p",[s._v("到哪设置secrets？")]),s._v(" "),n("p",[s._v("回到 rcbb-blog 项目中 Settings -> Secrets -> Actions")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://rcbb-blog.oss-cn-guangzhou.aliyuncs.com/2022/07/20220725150052-2ea040.png?x-oss-process=style/yuantu_shuiyin",alt:"Secrets设置"}})]),s._v(" "),n("p",[s._v("其他的参数也是这么设置：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# ssh username\nkey：BLOG_USERNAME\nvalue：root\n\n# 远程服务器IP，自己服务器的IP地址\nkey：BLOG_HOST\nvalue：165.56.89.12\n    \n远程服务器ssh端口，默认22\nkey：BLOG_PORT\nvalue：22\n\n认证服务器秘钥对的私钥\nkey：BLOG_SSH_PRIVATE_KEY\nvalue：xxx\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("p",[n("img",{attrs:{src:"https://rcbb-blog.oss-cn-guangzhou.aliyuncs.com/2022/07/20220725151059-8f84fd.png?x-oss-process=style/yuantu_shuiyin",alt:"Secrets"}})]),s._v(" "),n("p",[n("strong",[s._v("认证服务器私钥")])]),s._v(" "),n("p",[s._v("认证服务器秘钥对的私钥怎么获取？")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("(1)在自己服务器上执行\n    然后一路回车就能创建成功\n    ssh-keygen -m PEM\n    \n(2)把公钥放到服务器中\n    cat /root/.ssh/id_rsa.pub >> /root/.ssh/authorized_keys\n    \n(3)copy私钥\n    cat /root/.ssh/id_rsa\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h3",{attrs:{id:"服务器设置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#服务器设置"}},[s._v("#")]),s._v(" 服务器设置")]),s._v(" "),n("p",[s._v("创建所需目录")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("mkdir -p /apps/www/rcbb.cc\nmkdir -p /apps/www/release\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("安装 nginx")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("(1)安装\n    yum install -y nginx\n\n(2)启用 Nginx\n    systemctl start nginx\n\n(3)设置为在系统启动时自动启动\n    systemctl enable nginx\n\n(4)验证\n    在浏览器输入自己的公网IP\n    如果出现nginx页面，则代表成功\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("p",[s._v("创建测试文件")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("(1)创建目录\n    mkdir -p /apps/www/rcbb.cc\n\n(2)进入目录\n    cd /apps/www/rcbb.cc\n\n(3)创建文件\n    touch index.html\n\n(4)写入内容\n    echo '<!doctype html><html><head><meta charset=\"utf-8\"><title>Hello World!</title></head><body>Hello World!</body></html>' > index.html\n    \n(5)进入配置文件目录\n    cd /etc/nginx\n\n(6)修改配置文件内容\n    vim nginx.conf\n    \n(7)在 location / {} 中添加内容\n    location / {\n      root /apps/www/rcbb.cc/;\n      index index.html;\n    }\n    保存退出修改后，重新加载配置文件。\n    \n(8)重新加载配置文件\n    systemctl reload nginx\n    \n(9)验证\n    浏览器输入服务器 IP，看见 Hello World! 就代表成功了。  \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br")])]),n("h3",{attrs:{id:"测试"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#测试"}},[s._v("#")]),s._v(" 测试")]),s._v(" "),n("p",[s._v("在 master 分支上进行 push，就会触发 Actions。")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://rcbb-blog.oss-cn-guangzhou.aliyuncs.com/2022/07/20220725154211-d45663.png?x-oss-process=style/yuantu_shuiyin",alt:"Actions"}})]),s._v(" "),n("p",[n("img",{attrs:{src:"https://rcbb-blog.oss-cn-guangzhou.aliyuncs.com/2022/07/20220725154546-8d1d06.png?x-oss-process=style/yuantu_shuiyin",alt:"服务器上的文件"}})]),s._v(" "),n("p",[s._v("这时在浏览器中输入自己公网 IP，如果可以正确访问，则代表一切顺利~")]),s._v(" "),n("h2",{attrs:{id:"配置评论功能"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置评论功能"}},[s._v("#")]),s._v(" 配置评论功能")]),s._v(" "),n("p",[s._v("文件路径：")]),s._v(" "),n("blockquote",[n("p",[s._v("docs/.vuepress/config.ts")])]),s._v(" "),n("p",[n("img",{attrs:{src:"https://rcbb-blog.oss-cn-guangzhou.aliyuncs.com/2022/07/20220728115018-daebe0.png?x-oss-process=style/yuantu_shuiyin",alt:"config.ts配置"}})]),s._v(" "),n("p",[s._v("clientID：需要申请"),n("br"),s._v("\nclientSecret：需要申请"),n("br"),s._v("\nrepo：自己仓库的名称"),n("br"),s._v("\nowner：自己账号")]),s._v(" "),n("h3",{attrs:{id:"clientid、clientsecret申请"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#clientid、clientsecret申请"}},[s._v("#")]),s._v(" clientID、clientSecret申请")]),s._v(" "),n("p",[s._v("登录 github，右上角点击 Settings -> Developer settings -> OAuth Apps -> New OAuth App")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://rcbb-blog.oss-cn-guangzhou.aliyuncs.com/2022/07/20220728110650-084683.png?x-oss-process=style/yuantu_shuiyin",alt:"New OAuth App"}})]),s._v(" "),n("p",[s._v("将 https://rcbb.cc 更换为自己的域名即可。")]),s._v(" "),n("p",[s._v("然后就可以得到 clientId、clientSecret 了。")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://rcbb-blog.oss-cn-guangzhou.aliyuncs.com/2022/07/20220728114731-42a2f2.png?x-oss-process=style/yuantu_shuiyin",alt:"clientId、clientSecret"}})]),s._v(" "),n("p",[s._v("将网站重新部署后，测试评论~")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://rcbb-blog.oss-cn-guangzhou.aliyuncs.com/2022/07/20220728115529-ba26ae.png?x-oss-process=style/yuantu_shuiyin",alt:"测试评论"}})]),s._v(" "),n("p",[s._v("有用户评论后，会在配置的 github 项目的 issues 中。")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://rcbb-blog.oss-cn-guangzhou.aliyuncs.com/2022/07/20220728114830-c462dc.png?x-oss-process=style/yuantu_shuiyin",alt:"查看评论"}})])])}),[],!1,null,null,null);n.default=e.exports}}]);