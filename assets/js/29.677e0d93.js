(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{370:function(s,n,e){"use strict";e.r(n);var a=e(1),r=Object(a.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"实战模块化-认证授权服务-资源服务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#实战模块化-认证授权服务-资源服务"}},[s._v("#")]),s._v(" 实战模块化(认证授权服务+资源服务)")]),s._v(" "),n("p",[s._v("在微服务的架构下，对单体应用的认证授权服务和资源服务需要进行拆分和模块化处理。")]),s._v(" "),n("p",[s._v("该内容基于上一篇："),n("a",{attrs:{href:"https://rcbb.cc/pages/74390a/",target:"_blank",rel:"noopener noreferrer"}},[s._v("实战单体应用(认证授权服务+资源服务)"),n("OutboundLink")],1)]),s._v(" "),n("h2",{attrs:{id:"项目结构"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#项目结构"}},[s._v("#")]),s._v(" 项目结构")]),s._v(" "),n("p",[s._v("主要是将整个"),n("code",[s._v("Spring Security OAuth2")]),s._v("共用的配置写到"),n("code",[s._v("security-common")]),s._v("中，这样后期使用非常方便，只需要创建普通"),n("code",[s._v("Spring Web")]),s._v("项目，然后引用"),n("code",[s._v("security-common")]),s._v("模块即可。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("SpringSecurity-demo\n---auth-demo\n---resources-demo\n---security-common\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[n("a",{attrs:{href:"https://github.com/rcbb-cc/fast-start-guide",target:"_blank",rel:"noopener noreferrer"}},[s._v("SpringSecurity-demo Github地址"),n("OutboundLink")],1)]),s._v(" "),n("h2",{attrs:{id:"security-common"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#security-common"}},[s._v("#")]),s._v(" security-common")]),s._v(" "),n("p",[n("code",[s._v("ResourceServerConfig")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('@Configuration\n@EnableResourceServer\n// 开启注解鉴权\n@EnableGlobalMethodSecurity(securedEnabled = true, prePostEnabled = true)\npublic class ResourceServerConfig extends ResourceServerConfigurerAdapter {\n    @Bean\n    @Primary\n    public ResourceServerTokenServices tokenServices() {\n        // 如果资源服务和认证服务在一起可以使用 DefaultTokenServices 进行本地校验\n        // 使用远程服务请求授权服务器校验token，必须指定url，client_id，client_secret\n        RemoteTokenServices services = new RemoteTokenServices();\n        services.setCheckTokenEndpointUrl("http://127.0.0.1:3000/oauth/check_token");\n        services.setClientId("rcbb");\n        services.setClientSecret("rcbb");\n        return services;\n    }\n\n    @Override\n    public void configure(ResourceServerSecurityConfigurer resources) {\n        resources\n                // 验证令牌的服务\n                .tokenServices(tokenServices())\n                .stateless(true);\n    }\n\n    //配置资源服安全规则\n    @Override\n    public void configure(HttpSecurity http) throws Exception {\n        http\n                // 授权的请求\n                .authorizeRequests()\n                // 任何请求\n                .anyRequest()\n                // 需要身份认证\n                .authenticated()\n                .and().csrf().disable();\n    }\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br")])]),n("p",[s._v("并且使用"),n("code",[s._v("Spring")]),s._v("的自动装配，"),n("code",[s._v("src/main/resources/META-INF/spring.factories")]),s._v("配置。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("org.springframework.boot.autoconfigure.EnableAutoConfiguration=\\\n  cc.rcbb.springsecurity.demo.common.config.ResourceServerConfig\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h2",{attrs:{id:"auth-demo"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#auth-demo"}},[s._v("#")]),s._v(" auth-demo")]),s._v(" "),n("p",[s._v("认证服务的主要几个配置"),n("code",[s._v("AuthorizationServerConfig")]),s._v("、"),n("code",[s._v("TokenConfig")]),s._v("、"),n("code",[s._v("WebSecurityConfig")]),s._v("。")]),s._v(" "),n("h3",{attrs:{id:"tokenconfig"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#tokenconfig"}},[s._v("#")]),s._v(" "),n("code",[s._v("TokenConfig")])]),s._v(" "),n("p",[n("code",[s._v("TokenConfig")]),s._v("之前单体的时候没有单独配置，是因为默认就是使用内存存储令牌。单独拎出来是为了后续扩展。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("@Configuration\npublic class TokenConfig {\n\n    @Bean\n    public TokenStore tokenStore() {\n        // 使用内存存储令牌（普通令牌）\n        return new InMemoryTokenStore();\n    }\n\n}\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("h3",{attrs:{id:"authorizationserverconfig"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#authorizationserverconfig"}},[s._v("#")]),s._v(" "),n("code",[s._v("AuthorizationServerConfig")])]),s._v(" "),n("p",[s._v("主要内容是开放授权服远程检验"),n("code",[s._v("token")]),s._v("。\n因为认证授权服服务和资源服务分开了，所以"),n("code",[s._v("token")]),s._v("无法共享，可以通过远程的方式校验"),n("code",[s._v("Token")]),s._v("。")]),s._v(" "),n("p",[s._v("还有一种思路就是通过"),n("code",[s._v("Redis")]),s._v("，只要认证授权服服务和资源服务是使用的是同一个"),n("code",[s._v("Redis")]),s._v("，那么资源服务就可自己做校验，直接通过资源服务查询"),n("code",[s._v("Redis")]),s._v("。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('@Configuration\n@EnableAuthorizationServer\npublic class AuthorizationServerConfig extends AuthorizationServerConfigurerAdapter {\n\n    @Autowired\n    private TokenStore tokenStore;\n    @Autowired\n    private PasswordEncoder passwordEncoder;\n    @Autowired\n    private ClientDetailsService clientDetailsService;\n    @Autowired\n    private AuthenticationManager authenticationManager;\n\n\n    //令牌管理服务\n    @Bean\n    public AuthorizationServerTokenServices tokenService() {\n        DefaultTokenServices service = new DefaultTokenServices();\n        // 客户端详情服务\n        service.setClientDetailsService(clientDetailsService);\n        // 支持刷新令牌\n        service.setSupportRefreshToken(true);\n        // 令牌存储策略\n        service.setTokenStore(tokenStore);\n        // 令牌默认有效期2小时\n        service.setAccessTokenValiditySeconds(7200);\n        // 刷新令牌默认有效期3天\n        service.setRefreshTokenValiditySeconds(259200);\n        return service;\n    }\n\n    @Override\n    public void configure(ClientDetailsServiceConfigurer clients) throws Exception {\n\n        // 基于内存便于测试，使用in-memory存储\n        clients.inMemory()\n                // client_id\n                .withClient("rcbb")\n                // 未加密\n                //.secret("secret")\n                // 加密\n                .secret(passwordEncoder.encode("rcbb"))\n                // 资源列表\n                //.resourceIds("res1")\n                // 该client允许的授权类型authorization_code,password,refresh_token,implicit,client_credentials\n                .authorizedGrantTypes("authorization_code", "password", "client_credentials", "implicit", "refresh_token")\n                // 允许的授权范围\n                .scopes("all", "ROLE_ADMIN", "ROLE_USER")\n                // false跳转到授权页面\n                //.autoApprove(false)\n                //加上验证回调地址\n                .redirectUris("http://rcbb.cc");\n    }\n\n    /**\n     * 配置令牌的访问端点和令牌服务\n     *\n     * @param endpoints the endpoints configurer\n     * @throws Exception\n     */\n    @Override\n    public void configure(AuthorizationServerEndpointsConfigurer endpoints) throws Exception {\n        // 配置认证管理器\n        endpoints.authenticationManager(authenticationManager)\n                .tokenServices(tokenService());\n    }\n\n    /**\n     * @Description: 用来配置令牌端点(Token Endpoint)的安全约束\n     * Token令牌默认是有签名的，并且资源服务需要验证这个签名，\n     * 因此呢，你需要使用一个对称的Key值，用来参与签名计算，\n     * 这个Key值存在于授权服务以及资源服务之中。\n     * 或者你可以使用非对称加密算法来对Token进行签名，\n     * Public Key公布在/oauth/token_key这个URL连接中，\n     * 默认的访问安全规则是"denyAll()"，\n     * 即在默认的情况下它是关闭的，\n     * 你可以注入一个标准的 SpEL 表达式到 AuthorizationServerSecurityConfigurer 这个配置中来将它开启\n     * （例如使用"permitAll()"来开启可能比较合适，因为它是一个公共密钥）。\n     */\n    @Override\n    public void configure(AuthorizationServerSecurityConfigurer security) throws Exception {\n        security\n                // 开放获取token key(这个是做JWT的时候开放的！也就是资源服可以通过这个请求得到JWT加密的key，目前这里没什么用，可以不用配置)\n                .tokenKeyAccess("permitAll()")\n                // 开放远程token检查\n                .checkTokenAccess("permitAll()")\n                // 允许client使用form的方式进行authentication的授权\n                .allowFormAuthenticationForClients();\n    }\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br"),n("span",{staticClass:"line-number"},[s._v("72")]),n("br"),n("span",{staticClass:"line-number"},[s._v("73")]),n("br"),n("span",{staticClass:"line-number"},[s._v("74")]),n("br"),n("span",{staticClass:"line-number"},[s._v("75")]),n("br"),n("span",{staticClass:"line-number"},[s._v("76")]),n("br"),n("span",{staticClass:"line-number"},[s._v("77")]),n("br"),n("span",{staticClass:"line-number"},[s._v("78")]),n("br"),n("span",{staticClass:"line-number"},[s._v("79")]),n("br"),n("span",{staticClass:"line-number"},[s._v("80")]),n("br"),n("span",{staticClass:"line-number"},[s._v("81")]),n("br"),n("span",{staticClass:"line-number"},[s._v("82")]),n("br"),n("span",{staticClass:"line-number"},[s._v("83")]),n("br"),n("span",{staticClass:"line-number"},[s._v("84")]),n("br"),n("span",{staticClass:"line-number"},[s._v("85")]),n("br"),n("span",{staticClass:"line-number"},[s._v("86")]),n("br"),n("span",{staticClass:"line-number"},[s._v("87")]),n("br"),n("span",{staticClass:"line-number"},[s._v("88")]),n("br"),n("span",{staticClass:"line-number"},[s._v("89")]),n("br"),n("span",{staticClass:"line-number"},[s._v("90")]),n("br")])]),n("h2",{attrs:{id:"resources-demo"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#resources-demo"}},[s._v("#")]),s._v(" resources-demo")]),s._v(" "),n("p",[s._v("基本上资源服务就没什么内容了，核心配置直接引入"),n("code",[s._v("security-common")]),s._v("模块即可。")]),s._v(" "),n("p",[s._v("现在就只剩资源"),n("code",[s._v("UserController")]),s._v("了。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('@RestController\n@RequestMapping("/user")\npublic class UserController {\n\n    @PreAuthorize("hasAuthority(\'user_add\')")\n    @PostMapping\n    public String save() {\n        return "save() success";\n    }\n\n    @PreAuthorize("hasAuthority(\'user_remove\')")\n    @DeleteMapping\n    public String remove() {\n        return "remove() success";\n    }\n\n    @PreAuthorize("hasAuthority(\'user_update\')")\n    @PutMapping\n    public String update() {\n        return "update() success";\n    }\n\n    @Secured("ROLE_ADMIN")\n    @GetMapping\n    public String list() {\n        return "list() success";\n    }\n\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br")])]),n("h2",{attrs:{id:"测试"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#测试"}},[s._v("#")]),s._v(" 测试")]),s._v(" "),n("p",[s._v("启动"),n("code",[s._v("auth-demo")]),s._v("和"),n("code",[s._v("resources-demo")]),s._v("服务。")]),s._v(" "),n("p",[s._v("首先先通过账号密码获取"),n("code",[s._v("token")]),s._v("。")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://rcbb-blog.oss-cn-guangzhou.aliyuncs.com/2022/10/20221004182805-6c4397.png?x-oss-process=style/yuantu_shuiyin",alt:"通过账号密码获取"}})]),s._v(" "),n("p",[s._v("然后再携带"),n("code",[s._v("token")]),s._v("访问资源服务，需要注意是资源服务是另外一个服务。")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://rcbb-blog.oss-cn-guangzhou.aliyuncs.com/2022/10/20221004182857-4caf39.png?x-oss-process=style/yuantu_shuiyin",alt:"访问资源服务"}})]),s._v(" "),n("p",[s._v("测试成功。")])])}),[],!1,null,null,null);n.default=r.exports}}]);