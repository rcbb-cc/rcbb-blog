(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{369:function(t,e,o){"use strict";o.r(e);var r=o(1),_=Object(r.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"spring-security-oauth2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#spring-security-oauth2"}},[t._v("#")]),t._v(" Spring Security Oauth2")]),t._v(" "),e("h2",{attrs:{id:"oauth2-0协议"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#oauth2-0协议"}},[t._v("#")]),t._v(" Oauth2.0协议")]),t._v(" "),e("p",[e("code",[t._v("Oauth2.0")]),t._v("是目前最流行的授权机制，用来授权第三方应用，获取用户数据。")]),t._v(" "),e("blockquote",[e("p",[e("a",{attrs:{href:"https://www.ruanyifeng.com/blog/2019/04/oauth_design.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("阮一峰-OAuth 2.0 的一个简单解释"),e("OutboundLink")],1)])]),t._v(" "),e("p",[t._v("解决了哪些问题？")]),t._v(" "),e("ol",[e("li",[t._v("颁发的令牌明确限制只能访问部分资源，并不是所有。")]),t._v(" "),e("li",[t._v("令牌会存在有效期，有效期过后需要用户重新授权。")]),t._v(" "),e("li",[t._v("不会暴露用户的密码，而是使用的令牌。")])]),t._v(" "),e("p",[e("code",[t._v("Oauth2.0")]),t._v("协议中的角色：")]),t._v(" "),e("ul",[e("li",[t._v("服务提供商"),e("code",[t._v("Provider")]),t._v("：谁提供令牌谁就是服务提供商。")]),t._v(" "),e("li",[t._v("资源所有者"),e("code",[t._v("Resource Owner")]),t._v("：资源是指用户相关数据，所有者是用户。")]),t._v(" "),e("li",[t._v("第三方应用"),e("code",[t._v("Client")]),t._v("：想获取资源的应用。")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://rcbb-blog.oss-cn-guangzhou.aliyuncs.com/2022/09/20220930194300-592548.png?x-oss-process=style/yuantu_shuiyin",alt:"Oauth2.0协议运行流程"}})]),t._v(" "),e("p",[e("code",[t._v("Oauth2.0")]),t._v("四种授权方式")]),t._v(" "),e("ol",[e("li",[t._v("授权码模式（authorization code）")]),t._v(" "),e("li",[t._v("简化模式（implicit）")]),t._v(" "),e("li",[t._v("密码模式（resource owner password credentials）")]),t._v(" "),e("li",[t._v("客户端模式（client credentials）")])]),t._v(" "),e("blockquote",[e("p",[e("a",{attrs:{href:"https://www.ruanyifeng.com/blog/2019/04/oauth-grant-types.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("阮一峰-OAuth 2.0 的四种方式"),e("OutboundLink")],1)])]),t._v(" "),e("h2",{attrs:{id:"spring-security-oauth"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#spring-security-oauth"}},[t._v("#")]),t._v(" Spring Security Oauth")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://rcbb-blog.oss-cn-guangzhou.aliyuncs.com/2022/09/20220930221133-fa782e.png?x-oss-process=style/yuantu_shuiyin",alt:"Spring Security Oauth"}})]),t._v(" "),e("p",[t._v("实现"),e("code",[t._v("Oauth")]),t._v("协议中服务提供商这个角色它的所有功能，实际上就是两个服务器。")]),t._v(" "),e("ul",[e("li",[t._v("认证服务器")])]),t._v(" "),e("blockquote",[e("p",[t._v("认证服务器中需要实现四种授权模式（授权码模式、简化模式、客户端模式、密码模式），"),e("code",[t._v("Spring Security OAuth")]),t._v("里面四种模式已经实现了，用户信息生成Token和存储也提供了一套默认的实现。")])]),t._v(" "),e("ul",[e("li",[t._v("资源服务器")])]),t._v(" "),e("blockquote",[e("p",[t._v("所谓的资源服务器就是要保护我们的资源，采用"),e("code",[t._v("Spring Security")]),t._v("过滤器链加上个"),e("code",[t._v("OAuth2AuthenticationProcessingFilter")]),t._v("。")])]),t._v(" "),e("p",[e("strong",[e("code",[t._v("OAuth2AuthenticationProcessingFilter")])])]),t._v(" "),e("p",[t._v("作用：从请求中获取我们认证服务器发出去的"),e("code",[t._v("Token")]),t._v("，获取到"),e("code",[t._v("Token")]),t._v("后会根据我们在认证服务器中存储"),e("code",[t._v("Token")]),t._v("的存储策略去对应的存储中找到"),e("code",[t._v("Token")]),t._v("信息，然后根据用户信息是否存在，是否有权限来判断是否能访问资源。")])])}),[],!1,null,null,null);e.default=_.exports}}]);